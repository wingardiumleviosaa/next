[{"objectID":"1717225561","permalink":"/post/data-paimon-deploy-guide/","title":"Apache Paimon Deployment Guide with Simple Demo","content":"æ¦‚è¿°\rç´€éŒ„å¦‚ä½•éƒ¨ç½² Apache Paimonã€‚\nPrerequisite\rè¨ˆç®—å¼•æ“è¨­ç½®ï¼šç¢ºä¿ Flink æ­£åœ¨é‹è¡Œã€‚\næ–‡ä»¶ç³»çµ±æº–å‚™ï¼šæ ¹æ“šå­˜å„²åå¥½é¸æ“‡ Hadoop åˆ†ä½ˆå¼æ–‡ä»¶ç³»çµ±(HDFS)æˆ– S3(Ceph/Minio)ã€‚\nJAR æ–‡ä»¶è¨­ç½®\rè¦å°‡ Apache Paimon èˆ‡é¸æ“‡çš„æ–‡ä»¶ç³»çµ±é›†æˆï¼Œå¿…é ˆå°‡ç‰¹å®šçš„ JAR æ–‡ä»¶æ”¾ç½®åœ¨ Flink çš„åº«ç›®éŒ„ä¸­ï¼š\næ ¸å¿ƒåŠŸèƒ½ï¼šæ·»åŠ paimon-flink-1.17-0.7.0-incubating.jarã€‚ Hadoop éƒ¨ç½²ï¼šåŒ…æ‹¬hadoop-mapreduce-client-core-*.jarå’Œflink-shaded-hadoop-2-uber-2.8.3-10.0.jarã€‚ S3 éƒ¨ç½²ï¼šç¢ºä¿æ·»åŠ paimon-s3-0.7.0-incubating.jarã€‚ Flink é…ç½®\ré…ç½® Flink ä»¥é©æ‡‰æ‚¨çš„éƒ¨ç½²å¾Œç«¯å’Œæª¢æŸ¥é»è¦æ±‚ï¼š\nç¯„ä¾‹é…ç½®ï¼š\n1state.backend.type: rocksdb 2state.checkpoints.dir: hdfs://hadoop1:8020/flink-checkpoints 3state.checkpoints.incremental: true Catalog è¨­ç½®\rApache Paimon æ”¯æŒå„ç¨®ç›®éŒ„ï¼Œè¨­ç½®å› æ–‡ä»¶ç³»çµ±è€Œç•°ï¼š\næ–‡ä»¶ç³»çµ± URI æ–¹æ¡ˆ å¯æ’æ‹” èªªæ˜ æœ¬åœ°æ–‡ä»¶ç³»çµ± file:// å¦ å…§å»ºæ”¯æŒ HDFS hdfs:// å¦ å…§å»ºæ”¯æŒï¼Œç¢ºä¿é›†ç¾¤åœ¨ Hadoop ç’°å¢ƒä¸­ é˜¿é‡Œé›² OSS oss:// æ˜¯ - S3 s3:// æ˜¯ - Hadoop ç›®éŒ„\råˆ©ç”¨å° HDFS çš„å…§å»ºæ”¯æŒï¼Œå‰µå»ºé©ç”¨æ–¼ Hadoop ç’°å¢ƒçš„ç›®éŒ„ã€‚\n1CREATE CATALOG nexdata WITH ( 2 \u0026#39;type\u0026#39; = \u0026#39;paimon\u0026#39;, 3 \u0026#39;warehouse\u0026#39; = \u0026#39;hdfs://hadoop1:8020/paimon/nexdata\u0026#39; 4); 5USE CATALOG nexdata; S3 ç›®éŒ„ï¼ˆCeph/Minioï¼‰\ré…ç½® S3 å…¼å®¹å­˜å„²çš„ç›®éŒ„ï¼Œæ ¹æ“šéœ€è¦èª¿æ•´ Ceph æˆ– Minio çš„è¨­ç½®ã€‚ Ceph ç¯„ä¾‹ï¼š\n1CREATE CATALOG `paimon_ceph` WITH ( 2 \u0026#39;type\u0026#39; = \u0026#39;paimon\u0026#39;, 3 \u0026#39;warehouse\u0026#39; = \u0026#39;s3://ula-test/paimon\u0026#39;, 4 \u0026#39;s3.endpoint\u0026#39; = \u0026#39;http://ceph-rgw.sdsp-stg.com:8080\u0026#39;, 5 \u0026#39;s3.access-key\u0026#39; = \u0026#39;0V2QOGVWCZAAK9DXA07P\u0026#39;, 6 \u0026#39;s3.secret-key\u0026#39; = \u0026#39;60Kwr0A9jjH4A2ZOHgY74ZBUbpxgG2ALsoQ6uC4W\u0026#39;, 7 \u0026#39;fs.s3a.signing-algorithm\u0026#39; = \u0026#39;S3SignerType\u0026#39;, 8 \u0026#39;s3.path.style.access\u0026#39; = \u0026#39;true\u0026#39; 9); Minio ç¯„ä¾‹ï¼š\n1CREATE CATALOG `paimon_minio` WITH ( 2 \u0026#39;type\u0026#39; = \u0026#39;paimon\u0026#39;, 3 \u0026#39;warehouse\u0026#39; = \u0026#39;s3://ula/paimon\u0026#39;, 4 \u0026#39;s3.endpoint\u0026#39; = \u0026#39;http://192.168.31.3:9000\u0026#39;, 5 \u0026#39;s3.access-key\u0026#39; = \u0026#39;RyUWQB41XSEw7usT\u0026#39;, 6 \u0026#39;s3.secret-key\u0026#39; = \u0026#39;if58BDcWfJaaP13pxkOcAcGkcQMN0fvm\u0026#39;, 7 \u0026#39;s3.path.style.access\u0026#39; = \u0026#39;true\u0026#39; 8); å®šç¾©æ•¸æ“šçµæ§‹ï¼ˆDDLï¼‰\rä½¿ç”¨æ•¸æ“šå®šç¾©èªè¨€åœ¨ Apache Paimon ä¸­å®šç¾©æ‚¨çš„æ•¸æ“šçµæ§‹ï¼š\nMES ç”Ÿç”¢ç·šæ•¸æ“šè¡¨ï¼š\næ ¹æ“šæ‚¨çš„æ•¸æ“šå»ºæ¨¡éœ€æ±‚è£½ä½œè¡¨æ ¼ï¼Œå®¹ç´å¦‚ MES ç”Ÿç”¢ç·šæ•¸æ“šè¡¨ç­‰çµæ§‹ã€‚\n1CREATE TABLE IF NOT EXISTS `ods_mes_line` ( 2 `LINE_CODE` INT, 3 `LINE_NAME` STRING, 4 `LINE_TYPE` STRING, 5 `LINE_DESC` STRING, 6 `LINE_ABBREV` STRING, 7 `TIME_SECTION_CODE` INT, 8 `USABLE_FLAG` INT, 9 `UPDATE_EMP` STRING, 10 `UPDATE_TIME` BIGINT, 11 PRIMARY KEY (`LINE_CODE`) NOT ENFORCED 12); ä¾†è‡ª Kafka CDC çš„ MES ç”Ÿç”¢ç·šæ•¸æ“šè¡¨\nå‰µå»ºä¾†è‡ª Kafka çš„ MES ç”Ÿç”¢ç·šæ•¸æ“šè¡¨ï¼š\n1CREATE TEMPORARY TABLE `mes_line` ( 2 `LINE_CODE` INT, 3 `LINE_NAME` STRING, 4 `LINE_TYPE` STRING, 5 `LINE_DESC` STRING, 6 `LINE_ABBREV` STRING, 7 `TIME_SECTION_CODE` INT, 8 `USABLE_FLAG` INT, 9 `UPDATE_EMP` STRING, 10 `UPDATE_TIME` BIGINT, 11 PRIMARY KEY (`LINE_CODE`) NOT ENFORCED 12) WITH ( 13\u0026#39;connector\u0026#39; = \u0026#39;kafka\u0026#39;, 14\u0026#39;topic\u0026#39; = \u0026#39;MES-INFO.EMESC.TC_WS_LINE_DESC\u0026#39;, 15\u0026#39;properties.bootstrap.servers\u0026#39; = \u0026#39;kafka.sdsp-stg.com:9094\u0026#39;, 16\u0026#39;properties.group.id\u0026#39; = \u0026#39;streamparkTest\u0026#39;, 17\u0026#39;scan.startup.mode\u0026#39; = \u0026#39;earliest-offset\u0026#39;, 18\u0026#39;value.debezium-json.schema-include\u0026#39; = \u0026#39;true\u0026#39;, 19\u0026#39;value.format\u0026#39; = \u0026#39;debezium-json\u0026#39; 20); æŸ¥è©¢æ•¸æ“š\rNote\nğŸ’¡ åœ¨ Apache Paimon ä¸­åŸ·è¡ŒæŸ¥è©¢ã€‚æ ¹æ“šç›®éŒ„è¨­ç½®å’Œæ•¸æ“šçš„æ€§è³ªï¼ˆæµå¼æˆ–æ‰¹é‡ï¼‰ï¼Œæ–¹æ³•ç•¥æœ‰ä¸åŒã€‚\né€šéè¨­ç½®é©ç•¶çš„é‹è¡Œæ¨¡å¼ä¾†åŸ·è¡Œæµå¼æŸ¥è©¢ï¼š\n1SET \u0026#39;execution.runtime-mode\u0026#39;=\u0026#39;streaming\u0026#39;; 2SELECT * FROM ods_mes_line; ","date":"2024-06-01T15:06:01+08:00","updated":"2024-06-01T15:06:01+08:00"},{"objectID":"1717224440","permalink":"/post/data-kafka-pod-restart-failed-after-k8s-restart/","title":"Kafka Pod Restart Failed after Kubernetes Cluster Restart","content":"TL; DR\råœ¨ä¸€æ¬¡å› æ–·é›»è€Œ Kubernetes é›†ç¾¤é‡å•Ÿå¾Œï¼ŒKafka Cluster ç„¡æ³•è‡ªå‹•é‡å•Ÿï¼Œæœƒæœ‰ä»¥ä¸‹éŒ¯èª¤è¨Šæ¯ï¼š\nReason\ræœƒå› ç‚ºå•Ÿå‹•æ™‚é–“å¤ªé•·è¶…é statefulset è¨­å®šçš„ initialDelaySeconds çš„æ™‚é–“ï¼Œå°è‡´ k8s ç™¼é€ SYSTERM è¨Šè™Ÿçµ¦ Pod è€Œ CrashLoopBackOffã€‚ å•Ÿå‹• kafka broker çš„æ™‚å€™ï¼Œæœƒé‡æ–°åŠ è¼‰æ¯å€‹ topic çš„æ•¸æ“šï¼Œæ­£å¸¸æƒ…æ³ä¸‹æœƒæç¤ºæ¯å€‹ topic æ¢å¾©å®Œæˆï¼Œå¦‚ä¸‹ç¯„ä¾‹ã€‚\n1[2023-12-27 01:24:45,995] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Recovering unflushed segment 52. 0/1 recovered for 99-alertmanager-6. (kafka.log.LogLoader) 2[2023-12-27 01:24:45,995] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Loading producer state till offset 52 with message format version 2 (kafka.log.UnifiedLog$) 3[2023-12-27 01:24:45,995] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Reloading from producer snapshot and rebuilding producer state from offset 52 (kafka.log.UnifiedLog$) 4[2023-12-27 01:24:46,104] INFO [ProducerStateManager partition=99-alertmanager-6] Wrote producer snapshot at offset 52 with 0 producer ids in 109 ms. (kafka.log.ProducerStateManager) 5[2023-12-27 01:24:46,104] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Producer state recovery took 0ms for snapshot load and 109ms for segment recovery from offset 52 (kafka.log.UnifiedLog$) 6[2023-12-27 01:24:46,136] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Loading producer state till offset 52 with message format version 2 (kafka.log.UnifiedLog$) 7[2023-12-27 01:24:46,136] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Reloading from producer snapshot and rebuilding producer state from offset 52 (kafka.log.UnifiedLog$) 8[2023-12-27 01:24:46,136] INFO Deleted producer state snapshot /bitnami/kafka/data/99-alertmanager-6/00000000000000000052.snapshot (kafka.log.SnapshotFile) 9[2023-12-27 01:24:46,136] INFO [LogLoader partition=99-alertmanager-6, dir=/bitnami/kafka/data] Producer state recovery took 0ms for snapshot load and 0ms for segment recovery from offset 52 (kafka.log.UnifiedLog$) 10[2023-12-27 01:24:46,156] INFO Completed load of Log(dir=/bitnami/kafka/data/99-alertmanager-6, topicId=GhYHO3u3QCWBkh_YmtCs8Q, topic=99-alertmanager, partition=6, highWatermark=52, lastStableOffset=52, logStartOffset=52, logEndOffset=52) with 1 segments in 186ms (45/84 completed in /bitnami/kafka/data) (kafka.log.LogManager) Solution\rä¿®æ”¹ statefulset çš„ timeout æ™‚é–“å°‡ initialDelaySeconds å¾åŸæœ¬çš„åç§’æ”¹æˆåŠå°æ™‚ï¼\n","date":"2024-06-01T14:47:20+08:00","updated":"2024-06-01T14:47:20+08:00"},{"objectID":"1717219902","permalink":"/post/kafka-and-debezium-connect-monitoring/","title":"Kafka and Debezium Connect Monitoring","content":"TL; DR\rç”¨äº† Kafka é€™éº¼ä¹…ï¼Œç¬¬ä¸€æ¬¡å•Ÿç”¨ JMX monitor çš„åŠŸèƒ½ï¼Œé †ä¾¿ä¹ŸæŠŠ Connect çš„ç›£æ§ä¹Ÿåšèµ·ä¾†ï¼Œé‚„ç”¨äº†å…©ç¨®ä¸åŒçš„éƒ¨ç½²æ–¹å¼ï¼Œä»¥æ­¤ç¯‡è¨˜éŒ„éç¨‹ã€‚\nJMX çš„ç›£æ§æœ‰å…©ç¨®éƒ¨ç½²æ–¹å¼\ræ–¹æ³•ä¸€ï¼šå°‡ Java Agent åŒ…åœ¨ Kafka Container ä¸­\ré€™ç¨®æ–¹æ³•æ˜¯å°‡ JMX Exporter çš„ Java Agent ä½œç‚º Kafka çš„ä¾è³´é …ç›®ï¼Œèˆ‡ Kafka ä¸€èµ·åœ¨åŒä¸€å€‹å®¹å™¨ä¸­é‹è¡Œã€‚é€™æ¨£å¯ä»¥ç°¡åŒ–é…ç½®å’Œéƒ¨ç½²ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å•é¡Œã€‚ä¾‹å¦‚ï¼š\nè¤‡é›œçš„é…ç½®ï¼šéœ€è¦åœ¨ Kafka çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  JMX Exporter çš„è¨­å®šï¼Œå¯èƒ½æœƒå¢åŠ é…ç½®çš„è¤‡é›œæ€§ã€‚ ç›£æ§çš„å•é¡Œï¼šJMX Exporter éœ€è¦è¨ªå• Kafka çš„ JMX interfaceï¼Œå¯èƒ½æœƒå°è‡´ç›£æ§çš„å»¶é²æˆ–ä¸ç©©å®šã€‚ æ–¹æ³•äºŒï¼šå¦å¤–éƒ¨ç½²ä¸€å€‹ JMX Exporter\ré€™ç¨®æ–¹æ³•æ˜¯å°‡ JMX Exporter ä½œç‚ºä¸€å€‹ç¨ç«‹çš„å®¹å™¨ï¼Œèˆ‡ Kafka åˆ†é–‹é‹è¡Œã€‚é€™æ¨£å¯ä»¥é¿å…ä¸Šè¿°å•é¡Œï¼Œä½†éœ€è¦é¡å¤–çš„é…ç½®å’Œéƒ¨ç½²ã€‚ä¾‹å¦‚ï¼š\nç°¡åŒ–é…ç½®ï¼šå¯ä»¥å°‡ JMX Exporter çš„è¨­å®šç¨ç«‹æ–¼ Kafka çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¸›å°‘è¤‡é›œæ€§ã€‚ ç›£æ§çš„ç©©å®šæ€§ï¼šJMX Exporter å¯ä»¥å°ˆé–€è² è²¬ç›£æ§ Kafka çš„ JMX interfaceï¼Œæé«˜ç›£æ§çš„ç©©å®šæ€§å’Œæº–ç¢ºæ€§ã€‚ æœ¬ç¯‡è¨˜éŒ„ä½¿ç”¨å…©ç¨®åšæ³•å€‹åˆ¥å¯¦åš Kafka è·Ÿ Kafka Connect (Debezium) çš„ç›£æ§ï¼ŒKafka ä½¿ç”¨æ–¹æ³•ä¸€ã€Kafka connect ä½¿ç”¨æ–¹æ³•äºŒã€‚\nPrerequisite\rå› ç‚ºæ–¹æ³•äºŒéœ€è¦æŠŠ jmx exporter java agent æ”¾åœ¨ java é‹è¡Œç’°å¢ƒä¸­ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°åŒ… Dockerfileï¼Œå°‡ jar æª”è·Ÿ jmx config æª”æ”¾å…¥æŒ‡å®šè·¯å¾‘ä¸­ã€‚\nDockerfile\n1ARG DEBEZIUM_VERSION 2FROM quay.io/debezium/connect:${DEBEZIUM_VERSION} 3 4ARG JMX_AGENT_VERSION 5RUN mkdir /kafka/etc \u0026amp;amp;\u0026amp;amp; cd /kafka/etc \u0026amp;amp;\u0026amp;amp;\\ 6 curl -so jmx_prometheus_javaagent.jar \\ 7 â€¦","date":"2024-06-01T13:31:42+08:00","updated":"2024-06-01T13:31:42+08:00"},{"objectID":"1717217110","permalink":"/post/k8s-strimzi-kafka-kraft-cluster/","title":"[Kubernetes] ä½¿ç”¨ Strimzi å®‰è£ Kafka Kraft é›†ç¾¤","content":"Introduction\rKafka ç”Ÿæ…‹ç³»é™¤äº† Kafka Broker å¤–ï¼Œé‚„æœ‰ Kafka Connect, Kafka Bridge, Mirror Maker â€¦ ç­‰ï¼Œé€é Operator ä¾†æ¶è¨­æœƒæ¯”éœ€è¦å¯«å¤šçš„ manifest æˆ–è£å¤šå€‹ helm chart ä¾†çš„å¥½ç”¨ã€‚æœ¬ç¯‡é¸æ“‡ GitHub ä¸Š Kafka Operator project æ˜Ÿæ˜Ÿæ•¸æœ€å¤šçš„ Strimziï¼Œä¸‹è¡¨ç‚º Stimzi æä¾›å¯ä»¥éƒ¨å±¬çš„è³‡æºåˆ—è¡¨ã€‚\nStrimzi Operator Deployment Best Practice\rå°‡ Strimzi Operator å®‰è£åœ¨å…¶ç®¡ç†çš„ Kafka Cluster åŠå…¶ä»– Kafka component ä¸åŒçš„ namespace ä¸­ï¼Œä»¥ç¢ºä¿è³‡æºå’Œé…ç½®çš„æ˜ç¢ºåˆ†é›¢ã€‚ ä¸€åº§ Kubernetes åªå®‰è£å–®ä¸€ Strimzi Operator ä¾†ç®¡ç†æ‰€æœ‰ Kafka å¯¦ä¾‹ã€‚ æ›´æ–° Strimzi Operator å’Œæ”¯æ´çš„ Kafka ç‰ˆæœ¬ï¼Œä»¥åæ˜ æœ€æ–°çš„åŠŸèƒ½å’Œå¢å¼·åŠŸèƒ½ã€‚ å®‰è£ Operator\r1kubectl create ns kafka 2kubectl create -f \u0026#39;https://strimzi.io/install/latest?namespace=kafka\u0026#39; -n kafka éƒ¨ç½² kafka cluster\r1wget https://github.com/strimzi/strimzi-kafka-operator/releases/download/0.41.0/strimzi-0.41.0.tar.gz 2tar zxvf strimzi-0.41.0.tar.gz 3cd strimzi-0.41.0 4cp examples/kafka/kraft/kafka.yaml . 5vi kafka.yaml ä¿®æ”¹éƒ¨ç½²æ–‡ä»¶ï¼ŒKRaft æ¨¡å¼éƒ¨ç½² Kafka å¢é›†éœ€è¦ä½¿ç”¨ KafkaNodePool è³‡æºï¼Œæ‰€ä»¥ä¸Šé¢å…©å€‹ node pool çš„ yaml æ˜¯å¿…é ˆéƒ¨ç½²çš„è³‡æºã€‚\n1apiVersion: kafka.strimzi.io/v1beta2 2kind: KafkaNodePool 3metadata: 4 name: controller 5 labels: 6 strimzi.io/cluster: my-cluster 7spec: 8 replicas: 3 9 roles: 10 - controller 11 storage: 12 type: jbod 13 volumes: 14 - id: 0 15 type: persistent-claim 16 size: 100Gi 17 kraftMetadata: shared 18 deleteClaim: false 19 class: ceph-csi-rbd-hdd # æ›¿æ›æˆç¾æœ‰çš„ storage class 20--- 21 22apiVersion: kafka.strimzi.io/v1beta2 23kind: KafkaNodePool 24metadata: 25 name: broker 26 labels: 27 strimzi.io/cluster: my-cluster 28spec: 29 replicas: 3 30 roles: 31 - broker 32 storage: 33 type: jbod 34 volumes: 35 - id: 0 36 type: persistent-claim 37 size: 100Gi 38 kraftMetadata: shared 39 deleteClaim: false 40 class: ceph-csi-rbd-hdd # æ›¿æ›æˆç¾æœ‰çš„ storage class 41--- 42 43apiVersion: kafka.strimzi.io/v1beta2 44kind: Kafka 45metadata: 46 name: my-cluster 47 annotations: 48 strimzi.io/node-pools: enabled 49 strimzi.io/kraft: enabled 50spec: 51 kafka: 52 version: 3.7.0 53 metadataVersion: 3.7-IV4 54 listeners: 55 - name: plain 56 port: 9092 57 type: internal 58 tls: false 59 - name: external # æ–°å¢å°å¤– nodeport æœå‹™ 60 port: 9094 61 type: nodeport 62 tls: false 63 configuration: 64 bootstrap: 65 nodePort: 32100 # æŒ‡å®š bootstrap å ç”¨çš„ nodeportï¼Œbroker å¦‚ä¸ä¸€ä¸€æŒ‡å®šçš„è©±ï¼ŒOperator æœƒè‡ªå‹•æŒ‡æ´¾ 66 config: 67 offsets.topic.replication.factor: 3 68 transaction.state.log.replication.factor: 3 69 transaction.state.log.min.isr: 2 70 default.replication.factor: 3 71 min.insync.replicas: 2 72 entityOperator: 73 topicOperator: {} 74 userOperator: {} é–‹å§‹éƒ¨ç½²\n1kubectl -n kafka apply -f kafka.yaml æŸ¥çœ‹ kafka ä»¥åŠ kafka node pool customized resource\nç‚º Kafka è¨­å®š Load Balance\rNginx Load Balance çš„è² è¼‰è½‰ç™¼è¦å‰‡åƒ…éœ€æŒ‡å®š Bootstrap æ‰€å ç”¨çš„æ‰€æœ‰ Worker Node çš„ Node Port å³å¯ã€‚\n1upstream tcp9094 { 2 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 3 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 4 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 5 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 6 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 7 server 172.20.37.42:32100 max_fails=3 fail_timeout=30s; 8} 9 10server { 11 listen 9094; 12 proxy_pass tcp9094; 13 14 proxy_connect_timeout 300s; 15 proxy_timeout 300s; 16} ","date":"2024-06-01T12:45:10+08:00","updated":"2024-06-01T12:45:10+08:00"},{"objectID":"1717212900","permalink":"/post/k8s-bitnami-kafka-kraft-helm-chart/","title":"[Kubernetes] ä½¿ç”¨ bitnami helm chart å®‰è£ kafka kraft é›†ç¾¤","content":"TL; DR\ræœ¬ç¯‡æ–‡ç« è¨˜éŒ„ä½¿ç”¨ bitnami helm chart å®‰è£ kafka Kraft mode çš„å°å¤–é›†ç¾¤ã€‚\næº–å‚™ values.yaml æ–‡ä»¶\r1global: 2 storageClass: ceph-csi-rbd-hdd 3 4heapOpts: \u0026#34;-Xmx6g -Xms6g\u0026#34; 5 6listeners: 7 interbroker: 8 name: INTERNAL 9 containerPort: 9092 10 protocol: PLAINTEXT 11 controller: 12 name: CONTROLLER 13 containerPort: 9093 14 protocol: PLAINTEXT 15 client: 16 name: CLIENT 17 containerPort: 9095 18 protocol: PLAINTEXT 19 external: 20 containerPort: 9094 21 protocol: PLAINTEXT 22 name: EXTERNAL 23 24controller: 25 replicaCount: 3 26 persistence: 27 size: 50Gi 28 29broker: 30 replicaCount: 3 31 persistence: 32 size: 300Gi 33 34externalAccess: 35 enabled: true 36 controller: 37 forceExpose: false 38 service: 39 type: NodePort 40 ports: 41 external: 9094 42 nodePorts: 43 - 30494 44 - 30594 45 - 30694 46 useHostIPs: true 47 broker: 48 service: 49 type: NodePort 50 ports: 51 external: 9094 52 nodePorts: 53 - 30194 54 - 30294 55 - 30394 56 useHostIPs: true 57 58volumePermissions: 59 enabled: true 60 61rbac: 62 create: true 63 64kraft: 65 clusterId: M2VhY2Q3NGQ0NGYzNDg2YW éƒ¨ç½²\r1helm upgrade --install -name kafka bitnami/kafka --namespace kafka -f values.yaml 1Kafka can be accessed by consumers via port 9095 on the following DNS name from within your cluster: 2 3 kafka.kafka.svc.cluster.local 4 5Each Kafka broker can be accessed by producers via port 9095 on the following DNS name(s) from within your cluster: 6 7 kafka-controller-0.kafka-controller-headless.kafka.svc.cluster.local:9095 8 kafka-controller-1.kafka-controller-headless.kafka.svc.cluster.local:9095 9 kafka-controller-2.kafka-controller-headless.kafka.svc.cluster.local:9095 10 kafka-broker-0.kafka-broker-headless.kafka.svc.cluster.local:9095 11 kafka-broker-1.kafka-broker-headless.kafka.svc.cluster.local:9095 12 kafka-broker-2.kafka-broker-headless.kafka.svc.cluster.local:9095 ç‚º Kafka è¨­å®š Load Balance\réƒ¨ç½²å®Œç•¢å¾Œå¯ä»¥çœ‹åˆ°æ¯å€‹ broker / controller çš†ä½¿ç”¨ NodePort å°å¤–é–‹æ”¾ï¼Œå¯ä»¥ç‚º kafka è¨­å®š Load Balance ä»¥æä¾›å¤–éƒ¨å­˜å–çš„ client é€éçµ±ä¸€çš„å…¥å£é»å­˜å–ã€‚\nç›®å‰ Kubernetes å¤–éƒ¨å·²ç¶“ç‚ºé›†ç¾¤å»ºç«‹ä¸€å€‹ Nginxï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥ä½¿ç”¨é€™å° server ä¹Ÿç‚º Kafka çš„ TCP æµé‡è¨­ç½®è² è¼‰è½‰ç™¼ã€‚å…¶è¨­å®šæª”å¦‚ä¸‹ï¼Œå°‡æ‰€æœ‰æœƒè¢«é–‹åˆ° Node Port çš„ Worker Node ç¯€é»ä¸€æ¬¡è¨­ç½®ä¸Šå»ï¼š\n1upstream tcp9094 { 2 server 172.20.37.36:30194 max_fails=3 fail_timeout=30s; 3 server 172.20.37.36:30294 max_fails=3 fail_timeout=30s; 4 server 172.20.37.36:30394 max_fails=3 fail_timeout=30s; 5 server 172.20.37.36:30494 max_fails=3 fail_timeout=30s; 6 server 172.20.37.36:30594 max_fails=3 fail_timeout=30s; 7 server 172.20.37.36:30694 max_fails=3 fail_timeout=30s; 8 9 server 172.20.37.37:30194 max_fails=3 fail_timeout=30s; 10 server 172.20.37.37:30294 max_fails=3 fail_timeout=30s; 11 server 172.20.37.37:30394 max_fails=3 fail_timeout=30s; 12 server 172.20.37.37:30494 max_fails=3 fail_timeout=30s; 13 server 172.20.37.37:30594 max_fails=3 fail_timeout=30s; 14 server 172.20.37.37:30694 max_fails=3 fail_timeout=30s; 15 16 server 172.20.37.38:30194 max_fails=3 fail_timeout=30s; 17 server 172.20.37.38:30294 max_fails=3 fail_timeout=30s; 18 server 172.20.37.38:30394 max_fails=3 fail_timeout=30s; 19 server 172.20.37.38:30494 max_fails=3 fail_timeout=30s; 20 server 172.20.37.38:30594 max_fails=3 fail_timeout=30s; 21 server 172.20.37.38:30694 max_fails=3 fail_timeout=30s; 22 23 server 172.20.37.39:30194 max_fails=3 fail_timeout=30s; 24 server 172.20.37.39:30294 max_fails=3 fail_timeout=30s; 25 server 172.20.37.39:30394 max_fails=3 fail_timeout=30s; 26 server 172.20.37.39:30494 max_fails=3 fail_timeout=30s; 27 server 172.20.37.39:30594 max_fails=3 fail_timeout=30s; 28 server 172.20.37.39:30694 max_fails=3 fail_timeout=30s; 29 30 server 172.20.37.40:30194 max_fails=3 fail_timeout=30s; 31 server 172.20.37.40:30294 max_fails=3 fail_timeout=30s; 32 server 172.20.37.40:30394 max_fails=3 fail_timeout=30s; 33 server 172.20.37.40:30494 max_fails=3 fail_timeout=30s; 34 server 172.20.37.40:30594 max_fails=3 fail_timeout=30s; 35 server 172.20.37.40:30694 max_fails=3 fail_timeout=30s; 36 37 server 172.20.37.41:30194 max_fails=3 fail_timeout=30s; 38 server 172.20.37.41:30294 max_fails=3 fail_timeout=30s; 39 server 172.20.37.41:30394 max_fails=3 fail_timeout=30s; 40 server 172.20.37.41:30494 max_fails=3 fail_timeout=30s; 41 server 172.20.37.41:30594 max_fails=3 fail_timeout=30s; 42 server 172.20.37.41:30694 max_fails=3 fail_timeout=30s; 43 44 server 172.20.37.42:30194 max_fails=3 fail_timeout=30s; 45 server 172.20.37.42:30294 max_fails=3 fail_timeout=30s; 46 server 172.20.37.42:30394 max_fails=3 fail_timeout=30s; 47 server 172.20.37.42:30494 max_fails=3 fail_timeout=30s; 48 server 172.20.37.42:30594 max_fails=3 fail_timeout=30s; 49 server 172.20.37.42:30694 max_fails=3 fail_timeout=30s; 50} 51 52server { 53 listen 9094; 54 proxy_pass tcp9094; 55 56 proxy_connect_timeout 300s; 57 proxy_timeout 300s; 58} éƒ¨ç½² Kafka UI\r1yamlApplicationConfig: 2 kafka: 3 clusters: 4 - name: platform 5 bootstrapServers: kafka-broker-headless:9092 6 auth: 7 type: disabled 8 management: 9 health: 10 ldap: 11 enabled: false 1helm install -name kafka-ui kafka-ui/kafka-ui -f values.yaml --namespace kafka ","date":"2024-06-01T11:35:00+08:00","updated":"2024-06-01T11:35:00+08:00"},{"objectID":"1716867001","permalink":"/post/ceph-renew-cephadm-ssh-key-pair/","title":"[Ceph] æ›´æ–° Cephadm SSH Key Pair","content":"TL; DR\rCeph cluster çš„å»ºç½®éç¨‹æ˜¯ä½¿ç”¨ root å¸³è™Ÿåœ¨ cephadm ç¯€é»æ“ä½œçš„ï¼Œcephadm ç¯€é»æœƒé€šé ssh è·Ÿå…¶å®ƒç¯€é»æºé€šï¼Œæœ¬æ–‡ç´€éŒ„å¦‚ä½•æ›´æ–° ssh key pairã€‚\nå»ºç«‹æ–°çš„é‡‘é‘°å°\r1sudo su 2cd ~/.ssh/ 3ssh-keygen -t rsa -b 4096 -f ~/.ssh/cephadm-new-key æ›´æ–° authorized_key\ræ›´æ–°åŒ…å« cephadm çš„æ‰€æœ‰ ceph ç¯€é»çš„ root çš„ authorized_key æª”æ¡ˆ\n1cat ~/.ssh/cephadm-new-key.pub 2# è¤‡è£½å…¬é‘°å…§å®¹ 3vi ~/.ssh/authorized_keys 4# åˆªé™¤èˆŠçš„å…¬é‘°ï¼Œä¸¦è²¼ä¸Šå…¬é‘°å…§å®¹ Info\nâš ï¸ è«‹æ³¨æ„ï¼Œé€£ cephadm è‡ªå·±çš„ authorized_key ä¹Ÿé ˆæ›´æ–°ï¼Œå¦å‰‡åœ¨ä¸‹ä¸€æ­¥é©Ÿè¨­å®šæ–°çš„é‡‘é‘°å°çš„æ™‚å€™æœƒå‡ºç¾ Error EINVAL: ssh connection [root@ceph-1.sdsp-stg.com](mailto:root@ceph-1.sdsp-stg.com) failed çš„éŒ¯èª¤ã€‚\næ›´æ–° cephadm key pair\r1# åˆªé™¤èˆŠçš„ key 2ceph cephadm clear-key 3# è¨­å®šæ–°çš„å…¬ç§é‘° 4ceph cephadm set-priv-key -i /root/.ssh/cephadm-new-key 5ceph cephadm set-pub-key -i /root/.ssh/cephadm-new-key.pub ","date":"2024-05-28T11:30:01+08:00","updated":"2024-05-28T11:30:01+08:00"},{"objectID":"1716605824","permalink":"/post/k8s-install-ha-postgresql/","title":"[Kubernetes] å®‰è£é«˜å¯ç”¨ PostgreSQL","content":"å»ºç«‹ PostgreSQL HA å¢é›†\rç›´æ¥é€é bitnami çš„ postgresql-ha helm chart å®‰è£\n1helm repo add bitnami https://charts.bitnami.com/bitnami å¯ä»¥é€éæŒ‡å®š values.yaml å®‰è£\n1helm install pgsql -f values.yaml bitnami/postgresql-ha -n platform æˆ–æ˜¯ç›´æ¥åœ¨å®‰è£æ™‚æŒ‡å®šè¦æ›¿æ›çš„åƒæ•¸ï¼Œå› ç‚ºè¦ä¿®æ”¹çš„åƒæ•¸åªæœ‰ storage classï¼Œæ‰€ä»¥ç›´æ¥ç”¨æ­¤å‘½ä»¤å®‰è£\n1helm install pgsql bitnami/postgresql-ha -n platform --set global.storageClass=rook-ceph-block å®‰è£å®Œæˆå¾Œæœƒè·³æç¤ºï¼Œå¯ä»¥å–å¾— DB çš„ç™»å…¥å¯†ç¢¼ï¼Œä»¥åŠèªªæ˜å¦‚ä½•é€£ç·šã€‚\n1To get the password for \u0026#34;postgres\u0026#34; run: 2 export POSTGRES_PASSWORD=$(kubectl get secret --namespace platform pgsql-postgresql-ha-postgresql -o jsonpath=\u0026#34;{.data.password}\u0026#34; | base64 -d) 3 4To get the password for \u0026#34;repmgr\u0026#34; run: 5 export REPMGR_PASSWORD=$(kubectl get secret --namespace platform pgsql-postgresql-ha-postgresql -o jsonpath=\u0026#34;{.data.repmgr-password}\u0026#34; | base64 -d) 6 7To connect to your database run the following command: 8 kubectl run pgsql-postgresql-ha-client --rm --tty -i --restart=\u0026#39;Never\u0026#39; --namespace platform --image docker.io/bitnami/postgresql-repmgr:16.0.0-debian-11-r15 --env=\u0026#34;PGPASSWORD=$POSTGRES_PASSWORD\u0026#34; \\ 9 --command -- psql -h pgsql-postgresql-ha-pgpool -p 5432 -U postgres -d postgres 10 11To connect to your database from outside the cluster execute the following commands: 12 kubectl port-forward --namespace platform svc/pgsql-postgresql-ha-pgpool 5432:5432 \u0026amp; 13 psql -h 127.0.0.1 -p 5432 -U postgres -d postgres update values.yaml\rå¦‚æœå®‰è£å¾Œæœ‰éœ€è¦ä¿®æ”¹è¨­å®šï¼Œå¯ä»¥å†æ”¹å®Œ values.yaml å¾Œç”¨ upgrade æŒ‡ä»¤é€²è¡Œæ›´æ–°ã€‚\n1helm upgrade -f values.yaml pgsql bitnami/postgresql-ha -n platform å»ºç«‹ PGADMIN4 UI\rpostgresql-ha helm chart ä¸åŒ…å« PGADIMN UIï¼Œå¦å¤–ä½¿ç”¨ yaml éƒ¨ç½²\n1apiVersion: apps/v1 2kind: Deployment 3metadata: 4 name: pgadmin 5 namespace: platform 6spec: 7 replicas: 1 8 selector: 9 matchLabels: 10 app: pgadmin 11 template: 12 metadata: 13 labels: 14 app: pgadmin 15 spec: 16 containers: 17 - env: 18 - name: PGADMIN_DEFAULT_EMAIL 19 value: asus.sdsp@gmail.com 20 - name: PGADMIN_DEFAULT_PASSWORD 21 value: \u0026#34;!QAZxsw2\u0026#34; 22 - name: PGADMIN_LISTEN_PORT 23 value: \u0026#34;8001\u0026#34; 24 - name: PGADMIN_CONFIG_WTF_CSRF_CHECK_DEFAULT 25 value: \u0026#34;False\u0026#34; 26 - name: PGADMIN_CONFIG_WTF_CSRF_ENABLED 27 value: \u0026#34;False\u0026#34; 28 - name: PGADMIN_CONFIG_ENHANCED_COOKIE_PROTECTION 29 value: \u0026#34;False\u0026#34; 30 image: dpage/pgadmin4:7.8 31 imagePullPolicy: IfNotPresent 32 name: pgadmin 33 ports: 34 - name: tcp8001 35 containerPort: 8001 36--- 37kind: Service 38apiVersion: v1 39metadata: 40 namespace: platform 41 name: pgadmin 42spec: 43 type: ClusterIP 44 ports: 45 - name: http 46 protocol: TCP 47 port: 8001 48 targetPort: tcp8001 49 selector: 50 app: pgadmin 51--- 52apiVersion: networking.k8s.io/v1 53kind: Ingress 54metadata: 55 name: pgadmin 56 namespace: platform 57 annotations: 58 kubernetes.io/ingress.class: nginx 59 #cert-manager.io/cluster-issuer: letsencrypt-prod 60 nginx.ingress.kubernetes.io/proxy-read-timeout: \u0026#34;3600\u0026#34; 61 nginx.ingress.kubernetes.io/proxy-send-timeout: \u0026#34;3600\u0026#34; 62spec: 63 tls: 64 - hosts: 65 - pgadmin.sdsp-stg.com 66 secretName: domain-cert-sdsp-stg.com-prod 67 rules: 68 - host: pgadmin.sdsp-stg.com 69 http: 70 paths: 71 - path: / 72 pathType: Prefix 73 backend: 74 service: 75 name: pgadmin 76 port: 77 number: 8001 Error: The CSRF tokens do not match\rå¦‚æœ PGADMIN å•Ÿç”¨æ™‚é‡åˆ°ä»¥ä¸‹éŒ¯èª¤\n12023-11-15 03:03:39,842: ERROR pgadmin: 400 Bad Request: The CSRF tokens do not match. 2Traceback (most recent call last): 3 File \u0026#34;/venv/lib/python3.11/site-packages/flask_wtf/csrf.py\u0026#34;, line 261, in protect 4 validate_csrf(self._get_csrf_token()) 5 File \u0026#34;/venv/lib/python3.11/site-packages/flask_wtf/csrf.py\u0026#34;, line 115, in validate_csrf 6 raise ValidationError(\u0026#34;The CSRF tokens do not match.\u0026#34;) 7wtforms.validators.ValidationError: The CSRF tokens do not match. 8 9During handling of the above exception, another exception occurred: 10 11Traceback (most recent call last): 12 File \u0026#34;/venv/lib/python3.11/site-packages/flask/app.py\u0026#34;, line 1821, in full_dispatch_request 13 rv = self.preprocess_request() 14 ^^^^^^^^^^^^^^^^^^^^^^^^^ 15 File \u0026#34;/venv/lib/python3.11/site-packages/flask/app.py\u0026#34;, line 2313, in preprocess_request 16 rv = self.ensure_sync(before_func)() 17 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 18 File \u0026#34;/venv/lib/python3.11/site-packages/flask_wtf/csrf.py\u0026#34;, line 229, in csrf_protect 19 self.protect() 20 File \u0026#34;/venv/lib/python3.11/site-packages/flask_wtf/csrf.py\u0026#34;, line 264, in protect 21 self._error_response(e.args[0]) 22 File \u0026#34;/venv/lib/python3.11/site-packages/flask_wtf/csrf.py\u0026#34;, line 307, in _error_response 23 raise CSRFError(reason) å¯ä»¥åŠ ä¸Šä¸‰å€‹ç’°å¢ƒè®Šæ•¸è§£æ±ºï¼š\nPGADMIN_CONFIG_WTF_CSRF_CHECK_DEFAULT=\u0026ldquo;False\u0026rdquo; PGADMIN_CONFIG_WTF_CSRF_ENABLED=\u0026ldquo;False\u0026rdquo; PGADMIN_CONFIG_ENHANCED_COOKIE_PROTECTION=\u0026ldquo;False\u0026rdquo; ","date":"2024-05-25T10:57:04+08:00","updated":"2024-05-25T10:57:04+08:00"},{"objectID":"1716259500","permalink":"/post/k8s-kubectl-access-multiple-cluster/","title":"[Kubernetes] kubectl å­˜å–å¤šå¢é›†","content":"å®‰è£ kubectl\rå¯ç›´æ¥åƒè€ƒ\rå®˜ç¶²\rï¼Œä¾ç…§ç’°å¢ƒé¸æ“‡æƒ³è¦çš„å®‰è£æ–¹æ³•å®‰è£ã€‚\næº–å‚™ config æª”æ¡ˆ\rå°‡å…©åº§ k8s configï¼Œå­˜åœ¨ä»»æ„ç›®éŒ„ä¸‹\n1$ mkdir k8s-config 2$ vi dev 3$ vi stg å°‡å¤šå€‹ config åˆä½µ\r1$ export KUBECONFIG=~/k8s-config/dev:~/k8s-config/stg 2$ kubectl config view --flatten å°‡æŒ‡ä»¤è¿”å›çš„ config è¤‡è£½åˆ° kubernetes çš„é è¨­ config ç›®éŒ„ .kube ä¸‹\n1$ vi ~/.kube/config ä¸¦é‡æ–°ä¿®æ”¹ç’°å¢ƒè®Šæ•¸\n1$ export KUBECONFIG=~/.kube/config æˆåŠŸä½¿ç”¨\rå°±èƒ½ç›´æ¥é€é kubectl config æŒ‡ä»¤ç®¡ç† context äº†\n1$ kubectl config get-contexts åˆ‡æ›å­˜å– Kubernets å¢é›†\n1$ kubectl config use-context kubernetes-admin@kubernetes-dev Tip\nå…¶å¯¦ config ä¸¦ä¸ä¸€å®šè¦åˆåœ¨ä¸€èµ·ï¼Œåˆ†é–‹ç„¶å¾Œä½¿ç”¨ç’°å¢ƒè®Šæ•¸æŒ‡å®šå¤šå€‹ config ä¹Ÿå¯ä»¥ã€‚çœ‹è‡ªå·±çš„ç¿’æ…£~\n","date":"2024-05-21T10:45:00+08:00","updated":"2024-05-21T10:45:00+08:00"},{"objectID":"1716128400","permalink":"/post/k8s-ingress-nginx-cert-manager-setup/","title":"[Kubernetes] Ingress Nginx and Cert Manager Setup","content":"TL; DR\rç´€éŒ„ä½¿ç”¨ Helm Chart å®‰è£ Ingress Nginx Controller ä»¥åŠ Cert Manager ä¸¦è¨­ç½® TLS æ†‘è­‰çš„éç¨‹ã€‚\nIngress Nginx Controller\ræº–å‚™ helm chart\r1helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx 2helm repo update 3helm pull ingress-nginx/ingress-nginx 4tar -zxvf ingress-nginx-xxx.tgz 5cd ingress-nginx ç·¨è¼¯ values.yaml è¨­å®š\rkind é¡å‹æ›´æ”¹ç‚ºï¼šDaemonSet 1 # -- Use a `DaemonSet` or `Deployment` 2 kind: DaemonSet 3 # -- Annotations to be added to the controller Deployment or DaemonSet service template çš„ type æ”¹ç‚º NodePort 1 service: 2 # -- Enable controller services or not. This does not influence the creation of either the admission webhook or the metrics service. 3 enabled: true 4 external: 5 # -- Enable the external controller service or not. Useful for internal-only deployments. 6 enabled: true 7 # -- Annotations to be added to the external controller service. See `controller.service.internal.annotations` for annotations to be added to the internal controller service. 8 annotations: {} 9 # -- Labels to be added to both controller services. 10 labels: {} 11 # -- Type of the external controller service. 12 # Ref: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types 13 type: NodePort å®‰è£\r1helm install ingress-nginx --namespace ingress-nginx --create-namespace Cert Manager\ræº–å‚™ helm chart åŠå®‰è£\r1helm repo add jetstack https://charts.jetstack.io 2helm repo update 3helm install cert-manager jetstack/cert-manager \\ 4 --namespace cert-manager \\ 5 --create-namespace \\ 6 --set installCRDs=true å–å¾— Cloudflare API Token\rå°‡ API Token çš„ Permission è¨­ç‚º Zone.Zone, Zone.DNS ï¼›Resources è¨­ç‚º All zonesã€‚\nå»ºç«‹ Cluster Issuer\r1apiVersion: v1 2kind: Secret 3metadata: 4 name: cloudflare-api-token 5 namespace: cert-manager 6type: Opaque 7stringData: 8 api-token: uNlI5Slnd-NqqyUX9iNoVlJ2jh57kFAzT5DxKE2E 9--- 10apiVersion: cert-manager.io/v1 11kind: ClusterIssuer 12metadata: 13 name: letsencrypt-prd 14 namespace: cert-manager 15spec: 16 acme: 17 email: asus.sdsp@gmail.com 18 server: https://acme-v02.api.letsencrypt.org/directory 19 privateKeySecretRef: 20 name: letsencrypt-prd 21 solvers: 22 - selector: 23 dnsZones: 24 - \u0026#34;sdsp-dev.com\u0026#34; 25 - \u0026#34;*.sdsp-dev.com\u0026#34; 26 dns01: 27 cloudflare: 28 email: asus.sdsp@gmail.com 29 apiTokenSecretRef: 30 name: cloudflare-api-token 31 key: api-token å»ºç«‹ wildcard æ†‘è­‰\r1apiVersion: cert-manager.io/v1 2kind: Certificate 3metadata: 4 name: wildcard-sdsp-dev-prd 5 namespace: cert-manager 6spec: 7 dnsNames: 8 - \u0026#34;sdsp-dev.com\u0026#34; 9 - \u0026#34;*.sdsp-dev.com\u0026#34; 10 issuerRef: 11 kind: ClusterIssuer 12 name: letsencrypt-prd 13 secretName: wildcard-sdsp-dev-prd æ›´æ”¹ ingress-nginx-controller çš„ default ssl cert\r1kubectl edit daemonset.apps/ingress-nginx-controller -n ingress-nginx åœ¨ containers ä¸‹çš„ args åŠ ä¸Šä¸Šé¢ cert-manager ä¸­å‰µå»ºçš„ ca\n1- --default-ssl-certificate=cert-manager/wildcard-sdsp-dev-prd æ¸¬è©¦\rå»ºç«‹æœå‹™çš„ ingress è³‡æº\rå‡è¨­ç’°å¢ƒä¸‹å·²æœ‰ä¸€å€‹ deployment è³‡æº vitepress\nç‚º vitepress service å»ºç«‹ ingress è³‡æºï¼Œä»¥ä¾›å°å¤–å­˜å–ã€‚\n1apiVersion: networking.k8s.io/v1 2kind: Ingress 3metadata: 4 labels: 5 app.kubernetes.io/name: vitepress 6 name: vitepress-sdsp-dev 7 namespace: dev 8 annotations: 9 nginx.ingress.kubernetes.io/use-regex: \u0026#34;true\u0026#34; 10spec: 11 ingressClassName: nginx 12 tls: 13 - hosts: 14 - doc.sdsp-dev.com 15 rules: 16 - host: doc.sdsp-dev.com 17 http: 18 paths: 19 - backend: 20 service: 21 name: vitepress 22 port: 23 number: 80 24 path: /.* 25 pathType: Prefix ä¸¦åœ¨ Cloudflare è¨­å®š DNS A Record å³å¯ï¼Œå› ç‚ºåœ¨ Kubernetes é›†ç¾¤å‰é¢æ”¾äº†ä¸€å€‹ Nginx åšè² è¼‰å‡è¡¡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å°‡ Cloudflare DNS Record çš„ IP Address è¨­ç‚º 172.20.37.33ã€‚\nè£œå…… Kubernetes + Nginx HA æ¶æ§‹åœ–\rTip\nå…¶ä»–å¸¸è¦‹çš„ HA æ¶æ§‹ç‚ºä½¿ç”¨ HA Proxy + keepalive\n","date":"2024-05-19T22:20:00+08:00","updated":"2024-05-19T22:20:00+08:00"},{"objectID":"1715520720","permalink":"/post/ntut-new-era-information-and-communication/","title":"æ–°ä¸–ä»£è³‡é€šè¨Š","content":"TL; DR\rç´€éŒ„ä¿®ç¿’æ–°ä¸–ä»£è³‡é€šè¨Šé€™å ‚èª²æ•™åˆ°çš„ OSPF è·Ÿ Viterbi Algorithm çš„è¨ˆç®—éç¨‹ã€‚\nOSPF (Open Shortest Path First)\rViterbi Algorithm\r","date":"2024-05-12T21:32:00+08:00","updated":"2024-05-12T21:32:00+08:00"},{"objectID":"1714573200","permalink":"/post/k8s-rook-ceph-clock-skew-detected/","title":"[Kubernetes] Rook Health Warn with Clock Skew","content":"å•é¡Œ\rrook-ceph é›†ç¾¤é¡¯ç¤º HEALTH WARNï¼Œå…¶åŸå› ç‚º clock skew detected on mon.c, mon.dã€‚\n1kubectl -n rook-ceph describe cephcluster 1Status: 2 Ceph: 3 Capacity: 4 Bytes Available: 1174133465088 5 Bytes Total: 1181116006400 6 Bytes Used: 6982541312 7 Last Updated: 2024-04-16T01:21:15Z 8 Details: 9 MON_CLOCK_SKEW: 10 Message: clock skew detected on mon.c, mon.d 11 Severity: HEALTH_WARN 12 Fsid: caec8fab-28a0-464d-9079-463ddbb7c4e3 13 Health: HEALTH_WARN 14 Last Changed: 2024-04-15T11:31:39Z 15 Last Checked: 2024-04-16T01:21:15Z è§£æ±º\råŸæœ¬ä½¿ç”¨ ntpdate å¼·åˆ¶æ¯å°éƒ½èˆ‡æŒ‡å®šçš„ ntp server æ›´æ–°ï¼Œä½†é‚„æœ‰å¦ä¸€å€‹æ–¹æ³•æ˜¯ä¿®æ”¹ mon clock drift allowed é è¨­åƒæ•¸\n1kubectl edit configmap rook-config-override -n rook-ceph -o yaml 2apiVersion: v1 3data: 4 config: | 5 [global] 6 mon clock drift allowed = 1 7kind: ConfigMap 8metadata: 9 annotations: 10 meta.helm.sh/release-name: rook-ceph-cluster 11 meta.helm.sh/release-namespace: rook-ceph 12 creationTimestamp: \u0026#34;2024-04-12T05:38:23Z\u0026#34; 13 labels: 14 app.kubernetes.io/managed-by: Helm 15 name: rook-config-override 16 namespace: rook-ceph 17 ownerReferences: 18 - apiVersion: ceph.rook.io/v1 19 blockOwnerDeletion: true 20 controller: true 21 kind: CephCluster 22 name: rook-ceph 23 uid: a23004c1-fe54-4905-b9bf-af21a7b2a8ea 24 resourceVersion: \u0026#34;994524\u0026#34; 25 uid: 57ad721c-390a-4999-aa00-9f64e2497310 26root@node1:~# kubectl get configmap rook-config-override -n rook-ceph -o yaml 27apiVersion: v1 28data: 29 config: | 30 [global] 31 mon clock drift allowed = 1 32kind: ConfigMap 33metadata: 34 annotations: 35 meta.helm.sh/release-name: rook-ceph-cluster 36 meta.helm.sh/release-namespace: rook-ceph 37 creationTimestamp: \u0026#34;2024-04-12T05:38:23Z\u0026#34; 38 labels: 39 app.kubernetes.io/managed-by: Helm 40 name: rook-config-override 41 namespace: rook-ceph 42 ownerReferences: 43 - apiVersion: ceph.rook.io/v1 44 blockOwnerDeletion: true 45 controller: true 46 kind: CephCluster 47 name: rook-ceph 48 uid: a23004c1-fe54-4905-b9bf-af21a7b2a8ea 49 resourceVersion: \u0026#34;994524\u0026#34; 50 uid: 57ad721c-390a-4999-aa00-9f64e2497310 æ–°å¢äº†ä»¥ä¸‹å…§å®¹ï¼š\n1config: | 2 [global] 3 mon clock drift allowed = 1 æ­¤è™•çš„æ™‚é–“å¯éš¨è‡ªèº«çš„æ™‚é–“å·®è¨­ç½®ï¼Œåœ¨0.5åˆ°1sä¹‹é–“ï¼Œä¸å»ºè­°è¨­å®šéå¤§çš„å€¼\næ¥è‘—åˆªé™¤ mon Pod ä½¿å…¶è¼‰å…¥æ–°çš„è¨­å®šæ–‡ä»¶\n1kubectl -n rook-ceph delete pod $(kubectl -n rook-ceph get pods -o custom-columns=NAME:.metadata.name --no-headers| grep mon) 2pod \u0026#34;rook-ceph-mon-a-559d8b5866-dcmcz\u0026#34; deleted 3pod \u0026#34;rook-ceph-mon-c-bfdbb5598-96kv8\u0026#34; deleted 4pod \u0026#34;rook-ceph-mon-d-c9ff49c58-ml65k\u0026#34; deleted æŸ¥çœ‹ç‹€æ…‹å·²æ¢å¾©å¥åº·å€¼\n1kubectl -n rook-ceph get cephcluster 2NAME DATADIRHOSTPATH MONCOUNT AGE PHASE MESSAGE HEALTH EXTERNAL FSID 3rook-ceph /var/lib/rook 3 3d19h Ready Cluster created successfully HEALTH_OK caec8fab-28a0-464d-9079-463ddbb7c4e3 Reference\rhttps://blog.csdn.net/m0_59615922/article/details/131459393\r","date":"2024-05-01T22:20:00+08:00","updated":"2024-05-01T22:20:00+08:00"},{"objectID":"1714459500","permalink":"/post/k8s-rook-delete-osd-and-add-on-same-node/","title":"[Kubernetes] Rook åˆªé™¤åŸå…ˆ /dev/sdb çš„ OSD ä¸¦é‡æ–°æ–°å¢åŒå€‹ç¯€é»çš„ /dev/sda çš„ OSD","content":"TL; DR\råŸæœ¬ä½¿ç”¨ Kubernetes çš„ä¸‰å€‹ worker node ç¯€é»å»ºç«‹äº†æ“æœ‰ä¸‰å€‹ node çš„ rookï¼Œä½†å› ç‚ºè³‡æºä¸è¶³çš„ç·£æ•…ï¼Œå°‡å…¶ä¸­ä¸€å€‹ç¯€é»ç”±åŸæœ¬çš„ VM æ”¹æˆä»¥å¯¦æ©Ÿçš„æ–¹å¼åŠ å…¥é›†ç¾¤ï¼Œå°è‡´ç¡¬ç¢ŸåŸæœ¬æ˜¯ä»¥ /dev/sdb çš„æ–¹å¼åŠ å…¥ OSDï¼Œä½†ç¾åœ¨éœ€è¦æ”¹æˆ /dev/sdaã€‚\nå…ˆå°‡ rook-ceph-operator åœç”¨ 1kubectl -n rook-ceph scale deployment rook-ceph-operator --replicas=0 ä¿®æ”¹ rook cluster é…ç½®ï¼ŒæŒ‡å®šç¯€é»ä½¿ç”¨ sda ç¡¬ç¢Ÿã€‚ 1# kubectl edit cephclusters.ceph.rook.io -n rook-ceph rook-ceph 2storage: 3 flappingRestartIntervalHours: 0 4 nodes: 5 - devices: 6 - name: sda 7 name: node5 8 store: {} 9 useAllDevices: true 10 useAllNodes: true éƒ¨ç½² ceph toolbox 1kubectl apply -f toolbox.yaml 1# toolbox.yaml 2apiVersion: apps/v1 3kind: Deployment 4metadata: 5 name: rook-ceph-tools 6 namespace: rook-ceph # namespace:cluster 7 labels: 8 app: rook-ceph-tools 9spec: 10 replicas: 1 11 selector: 12 matchLabels: 13 app: rook-ceph-tools 14 template: 15 metadata: 16 labels: 17 app: rook-ceph-tools 18 spec: 19 dnsPolicy: ClusterFirstWithHostNet 20 serviceAccountName: rook-ceph-default 21 containers: 22 - name: rook-ceph-tools 23 image: quay.io/ceph/ceph:v18.2.2 24 command: 25 - /bin/bash 26 - -c 27 - | 28 # Replicate the script from toolbox.sh inline so the ceph image 29 # can be run directly, instead of requiring the rook toolbox 30 CEPH_CONFIG=\u0026#34;/etc/ceph/ceph.conf\u0026#34; 31 MON_CONFIG=\u0026#34;/etc/rook/mon-endpoints\u0026#34; 32 KEYRING_FILE=\u0026#34;/etc/ceph/keyring\u0026#34; 33 34 # create a ceph config file in its default location so ceph/rados tools can be used 35 # without specifying any arguments 36 write_endpoints() { 37 endpoints=$(cat ${MON_CONFIG}) 38 39 # filter out the mon names 40 # external cluster can have numbers or hyphens in mon names, handling them in regex 41 # shellcheck disable=SC2001 42 mon_endpoints=$(echo \u0026#34;${endpoints}\u0026#34;| sed \u0026#39;s/[a-z0-9_-]\\+=//g\u0026#39;) 43 44 DATE=$(date) 45 echo \u0026#34;$DATE writing mon endpoints to ${CEPH_CONFIG}: ${endpoints}\u0026#34; 46 cat \u0026lt;\u0026lt;EOF \u0026gt; ${CEPH_CONFIG} 47 [global] 48 mon_host = ${mon_endpoints} 49 50 [client.admin] 51 keyring = ${KEYRING_FILE} 52 EOF 53 } 54 55 # watch the endpoints config file and update if the mon endpoints ever change 56 watch_endpoints() { 57 # get the timestamp for the target of the soft link 58 real_path=$(realpath ${MON_CONFIG}) 59 initial_time=$(stat -c %Z \u0026#34;${real_path}\u0026#34;) 60 while true; do 61 real_path=$(realpath ${MON_CONFIG}) 62 latest_time=$(stat -c %Z \u0026#34;${real_path}\u0026#34;) 63 64 if [[ \u0026#34;${latest_time}\u0026#34; != \u0026#34;${initial_time}\u0026#34; ]]; then 65 write_endpoints 66 initial_time=${latest_time} 67 fi 68 69 sleep 10 70 done 71 } 72 73 # read the secret from an env var (for backward compatibility), or from the secret file 74 ceph_secret=${ROOK_CEPH_SECRET} 75 if [[ \u0026#34;$ceph_secret\u0026#34; == \u0026#34;\u0026#34; ]]; then 76 ceph_secret=$(cat /var/lib/rook-ceph-mon/secret.keyring) 77 fi 78 79 # create the keyring file 80 cat \u0026lt;\u0026lt;EOF \u0026gt; ${KEYRING_FILE} 81 [${ROOK_CEPH_USERNAME}] 82 key = ${ceph_secret} 83 EOF 84 85 # write the initial config file 86 write_endpoints 87 88 # continuously update the mon endpoints if they fail over 89 watch_endpoints 90 imagePullPolicy: IfNotPresent 91 tty: true 92 securityContext: 93 runAsNonRoot: true 94 runAsUser: 2016 95 runAsGroup: 2016 96 capabilities: 97 drop: [\u0026#34;ALL\u0026#34;] 98 env: 99 - name: ROOK_CEPH_USERNAME 100 valueFrom: 101 secretKeyRef: 102 name: rook-ceph-mon 103 key: ceph-username 104 volumeMounts: 105 - mountPath: /etc/ceph 106 name: ceph-config 107 - name: mon-endpoint-volume 108 mountPath: /etc/rook 109 - name: ceph-admin-secret 110 mountPath: /var/lib/rook-ceph-mon 111 readOnly: true 112 volumes: 113 - name: ceph-admin-secret 114 secret: 115 secretName: rook-ceph-mon 116 optional: false 117 items: 118 - key: ceph-secret 119 path: secret.keyring 120 - name: mon-endpoint-volume 121 configMap: 122 name: rook-ceph-mon-endpoints 123 items: 124 - key: data 125 path: mon-endpoints 126 - name: ceph-config 127 emptyDir: {} 128 tolerations: 129 - key: \u0026#34;node.kubernetes.io/unreachable\u0026#34; 130 operator: \u0026#34;Exists\u0026#34; 131 effect: \u0026#34;NoExecute\u0026#34; 132 tolerationSeconds: 5 é€²å…¥ toolbox åŸ·è¡Œç§»é™¤ sdb osd æ“ä½œ 1kubectl -n rook-ceph exec -it deploy/rook-ceph-tools -- bash æ‰‹å‹•ç§»é™¤å°æ‡‰osd\n1ceph osd set noup 2ceph osd down 0 3ceph osd out 0 4# æŸ¥çœ‹æ•°æ®å‡è¡¡è¿›åº¦ï¼Œ ç­‰å¾…æ•°æ®å‡è¡¡å®Œæˆ 5ceph -w 6# å‡è¡¡è³‡æ–™å®Œæˆå¾Œç§»é™¤å°æ‡‰çš„osd 7ceph osd purge 0 --yes-i-really-mean-it 8ceph auth del osd.0 9ceph osd crush remove node5 æª¢æŸ¥cephç‹€æ…‹ä»¥åŠosdç‹€æ…‹\n1ceph -s 2ceph osd tree ç§»é™¤ podï¼Œä¸¦åˆ¤æ–·åˆªé™¤å°æ‡‰çš„ job 1kubectl delete deploy -n rook-ceph rook-ceph-osd-0 é€²å…¥ node5 ç¯€é»ï¼Œä¸¦æ¸…é™¤ç£ç›¤è³‡æ–™ 1 #!/usr/bin/env bash 2 DISK=\u0026#34;/dev/sdb\u0026#34; 3 # Zap the disk to a fresh, usable state (zap-all is important, b/c MBR has to be clean) 4 # You will have to run this step for all disks. 5 sgdisk --zap-all $DISK 6 7 # These steps only have to be run once on each node 8 # If rook sets up osds using ceph-volume, teardown leaves some devices mapped that lock the disks. 9 ls /dev/mapper/ceph-* | xargs -I% -- dmsetup remove % 10 # ceph-volume setup can leave ceph-\u0026lt;UUID\u0026gt; directories in /dev (unnecessary clutter) 11 rm -rf /dev/ceph-* 12 13 lsblk -f 14 rm -rf /var/lib/rook/* é‡æ–°å°‡ rook-ceph-operator å•Ÿç”¨ï¼Œnode5 sda osd ä¾¿æœƒè‡ªå‹•æ–°å¢ 1kubectl -n rook-ceph scale deployment rook-ceph-operator --replicas=0 Reference\rhttps://blog.csdn.net/fancy106/article/details/121706998\r","date":"2024-04-30T14:45:00+08:00","updated":"2024-04-30T14:45:00+08:00"},{"objectID":"1713410120","permalink":"/post/vmware-add-disk-without-reboot/","title":"[VMWare] ä¸é‡é–‹æ©Ÿç‚º Ubuntu VM æ–°å¢ç¡¬ç¢Ÿ","content":"ç’°å¢ƒ ç‚º Workstation 17 Proï¼Œé‡å°è¦åŠ ç¡¬ç¢Ÿçš„ Ubuntu VM åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š\nVirtual Machine Settings \u0026gt; Addâ€¦ \u0026gt; Hard DIsk \u0026gt; SCSI \u0026gt; Create a new virtaul disk \u0026gt; enter size ex. 30GB, Split virtual disk into multiple files \u0026gt; Finish\næ¥è‘—åœ¨ Ubuntu ä¸­é‡æ–°æƒæ SCSI\n1for host in /sys/class/scsi_host/host*; do echo \u0026#34;- - -\u0026#34; | sudo tee $host/scan; done ","date":"2024-04-18T11:15:20+08:00","updated":"2024-04-18T11:15:20+08:00"},{"objectID":"1712980020","permalink":"/post/esxi-failed-installation/","title":"[OS] ESXi8 å®‰è£ Ubuntu VM å¤±æ•—å•é¡Œç´€éŒ„","content":"TL; DR\rå‰›å¥½æœ‰æ©Ÿæœƒæ‹¿åˆ°ä¸€å°è¦æ ¼æ¯”è¼ƒé«˜çš„æ©Ÿå™¨ï¼Œæ‰€ä»¥å®‰è£äº† ESXi 8 ä¾†åˆ‡å¤šå€‹ VM ä½¿ç”¨ï¼Œä½†åœ¨å®‰è£å¾Œå»º VM å»é‡åˆ°ä¸€äº›å•é¡Œï¼Œåƒ…æ­¤ç´€éŒ„ã€‚\nå•é¡ŒåŠè§£æ±ºæ–¹æ³•\råœ¨å®‰è£ Ubuntu VM æ™‚ç™¼ç”Ÿ ERROR root:xx finish: subiquity/... çš„éŒ¯èª¤ã€‚ æŸ¥çœ‹è©³ç´° full report çµæœå¦‚ä¸‹ åƒè€ƒåˆ°é€™ç¯‡\ræ–‡ç« \rï¼Œäº†è§£åˆ°å¾ˆå¯èƒ½æ˜¯ç¶²å¡çš„å•é¡Œï¼Œé€²å…¥ç¶²è·¯ç®¡ç†é é¢å¾Œç™¼ç¾æœä¸å…¶ç„¶çš„ï¼Œé€™å°æ©Ÿå™¨è·Ÿå…¶ä»–æ­£å¸¸çš„ ESXi host ä¸ä¸€æ¨£ï¼Œé™¤äº†æœ‰å…©å¼µç¶²å¡å¤–ï¼ŒåŸæœ¬ä½¿ç”¨çš„ vmnic0 é€™å¼µçš„ mac address æœ‰ç•°å¸¸ã€‚ æ•…é‡æ–°æ’å…¥å¦ä¸€å€‹ç¶²å­”ï¼Œä¸¦é€²å…¥ BIOS é—œé–‰èˆŠç¶²å¡ã€‚ä¸éå†é‡æ–°å®‰è£ VM å¾Œï¼Œä»ç„¶é‡åˆ°ä¸€æ¨£çš„éŒ¯èª¤ï¼Œä¸”éƒ½æ˜¯åœ¨æœ€å¾Œä¸€æ­¥è¨­å®šä½¿ç”¨è€…çš„æ™‚å€™ã€‚æ•…å†é‡æ–°ç ”ç©¶è©²ç¯‡æ–‡ç« çš„å›è¦†ï¼Œåœ¨ VM è¨­å®šé é¢å…ˆç§»é™¤ç¶²å¡ï¼Œå°±èƒ½é †åˆ©å®‰è£ OSã€‚å®‰è£å®Œç•¢å¾Œï¼Œå†é‡æ–°åŠ ä¸Šç¶²è·¯ä»‹é¢å¡é¸é …å³å¯ã€‚ Tip\nIf you\u0026rsquo;re running Ubuntu server in a VM (Gnome boxes, kvm, libvirt etc). Then remove any attached NIC\u0026rsquo;s before you install the OS. Otherwise install fails with the above error.\nCPU æ²’æœ‰å•Ÿç”¨ vtx åŠŸèƒ½ éœ€è¦é‡æ–°é–‹æ©Ÿé€²å…¥ BIOSï¼Œåœ¨ Advanced åˆ—è¡¨ä¸­ï¼Œå°‡ Intel (VMX) Virtaulization Technology å•Ÿç”¨å³å¯ã€‚ åœ¨åŸå…ˆå·²ç¶“æœ‰ ESXi çš„æƒ…æ³ä¸‹ï¼Œä½¿ç”¨ USB é‡çŒ ESXiï¼ŒèˆŠçš„ datastore æ²’æœ‰æ¸…ä¹¾æ·¨ï¼Œç„¡æ³•ç§»é™¤ VMFSL åˆ†å‰²å€ã€‚ å³ä½¿ä½¿ç”¨ ssh é€²å…¥ ESXi host terminalï¼Œä½¿ç”¨ partedUtil delete /vmfs/devices/disks/\u0026lt;disk_name\u0026gt; \u0026lt;partition_number\u0026gt; å‘½ä»¤ä¾†åˆªé™¤åˆ†å‰²å€ï¼Œæœƒè¿”å›ä¸‹è¿°éŒ¯èª¤ã€‚\n1Error: Read-only file system during write on /dev/disks/t10.ATA_____ST500DM0022D1BD142___________________________________Z3TPTCPA 2Unable to delete partition 7 from device /vmfs/devices/disks/t10.ATA_____ST500DM0022D1BD142___________________________________Z3TPTCPA æœ€çµ‚åƒè€ƒé€™ç¯‡\ræ–‡ç« \rçš„å›è¦†ï¼Œåˆ©ç”¨ Windows10 å®‰è£æ™‚æœƒå…ˆæ ¼å¼åŒ–ç¡¬ç¢Ÿçš„åŠŸèƒ½ï¼Œå°‡ç£ç¢Ÿæ¸…ä¹¾æ·¨å¾Œï¼Œåœ¨é‡è£ä¸€æ¬¡ ESXIã€‚\nè£œå……\råœ¨é‚„æ²’æœ‰ç™¼ç¾æ˜¯ç¶²å¡å•é¡Œæ™‚ï¼Œé‚„æœäº†æ›´æ–° BIOS çš„æ–¹å¼è§£æ±ºï¼Œé›–ç„¶ä¸æ˜¯ä¸»å› ï¼Œä½†ç¬¬ä¸€æ¬¡æ›´æ–° BIOS é‚„æ˜¯æŒºå€¼å¾—ç´€éŒ„çš„ã€‚æ–¹å¼å¾ˆç°¡å–®ï¼Œåƒè€ƒ\rå®˜ç¶²\ræ­¥é©Ÿ\næº–å‚™ BIOS æª”æ¡ˆçš„ USB éš¨èº«ç¡¬ç¢Ÿ é€²å…¥ BIOS ä¸­æ›´æ–°çš„åœ°æ–¹ï¼Œä»¥ ASUS ç‚ºä¾‹ç‚º Advanced Mode ä¸­çš„ EZ Flash 3 Utility ä¸­ã€‚ é¸æ“‡ USB éš¨èº«ç¡¬ç¢Ÿçš„æª”æ¡ˆä½ç½® ç³»çµ±å°±æœƒé–‹å§‹æ›´æ–°äº† ","date":"2024-04-13T11:47:00+08:00","updated":"2024-04-13T11:47:00+08:00"},{"objectID":"1712392320","permalink":"/post/intellij-env-setup/","title":"[Programming] è¨˜éŒ„é¦–æ¬¡ç”¨ IntelliJ IDEA é‡åˆ°çš„å‘","content":"TL; DR\rå˜—è©¦åœ¨æœ¬åœ°è·‘ä¸€å€‹ Flink Jobï¼Œçµæœé‡åˆ°å¹¾å€‹å•é¡Œï¼Œç‰¹æ­¤è¨˜éŒ„ä¸‹è§£æ±ºéç¨‹ã€‚\nRemote SSH ç„¡æ³•ä½¿ç”¨\rä½¿ç”¨ Remote SSH é–‹å•Ÿå°ˆæ¡ˆï¼Œåœ¨æ¸¬è©¦é€£ç·šæ™‚æœ‰æˆåŠŸé€šè¨Šï¼Œä½†é¸æ“‡ Check Connection and Continue å¾Œä¸€ç›´ç„¡æ³•è·³è½‰ã€‚\nè§£æ±ºæ–¹æ³•\rè¨­å®š Remote host çš„ ssh configï¼Œå°‡ AllowTcpForwarding é¸é …æ‰“é–‹ã€‚\n1sudo vi /etc/ssh/sshd_config 2# å°‡ AllowTcpForwarding yes unmark 3systemctl restart sshd å¼•å…¥çš„åŒ…ç‰ˆæœ¬ä¸ç¬¦\råœ¨ build çš„æ™‚å€™é‡åˆ°\n1[ERROR] Failed to execute goal on project quantalink-quickstart-connector-oracle: Could not resolve dependencies for project com.regy:quantalink-quickstart-connector-oracle:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.ververica:flink-connector-oracle-cdc:jar:2.4-SNAPSHOT (absent): Could not find artifact com.ververica:flink-connector-oracle-cdc:jar:2.4-SNAPSHOT -\u0026gt; [Help 1] è§£æ±ºæ–¹æ³•\ræ ¹æ“šéŒ¯èª¤è¼¸å‡ºï¼Œåœ¨ç›¸å°æ‡‰çš„ pom.xml æª”ä¸­æŠŠå°æ‡‰ jar æ›æ‰ã€‚\n1\u0026lt;dependency\u0026gt; 2 \u0026lt;groupId\u0026gt;com.ververica\u0026lt;/groupId\u0026gt; 3 \u0026lt;artifactId\u0026gt;flink-sql-connector-oracle-cdc\u0026lt;/artifactId\u0026gt; 4 \u0026lt;version\u0026gt;2.4.0\u0026lt;/version\u0026gt; 5\u0026lt;/dependency\u0026gt; å¤–éƒ¨é¡åˆ¥åœ¨ IDEA Run æ™‚æ‰¾ä¸åˆ°\rbuild å®Œ project å¾Œçœ‹ IDEA ä»‹é¢ï¼Œé€™å€‹ jar äº‹å¯¦ä¸Šå·²ç¶“è¢«è¼‰å…¥äº†ï¼Œä½†å°±æ˜¯é‹è¡ŒåµéŒ¯æ™‚å€™å ±éŒ¯æ‰¾ä¸åˆ°ã€‚\nè§£æ±ºæ–¹æ³•\rå› ç‚ºå°ˆæ¡ˆé è¨­è¨­å®šäº†éƒ¨åˆ† jar ç”¨ provided è¨»è§£æ‰ï¼Œé€™è¡¨ç¤º provided è¡¨ç¤ºè©²å¥—ä»¶åªåœ¨ç·¨è­¯å’Œæ¸¬è©¦çš„æ™‚å€™ç”¨ã€‚\nå¦‚æœæƒ³è¦ Run èª¿è©¦ï¼Œé‚„ä¸å¸Œæœ›ä¿®æ”¹ pom æ–‡ä»¶ï¼Œå‰‡éœ€è¦åœ¨ IntelliJ IDEA ä¸­åšç›¸é—œè¨­å®šï¼š\nRun / Configuration / Use classpath of moduleï¼Œå‹¾é¸ Include dependencies with â€œProvidedâ€ scopeã€‚é€™æ¨£èª¿è©¦æ™‚å€™å¯ä»¥ç”¨åˆ°ï¼Œåˆä¸ç”¨ä¿®æ”¹ pom æ–‡ä»¶äº†ã€‚\n","date":"2024-04-06T16:32:00+08:00","updated":"2024-04-06T16:32:00+08:00"},{"objectID":"1711766700","permalink":"/post/k8s-rook-installation/","title":"[Kubernetes] Rook 1.13 (Ceph on Kubernetes) å®‰è£ç´€éŒ„","content":"TL; DR\rä½¿ç”¨ Rook Helm Chart åœ¨ Kubernetes ä¸Šå®‰è£ Rook Operator ä»¥åŠ Ceph é›†ç¾¤ï¼Œä¸¦é€é CSI ä½¿ç”¨ PVCã€‚\nPrerequisites\rKubernetesï¼šæ”¯æŒ v1.25 è‡³ v1.29 ç‰ˆæœ¬ Ceph Node Resource Requiementï¼šä¸åŒçµ„ä»¶éœ€è¦ä¸åŒçš„ç¡¬é«”è³‡æºå¤§å°ï¼Œè«‹åƒè€ƒ SUSE æ–‡æª”\räº†è§£å…·é«”è¦æ±‚ã€‚ Tip\næ¸¬è©¦ç™¼ç¾ï¼Œä¸‰å€‹å·¥ä½œç¯€é»é…ç½®ç‚º 4 core vCPU / 8GB RAM æœƒå°è‡´å®‰è£å¤±æ•—ï¼Œå‡ç´šè‡³ 8 core vCPU / 16GB RAM å¾Œæ‰èƒ½é †åˆ©é‹è¡Œã€‚\nè‡³å°‘éœ€è¦ä»¥ä¸‹ä¸€ç¨®æœ¬åœ°å„²å­˜é¡å‹ï¼š\nåŸå§‹ç¡¬ç¢Ÿï¼ˆç„¡åˆ†å€æˆ–æ ¼å¼åŒ–æ–‡ä»¶ç³»çµ±ï¼‰ åŸå§‹ç¡¬ç¢Ÿåˆ†å€ï¼ˆç„¡æ ¼å¼åŒ–æ–‡ä»¶ç³»çµ±ï¼‰ LVM é‚è¼¯å·ï¼ˆç„¡æ ¼å¼åŒ–æ–‡ä»¶ç³»çµ±ï¼‰ åœ¨å·²å­˜åœ¨çš„ Storage Class ä¸­ï¼Œä»¥ block level å‹æ…‹æä¾›çš„ Persistent Volumes RBDï¼š\nCeph éœ€è¦ä½¿ç”¨å…·æœ‰ RBD æ¨¡çµ„çš„ Linux kernelã€‚è¨±å¤š Linux ç™¼è¡Œç‰ˆéƒ½å·²ç¶“åŒ…å«äº† RBD æ¨¡çµ„ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„ç™¼è¡Œç‰ˆéƒ½æœ‰ï¼Œä½¿ç”¨ä¸‹é¢ command ç¢ºèªåŠè¼‰å…¥\n1lsmod | grep rbd 2 3# è‹¥ç„¡è¿”å›ï¼Œå‰‡åŸ·è¡Œä¸‹é¢è¼‰å…¥ 4sudo modprobe rbd 5sudo vim /etc/modules-load.d/rbd.conf\t# æ–‡ä»¶åä»»æ„ï¼Œä»¥.conf çµå°¾å³å¯ 6rbd\t#å†…å®¹å¯« rbd å³å¯ Installation Step\ræ•´é«”æµç¨‹å¦‚ä¸‹\nå®‰è£ Rook Operator éƒ¨ç½² Ceph å¢é›† é©—è­‰ Ceph é›†ç¾¤ ä½¿ç”¨ Ceph å­˜å„² Install Rook Operator\r1helm repo add rook-release https://charts.rook.io/release 2helm install --create-namespace --namespace rook-ceph rook-ceph rook-release/rook-ceph Info\nå¦‚æœå¢é›†æ˜¯ä¸€å€‹ä¸‰ç¯€é»çš„å¢é›†ï¼ˆ1 å€‹ Master + 2 å€‹ Workerï¼‰ï¼Œé‚£éº¼ Master ç¯€é»ä¹Ÿéœ€è¦ä½œç‚ºå·¥ä½œè² è¼‰ç¯€é»ä½¿ç”¨ï¼Œå¯ä»¥å»æ‰æ¬²å®‰è£çš„ master ç¯€é»çš„æ±¡é»ï¼š\n1kubectl taint node node1 â€¦","date":"2024-03-30T10:45:00+08:00","updated":"2024-03-30T10:45:00+08:00"},{"objectID":"1711266900","permalink":"/post/trino-connect-paimon-s3/","title":"[Trino] ä½¿ç”¨ Docker å®‰è£ Trino ä¸¦ä¸²æ¥å„²å­˜æ–¼ S3 çš„ Paimon Catalog","content":"TL; DR\rPaimon æ˜¯ä¸€å€‹ Data Lakehouseï¼Œå…¶å‰èº«æ˜¯ Flink çš„ Table Storeï¼Œ 2023 å¹´ 3 æœˆå–®ç¨å­µåŒ–æˆä¸€å€‹ Apache é …ç›®ï¼Œä¸¦ä¸”é‚„æ•´åˆäº†å…¶ä»– engine å¦‚ Sparkï¼Œå®Œç¾è·Ÿ Flink è§£è€¦ã€‚æœ¬ç¯‡è¨˜éŒ„é€é Docker å®‰è£ Trinoï¼Œä¸¦é€£æ¥ä½¿ç”¨ S3 ç•¶ä½œ filesystem çš„ Apache Paimonï¼Œé€²è¡Œè³‡æ–™è®€å–ã€‚\nç’°å¢ƒ\rApache Flink 1.17.2 Apache Paimon 0.7 Apache Trino 427 å®‰è£\r1mkdir trino \u0026amp;\u0026amp; cd trino ä¸‹è¼‰ trino-paimon æ‰€éœ€çš„ jar æª”ï¼Œè«‹åƒè€ƒå®˜ç¶²æä¾›çš„é€£çµã€‚\n1wget https://repository.apache.org/content/groups/snapshots/org/apache/paimon/paimon-trino-427/0.8-SNAPSHOT/paimon-trino-427-0.8-20240322.000522-8-plugin.tar.gz 2tar -zxvf paimon-trino-427-0.8-20240322.000522-8-plugin.tar.gz \u0026amp;\u0026amp; rm -f paimon-trino-427-0.8-20240322.000522-8-plugin.tar.gz 3mv paimon/ trino_paimon_jars/ æº–å‚™ paimon.properties æª”æ¡ˆ\n1connector.name=paimon 2warehouse=s3://ula-test/paimon 3s3.endpoint=http://ceph-rgw.sdsp-stg.com:8080 4fs.native-s3.enabled=true 5s3.path-style-access=true 6s3.sse.type=S3 7s3.aws-access-key=0V2QOGVWCZAAK9DXA07P 8s3.aws-secret-key=60Kwr0A9jjH4A2ZOHgY74ZBUbpxgG2ALsoQ6uC4W 9s3.region=us-east-1 Info\né€™å€‹è¨­å®šæª”æ˜¯åƒè€ƒ trino å®˜ç¶² çš„è¨­å®šé …ï¼Œå…¶ä¸­ Ceph å› ç‚ºæ²’æœ‰ regionï¼Œä½†è©²é€£æ¥åƒæ•¸åˆæ˜¯å¿…é ˆï¼Œæ‰€ä»¥éš¨æ„çµ¦ä¸€å€‹åœ°å€å­—ä¸²ã€‚\næº–å‚™ docker-compose.yaml æª”æ¡ˆ\n1version: \u0026#39;3\u0026#39; 2services: 3 trino: 4 container_name: trino 5 image: trinodb/trino:427 6 ports: 7 - \u0026#39;9090:8080\u0026#39; 8 user: trino 9 environment: 10 AWS_ACCESS_KEY: 0V2QOGVWCZAAK9DXA07P 11 AWS_SECRET_KEY: 60Kwr0A9jjH4A2ZOHgY74ZBUbpxgG2ALsoQ6uC4W 12 volumes: 13 - ./trino_paimon_jars:/usr/lib/trino/plugin/paimon 14 - ./paimon.properties/:/etc/trino/catalog/paimon.properties 15 - ./tmp:/tmp 16 networks: 17 - flink-network 18 19networks: 20 flink-network: 21 external: true 22 name: flink-network å•Ÿå‹•\n1docker compose up -d é€£æ¥\rå¯ä»¥é€é DBeaver é€£ç·šè‡³ Trino å¯è¦–åŒ–æŸ¥çœ‹æ‰€æœ‰è¡¨çš„è³‡æ–™ï¼Œè¶…æ–¹ä¾¿ï¼åœ¨é€£ç·šæ™‚éœ€è¦å°‡ driver è¨­å®šæˆä¸éœ€å¯†ç¢¼é©—è­‰ï¼Œéš¨æ„ä½¿ç”¨ä¸€å€‹ username ä¾¿èƒ½ç™»å…¥ã€‚\næŸ¥çœ‹è¡¨æ ¼\n","date":"2024-03-24T07:55:00+00:00","updated":"2024-03-24T07:55:00+00:00"},{"objectID":"1711210200","permalink":"/post/ubuntu-extend-disk-and-lvm/","title":"[Ubuntu] æ“´å……è™›æ“¬ç£ç¢Ÿå¾Œçš„ç£ç¢Ÿåˆ†å‰²æ“ä½œ","content":"TL; DR\rè¨˜éŒ„åœ¨ vmware æ“´å……ç¡¬ç¢Ÿç©ºé–“å¾Œï¼Œå¦‚ä½•åœ¨ Ubuntu è¨­å®šæ“´å……æ ¹ç›®éŒ„å¤§å°ã€‚\næ“´å…… partition\r1sudo parted 1 2GNU Parted 3.4 3Using /dev/sda 4Welcome to GNU Parted! Type \u0026#39;help\u0026#39; to view a list of commands. 5 6# å°å‡ºç•¶å‰é…ç½® 7(parted) print 8Model: VMware, VMware Virtual S (scsi) 9Disk /dev/sda: 85.9GB 10Sector size (logical/physical): 512B/512B 11Partition Table: gpt 12Disk Flags: 13 14Number Start End Size File system Name Flags 15 1 1049kB 2097kB 1049kB bios_grub 16 2 2097kB 1904MB 1902MB ext4 17 3 1904MB 21.5GB 19.6GB 18 19# è®Šæ›´ partition å¤§å° 20(parted) resizepart 21 22# é¸æ“‡ç¬¬ä¸‰å€‹ partition 23Partition number? 3 24 25# ä½¿ç”¨å‰©é¤˜æ‰€æœ‰å¯ç”¨ç©ºé–“ 26End? [18.7GB]? 85.9GB 27 28# é›¢é–‹ 29(parted) quit æ“´å…… pv (physical volumn)\r1sudo pvresize /dev/sda3 æ“´å…… lv (logical volumn)\r1# ä½¿ç”¨å‰©é¤˜æ‰€æœ‰å¯ç”¨ç©ºé–“ 2sudo lvextend -l 100%FREE /dev/ubuntu--vg-ubuntu--lv 3 4# èª¿æ•´ ext4 æª”æ¡ˆç³»çµ±å¤§å° 5sudo resize2fs /dev/ubuntu-vg/ubuntu-lv Result\rReference\rhttps://godleon.github.io/blog/Linux/Linux-extend-lvm-from-unused-space/\r","date":"2024-03-23T16:10:00+00:00","updated":"2024-03-23T16:10:00+00:00"},{"objectID":"1711183500","permalink":"/post/k8s-kubespray-installation/","title":"[Kubernetes] ä½¿ç”¨ Kubespray å¿«é€Ÿéƒ¨ç½² K8s é›†ç¾¤","content":"TL; DR\rç´€éŒ„ä½¿ç”¨ Kubespray é€é Ansible å¿«é€Ÿéƒ¨ç½² Kubernetes é›†ç¾¤ã€‚\nç’°å¢ƒ\rAnsible æ§åˆ¶ç¯€é»\rUbuntu 22.04 LTS 2 CPU 4GB RAM 20GB Disk 3 å€‹ master ç¯€é»\rUbuntu 22.04 LTS 2 CPU 4GB RAM 20GB Disk 3 å€‹ worker ç¯€é»\rUbuntu 22.04 LTS 4 CPU 8GB RAM 80GB Disk Kubespray æœ€ä½è¦æ±‚\rAnsible ç¯€é»ï¼š1024 MBã€1 å€‹ CPU èˆ‡ 20 GB ç£ç¢Ÿç©ºé–“ Masterï¼š1500 MB RAMã€2 å€‹ CPU å’Œ 20 GB å¯ç”¨ç£ç¢Ÿç©ºé–“ Workerï¼š1024 MBã€2 å€‹ CPUã€20 GB å¯ç”¨ç£ç¢Ÿç©ºé–“ æ¯å€‹ç¯€é»ä¸Šçš„äº’è¯ç¶²é€£æ¥ æ“æœ‰ sudo ç®¡ç†å“¡æ¬Šé™ é…ç½® Ansible æ§åˆ¶ç¯€é»\rå®‰è£æ‰€éœ€å¥—ä»¶\r1sudo apt update 2sudo apt install git python3-pip -y 3git clone https://github.com/kubernetes-incubator/kubespray.git 4cd kubespray 5sudo pip install -r requirements.txt è¤‡è£½åŸ·è¡Œ ssh é‡‘é‘°\r1ssh-keygen # å¦‚æœåœ¨ ~/.ssh/ ä¸‹æ²’æœ‰é‡‘é‘°å‰µå»ºçš„è©± 2ssh-copy-id ula@192.168.0.48 3ssh-copy-id ula@192.168.0.152 4ssh-copy-id ula@192.168.0.225 5ssh-copy-id ula@192.168.0.233 6ssh-copy-id ula@192.168.0.131 7ssh-copy-id ula@192.168.0.241 æº–å‚™ Ansible Host æ¸…å–®\r1cp -rfp inventory/sample inventory/mycluster 2declare -a IPS=(192.168.0.48 192.168.0.152 192.168.0.225 192.168.0.233 192.168.0.131 192.168.0.241)CONFIG_FILE=inventory/mycluster/hosts.yaml python3 contrib/inventory_builder/inventory.py ${IPS[@]} ä¿®æ”¹æ¸…å–®ï¼Œè¨­ç½® master node åŠ worker node å„ 3 å€‹\n1vi inventory/mycluster/hosts.yaml ä¿®æ”¹ K8s éƒ¨ç½²è®Šæ•¸\r1vi inventory/mycluster/group_vars/k8s_cluster/k8s-cluster.yml ä¸»è¦ä¿®æ”¹ä»¥ä¸‹é¸é …ï¼š\n1kube_version: v1.29.2 2kube_network_plugin: calico # default 3kube_pods_subnet: 10.233.64.0/18 # default 4kube_service_addresses: 10.233.0.0/18 # default ä¿®æ”¹å®‰è£å¥—ä»¶\r1vi inventory/mycluster/group_vars/k8s_cluster/addons.yml ä¸»è¦é–‹å•Ÿä»¥ä¸‹åŠŸèƒ½\n1helm_enabled: true 2dashboard_enabled: true 3ingress_nginx_enabled: true 4ingress_nginx_host_network: true é…ç½® Ansible é ç«¯ç¯€é»\rè¨­å®šè¦ ssh é ç«¯åŸ·è¡Œçš„å¸³è™Ÿå…å¯†ç¢¼ä½¿ç”¨ sudo\n1echo \u0026#34;ula ALL=(ALL) NOPASSWD:ALL\u0026#34; | sudo tee /etc/sudoers.d/ula k8s äº‹å‰ç’°å¢ƒè¨­å®š\rå›åˆ° Ansible æ§åˆ¶ç¯€é»ï¼Œé€éé ç«¯åŸ·è¡Œä¸€æ¬¡è™•ç† Kubernetes å®‰è£å‰çš„ç’°å¢ƒåŸºæœ¬è¨­å®šã€‚\n1cd kubespray 2 3# ç¦ç”¨é˜²ç«ç‰† 4ansible all -i inventory/mycluster/hosts.yaml -m shell -a \u0026#34;sudo systemctl stop firewalld \u0026amp;\u0026amp; sudo systemctl disable firewalld\u0026#34; 5 6# ç¦ç”¨ IPv4 è½‰ç™¼ 7ansible all -i inventory/mycluster/hosts.yaml -m shell -a \u0026#34;echo \u0026#39;net.ipv4.ip_forward=1\u0026#39; | sudo tee -a /etc/sysctl.conf\u0026#34; 8 9# ç¦ç”¨ swap 10ansible all -i inventory/mycluster/hosts.yaml -m shell -a \u0026#34;sudo sed -i \u0026#39;/ swap / s/^\\(.*\\)$/#\\1/g\u0026#39; /etc/fstab \u0026amp;\u0026amp; sudo swapoff -a\u0026#34; é–‹å§‹éƒ¨ç½²\r1ansible-playbook -i inventory/mycluster/hosts.yaml --become --become-user=root cluster.yml å®Œæˆå¾ŒæŸ¥çœ‹åŸ·è¡Œçµæœæ˜¯å¦æˆåŠŸã€‚ æ“ä½œé›†ç¾¤\rç™»å…¥ç¬¬ä¸€å€‹ master nodeï¼Œåˆ‡æ›åˆ° rootï¼Œå°±å¯ä»¥é€é kubectl å‘½ä»¤æ“ä½œé›†ç¾¤äº†!\n1sudo su - 2kubectl get nodes Reference\rhttps://linux.cn/article-15675-1.html\r","date":"2024-03-23T16:45:00+08:00","updated":"2024-03-23T16:45:00+08:00"},{"objectID":"1711183380","permalink":"/post/kafka-debezium-timezone/","title":"[Kafka] Debezium CDC å¯«å…¥åˆ° Kafka å¾Œçš„æ™‚é–“æ¬„ä½ä¸¦é UTC çš„å•é¡Œ","content":"å•é¡Œ\rè³‡æ–™åº«ä½¿ç”¨ +8 çš„æ™‚é–“å¯«å…¥ç„¡æ™‚å€çš„è³‡æ–™æ¬„ä½ï¼Œé€é Debezium CDC é€åˆ° kafka å¾Œï¼Œæœƒç›´æ¥æŠŠè©²æ™‚é–“è½‰æˆ timestamp æ ¼å¼ï¼Œä½†å»ä¸æ˜¯ä½¿ç”¨ UTC+0 çš„æ™‚é–“è¨˜éŒ„ã€‚\nå¯«å…¥è³‡æ–™å¦‚ä¸‹ï¼Œ OPERATION_DATE æ¬„ä½çš„è³‡æ–™ç‚º DATEï¼Œä»¥ UTC+8 æ™‚é–“ç›´æ¥ç´€éŒ„ã€‚\nç¶“ç”± Debezium Kafka Connector è’é›† CDC è³‡è¨Šå¾Œï¼Œå¯«å…¥åˆ° Kafka çš„è³‡æ–™å¦‚ä¸‹ï¼Œæœƒå°‡æ™‚é–“è½‰æˆ timestamp çš„å½¢å¼ã€‚\nå› ç‚º epoch é€šå¸¸æ˜¯æŒ‡ UTC+0 çš„æ¨™æº–æ™‚é–“ï¼Œæ‰€ä»¥å¦‚æœå°‡ 1702380652000 æ›æˆ date string ç™¼ç¾åˆ°è©² timestamp æ˜¯ +8 å¾Œçš„æ™‚é–“ã€‚\nè§£æ±ºæ–¹æ³•\rç›®å‰åœ¨ kafka connector ä¸­æ‰¾ä¸åˆ°è¨­å®šé …å¯ä»¥è½‰æ›ã€‚æ‰€ä»¥éœ€è¦é€éå…¶ä»– streaming process engine è™•ç†ï¼Œä¾‹å¦‚ flink æˆ– KSQLDBã€‚\n","date":"2024-03-23T08:43:00+00:00","updated":"2024-03-23T08:43:00+00:00"},{"objectID":"1711179240","permalink":"/post/single-kong-gw-deploy-by-docker-compose/","title":"[kong] Single Gateway and Konga Deployment by Docker Compose","content":"TL; DR\rKong æœ‰ä¸åŒéƒ¨ç½²æ¶æ§‹ï¼Œæœ¬æ–‡åƒ…ç¤ºç¯„å–®ä¸€çš„ kong gateway ç¯€é»ä½¿ç”¨ Docker Compose çš„å®‰è£æ–¹å¼ï¼ŒåŒ…å« kong Gatewayã€PostgreSQL ä»¥åŠç¬¬ä¸‰æ–¹é–‹æº Kong GUI Kongaã€‚\nNote\nKonga æ˜¯ä¸€å€‹éå®˜æ–¹çš„ç¬¬ä¸‰æ–¹é–‹æºçš„ kong åœ–å½¢åŒ–ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨ Node.js é–‹ç™¼ï¼Œä¸ééš¨è‘— Kong Gateway ç‰ˆæœ¬çš„æ›´æ–°ï¼Œè¨±å¤šä¸‰æ–¹é–‹æºç®¡ç†é¢æ¿éƒ½ç¼ºä¹åŠæ™‚ç¶­è­·è€Œç„¡æ³•ä½¿ç”¨äº†ã€‚ä¹‹å¾Œå»ºè­°ç›´æ¥ä½¿ç”¨ Kong Gateway OSS åœ¨ 2023 é–‹æºçš„å®˜æ–¹ç®¡ç†ç•Œé¢ Kong Managerã€‚\nDocker Compose YAML\r1version: \u0026#34;3.7\u0026#34; 2 3volumes: 4 kong_data: {} 5 6networks: 7 kong-net: 8 9services: 10 11 ####################################### 12 # Postgres: The database used by Kong 13 ####################################### 14 kong-database: 15 image: postgres:10 16 container_name: kong-postgres 17 restart: on-failure 18 networks: 19 - kong-net 20 volumes: 21 - kong_data:/var/lib/postgresql/data 22 environment: 23 POSTGRES_USER: kong 24 POSTGRES_PASSWORD: ${KONG_PG_PASSWORD:-kong} 25 POSTGRES_DB: kong 26 ports: 27 - \u0026#34;5432:5432\u0026#34; 28 healthcheck: 29 test: [\u0026#34;CMD\u0026#34;, \u0026#34;pg_isready\u0026#34;, \u0026#34;-U\u0026#34;, \u0026#34;kong\u0026#34;] 30 interval: 30s 31 timeout: 30s 32 retries: 3 33 34 ####################################### 35 # Kong database migration 36 ####################################### 37 kong-migration: 38 image: ${KONG_DOCKER_TAG:-kong:latest} 39 command: kong migrations bootstrap 40 networks: 41 - kong-net 42 restart: on-failure 43 environment: 44 KONG_DATABASE: postgres 45 KONG_PG_HOST: kong-database 46 KONG_PG_DATABASE: kong 47 KONG_PG_USER: kong 48 KONG_PG_PASSWORD: ${KONG_PG_PASSWORD:-kong} 49 depends_on: 50 - kong-database 51 52 ####################################### 53 # Kong: The API Gateway 54 ####################################### 55 kong: 56 image: ${KONG_DOCKER_TAG:-kong:latest} 57 restart: on-failure 58 networks: 59 - kong-net 60 environment: 61 KONG_DATABASE: postgres 62 KONG_PG_HOST: kong-database 63 KONG_PG_DATABASE: kong 64 KONG_PG_USER: kong 65 KONG_PG_PASSWORD: ${KONG_PG_PASSWORD:-kong} 66 KONG_PROXY_LISTEN: 0.0.0.0:8000, 0.0.0.0:8443 ssl 67 # KONG_PROXY_LISTEN_SSL: 0.0.0.0:8443 68 KONG_ADMIN_LISTEN: 0.0.0.0:8001 69 depends_on: 70 - kong-database 71 healthcheck: 72 test: [\u0026#34;CMD\u0026#34;, \u0026#34;kong\u0026#34;, \u0026#34;health\u0026#34;] 73 interval: 10s 74 timeout: 10s 75 retries: 10 76 ports: 77 - \u0026#34;8000:8000\u0026#34; 78 - \u0026#34;8001:8001\u0026#34; 79 - \u0026#34;8443:8443\u0026#34; 80 - \u0026#34;8444:8444\u0026#34; 81 82 ####################################### 83 # Konga database prepare 84 ####################################### 85 konga-prepare: 86 image: pantsel/konga:latest 87 command: \u0026#34;-c prepare -a postgres -u postgresql://kong:${KONG_PG_PASSWORD:-kong}@kong-database:5432/konga\u0026#34; 88 networks: 89 - kong-net 90 restart: on-failure 91 depends_on: 92 - kong-database 93 94 ####################################### 95 # Konga: Kong GUI 96 ####################################### 97 konga: 98 image: pantsel/konga:latest 99 restart: always 100 networks: 101 - kong-net 102 environment: 103 DB_ADAPTER: postgres 104 DB_URI: postgresql://kong:${KONG_PG_PASSWORD:-kong}@kong-database:5432/konga 105 NODE_ENV: production 106 depends_on: 107 - kong-database 108 ports: 109 - \u0026#34;1337:1337\u0026#34; ","date":"2024-03-23T07:34:00+00:00","updated":"2024-03-23T07:34:00+00:00"},{"objectID":"1710644625","permalink":"/post/devops-kong-intro/","title":"[kong] Research ç­†è¨˜","content":"TL; DR\ræœ¬ç¯‡æ˜¯åœ¨ç ”ç©¶ Kong æ™‚æ‰€è¨˜éŒ„çš„ç­†è¨˜ã€‚\nåŸºæœ¬æ¦‚å¿µ\rWhy we need API Gateway\råœ¨èˆŠçš„æœå‹™æ²»ç†é«”ç³»ä¹‹ä¸‹ï¼Œæ¬Šé™ç®¡ç†ã€é™æµã€æ—¥èªŒã€ç›£æ§ç­‰é€šç”¨åŠŸèƒ½éœ€è¦åœ¨æ¯å€‹æœå‹™ä¸­å–®ç¨å¯¦ç¾ï¼Œé€™ä½¿å¾—ç³»çµ±ç¶­è­·è€…ç„¡æ³•çµ±ä¸€ç®¡ç†é€™äº›åŠŸèƒ½ï¼Œç¼ºä¹å…¨å±€è¦–åœ–ã€‚ä¸åŒèªè¨€å¯¦ç¾çš„æ–¹å¼å¯èƒ½å„ç•°ï¼Œå°è‡´ code base è¤‡é›œï¼Œéš¨è‘—æœå‹™æ•¸é‡å¢åŠ ï¼Œç¶­é‹ä¹Ÿè®Šå¾—æ›´åŠ è¤‡é›œã€‚ç„¶è€Œï¼Œæœ‰äº† API Gateway å¾Œï¼Œå¾Œç«¯å°±èƒ½å°ˆæ³¨æ–¼å•†æ¥­é‚è¼¯çš„é–‹ç™¼ã€‚\nKong Architecture\rkong æ˜¯ä¸€å€‹åŸºæ–¼ nginx + openresty çš„ api ç¶²é—œ\nNginx æä¾›åå‘ä»£ç†æœå‹™ï¼›OpenResty åœ¨ nginx çš„åŸºç¤ä¸Šå¢åŠ äº† Lua è…³æœ¬çš„éˆæ´»æ€§ï¼Œå…è¨±é–‹ç™¼è€…è‡ªå®šç¾©é«˜æ€§èƒ½çš„ Web æœå‹™ï¼›Kong å‰‡æ˜¯å°ˆæ³¨æ–¼ API ç®¡ç†ï¼Œæä¾›äº†ä¸€å€‹åœ¨ Nginx å’Œ OpenResty åŸºç¤ä¸Šæ›´é«˜å±¤æ¬¡çš„ã€æ˜“æ–¼ä½¿ç”¨çš„ API ç®¡ç†å·¥å…·ã€‚Kong çš„é‹ä½œä¾è³´æ–¼ Nginx å’Œ OpenResty çš„é«˜æ€§èƒ½å’Œéˆæ´»æ€§ï¼Œé€²è€Œæä¾› API ç®¡ç†å’Œå¾®æœå‹™æ²»ç†çš„è§£æ±ºæ–¹æ¡ˆã€‚ èƒŒå¾Œéœ€è¦ database (postgres/cassendra) å„²å­˜ API ä»¥åŠè·¯ç”±è¨­å®š å¯ä»¥é€é plugin å°æ¯å€‹è·¯ç”±å–®ç¨è¨­å®šå¦‚ cacheã€logging çš„åŠŸèƒ½ æä¾› admin api å¯å°å…§éƒ¨æ‰€æœ‰å…ƒä»¶é€²è¡Œç®¡ç† (é€é API å°‡ plugin æ”¾åˆ° service ä¸Šé¢) Kong å…ƒä»¶èªªæ˜\rservice\nä»£è¡¨å¤–éƒ¨ä¸‹æ¸¸ API æˆ–å¾®æœå‹™çš„ Kong å¯¦é«”ï¼Œå¯ä»¥ç”¨ä¾†æŒ‡å‘ç‰¹å®šå¯¦é«”æœå‹™ï¼ˆtargetï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å‘ upstream ç”¨ä¾†å¯¦ç¾å¯¦é«”æœå‹™çš„è² è¼‰æ•ˆæœã€‚ä¸€å€‹ service å°æ–¼upstreamã€target éƒ½æ˜¯ä¸€å°ä¸€çš„é—œä¿‚ã€‚\nroute\nå°‡ä¸Šæ¸¸è«‹æ±‚å°æ‡‰åˆ°ä¸‹æ¸¸æœå‹™çš„æ–¹å¼çš„ Kong å¯¦é«”ï¼Œè·¯ç”±åŒ¹é…å®¢æˆ¶ç«¯çš„è«‹æ±‚è¦å‰‡ã€‚åŒ¹é…æˆåŠŸå¾Œåˆ†é…åˆ° service å±¤ã€‚ä¸€å€‹è·¯ç”±æŒ‡å‘ä¸€å€‹ serviceï¼Œä¸€å€‹ service å¯ä»¥è¢«å¤šå€‹ä¸é€šè¦å‰‡çš„è·¯ç”± routes æŒ‡å‘\nupstream\nç”¨æ–¼å¯¦ä½œ kong çš„è² è¼‰åŠŸèƒ½ï¼Œä¸€å€‹ service åŒ¹é…åˆ°ä¸€å€‹ upstream å¾Œï¼Œupstream å¯ä»¥æŒ‡å‘å¤šå€‹target æœå‹™ä»¥æ­¤ä¾†å¯¦ç¾è² è¼‰çš„æ•ˆæœã€‚ target æœå‹™ç«¯æŒ‡çš„å°±æ˜¯æœ€å¾Œçš„å¯¦é«”æœå‹™ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„è™›æ“¬æœå‹™ã€‚å¦‚æœä¸è€ƒæ…®è² è¼‰å¹³è¡¡ï¼Œå¯ä»¥ â€¦","date":"2024-03-17T11:03:45+08:00","updated":"2024-03-17T11:03:45+08:00"},{"objectID":"1710607440","permalink":"/post/single-kong-gw-deploy-on-kubernetes/","title":"[kong] Single Gateway Deployment on Kubernetes","content":"TL; DR\rKong æœ‰ä¸åŒéƒ¨ç½²æ¶æ§‹ï¼Œæœ¬æ–‡åƒ…ç¤ºç¯„å–®ä¸€çš„ kong gateway ç¯€é»åœ¨ Kubernetes ä¸Šçš„å®‰è£æ–¹å¼ã€‚é€éå®˜æ–¹çš„ helm chart éƒ¨ç½²ï¼ŒåŒ…å« kong adminã€ kong proxy ä»¥åŠåŸç”Ÿçš„ Kong Admin UI - Kong Managerã€‚\nå®‰è£æ­¥é©Ÿ\rå»ºç«‹ namesapce 1kubectl create ns kong å»ºç«‹ postgresql database 1# postgre-values.yaml 2image: 3 tag: 10.23.0 # 11 ç‰ˆå¾Œ kong ä¸ç›¸å®¹ 4global: 5 storageClass: \u0026#34;rook-ceph-block\u0026#34; 6 postgresql: 7 auth: 8 postgresPassword: \u0026#34;kong\u0026#34; 9 username: \u0026#34;kong\u0026#34; 10 password: \u0026#34;kong\u0026#34; 11 database: \u0026#34;kong\u0026#34; 1helm install kong-pg -f postgre-values.yaml bitnami/postgresql -n kong å»ºç«‹ kong (å« kong gateway \u0026amp; kong manager) ä¸»è¦ä¿®æ”¹ kong-values.yaml çš„é …ç›®å¦‚ä¸‹ï¼š\nè¨­å®šå¤–éƒ¨ PostgreSQL Database é—œé–‰ Ingress Controllerï¼Œå¦‚æœè¦å»ºç«‹ ingress è³‡æºï¼Œçµ±ä¸€ä½¿ç”¨ Ingress Nginx Controller é—œé–‰æ‰€æœ‰é–‹å•Ÿçš„æœå‹™çš„ https portï¼Œçµ±ä¸€ä½¿ç”¨ httpï¼Œä¸¦é€é Ingress åŠ ä¸ŠåŸå…ˆå·²å­˜åœ¨çš„ Cert-Manager Certificate æš´éœ²æœå‹™ 1# kong-values.yaml 2env: 3 database: \u0026#34;postgres\u0026#34; 4 pg_host: \u0026#34;kong-pg-postgresql.kong.svc.cluster.local\u0026#34; 5 pg_port: 5432 6 pg_user: kong 7 pg_password: kong 8 pg_database: kong 9 10# ä¸­é–“ç•¥ 11 12admin: 13 enabled: true 14 type: ClusterIP 15 loadBalancerClass: 16 annotations: {} 17 labels: {} 18 http: 19 enabled: true 20 servicePort: 8001 21 containerPort: 8001 22 parameters: [] 23 tls: 24 enabled: false 25 servicePort: 8444 26 containerPort: 8444 27 parameters: 28 - http2 29 client: 30 caBundle: \u0026#34;\u0026#34; 31 secretName: \u0026#34;\u0026#34; 32 ingress: 33 enabled: true 34 ingressClassName: nginx 35 # TLS secret name. 36 tls: domain-cert-sdsp-stg.com-prod 37 # Ingress hostname 38 hostname: kong-admin.sdsp-stg.com 39 annotations: {} 40 # Ingress path. 41 path: / 42 pathType: ImplementationSpecific 43 44# ä¸­é–“ç•¥ 45 46proxy: 47 enabled: true 48 type: ClusterIP 49 loadBalancerClass: 50 nameOverride: \u0026#34;\u0026#34; 51 annotations: {} 52 labels: 53 enable-metrics: \u0026#34;true\u0026#34; 54 http: 55 enabled: true 56 servicePort: 80 57 containerPort: 8000 58 parameters: [] 59 tls: 60 enabled: false 61 servicePort: 443 62 containerPort: 8443 63 parameters: 64 - http2 65 appProtocol: \u0026#34;\u0026#34; 66 stream: [] 67 ingress: 68 enabled: true 69 ingressClassName: nginx 70 annotations: {} 71 labels: {} 72 hostname: kong.sdsp-stg.com 73 path: / 74 pathType: ImplementationSpecific 75 hosts: [] 76 # TLS secret(s) 77 tls: domain-cert-sdsp-stg.com-prod 78 79# ä¸­é–“ç•¥ 80 81ingressController: 82 enabled: false 83 84# ä¸­é–“ç•¥ 85 86manager: 87 enabled: true 88 type: ClusterIP 89 loadBalancerClass: 90 annotations: {} 91 labels: {} 92 http: 93 enabled: true 94 servicePort: 8002 95 containerPort: 8002 96 parameters: [] 97 tls: 98 enabled: false 99 servicePort: 8445 100 containerPort: 8445 101 parameters: 102 - http2 103 ingress: 104 enabled: true 105 ingressClassName: nginx 106 tls: domain-cert-sdsp-stg.com-prod 107 hostname: kong-manager.sdsp-stg.com 108 annotations: {} 109 path: / 110 pathType: ImplementationSpecific 1helm repo add kong https://charts.konghq.com 2helm install kong-dev -f kong-values.yaml kong/kong -n kong ","date":"2024-03-16T16:44:00+00:00","updated":"2024-03-16T16:44:00+00:00"},{"objectID":"1710599700","permalink":"/post/kafka-connect-debezium-oracle-do-not-contain-offset-error/","title":"[Kafka] Debezium Oracle Connect: Online REDO LOG files or archive log files do not contain the offset","content":"å•é¡Œ\rDebezium Oracle sink connector è·‘äº†ä¸€æ®µæ™‚é–“å¾Œç™¼ç”Ÿä»¥ä¸‹éŒ¯èª¤ï¼š\n1ERROR Mining session stopped due to the {} (io.debezium.connector.oracle.logminer.LogMinerHelper) 2io.debezium.DebeziumException: Online REDO LOG files or archive log files do not contain the offset scn 7470041329489. Please perform a new snapshot. è§£æ±º\ræ–¹æ³•åƒè€ƒ\rå®˜ç¶²\rï¼Œæ­¥é©Ÿå¦‚ä¸‹ï¼š\næŸ¥çœ‹ç›®å‰ storage offset çš„ topic 1kafkacat -b 172.22.51.207:8093,172.22.51.207:8094,172.22.51.207:8095 -C -t hq_connect_offsets -f \u0026#39;Partition(%p) %k %s\\n\u0026#39; pause / stop the connector\nåˆªé™¤ offset\n1echo \u0026#39;[\u0026#34;source-mes-to-kafka-initial\u0026#34;,{\u0026#34;server\u0026#34;:\u0026#34;MES-INFO\u0026#34;}]|\u0026#39; | kafkacat -P -Z -b 172.22.51.207:8093,172.22.51.207:8094,172.22.51.207:8095 -t hq_connect_offsets -K \\| -p 3 é‡å•Ÿ kafka connect (resume \u0026amp; restart task)ï¼Œå°±æ­£å¸¸äº†ã€‚ å„ªåŒ–\rè§€å¯Ÿä¸€é™£å­å¾Œç™¼ç¾ä½¿ç”¨ schema_mode = initial çš„ kafka debezium oracle source connectorï¼Œè¼ƒå¸¸ç™¼ç”Ÿé€™å€‹éŒ¯èª¤ï¼Œæ¨æ¸¬å› ç‚º offset ç´€éŒ„çš„ SCN è¶…éå…©å¤©çš„ä¿å­˜æœŸé™è€Œè®€å–ä¸åˆ°ä¸‹ä¸€å€‹ç´€éŒ„é»å°è‡´ connector failedã€‚åƒè€ƒ\rå®˜ç¶² low-change-frequency-offset-management\rï¼Œé ˆå°‡ heartbeat.interval.ms è¨­å®šé …å•Ÿç”¨ï¼Œç›®å‰ç‚ºäº”åˆ†é˜ sync ä¸€æ¬¡ã€‚\n","date":"2024-03-16T14:35:00+00:00","updated":"2024-03-16T14:35:00+00:00"},{"objectID":"1710599400","permalink":"/post/kafka-implement-mixed-image/","title":"[Kafka] å¯¦ä½œ Confluent + Debezium é€šç”¨ Image","content":"TL; DR\rå› ç‚ºåœ¨å¯¦ä½œ kafka connect æ™‚ï¼Œå¸¸å¸¸æœƒéœ€è¦ç”¨åˆ°ä¾†è‡ªæ–¼ Confluent ä»¥åŠ Debezium å…©å€‹é–‹æºçš„ connect é¡åƒï¼Œä½†æ¯æ¬¡éƒ½è¦æ ¹æ“šç•¶ä¸‹éœ€æ±‚è€Œéƒ¨ç½²ä¸åŒ image çš„ containerï¼Œæ•…å°±æ‰“ç®—å°‡å…©å€‹ image æ•´åˆã€‚\nDockerfile\ré€™å€‹ image æ•´åˆäº†ä»¥ä¸‹ Libraryï¼š\nOracle JDBC Driver for Debezium Kafka Connect JDBC for Debezium ConluentHub ElasticSearch sink ConfluentHub MongoDB source and sink 1FROM debezium/connect:2.4 2 3ENV KAFKA_CONNECT_JDBC_DIR=$KAFKA_CONNECT_PLUGINS_DIR/kafka-connect-jdbc \\ 4 KAFKA_JDBC_VERSION=10.7.4 \\ 5 POSTGRES_VERSION=42.6.0 \\ 6 ES_SINK_VERSION=14.0.11 \\ 7\tMONGO_SOSI_VERSION=1.11.0 8 9### Deploy Oracle JDBC Driver 10ENV MAVEN_DEP_DESTINATION=$KAFKA_HOME/libs \\ 11 ORACLE_JDBC_REPO=com/oracle/database/jdbc \\ 12 ORACLE_JDBC_GROUP=ojdbc8 \\ 13 ORACLE_JDBC_VERSION=21.6.0.0 \\ 14 ORACLE_JDBC_MD5=312e6f4ec9932bbf74a4461669970c4b 15 16RUN docker-maven-download central \u0026#34;$ORACLE_JDBC_REPO\u0026#34; \u0026#34;$ORACLE_JDBC_GROUP\u0026#34; \u0026#34;$ORACLE_JDBC_VERSION\u0026#34; \u0026#34;$ORACLE_JDBC_MD5\u0026#34; 17 18### Deploy PostgreSQL JDBC Driver 19RUN cd /kafka/libs \u0026amp;\u0026amp; curl -sO https://jdbc.postgresql.org/download/postgresql-$POSTGRES_VERSION.jar 20 21### Deploy Kafka Connect JDBC 22RUN mkdir $KAFKA_CONNECT_JDBC_DIR \u0026amp;\u0026amp; cd $KAFKA_CONNECT_JDBC_DIR \u0026amp;\u0026amp;\\ 23 curl -sO https://packages.confluent.io/maven/io/confluent/kafka-connect-jdbc/$KAFKA_JDBC_VERSION/kafka-connect-jdbc-$KAFKA_JDBC_VERSION.jar 24 25### Install Confluent Hub Client 26ENV PATH=/kafka/confluent-hub-client/bin:$PATH 27 28RUN mkdir -p $KAFKA_HOME/confluent-hub-client \u0026amp;\u0026amp; cd $KAFKA_HOME/confluent-hub-client \u0026amp;\u0026amp;\\ 29 curl -L -O http://client.hub.confluent.io/confluent-hub-client-latest.tar.gz \u0026amp;\u0026amp;\\ 30 tar zxvf confluent-hub-client-latest.tar.gz -C $KAFKA_HOME/confluent-hub-client \u0026amp;\u0026amp;\\ 31 rm -f confluent-hub-client-latest.tar.gz 32 33COPY --chmod=777 for-confluent-hub-install.properties $KAFKA_HOME/config/for-confluent-hub-install.properties 34 35### Install ElasticSearch sink 36RUN confluent-hub install --no-prompt confluentinc/kafka-connect-elasticsearch:$ES_SINK_VERSION --component-dir $KAFKA_CONNECT_PLUGINS_DIR --worker-configs $KAFKA_HOME/config/for-confluent-hub-install.properties 37 38### Install MongoDB source and sink 39RUN confluent-hub install --no-prompt mongodb/kafka-connect-mongodb:$MONGO_SOSI_VERSION --component-dir $KAFKA_CONNECT_PLUGINS_DIR --worker-configs $KAFKA_HOME/config/for-confluent-hub-install.properties 40 41USER kafka å‘\rå…¶ä¸­ä½¿ç”¨ confluent-hub install command å®‰è£æ™‚ï¼Œéœ€è¦æŒ‡å®š --component-dir å®‰è£ plugin åˆ°æŒ‡å®šç›®éŒ„ï¼Œä»¥åŠ worker-configs æ­¤ç‚ºæŒ‡å®š connect properties çš„åƒæ•¸æª”ï¼Œæœƒå¹«å¿™æ›´æ–°åƒæ•¸æª”ä¸­çš„ plugin.path çš„å€¼ã€‚\næœ¬ä¾†ä½¿ç”¨é è¨­çš„é…ç½®æª” /kafka/config/connect-distributed.propertiesï¼Œä½†åœ¨ build çš„æ™‚å€™æœƒæœ‰ unknown error ã€‚\nç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œå°±å¯«äº†ä¸€å€‹å‡çš„ properties çµ¦ä»–æ›´æ–°ã€‚åæ­£ debezium connect image é è¨­é‚„æ˜¯æœƒä½¿ç”¨ /kafka/config/connect-distributed.properties è·‘ã€‚åªè¦ç¢ºä¿ confluent å®‰è£çš„ library --component-dir æ˜¯å®‰è£åœ¨é…ç½®æª”æŒ‡å®šçš„ /kafka/connect ä¸‹å³å¯ã€‚\n","date":"2024-03-16T14:30:00+00:00","updated":"2024-03-16T14:30:00+00:00"},{"objectID":"1710598200","permalink":"/post/kafka-cdc-column-type-err/","title":"[Kafka] CDC Connect Oracle -\u003e Postgres","content":"éŒ¯èª¤\rä½¿ç”¨ kafka connector éƒ¨ç½² postgresql çš„ sink connector æŠ“å– Oracle çš„ CDC è³‡æ–™æ™‚ï¼Œé‡åˆ° io.debezium.data.VariableScaleDecimalÂ (STRUCT)Â typeÂ doesn\u0026rsquo;tÂ haveÂ aÂ mappingÂ toÂ theÂ SQLÂ databaseÂ columnÂ type çš„éŒ¯èª¤ã€‚\n1Caused by: org.apache.kafka.connect.errors.ConnectException: io.debezium.data.VariableScaleDecimal (STRUCT) type doesn\u0026#39;t have a mapping to the SQL database column type 2 at io.confluent.connect.jdbc.dialect.GenericDatabaseDialect.getSqlType(GenericDatabaseDialect.java:1948) 3 at io.confluent.connect.jdbc.dialect.PostgreSqlDatabaseDialect.getSqlType(PostgreSqlDatabaseDialect.java:340) 4 at io.confluent.connect.jdbc.dialect.GenericDatabaseDialect.writeColumnSpec(GenericDatabaseDialect.java:1864) 5 at io.confluent.connect.jdbc.dialect.GenericDatabaseDialect.lambda$writeColumnsSpec$39(GenericDatabaseDialect.java:1853) 6 at io.confluent.connect.jdbc.util.ExpressionBuilder.append(ExpressionBuilder.java:560) 7 at io.confluent.connect.jdbc.util.ExpressionBuilder$BasicListBuilder.of(ExpressionBuilder.java:599) 8 at io.confluent.connect.jdbc.dialect.GenericDatabaseDialect.writeColumnsSpec(GenericDatabaseDialect.java:1855) 9 at io.confluent.connect.jdbc.dialect.GenericDatabaseDialect.buildCreateTableStatement(GenericDatabaseDialect.java:1772) 10 at io.confluent.connect.jdbc.sink.DbStructure.create(DbStructure.java:121) 11 at io.confluent.connect.jdbc.sink.DbStructure.createOrAmendIfNecessary(DbStructure.java:67) 12 at io.confluent.connect.jdbc.sink.BufferedRecords.add(BufferedRecords.java:122) 13 at io.confluent.connect.jdbc.sink.JdbcDbWriter.write(JdbcDbWriter.java:74) 14 at io.confluent.connect.jdbc.sink.JdbcSinkTask.put(JdbcSinkTask.java:90) 15 at org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:587) 16 ... 11 more è§£æ±º\råŸå› æ˜¯å› ç‚º postgresql æ²’è¾¦æ³•è™•ç†è³‡æ–™å‹æ…‹ï¼Œæ‰€ä»¥éœ€è¦åœ¨åœ¨ Oracle source connector æŒ‡å®š \u0026ldquo;decimal.handling.mode\u0026rdquo;:Â \u0026ldquo;double\u0026rdquo; æˆ–æ˜¯ \u0026ldquo;decimal.handling.mode\u0026rdquo;:Â \u0026ldquo;string\u0026rdquo; ä¾†è½‰æ›æ ¼å¼ã€‚\næŸ¥çœ‹åŸè¡¨ç™¼ç¾è¢«è®€æˆ VariableScaleDecimal çš„è³‡æ–™æ¬„ä½ ALERT_FLAG å¯¦éš›ä¸Šæ˜¯ NUMBER è³‡æ–™å‹æ…‹ï¼Œå°æ¯”å…¶ä»–æ­£å¸¸è¢«è®€å–æˆ int çš„æ¬„ä½ï¼Œå·®åˆ¥åœ¨æ–¼æ²’æœ‰å®šç¾©å›ºå®šç²¾ç¢ºåº¦å’Œé›¶ä½å°æ•¸ä½æ•¸ã€‚æ‰€ä»¥è¢«è™•ç†æˆ decimalã€‚\nåœ¨åŠ ä¸Šåƒæ•¸å¾Œï¼Œå¯ä»¥ç™¼ç¾é‡æ–°ä½ˆç½²çš„ connector æ”¶é€²ä¾†çš„è³‡æ–™å°±æ”¹è®ŠæˆæŒ‡å®šå‹æ…‹äº†ã€‚\nä¸éå› ç‚ºèˆŠçš„å¸¶æœ‰ decimal struct æ ¼å¼çš„è³‡æ–™é‚„æ˜¯å­˜åœ¨åœ¨ kafka topicï¼Œæ‰€ä»¥å¦‚æœå†é‡æ–°ä½ˆç½² postgresql sink connector çš„è©±ä»æœƒå› ç‚ºè®€åˆ°èˆŠçš„è³‡æ–™è€Œå¤±æ•—ï¼Œé™¤éç æ‰ topic é‡æ–°ä½ˆç½²ã€‚\nReference\rhttps://github.com/dursunkoc/kafka_connect_sample/tree/main\rhttps://github.com/pranav1699/debezium-kafka-cdc/blob/main/debezium-jdbc-es/Dockerfile\rhttps://medium.com/@parasharprasoon.950/how-to-set-up-cdc-with-kafka-debezium-and-postgres-70a907b8ca20\r","date":"2024-03-16T14:10:00+00:00","updated":"2024-03-16T14:10:00+00:00"},{"objectID":"1710598200","permalink":"/post/ksqldb-missing-data-debug/","title":"[Kafka] ksqlDB æµä¸»é¡Œç„¡éæ¿¾è³‡æ–™ï¼Œä½†å»è·Ÿæºä¸»é¡Œæœ‰æ•¸é‡è½å·®åŸå› æ’æŸ¥","content":"æˆ‘ä½¿ç”¨ ksqlDB å®£å‘Šäº†å…©å€‹ streamï¼Œç¬¬ä¸€å€‹ stream ç‚ºç¾æœ‰çš„ topic çš„æºè³‡æ–™æµï¼Œä¸¦é‡æ–°å®šç¾© kafka message çš„ event timeï¼Œå¦ä¸€å€‹æ˜¯åŸºæ–¼åŸç”Ÿè³‡æ–™æµæ´¾ç”Ÿçš„ streamï¼Œä¸»è¦åªå·®åœ¨æ›´æ”¹ partition æ•¸é‡ä»¥åˆ©å¾ŒçºŒè·Ÿå…¶ä»–ä¸åŒ partition æ•¸é‡çš„æµåš joinã€‚\n1-- å®šç¾©åŸç”Ÿæµçµ¦æºä¸»é¡Œ 2CREATE STREAM IF NOT EXISTS NODERED_CPPS ( 3 MACHINE_CODE STRING, 4 ts BIGINT, 5 asset_id STRING, 6 `values` STRING 7) WITH ( 8 CLEANUP_POLICY = \u0026#39;delete\u0026#39;, 9 KAFKA_TOPIC = \u0026#39;nodered-cpps\u0026#39;, 10 KEY_FORMAT = \u0026#39;JSON\u0026#39;, 11 VALUE_FORMAT = \u0026#39;JSON\u0026#39;, 12 TIMESTAMP = \u0026#39;TS\u0026#39; 13); 14 15-- æ–°å¢ä¸€æ¢æ´¾ç”Ÿæµï¼Œä½¿ç”¨ä¸€è‡´çš„ partition numberï¼Œæ‰å¯ä»¥è¢«ç›¸åŒ partition çš„ steam åš join 16CREATE STREAM IF NOT EXISTS NEW_NODERED_CPPS 17WITH ( 18\tKAFKA_TOPIC=\u0026#39;NEW_NODERED_CPPS\u0026#39;, 19\tPARTITIONS=6, 20\tREPLICAS=1, 21\tRETENTION_MS=864000000, 22\tKEY_FORMAT=\u0026#39;JSON\u0026#39;, 23\tVALUE_FORMAT=\u0026#39;JSON\u0026#39; 24) AS SELECT * FROM NODERED_CPPS EMIT CHANGES; æŒ‰ç…§æ­£å¸¸æƒ…æ³ä¾†èªªï¼Œå› ç‚ºæ´¾ç”Ÿæµæ²’æœ‰åšä»»ä½•éæ¿¾ï¼Œæœ€çµ‚çš„è¨Šæ¯æ•¸é‡æ‡‰è©²è¦è·ŸåŸç”Ÿçš„ topic ä¸€æ¨£ï¼Œä½†éƒ¨ç½²å¾Œå…©å¤©æŸ¥çœ‹å…©å€‹ topicï¼Œæ´¾ç”Ÿæµçš„è¨Šæ¯æ•´æ•´å°‘äº†åŸç”Ÿæµçš„ä¸‰åˆ†ä¹‹ä¸€ã€‚æŸ¥çœ‹ ksqlDB server çš„è¨Šæ¯å¾Œç™¼ç¾å•é¡Œå¦‚ä¸‹ï¼š\nè¶…é kafka client request size\rksqlDB server æ”¶åˆ°çš„éŒ¯èª¤è¨Šæ¯å¦‚ä¸‹ï¼š\n1[2024-01-26 01:00:47,941] INFO Restarting query CSAS_NEW_NODERED_CPPS_1343 thread _confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-2 (attempt #116) (io.confluent.ksql.util.QueryMetadataImpl:495) 2[2024-01-26 01:00:47,941] ERROR {\u0026#34;type\u0026#34;:4,\u0026#34;deserializationError\u0026#34;:null,\u0026#34;recordProcessingError\u0026#34;:null,\u0026#34;productionError\u0026#34;:null,\u0026#34;serializationError\u0026#34;:null,\u0026#34;kafkaStreamsThreadError\u0026#34;:{\u0026#34;errorMessage\u0026#34;:\u0026#34;Unhandled exception caught in streams thread\u0026#34;,\u0026#34;threadName\u0026#34;:\u0026#34;_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-2\u0026#34;,\u0026#34;cause\u0026#34;:[\u0026#34;Error encountered sending record to topic NEW_NODERED_CPPS for task 0_2 due to:\\norg.apache.kafka.common.errors.RecordTooLargeException: The message is 1183085 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration.\\nException handler choose to FAIL the processing, no more records would be sent.\u0026#34;,\u0026#34;The message is 1183085 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration.\u0026#34;]}} (processing.CSAS_NEW_NODERED_CPPS_1343.ksql.logger.thread.exception.uncaught:44) 3[2024-01-26 01:00:47,941] ERROR stream-client [_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54] Replacing thread in the streams uncaught exception handler (org.apache.kafka.streams.KafkaStreams:530) 4org.apache.kafka.streams.errors.StreamsException: Error encountered sending record to topic NEW_NODERED_CPPS for task 0_2 due to: 5org.apache.kafka.common.errors.RecordTooLargeException: The message is 1183085 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration. 6Exception handler choose to FAIL the processing, no more records would be sent. 7\tat org.apache.kafka.streams.processor.internals.RecordCollectorImpl.recordSendError(RecordCollectorImpl.java:284) 8\tat org.apache.kafka.streams.processor.internals.RecordCollectorImpl.lambda$send$1(RecordCollectorImpl.java:254) 9\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1077) 10... 11Caused by: org.apache.kafka.common.errors.RecordTooLargeException: The message is 1183085 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration. 12[2024-01-26 01:00:47,941] INFO stream-thread [_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-2] Informed to shut down (org.apache.kafka.streams.processor.internals.StreamThread:1168) 13[2024-01-26 01:00:47,941] INFO stream-thread [_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-2] State transition from RUNNING to PENDING_SHUTDOWN (org.apache.kafka.streams.processor.internals.StreamThread:239) 14[2024-01-26 01:00:47,941] INFO stream-client [_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54] Adding StreamThread-3, there will now be 4 live threads and the new cache size per thread is 2500000 (org.apache.kafka.streams.KafkaStreams:1029) 15[2024-01-26 01:00:47,941] INFO stream-thread [_confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-3] Creating restore consumer client (org.apache.kafka.streams.processor.internals.StreamThread:356) 16[2024-01-26 01:00:47,942] INFO ConsumerConfig values: 17\tallow.auto.create.topics = true 18\tauto.commit.interval.ms = 5000 19\tauto.include.jmx.reporter = true 20\tauto.offset.reset = none 21\tbootstrap.servers = [kafka-headless.platform.svc.cluster.local:9093] 22\tcheck.crcs = true 23\tclient.dns.lookup = use_all_dns_ips 24\tclient.id = _confluent-ksql-ksql_dev_ops_query_CSAS_NEW_NODERED_CPPS_1343-8ae61fa4-f6d2-4b36-ba53-7cd24fd34c54-StreamThread-3-restore-consumer 25\t.... åŸä¾†æ˜¯å–®ç­†è¨Šæ¯è¶…é Kafka Producer çš„æŒ‡å®šå¤§å°ï¼ŒProducer èƒ½ç™¼é€è¨Šæ¯çš„æœ€å¤§å€¼é è¨­ç‚º1048576Bï¼Œ1 MBã€‚åœ¨è§¸ç™¼éŒ¯èª¤çš„æ™‚å€™æœƒé‡å•Ÿ Kafka clientï¼Œä¹Ÿå°±æ˜¯ ksqlDB çš„ CTASã€‚å°è‡´è¨Šæ¯éºå¤±çš„ä¹Ÿä¸åƒ…åƒ…æ˜¯è¨Šæ¯éå¤§çš„é€™æ¢ï¼Œè€Œæ˜¯ç”¢ç”ŸéŒ¯èª¤å¾Œçš„åˆ° client å¾©åŸæ™‚ä¸­é–“çš„å¥½å¹¾ç­†è³‡æ–™!!!\nä¿®æ”¹ KSQLDB åƒæ•¸\rproducer æŒ‡å®šè¨Šæ¯å¤§å°çš„åƒæ•¸ç‚º max.request.size ï¼Œè¦æ³¨æ„çš„æ˜¯è©²åƒæ•¸æ¶‰åŠ broker ç«¯çš„ message.max.bytes åƒæ•¸çš„è¯å‹•ï¼Œå¦‚æœ broker çš„ message.max.bytes åƒæ•¸è¨­å®šç‚º 10 MBï¼Œè€Œ max.request.size è¨­å®šç‚º 20 MBï¼Œç•¶å‚³é€ä¸€æ¢å¤§å°ç‚º 15 MB çš„è¨Šæ¯æ™‚ï¼Œproducer é‚„æ˜¯æœƒå ±éŒ¯ã€‚å› æ­¤éœ€è¦é€£å‹•ä¿®æ”¹å…©å€‹åƒæ•¸ï¼Œä»¥é˜²éŒ¯èª¤ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\nmessage.max.bytes ï¼ˆåœ¨brokerç«¯ä¿®æ”¹ï¼‰ max.request.size ï¼ˆåœ¨å®¢æˆ¶ç«¯ä¿®æ”¹ï¼‰ é‚£ ksqlDB æœ‰é—œ stream çš„è¨Šæ¯å¤§å°çš„åƒæ•¸ç‚º ksql.streams.producer.max.request.sizeï¼Œçœ‹æ˜¯ä½¿ç”¨å“ªç¨®æ–¹å¼éƒ¨ç½²ï¼Œæ›´æ–°è©²åƒæ•¸åˆ° ksqlDB çš„ properties æª”æ¡ˆï¼Œèª¿æ•´å®Œ size ä¹‹å¾Œå°±æˆåŠŸäº†!!!!!!!!!!!!!!! è®š\n","date":"2024-03-16T14:10:00+00:00","updated":"2024-03-16T14:10:00+00:00"},{"objectID":"1710591000","permalink":"/post/vmware-clone-vm-same-ip/","title":"[VM] è§£æ±º VMWare Workstation Clone VM å¾Œå–å¾—ç›¸åŒ IP","content":"å•é¡Œ\råœ¨ VMware Workstation Pro 17 è¤‡è£½ VM å¾Œé–‹æ©Ÿç™¼ç¾æ¯å° VM éƒ½æ‹¿åˆ°åŒæ¨£çš„ IPï¼Œè€Œä¸”æ”¹äº† MAC åœ¨é‡å•Ÿ VM é‚„æ˜¯ä¸€æ¨£ã€‚\nè§£æ±º\rä¿®æ”¹ MAC Address\råœ¨ VMware Workstation ä¸­ï¼Œæ‰¾åˆ° cloned VMï¼Œä¸¦å³éµé»æ“Šå®ƒã€‚ åœ¨Â Edit Virtual Machine SettingsÂ å°è©±æ–¹å¡Šä¸­ï¼Œé¸æ“‡Â Network Adapterã€‚ åœ¨Â MAC AddressÂ æ¬„ä½ä¸­ï¼Œé»é¸ Generate é‡æ–°é…ç™¼æ–°çš„ MACã€‚ é»æ“ŠÂ OKÂ å„²å­˜è¨­å®šã€‚ å•Ÿå‹• cloned VMã€‚ ä¿®æ”¹ netplan\rsudo vi /etc/netplan/00-installer-config.yaml\n1network: 2 ethernets: 3 ens33: 4 dhcp4: true 5 dhcp-identifier: mac # åŠ ä¸Šé€™ä¸€è¡Œ 6 version: 2 sudo netplan apply\né‡æ–°æŸ¥çœ‹ IP ip addr ä¾¿æˆåŠŸäº†\nReference\rhttps://zido.site/blog/2021-07-27-ubuntu-clone-vm-same-ip/\r","date":"2024-03-16T12:10:00+00:00","updated":"2024-03-16T12:10:00+00:00"},{"objectID":"1710585780","permalink":"/post/kafka-retention-setting/","title":"[Kafka] retention.bytes å’Œ retention.ms é…ç½®å°è¨Šæ¯ä¿ç•™çš„å½±éŸ¿","content":"åœ¨ Apache Kafka ä¸­ï¼Œç•¶è¨Šæ¯çš„ cleanup.policy ç‚º delete æ™‚é…ç½® retention.bytes å’Œ retention.ms æœƒå½±éŸ¿è¨Šæ¯ä¿ç•™çš„æ™‚é–“è·Ÿå¤§å°ã€‚æœ¬æ–‡å°‡æ¢è¨é€™å…©å€‹åƒæ•¸å¦‚ä½•å…±åŒå½±éŸ¿æ¶ˆæ¯çš„ä¿ç•™ï¼Œä»¥åŠå¦‚ä½•æ­£ç¢ºè¨­ç½®å®ƒå€‘ä»¥æ»¿è¶³ç‰¹å®šéœ€æ±‚ã€‚\nå•é¡Œæè¿°\råœ¨ Kafka ä¸»é¡Œä¸­ï¼Œå¦‚æœè¨­ç½®äº†ä»¥ä¸‹åƒæ•¸ï¼š\nretention.ms: 15552000000ï¼ˆç´„ 180 å¤©ï¼‰ retention.bytes: 1073741824ï¼ˆ1 GBï¼‰ æœŸæœ›è¡Œç‚ºæ˜¯æŒ‰ç…§æ™‚é–“ä¿ç•™æ¶ˆæ¯ 180 å¤©ï¼Œä½†ç”±æ–¼ retention.bytes çš„é™åˆ¶ï¼Œå¯èƒ½å°è‡´æ¶ˆæ¯åœ¨æœªé”åˆ° 180 å¤©å‰å°±è¢«åˆªé™¤ã€‚\nåŸå› åˆ†æ\rKafka ä½¿ç”¨ retention.bytes å’Œ retention.ms å…©å€‹åƒæ•¸ä¾†æ§åˆ¶æ¶ˆæ¯çš„ä¿ç•™ï¼š\nretention.msï¼šè¨­å®šæ¶ˆæ¯ä¿ç•™çš„æœ€é•·æ™‚é–“ã€‚ retention.bytesï¼šè¨­å®šå¯ä»¥åœ¨æ—¥èªŒä¸­ä¿ç•™çš„æœ€å¤§æ•¸æ“šé‡ã€‚ ç•¶ retention.bytes çš„å€¼è¨­ç½®ç‚ºä¸€å€‹å…·é«”çš„æ•¸å­—æ™‚ï¼Œå³ä½¿æ¶ˆæ¯é‚„æ²’æœ‰é”åˆ° retention.ms æŒ‡å®šçš„æ™‚é–“ï¼Œä¸€æ—¦å­˜å„²çš„æ•¸æ“šé‡è¶…é retention.bytes æŒ‡å®šçš„é™åˆ¶ï¼Œæœ€èˆŠçš„æ•¸æ“šå°‡è¢«åˆªé™¤ã€‚\nè§£æ±ºæ–¹æ¡ˆ\rè‹¥è¦æŒ‰æ™‚é–“ä¿ç•™æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯åŸºæ–¼å­˜å„²é‡ï¼Œæ‡‰é€²è¡Œä»¥ä¸‹è¨­ç½®ï¼š\nè¨­ç½® retention.msï¼šæ ¹æ“šéœ€è¦ä¿ç•™æ¶ˆæ¯çš„æ™‚é–“è¨­ç½®æ­¤åƒæ•¸ã€‚ è¨­ç½® retention.bytes ç‚º -1ï¼šé€™æ¨£åšå°‡ç§»é™¤åŸºæ–¼å¤§å°çš„é™åˆ¶ï¼Œåƒ…æŒ‰æ™‚é–“ä¿ç•™æ¶ˆæ¯ã€‚ ä¾‹å¦‚ï¼Œè¦ä¿ç•™æ¶ˆæ¯ 180 å¤©ï¼Œç„¡è«–å¤§å°ï¼Œé…ç½®æ‡‰è©²æ˜¯ï¼š\n1retention.ms=15552000000 # ç´„ 180 å¤© 2retention.bytes=-1 # ç„¡å¤§å°é™åˆ¶ çµè«–\råœ¨é…ç½® Kafka æ™‚ï¼Œäº†è§£ retention.bytes å’Œ retention.ms å¦‚ä½•å…±åŒä½œç”¨éå¸¸é‡è¦ã€‚ç‚ºé¿å…ä¸å¿…è¦çš„æ•¸æ“šä¸Ÿå¤±ï¼Œç•¶ç›®çš„æ˜¯åŸºæ–¼æ™‚é–“ä¿ç•™æ•¸æ“šæ™‚ï¼Œæ‡‰å°‡ retention.bytes è¨­ç‚º -1ã€‚é€™æ¨£å¯ä»¥ç¢ºä¿æ•¸æ“šæ ¹æ“šæ™‚é–“è€Œéå¤§å°è¢«ä¿ç•™æˆ–åˆªé™¤ã€‚\n","date":"2024-03-16T10:43:00+00:00","updated":"2024-03-16T10:43:00+00:00"},{"objectID":"1703493120","permalink":"/post/ntut-data-compression-hw/","title":"è³‡æ–™å£“ç¸®","content":"TL; DR\rç´€éŒ„ä¿®ç¿’è³‡æ–™å£“ç¸®é€™å ‚èª²çš„ä½œæ¥­çš„è§£æ³•ã€‚\nä½œæ¥­ä¸€\rLet X be a random variable with an alphabet H={1,2,3,4,5}. Please determine H(X) for the following three cases of probability mass function p(i)=prob[X=i]\n(a) p(1) = p(2) = 1/2\n(b) p(i)=1/4, for i=1,2,3,4\n(c) p(i)=1/4, for i=1,2,3, and p(4)= p(5) = 1/8\n(d) p(i)=2^-i, for i=1,2,3,4, and p(5)=1/16 Design a Huffman code C for the source in Problem 1.\n(a) Specify your codewords for individual pmf model in Problem 1.\n(b) Compute the expected codeword length and compare with the entropy for your codes in (a).\n(c) Design a code with minimum codeword length variance for the pmf model in Problem 1.(c).\nPlease notice that the following requirements should be satisfied when constructing the Huffman tree.\n(1). Symbols with larger probability are moved to the left side, while symbols with smaller probability are moved to the right side each time two probabilities are combined.\n(2). Move ever combined probability to the left side as possible among the group with the same probability.\n(3). After completion of the Huffman tree, the left branches are assigned a â€œ0â€, while the right branches are assigned a â€œ1â€. Let X be a random variable with an alphabet H={a,b,c,\u0026hellip;,z}, i.e., the 26 lower-case letters. Use adaptive Huffman tree to find the binary code for the sequence a b c b a a.\nYou are asked to use the following 5bits fixed-length binary code as the initial codewords for the 26 letters. That is\na: 00000\nb: 00001\n\u0026hellip;\nz: 11001\nNote: Show the Huffman tree during your coding process. Golomb encoding and decoding.\n(a) Find the Golomb code of n=25 when m=8\n(b) Find the Golomb code of n=15 when m=8\n(c) Find the Golomb code of n=25 when m=9\n(d) Find the Golomb code of n=15 when m=9\n(e) A two-integer sequence is encoded by Golomb code with m=8 to get the bitstream 1110111110110. Whatâ€™s the decoded two-integer sequence?\n(f) A two-integer sequence is encoded by Golomb code with m=9 to get the bitstream 1110111110110 (the same bitstream as that in (e)). Whatâ€™s the decoded two-integer sequence?\nHint: The unary code for a positive integer q is simply q 1s followed by a 0. ä½œæ¥­äºŒ\rLet X be a discrete random variable that represents the score of students in the course â€œData Compressionâ€. The total score is 100, and the distribution of X is given below. Suppose we are using the Lloyd-Max algorithm, i.e., Nearest Neighbor Condition and Centroid Condition, to find a 4-point scalar quantizer of X. That is, we are trying to find out the four quantization regions, R1[x0, x1), R2[x1, x2), R3[x2, x3), R4[x3, x4] as well as the reconstructed value y1, y2, y3, y4 corresponding to the four quantization regions. The initial codebook C^0 is given by C^0={50, 60, 70, 80}. (a) Determine the four quantization regions, R1,R2,R3,R4 after the first iteration, i.e., whatâ€™s the value of x0,x1,x2,x3,x4 after the first iteration?\n(b) Determine the codebook C^1 after the first iteration, i.e., whatâ€™s the value of the four reconstructed values, y1,y2,y3,y4 after the first iteration?\n(c) Determine the four quantization regions, R1,R2,R3,R4 after the second iteration, i.e., whatâ€™s the value of x0,x1,x2,x3,x4 after the second iteration?\n(d) Determine the codebook C^2 after the second iteration, i.e., whatâ€™s the value of the four reconstructed values, y1,y2,y3,y4 after the second iteration?\nNote: During the scalar quantization process, each quantization region does not contain the right bound of the region, (i.e., the right bound or upper bound of a quantization bin is an open interval) except the rightmost overload region.\nGiven an 8-bit gray scale image with dimension 512 x 512. Suppose we are using Vector Quantization for the compression of the image with block size 4x4 (i.e., codeword dimension is 4x4), and the codebook size 64. During the coding procedure, the image width and image height are encoded each with 2 bytes and then transmitted as an overhead so that the decoder can know the dimension and reconstruct the image correctly. Moreover, we assume that the decoder also has the same codebook as encoder, so that the codebook does not have to be transmitted to the decoder.\nPlease determine the number of bits that should be transmitted if fixed length code is used for the encoding of the codeword index.\nGiven the frequency counts shown in Table 2\n(a) What is the smallest word length m required for unambiguous integer encoding?\n(b) Use integer implementation to find the binary code for the sequence a a c b c a.\n(c) Is E3 mapping ever used for this source? Justify your answer.\nHint: You can send the lower bound of the last symbol for the termination of the encoding process.\n","date":"2023-12-25T16:32:00+08:00","updated":"2023-12-25T16:32:00+08:00"},{"objectID":"1690706603","permalink":"/post/blog-hugo-algolia-search.html","title":"[Hugo] ä½¿ç”¨ Algolia æœç´¢æ–‡ç« ","content":"TL; DR\ræœ¬æ–‡ç´€éŒ„å¦‚ä½•åœ¨ Hugo éƒ¨è½æ ¼ä¸­ä½¿ç”¨ Algolia æœç´¢æ–‡ç« ï¼Œä¸¦è¨­ç½® GitHub Action åœ¨æ¨ä¸Š GitHub æ™‚è‡ªå‹•æ›´æ–°åˆ° Algoliaã€‚\nç’°å¢ƒ\rHugo Version: Hugo 0.112.3 Extend Theme: NexT 4.5.2 æ­¥é©Ÿ\råœ¨æœ¬åœ°ç”Ÿæˆç´¢å¼•æª”æ¡ˆ\rNexT æœ¬èº«æ”¯æ´ç”Ÿæˆ Aligolia JSON æ ¼å¼çš„ç´¢å¼•æª”æ¡ˆï¼Œç”Ÿæˆæª”ç‚º NexT themes ç›®éŒ„çš„ layout/_default/list.algoliaindexes.jsonã€‚åƒ…é ˆåœ¨ blog ç›®éŒ„ä¸‹çš„ config.yaml é–‹å•Ÿç›¸é—œè¨­å®šå³å¯ã€‚\n1outputFormats: 2 # ç”Ÿæˆ Algolia ç´¢å¼•æ–‡ä»¶ 3 AlgoliaIndexes: 4 mediaType: application/json 5 baseName: algolia 6 isPlainText: true 7 notAlternative: true 8 9# åˆ‡æ›åˆ° Algolia æœç´¢å¼•æ“ï¼Œ 10outputs: 11 home: [\u0026#34;HTML\u0026#34;, \u0026#34;AlgoliaIndexes\u0026#34;] 12 13params: 14 algoliaSearch: 15 enable: true 16 appId: xxxx 17 apiKey: xxxx 18 indexName: xxxx 19 hits: 20 perPage: 10 21 # ç´¢å¼•ç”Ÿæˆå†…å®¹é•·åº¦å­—æ•¸é™åˆ¶ï¼ŒAlgolia å…è²»å¸³è™Ÿå–®æ¢ç´¢å¼•é™åˆ¶å­—æ•¸ç‚º 10K 22 limit: 1000 åœ¨æœ¬åœ°ä½¿ç”¨ Hugo æŒ‡ä»¤éœæ…‹ç·¨è­¯ï¼Œæœƒåœ¨ public ç›®éŒ„ä¸‹çœ‹åˆ° algolia.json ç´¢å¼•æª”ç”Ÿæˆã€‚\nè¨­å®šè‡ªå‹•ä¸Šå‚³è‡³ Algolia\rAlgolia æä¾›å¹¾ç¨®æ–¹å¼ä¸Šå‚³ç´¢å¼•æª”ï¼š\nç›´æ¥ç™»å…¥ Algolia Portalï¼Œæ‰‹å‹•ä¸Šå‚³ ä½¿ç”¨ cli çš„æ–¹å¼è¨­å®šç’°å¢ƒè®Šæ•¸ï¼Œä¸Šå‚³æŒ‡å®šç´¢å¼•æª” æ•´åˆä¸€äº›ç¬¬ä¸‰æ–¹çš„ gitlab action è‡ªå‹•ä¸Šå‚³ å…¶ä¸­ç¬¬äºŒè·Ÿç¬¬ä¸‰ç¨®æ–¹å¼éƒ½æ˜¯ä½¿ç”¨ API çš„æ–¹å¼é”æˆçš„ï¼Œéœ€è¦æä¾› Algolia æŒ‡å®š Application çš„é€£ç·šè³‡è¨Š(Application ID, API Key, Index Name)ã€‚\næœ¬æ–‡ä½¿ç”¨ç¬¬ä¸‰ç¨®æ–¹å¼ï¼Œåœ¨æ¯æ¬¡ git push ä¸Š GitHub æ™‚ï¼Œè‡ªå‹•ä¸Šå‚³ã€‚\næ–°å¢ .github/workflows/main.yml CICD æª”æ¡ˆ 1name: Algolia Upload Records 2on: 3 [push] 4jobs: 5 algolia: 6 runs-on: ubuntu-latest 7 steps: 8 - name: Checkout 9 uses: actions/checkout@v2 10 - name: Upload Records 11 uses: iChochy/Algolia-Upload-Records@main 12 env: 13 APPLICATION_ID: ${{secrets.APPLICATION_ID}} 14 ADMIN_API_KEY: ${{secrets.ADMIN_API_KEY}} 15 INDEX_NAME: ${{secrets.INDEX_NAME}} 16 FILE_PATH: \u0026#34;public/algolia.json\u0026#34; åœ¨ repo çš„ setting / Secrets and variables / Actions ä¸­æ–°å¢ä¸‰å€‹æ©Ÿæ•è³‡è¨Šçš„ Secretsã€‚ é©—è­‰\ræ¨ä¸Š GitHub å¾Œï¼Œpipeline æœƒè‡ªå‹•è§¸ç™¼ä¸¦å®Œæˆä¸Šå‚³ï¼Œå°±èƒ½åœ¨ç¶²é ä¸Šå•Ÿç”¨ Algolia çš„æœç´¢åŠŸèƒ½äº†!\nReferences\rautomatic-upload-algolia-index-with-action\riChochy/Algolia-Upload-Records\r","date":"2023-07-30T16:43:23+08:00","updated":"2023-07-30T16:43:23+08:00"},{"objectID":"1690105500","permalink":"/post/k8s-ssl-not-eat-right/","title":"[Ingress] æŒ‡å®šäº† TLS æ†‘è­‰ï¼Œå»åƒåˆ°ä¸æ­£ç¢ºçš„","content":"TL; DR\råœ¨å…¬å¸éƒ¨å±¬ Ingress è³‡æºå¾Œï¼Œç™¼ç¾ä¸€ç›´æ²’æ³•æ³•åƒåˆ°æŒ‡å®šçš„æ†‘è­‰ï¼Œçµæœæ‰ç™¼ç¾æ˜¯å› ç‚º wildcard çš„å•é¡Œã€‚\nProblem\rå…¬å¸ Kubernetes ç’°å¢ƒçš„ ingress gateway æœ‰é è¨­çš„ tls æ†‘è­‰ (*.southeastasia.azure.wistron.com)ï¼Œæˆ‘è‡ªå·±ç”³è«‹çš„æ†‘è­‰ç‚º *.wistron.comï¼Œæƒ³è¦æŒ‡å®šçµ¦ tls è·¯å¾‘ç‚º abc.southeastasia.azure.wistron.com çš„ç¶²ç«™ï¼Œä½†éƒ¨ç½²å¾Œé€£ç¶²é ç™¼ç¾åƒçš„æ†‘è­‰æœƒæ˜¯é è¨­çš„ï¼Œè€Œä¸æ˜¯æŒ‡å®šçš„ã€‚\nReason\rä½¿ç”¨ wildcard çš„æ†‘è­‰ï¼Œåªèƒ½åƒåˆ°ç¬¬ä¸€éšçš„åŸŸåï¼Œæ¯”å¦‚èªªå¦‚æœæœ‰ *.example.com çš„ SSL è­‰æ›¸ï¼Œé‚£éº¼åƒ…é©ç”¨æ–¼ www.example.com æˆ– XXXX.example.com ç­‰ä¸»æ©Ÿï¼Œä¸é©ç”¨æ–¼ demo.app1.example.com ç­‰ä¸»æ©Ÿã€‚\nReference\rhttps://stackoverflow.com/questions/26744696/ssl-multilevel-subdomain-wildcard\r","date":"2023-07-23T17:45:00+08:00","updated":"2023-07-23T17:45:00+08:00"},{"objectID":"1690093560","permalink":"/post/network-dns-and-fqdn/network-dns-and-fqdn/","title":"DNS and FQDN","content":"FQDN\rFully Qualified Domain Nameï¼Œæ˜¯ç¶²éš›ç¶²è·¯ä¸Šç‰¹å®šè¨ˆç®—æ©Ÿæˆ–ä¸»æ©Ÿçš„å®Œæ•´åŸŸåã€‚\nDNS\rç•¶æˆ‘å€‘ç”³è«‹åŸŸåæ™‚ï¼Œæœƒçœ‹åˆ°ç¶²å€è¨»å†Šæœå‹™å•†è©¢å•æ˜¯å¦æœ‰ DNS çš„æœå‹™(å¤§éƒ¨åˆ†çš„ç¶²åŸŸæä¾›å•†éƒ½æœƒæä¾›å…è²»çš„ DNS æœå‹™ï¼Œå¦‚ GoDaddy, Cloudflare, Amazon Route 53)ã€‚DNS (Domain Name System) æ˜¯ä¸€ç¨®ç”¨æ–¼å°‡åŸŸåè½‰æ›ç‚º IP åœ°å€çš„ç³»çµ±ï¼Œä»¥ä¾¿åœ¨ Internet ä¸Šå®šä½ç¶²çµ¡è³‡æºã€‚\nç´€éŒ„é¡å‹\rç´€éŒ„é¡å‹æ˜¯ç‚ºäº†è¼”åŠ© DNS server (DNS ä¼ºæœå™¨)å¯ä»¥æ›´æœ‰æ•ˆç‡åœ°æŸ¥æ‰¾ç¶²å€å°æ‡‰çš„ IP ä½å€ï¼Œå¸¸ä½¿ç”¨åˆ°çš„ç´€éŒ„é¡å‹å¦‚ä¸‹:\nA (Address) Record:\rA ç´€éŒ„ä»£è¡¨çš„å°±æ˜¯ IPv4 åœ°å€ï¼Œæ˜¯æœ€å¸¸ç”¨åˆ°çš„ç´€éŒ„é¡å‹ã€‚ç›´æ¥å°‡åŸŸåè§£æç‚ºç›¸æ‡‰çš„ IP åœ°å€ï¼Œå¦‚å°‡ \u0026ldquo;example.com\u0026rdquo; è§£æç‚º \u0026ldquo;192.0.2.1\u0026rdquo;ã€‚\nAAAA (IPv6 Address) Record:\rAAAA è¨˜éŒ„é¡ä¼¼æ–¼ A è¨˜éŒ„ï¼Œå°‡åŸŸåæ˜ å°„åˆ° IPv6 åœ°å€ã€‚è‹¥ç¶²ç«™æ‰€åœ¨çš„ä¸»æ©Ÿæ˜¯ä½¿ç”¨ IPv6 æ ¼å¼çš„ IPï¼Œå‰‡å¯é¸æ“‡ AAAA ç´€éŒ„åšç‚ºç´€éŒ„é¡å‹ã€‚\nCNAMEè¨˜éŒ„\rCNAME è¨˜éŒ„ç”¨æ–¼å‰µå»ºåˆ¥åï¼Œå°‡ä¸€å€‹åŸŸåæ˜ å°„åˆ°å¦ä¸€å€‹åŸŸåï¼Œè®“ DNS å°‡ç¶²å€è§£æåˆ°å¦ä¸€å€‹ç›®æ¨™ç¶²å€ä¸Šã€‚å¦‚å°‡ \u0026ldquo;\rwww.example.com\r\u0026rdquo; ç”¨ CNAME è¨˜éŒ„è§£æè‡³ \u0026ldquo;example.com\u0026rdquo; ä¸Šã€‚DNS æŸ¥è©¢æ­¥é©Ÿå¦‚ä¸‹:\nç¶²ç«™è¨ªå®¢åœ¨è¼¸å…¥ \u0026ldquo;\rwww.example.com\r\u0026rdquo; æ™‚ï¼ŒDNS æœƒç™¼ç¾å®ƒæ˜¯ä¸€å€‹ CNAME è¨˜éŒ„ï¼Œå³ \u0026ldquo;example.com\u0026rdquo;ã€‚ æŸ¥è©¢ \u0026ldquo;example.com\u0026rdquo; æ‰€è¨­å®š A ç´€éŒ„å€¼ä¸­çš„ä¸»æ©Ÿ IP æ—¥å¾Œ \u0026ldquo;example.com\u0026rdquo; è¨­å®šçš„ A ç´€éŒ„å€¼æœ‰æ‰€è®Šæ›´æ™‚ï¼Œå°±ä¸éœ€è¦å†å»æ›´æ”¹ \u0026ldquo;\rwww.example.com\r\u0026rdquo; ç´€éŒ„å€¼ã€‚å› æ­¤åœ¨ä½¿ç”¨ CNAME ç´€éŒ„æ™‚ï¼Œå°æ‡‰åˆ°çš„ç›®æ¨™ç¶²å€å¿…é ˆå¸¶æœ‰ A ç´€éŒ„ã€‚ MX (Mail Exchange) Record:\rMX è¨˜éŒ„æŒ‡å®šéƒµä»¶ä¼ºæœå™¨çš„åœ°å€ï¼Œè©²åœ°å€è² è²¬æ¥æ”¶ç‰¹å®šåŸŸåçš„é›»å­éƒµä»¶ã€‚ä¾‹å¦‚ A è¦å¯„ Email çµ¦ B æ™‚ï¼ŒB è¨­å®šçš„ MX ç´€éŒ„å€¼å¯ä»¥è®“ A çš„éƒµä»¶ä¸»æ©Ÿé€é MX ç´€éŒ„æ‰¾åˆ° B è² è²¬æ”¶ä¿¡çš„éƒµä»¶ä¸»æ©Ÿï¼Œè®“ A å¯ä»¥é †åˆ©å°‡ Email å¯„çµ¦ Bã€‚\nNS (Name Server) Record:\rNS è¨˜éŒ„æŒ‡å®šç¶­è­·è©²åŸŸå DNS è³‡è¨Šçš„ DNS ä¼ºæœå™¨ï¼Œé€šå¸¸ç”±åŸŸåè¨»å†Šå•†è¨­å®šï¼ŒNS è¨˜éŒ„å‘Šè¨´ DNS æŸ¥è©¢è©²åŸŸåçš„è³‡è¨Šåœ¨å“ªè£¡å¯ä»¥æ‰¾åˆ°ã€‚ åç¨±ä¼ºæœå™¨ (Name Server) æ˜¯ä¸€ç¨® DNS ä¼ºæœå™¨ï¼Œä¸Šé¢å„²å­˜äº†ç¶²åŸŸçš„æ‰€æœ‰ DNS è¨˜éŒ„ï¼ŒåŒ…æ‹¬ A è¨˜éŒ„ã€MX è¨˜éŒ„æˆ– CNAME è¨˜éŒ„ã€‚\n","date":"2023-07-23T14:26:00+08:00","updated":"2023-07-23T14:26:00+08:00"},{"objectID":"1686094200","permalink":"/post/blog-final-hugo-migration/","title":"çµ‚æ–¼æ­£å¼æ¬åˆ° Hugo äº†!!","content":"\nTL; DR\ræœ¬ä¾†ä»¥ç‚ºä»Šå¹´çš„å·¥ä½œä¸æœƒè®Šå‹•ï¼Œæ®Šä¸çŸ¥åœ¨å››æœˆåº•çªç„¶æœ‰äº†æ–°çš„æ©Ÿæœƒï¼Œè¶è‘—ä¸€å€‹ç¦®æ‹œçš„ gap weekï¼Œä¾†æŠŠä¸€ç›´æƒ³æ›å¾ˆä¹…çš„æŠ€è¡“éƒ¨è½æ ¼æ›æ‰ã€‚\næ¶ç«™æ­·å²\råŸå…ˆæ˜¯ä½¿ç”¨ç¤¾ç¾¤å¼·å¤§çš„ Hexo + NexTï¼Œä¸¦é€é GitHub Page ç™¼ä½ˆï¼Œä¸­é–“éæ¸¡æœŸè‡ªå·±ç”¨ Hugo + zozo æ¶éä¸€æ¬¡ç”¨ä¾†è¨˜éŒ„ç”Ÿæ´»çš„ ulanotesã€‚éš¨è‘—éƒ¨è½æ ¼æ–‡ç« å¢é•·ï¼Œç™¼ç¾åœ¨ç™¼ä½ˆç·¨è­¯æ™‚çœŸçš„æ„ˆç­‰æ„ˆé•·ï¼Œä¾¿é™¸çºŒå°‹è¦“å¥½çœ‹çš„ Hugo Themeï¼ŒåŸæœ¬æ‰¾åˆ° Eurekaï¼Œä½†ç™¼ç¾æœ‰å¾ˆå¤šåœ¨ Hexo æœ‰çš„åŠŸèƒ½é€™é‚Šéƒ½æ²’æœ‰ (æ­¸æª”ã€search..)ï¼Œå†ä¾†æ‰¾åˆ°ä¹Ÿæ˜¯æ•¸ä¸€æ•¸äºŒç”¨å¾—å¤šçš„ Stackã€‚æœ€å¾Œçµ‚æ–¼æ‰ç™¼ç¾åœ¨ Hexo çš„èˆŠæ„› NexTï¼Œå·²ç¶“æœ‰æ”¯æ´ Hugo éœæ…‹ç·¨è­¯äº†ï¼ç¹äº†ä¸€åœˆé‚„æ˜¯å›åˆ° NexT çš„æ‡·æŠ± (â—â€¢á´—â€¢â—)\nå¤§æ„Ÿè¬\rç´€éŒ„ä¸€ä¸‹ä¸Šä¸€ç‰ˆä½¿ç”¨çš„ stack æ‰€åƒè€ƒçš„éƒ¨è½æ ¼ã€‚\nhttps://siae.me/p/stack/\rhttps://irithys.com/\rhttps://www.vincentthh35.com/\rulagraphy\rä½†æˆ‘é‚„æ˜¯å¾ˆå–œæ­¡ä¹‹å‰é™ªä¼´å¾ˆä¹…çš„ UlaGraphy\rï¼Œæ‰€ä»¥ä¸æœƒé—œç«™ XD\nHexo Adminï¼Œé‚„æœ‰ NexT çœŸçš„æ˜¯çˆ†ç‚¸å¥½ç”¨!!! à² _à² \né—œæ–¼é¦–åœ–\ré€™å¼µç…§ç‰‡æ˜¯ç¬¬ä¸€ä»½å·¥ä½œåœ¨ç•¶æ¥­å‹™çš„æ™‚å€™æ‹çš„ï¼Œé›–ç„¶å¾ç•¢æ¥­å¾Œåˆ°ç¾åœ¨å·¥ç¨‹å¸«é€™æ¢è·¯ä¸Šç¹äº†äº›è·¯ï¼Œä½†æˆ‘ç›¸ä¿¡ä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å®‰æ’ â€ â€ â€\n","date":"2023-06-06T23:30:00+00:00","updated":"2023-07-23T16:00:00+08:00"},{"objectID":"1685985540","permalink":"/post/golang-and-nodejs-client-access-k8s/","title":"[Golang \u0026 Node.js] Access Kubernetes Out of the Cluster","content":"Prepare .kube/config\rä½¿ç”¨ Rancher ç”¢ç”Ÿå¥½å¸¶æœ‰ user token çš„ kubeconfig æª”æ¡ˆå­˜å–ï¼Œå°‡ config æª”ä¸‹è¼‰å¾Œæ”¾ç½®èˆ‡ code åŒå±¤çš„ç›®éŒ„ä¸‹ã€‚\nGo Clinet\ræŸ¥è©¢æŒ‡å®šçš„ namespace æ˜¯å¦å­˜åœ¨\n1package main 2 3import ( 4\t\u0026#34;context\u0026#34; 5\t\u0026#34;fmt\u0026#34; 6 7\tmetav1 \u0026#34;k8s.io/apimachinery/pkg/apis/meta/v1\u0026#34; 8\t\u0026#34;k8s.io/client-go/kubernetes\u0026#34; 9\t\u0026#34;k8s.io/client-go/tools/clientcmd\u0026#34; 10) 11 12func main() { 13\t// uses the current context in kubeconfig 14\t// path-to-kubeconfig -- for example, /root/.kube/config 15\tconfig, _ := clientcmd.BuildConfigFromFlags(\u0026#34;\u0026#34;, \u0026#34;./config\u0026#34;) 16\t// creates the clientset 17\tclientset, _ := kubernetes.NewForConfig(config) 18\tns, err := clientset.CoreV1().Namespaces().Get(context.TODO(), \u0026#34;mynamespace\u0026#34;, metav1.GetOptions{}) 19\tif err != nil { 20\tfmt.Println(err) 21\t} else { 22\tfmt.Println(\u0026#34;namespace exist: \u0026#34;, ns) 23\t} 24} JavaScript Client\ræŸ¥è©¢æŒ‡å®šçš„ namespace æ˜¯å¦å­˜åœ¨\nç‰ˆæœ¬ä¸€ï¼š\n1try{ 2 await k8sApi.readNamespace(\u0026#39;mynamespace\u0026#39;).then( (res) =\u0026gt; { 3\tif (res.response.statusCode === 200 || res.response.statusCode === 201){ 4\tstatus = \u0026#39;synced\u0026#39; 5\tlogger.info(`mynamespace namespace æˆåŠŸ sync è‡³ Kubernetes Cluster`); 6\t} 7\t},(err) =\u0026gt; { 8\tstatus = \u0026#39;sync failed\u0026#39;; 9\tlogger.error(`Kubernetes Cluster ç„¡è©² mynamespace namespace: ${err.body}`); 10 }); 11 return status 12}catch(e){ 13 logger.error(`k8s é€£ç·šéŒ¯èª¤: ${e}`) 14 return status 15} ç‰ˆæœ¬äºŒï¼š\n1const k8s = require(\u0026#39;@kubernetes/client-node\u0026#39;); 2 3process.env[\u0026#39;NODE_TLS_REJECT_UNAUTHORIZED\u0026#39;] = \u0026#39;0\u0026#39; 4const kc = new k8s.KubeConfig(); 5kc.loadFromFile(\u0026#34;./config\u0026#34;) 6 7const k8sApi = kc.makeApiClient(k8s.CoreV1Api); 8 9let nslist = [] 10 11async function getNamespace(checkNs: string) { 12 await k8sApi.listNamespace().then(res=\u0026gt;{ 13 res.body.items.forEach(ns =\u0026gt; nslist.push(ns.metadata.name)) 14 }) 15 // console.log(nslist) 16 17 for (let i of nslist) { 18 if(i === checkNs){ 19 console.log(\u0026#39;namespace created! sync success!\u0026#39;, i) 20 } 21 } 22} Refernece\rhttps://kubernetes.io/docs/tasks/administer-cluster/access-cluster-api/#programmatic-access-to-the-api\ré¦–åœ–åœ–ç‰‡ä¾†æº\r","date":"2023-06-05T17:19:00+00:00","updated":"2023-06-05T17:19:00+00:00"},{"objectID":"1685981940","permalink":"/post/golang-render-img-in-html/","title":"[Golang] Render Image in HTML","content":"TL;DR\rç´€éŒ„æ€éº¼åœ¨ golang çš„ gin api server å›å‚³å¸¶æœ‰åœ–ç‰‡çš„ apiã€‚\nç¨‹å¼ç¢¼\r1c.HTML(http.StatusOK, \u0026#34;img.html\u0026#34;, gin.H{ 2\t\u0026#34;images\u0026#34;: images, 3}) 1\u0026lt;!doctype html\u0026gt; 2\u0026lt;html\u0026gt; 3\u0026lt;head\u0026gt; 4 \u0026lt;title\u0026gt;Grab Reflow History\u0026lt;/title\u0026gt; 5\u0026lt;/head\u0026gt; 6\u0026lt;body\u0026gt; 7 \u0026lt;div class=\u0026#34;margin-body\u0026#34;\u0026gt; 8 \u0026lt;div class=\u0026#34;row\u0026#34;\u0026gt; 9 {{range .images}} 10 \u0026lt;div class=\u0026#34;image\u0026#34;\u0026gt; 11 \u0026lt;img src=\u0026#34;data:image/png;base64,{{.}}\u0026#34;/\u0026gt; 12 \u0026lt;/div\u0026gt; 13 {{end}} 14 \u0026lt;/div\u0026gt; 15 \u0026lt;/div\u0026gt; 16\u0026lt;/body\u0026gt; 17\u0026lt;/html\u0026gt; Reference\rhttps://ithelp.ithome.com.tw/articles/10269897\rhttps://stackoverflow.com/questions/57020601/how-to-render-show-images-in-html-created-on-the-fly-with-golang-and-gin-gonic\r","date":"2023-06-05T16:19:00+00:00","updated":"2023-06-05T16:19:00+00:00"},{"objectID":"1678828200","permalink":"/post/terrascan-init-with-connect-to-github-error/","title":"[Terrascan] init with connect to github error","content":"TL;DR\råœ¨ä½¿ç”¨ terrascan ç•¶ä½œ IAC èªæ³•æª¢æŸ¥å·¥å…·æ™‚ï¼Œç™¼ç¾è·‘åœ¨å…¬å¸å…§éƒ¨ç’°å¢ƒçš„ gitlab pipeline éƒ½æœƒå¡åœ¨ terrascan init çš„éŒ¯èª¤ã€‚\nå•é¡Œæè¿°\rDockerfile æ˜¯é€é Gitlab Pipeline å¹«å¿™æ‰“åŒ…çš„ï¼Œåœ¨ Job ä¸­è·‘ git clone åˆ°å…¬å¸å…§éƒ¨å­˜æ”¾ OPA Policy çš„ Repo çš†æ²’å•é¡Œï¼Œä½†æ˜¯ Job è·‘åˆ° terrascan init æ™‚ç¸½æ˜¯æœƒå ± error\tcli/init.go:42\tfailed to initialize terrascan. error : could not connect to github.com çš„éŒ¯èª¤ã€‚\nç’°å¢ƒ\rterrascan: 1.16.0 Code Tracing\rå› ç‚ºåœ¨å‰é¢æœ‰ç”¨ git clone æ¸¬è©¦é€£çµåˆ°ç›®æ¨™ repo æ˜¯é€šçš„ï¼Œæ‰€ä»¥å°±æŠŠå•é¡Œç¸®å°åœ¨æ˜¯ terrascan åœ¨ init æ™‚åšäº†ä»€éº¼å‹•ä½œã€‚å¯ä»¥åœ¨ terrascan init æ™‚åŠ ä¸Š -l debug lebel å¹«åŠ©æ’æŸ¥å•é¡Œã€‚\n1func DownloadPolicies() error { 2\taccessToken := config.GetPolicyAccessToken() 3\tpolicyBasePath := config.GetPolicyBasePath() 4 5\tzap.S().Debug(\u0026#34;downloading policies\u0026#34;) 6\tzap.S().Debugf(\u0026#34;base directory path : %s\u0026#34;, policyBasePath) 7 8\terr := os.RemoveAll(policyBasePath) 9\tif err != nil { 10\treturn fmt.Errorf(\u0026#34;unable to delete base folder. error: \u0026#39;%w\u0026#39;\u0026#34;, err) 11\t} 12 13\tif accessToken == \u0026#34;\u0026#34; { 14\treturn downloadDefaultPolicies(policyBasePath) 15\t} 16 17\treturn dowloadEnvironmentPolicies(policyBasePath, accessToken) 18} init æ™‚æœƒå» clone policyï¼Œå¦‚æœæ²’æœ‰é¡å¤–æŒ‡å®šï¼Œæœƒå»æŠ“å– tenable/terrascan å®˜æ–¹çš„ repoï¼Œè€Œåœ¨å…¬å¸ç’°å¢ƒé›–ç„¶æ˜¯æŒ‡å®šå…§éƒ¨çš„ repoï¼Œä¸éè©² repo ä¹Ÿæ˜¯åœ¨å…§ç¶²ä¸­å…¬é–‹çš„ï¼Œæ‰€ä»¥å»åˆ°çš„æ˜¯ downloadDefaultPolicies functionã€‚\n1func downloadDefaultPolicies(policyBasePath string) error { 2\tif !connected(terrascanReadmeURL) { 3\treturn errNoConnection 4\t} 5 6\trepoURL := config.GetPolicyRepoURL() 7\tbranch := config.GetPolicyBranch() 8 9\tzap.S().Debugf(\u0026#34;policy directory path : %s\u0026#34;, repoURL) 10\tzap.S().Debugf(\u0026#34;policy repo url : %s\u0026#34;, repoURL) 11\tzap.S().Debugf(\u0026#34;policy repo git branch : %s\u0026#34;, branch) 12\tzap.S().Debugf(\u0026#34;cloning terrascan repo at %s\u0026#34;, policyBasePath) 13 14\t// clone the repo 15\tr, err := git.PlainClone(policyBasePath, false, \u0026amp;git.CloneOptions{ 16\tURL: repoURL, 17\t}) 18 19\tif err != nil { 20\treturn fmt.Errorf(\u0026#34;failed to download policies. error: \u0026#39;%w\u0026#39;\u0026#34;, err) 21\t} 22 23\t// create working tree 24\tw, err := r.Worktree() 25\tif err != nil { 26\treturn fmt.Errorf(\u0026#34;failed to create working tree. error: \u0026#39;%w\u0026#39;\u0026#34;, err) 27\t} 28 29\t// fetch references 30\terr = r.Fetch(\u0026amp;git.FetchOptions{ 31\tRefSpecs: []gitConfig.RefSpec{\u0026#34;refs/*:refs/*\u0026#34;, \u0026#34;HEAD:refs/heads/HEAD\u0026#34;}, 32\t}) 33\tif err != nil { 34\treturn fmt.Errorf(\u0026#34;failed to fetch references from git repo. error: \u0026#39;%w\u0026#39;\u0026#34;, err) 35\t} 36 37\t// checkout policies branch 38\terr = w.Checkout(\u0026amp;git.CheckoutOptions{ 39\tBranch: plumbing.ReferenceName(fmt.Sprintf(\u0026#34;refs/heads/%s\u0026#34;, branch)), 40\tForce: true, 41\t}) 42\tif err != nil { 43\treturn fmt.Errorf(\u0026#34;failed to checkout git branch \u0026#39;%s\u0026#39;. error: \u0026#39;%w\u0026#39;\u0026#34;, branch, err) 44\t} 45 46\treturn nil 47} 48 49func connected(url string) bool { 50\t_, err := http.Get(url) 51\treturn err == nil 52} é€™é‚Šå°±ç›´æ¥çœ‹åˆ°åŸå› äº†ï¼Œåœ¨ function çš„ä¸€é–‹å§‹æœƒå»åš connected(terrascanReadmeURL)ï¼Œè€Œé€™å€‹ä¸Ÿé€²å»çš„åƒæ•¸ä¸¦ä¸æ˜¯å®šç¾©åœ¨ config æª”çš„ repo_urlï¼Œè€Œæ˜¯ terrascanReadmeURL (\rhttps://raw.githubusercontent.com/tenable/terrascan/master/README.md\r)ï¼Œæ‰€ä»¥åœ¨å…§ç¶²ç’°å¢ƒå› ç‚ºå…¬å¸çš„ Kubernetes æœ‰è¨­é˜²ç«ç‰†ï¼Œæ‰€ä»¥ç›´æ¥è¢«æ“‹æ‰äº†ã€‚\nè§£æ±ºæ–¹æ³•\ræ¨æ£„ terrascan initï¼Œç›´æ¥è‡ªå·±ç”¨ git clone ä¸¦æŠŠ clone ä¸‹ä¾†çš„ repo æ”¾åˆ° terrascan çš„æŒ‡å®šè³‡æ–™å¤¾ ~/.terrascan/ï¼Œè·³é source code çš„ bugã€‚\n","date":"2023-03-14T21:10:00+00:00","updated":"2023-03-14T21:10:00+00:00"},{"objectID":"1676737920","permalink":"/post/get-azure-vault-secret-for-all/","title":"[Azure] ä½¿ç”¨ Vault Secrets API å¦‚ä½•å–å¾—è¶…é 25 ç­†å¾Œçš„è³‡æ–™","content":"TL; DR\rä½¿ç”¨ Azure key vault çš„ API Get æ‰€æœ‰ secrets æ™‚å¯ä»¥åˆ©ç”¨ maxresults çš„åƒæ•¸é™åˆ¶å›å‚³çš„ç­†æ•¸ï¼Œé è¨­ç‚º 25 ç­†ï¼Œä½†ç¶“æ¸¬è©¦ï¼Œæœ€å¤§çš„é¡¯ç¤ºç­†æ•¸ä¹Ÿå°±æ˜¯ 25 ç­†äº†ï¼Œè¦å¦‚ä½•å–å¾—å…¨éƒ¨çš„ secrets å‘¢? ä»¥æ­¤ç¯‡è¨˜éŒ„ã€‚\nåˆ©ç”¨ nextLink å–å¾—ä¸‹ä¸€é è³‡æ–™\rå‡è¨­ç›®å‰çš„ vault URI ç‚º https://arm-vault-prd.vault.azure.net/ çš„ï¼Œæˆ‘å€‘å…ˆä¾†çœ‹æœ€ä¸€é–‹å§‹ä½¿ç”¨ get secrets è¿”å›çš„çµæœï¼Œå› ä¸æƒ³ä¸€æ¬¡é¡¯ç¤º 25 ç­†ï¼Œåˆ©ç”¨ maxresults åƒæ•¸æŒ‡ä»¤é¡¯ç¤ºå…©ç­†ï¼š\n1{ 2 \u0026#34;value\u0026#34;: [ 3 { 4 \u0026#34;id\u0026#34;: \u0026#34;https://arm-vault-prd.vault.azure.net/secrets/azure-AZRAutoTesting-prd-azure-client-id\u0026#34;, 5 \u0026#34;attributes\u0026#34;: { 6 \u0026#34;enabled\u0026#34;: true, 7 \u0026#34;created\u0026#34;: 1651506090, 8 \u0026#34;updated\u0026#34;: 1651506090, 9 \u0026#34;recoveryLevel\u0026#34;: \u0026#34;Recoverable+Purgeable\u0026#34;, 10 \u0026#34;recoverableDays\u0026#34;: 90 11 }, 12 \u0026#34;tags\u0026#34;: {} 13 }, 14 { 15 \u0026#34;id\u0026#34;: \u0026#34;https://arm-vault-prd.vault.azure.net/secrets/azure-AZRAutoTesting-prd-azure-client-secret\u0026#34;, 16 \u0026#34;attributes\u0026#34;: { 17 \u0026#34;enabled\u0026#34;: true, 18 \u0026#34;created\u0026#34;: 1651506109, 19 \u0026#34;updated\u0026#34;: 1651506109, 20 \u0026#34;recoveryLevel\u0026#34;: \u0026#34;Recoverable+Purgeable\u0026#34;, 21 \u0026#34;recoverableDays\u0026#34;: 90 22 }, 23 \u0026#34;tags\u0026#34;: {} 24 } 25 ], 26 \u0026#34;nextLink\u0026#34;: \u0026#34;https://arm-vault-prd.vault.azure.net:443/secrets?api-version=7.4\u0026amp;$skiptoken=eyJOZXh0TWFya2VyIjoiMiExMzIhTURBd01EVXpJWE5sWTNKbGRDOUJXbFZTUlMxQldsSkJWVlJQVkVWVFZFbE9SeTFRVWtRdFFWcFZVa1V0VTFWQ1UwTlNTVkJVU1U5T0xVbEVJVEF3TURBeU9DRTVPVGs1TFRFeUxUTXhWREl6T2pVNU9qVTVMams1T1RrNU9UbGFJUS0tIiwiVGFyZ2V0TG9jYXRpb24iOjB9\u0026amp;maxresults=2\u0026#34; 27} å¯ä»¥ç™¼ç¾å›å‚³çš„è³‡è¨Šæœ€å¾Œæœ‰ä¸€å€‹ nextLink çš„åƒæ•¸ï¼Œé€™å€‹å°±æ˜¯ä¸‹å…©ç­† secrets å–å¾—çš„ä½å€ï¼è«‹æ³¨æ„ä½¿ç”¨æ­¤ API ä¸€æ¨£è¦åœ¨ header è¼¸å…¥ Authencation çš„è³‡è¨Šã€‚ ç”¨ Postman è©¦æ‰“çš„çµæœå¦‚ä¸‹ï¼š\nç¬¬ä¸€æ¬¡:\nç¬¬äºŒæ¬¡ä½¿ç”¨ç¬¬ä¸€æ¬¡å›å‚³çš„ NextLink:\n","date":"2023-02-18T16:32:00+00:00","updated":"2023-02-18T16:32:00+00:00"},{"objectID":"1676392320","permalink":"/post/create-subscription-by-azure-mgmt-api-and-spn/","title":"[Azure] é€é Managment API å»ºç«‹è¨‚é–±å¸³æˆ¶","content":"TL;DR\ræœ¬ç¯‡æ–‡ç« è¨˜éŒ„é€é Azure Management API ä½¿ç”¨ Azure Service Principal æ¬Šé™æˆæ¬Šï¼Œå»ºç«‹ Billing Account é¡å‹ç‚º Enterprise Agreement çš„ Subscription è¨‚é–±å¸³æˆ¶ã€‚\nå…ˆæ±ºæ¢ä»¶: è³¦äºˆæ¬Šé™\råœ¨ Azure Portal ä¸Šæ²’æœ‰é‡å° Billing Account çš„ IAM å¯ä»¥è¨­å®šï¼Œéœ€è¦é€é API è³¦äºˆ subscription creator role çµ¦å°æ‡‰çš„æœå‹™ä¸»é«”(service principal)ã€‚é€™å€‹æ­¥é©Ÿå¯ä»¥é€é Microsoft Learn æä¾›çš„ API focus mode åŠŸèƒ½å¯¦ä½œï¼Œè«‹å‰å¾€\renrollment-account-role-assignments çš„ API æ–‡æª”\rã€‚\næ¬Šé™åˆ—è¡¨\ré™„ä¸Šåœ¨ EA æ”¶è²»ä¸‹ï¼ŒSPN æœ‰å››ç¨®æ¬Šé™å¯è¢«è³¦äºˆï¼Œä¸€å€‹ SPN åªèƒ½è¢«è³¦äºˆä¸€ç¨®æ¬Šé™ã€‚\nRole Role definition ID Actions allowed EnrollmentReader 24f8edb6-1668-4659-b5e2-40bb5f3a7d7e Enrollment readers can view data at the enrollment, department, and account scopes. The data contains charges for all of the subscriptions under the scopes, including across tenants. Can view the Azure Prepayment (previously called monetary commitment) balance associated with the enrollment. EA purchaser da6647fb-7651-49ee-be91-c43c4877f0c4 Purchase reservation orders and view reservation transactions. It has all the permissions of EnrollmentReader, which will in turn have all the permissions of DepartmentReader. It can view usage and charges across all accounts and subscriptions. Can view the Azure Prepayment (previously called monetary commitment) balance associated with the enrollment. DepartmentReader db609904-a47f-4794-9be8-9bd86fbffd8a Download the usage details for the department they administer. Can view the usage and charges associated with their department. SubscriptionCreator a0bcee42-bf30-4d1b-926a-48d21664ef71 Create new subscriptions in the given scope of Account. é€é REST API å»ºç«‹è¨‚é–±å¸³æˆ¶\ré€é Subscription çš„ Alias API\r1PUT https://management.azure.com/providers/Microsoft.Subscription/aliases/aliasForNewSub?api-version=2020-09-01 2 3{ 4 \u0026#34;properties\u0026#34;: { 5 \u0026#34;displayName\u0026#34;: \u0026#34;Contoso MCA subscription\u0026#34;, 6 \u0026#34;billingScope\u0026#34;: \u0026#34;/providers/Microsoft.Billing/billingAccounts/e879cf0f-2b4d-5431-109a-f72fc9868693:024cabf4-7321-4cf9-be59-df0c77ca51de_2019-05-31/billingProfiles/PE2Q-NOIT-BG7-TGB/invoiceSections/MTT4-OBS7-PJA-TGB\u0026#34;, 7 \u0026#34;workload\u0026#34;: \u0026#34;Production\u0026#34; 8 } 9} Info\nAzure çš„ aliases è³‡æºé¡å‹æ˜¯æ“´å±•è³‡æº (extension resource)ï¼Œå¯ä»¥å°‡å…¶æ‡‰ç”¨æ–¼å¦ä¸€å€‹è³‡æºã€‚\nImplement by NodeJS\r1public async createSubscription(subscriptionName: string, envWorkload: string, envBillingScope: string): Promise\u0026lt;string\u0026gt; { 2 let subscriptionId = \u0026#39;\u0026#39;; 3 try{ 4 const authResponse = await this.getMgmtToken(); 5 const createBody = { 6 properties: { 7 billingScope: envBillingScope, 8 displayName: subscriptionName, 9 workload: envWorkload, 10 }, 11 }; 12 13 const response = await fetch( 14 `${this.conf.subscriptionsApi.aliasUrl}/${subscriptionName}${this.conf.subscriptionsApi.aliasUrlVersion}`, 15 { 16 method: \u0026#39;put\u0026#39;, 17 body: JSON.stringify(createBody), 18 headers: {\u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, Authorization: `Bearer ${authResponse.accessToken}`}, 19 }, 20 ) 21 22 if (!response.ok) { 23 throw new Error(`å»ºç«‹ subscription ç™¼ç”ŸéŒ¯èª¤, status: ${response.status}, errorMsg: ${JSON.stringify(await response.json())}`); 24 } 25 26 const body : any = await response.json(); 27 28 subscriptionId = Object(Object(body).properties).subscriptionId; 29 30 }catch(e){ 31 logger.error(e) 32 } 33 return subscriptionId; 34 } Reference\rhttps://learn.microsoft.com/en-us/azure/templates/microsoft.subscription/aliases?pivots=deployment-language-bicep\rhttps://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals#assign-the-subscription-creator-role-to-the-spn\ré¦–åœ–åœ–ç‰‡ä¾†æº\r","date":"2023-02-14T16:32:00+00:00","updated":"2023-02-14T16:32:00+00:00"},{"objectID":"1674893940","permalink":"/post/golang-winrm-multiple-command-sample-code/","title":"[Golang] ä½¿ç”¨ winrm ä¸‹å¤šè¡ŒæŒ‡ä»¤æ“ä½œé ç«¯æ©Ÿå™¨","content":"TL; DR\rä½¿ç”¨ masterzen/winrm\rå¥—ä»¶é€é winrm protocal é ç«¯é€£ç·šè‡³æŒ‡å®šæ©Ÿå™¨ä¸¦ä¸‹ powershell æŒ‡ä»¤æ“ä½œã€‚\nç¨‹å¼ç¢¼\r1// ç›´æ¥å¯«æˆä¸€å€‹ function~ 2func WinExec() { 3\tparams := winrm.DefaultParameters 4 5\tendpoint := winrm.NewEndpoint(\u0026#34;10.37.36.79\u0026#34;, 5985, false, false, nil, nil, nil, 0) 6\tclient, err := winrm.NewClientWithParameters(endpoint, \u0026#34;Administrator\u0026#34;, \u0026#34;Wistron@2017\u0026#34;, params) 7\tif err != nil { 8\tpanic(err) 9\t} 10 11\tctx, cancel := context.WithCancel(context.Background()) 12\tdefer cancel() 13 14\tshell, err := client.CreateShell() 15\tif err != nil { 16\tpanic(err) 17\t} 18\tdefer shell.Close() 19 20\t// å¯ä»¥åœ¨é€™é‚Šä¸‹å¤šè¡ŒæŒ‡ä»¤ 21\tscript := fmt.Sprintf(` 22\tipconfig 23\t`) 24 25\tcmd, err := shell.ExecuteWithContext(ctx, winrm.Powershell(script)) 26\t// _, err = client.RunWithContext(ctx, \u0026#34;echo username\u0026#34;, os.Stdout, os.Stderr) 27 28\tif err != nil { 29\tpanic(err) 30\t} 31 32\tdefer cmd.Close() 33 34\tvar wg sync.WaitGroup 35\tcopyFunc := func(w io.Writer, r io.Reader) { 36\tdefer wg.Done() 37\tio.Copy(w, r) 38\t} 39 40\twg.Add(2) 41\tgo copyFunc(os.Stdout, cmd.Stdout) 42\tgo copyFunc(os.Stderr, cmd.Stderr) 43 44\tcmd.Wait() 45\twg.Wait() 46 47\tif cmd.ExitCode() != 0 { 48\tpanic(cmd.ExitCode()) 49\t} 50} ","date":"2023-01-28T08:19:00+00:00","updated":"2023-01-28T08:19:00+00:00"},{"objectID":"1673521560","permalink":"/post/win10-winrm-to-remote-host/","title":"[Windows] ä½¿ç”¨ winrm é ç«¯é€£ç·šåˆ°å…¶ä»–ä¸»æ©Ÿ","content":"é ç«¯æ©Ÿå™¨è¨­å®š\rwinrm service é è¨­éƒ½æ˜¯æœªå•Ÿç”¨çš„ç‹€æ…‹ï¼Œå…ˆæª¢è¦–ç‹€æ…‹ï¼›å¦‚ç„¡è¿”å›è³‡è¨Šï¼Œå‰‡æ˜¯æ²’æœ‰å•Ÿå‹•ï¼›\n1winrm enumerate winrm/config/listener é‡å° winrm service é€²è¡ŒåŸºç¤é…ç½®ï¼š\n1winrm quickconfig é‡æ–°æª¢è¦– winrm service listener:\n1winrm e winrm/config/listener ç‚º winrm service é…ç½®auth:\n1winrm set winrm/config/service/auth \u0026#39;@{Basic=\u0026#34;true\u0026#34;}\u0026#39; ç‚º winrm service é…ç½®åŠ å¯†æ–¹å¼ç‚ºå…è¨±éåŠ å¯†ï¼š\n1winrm set winrm/config/service \u0026#39;@{AllowUnencrypted=\u0026#34;true\u0026#34;}\u0026#39; æœ¬åœ°æ©Ÿå™¨è¨­å®š\rå¦‚æœè¦ç”¨ powershell é€£çš„è©±ï¼Œæœ¬åœ°ç«¯ä¹Ÿéœ€è¦è¨­ç½® trustedhosts çš„ value\n1Set-Item WSMan:\\localhost\\Client\\TrustedHosts -Value \u0026#34;*\u0026#34; -Force å¦‚æœä¸Ÿ Access Denied çš„éŒ¯èª¤çš„è©±ï¼Œå‰‡ä½¿ç”¨ Administrator èº«åˆ†é–‹å•Ÿ powershell ä¸¦è¨­ç½®\n1Set-ItemProperty -Path HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System -Name LocalAccountTokenFilterPolicy -Value 1 -Type DWord ä½¿ç”¨ Invoke-Command é€£ç·šä¸‹æŒ‡ä»¤\r1Invoke-Command -ComputerName \u0026lt;é ç«¯ç³»çµ±åç¨±\u0026gt; -ScriptBlock { \u0026lt;é ç«¯æŒ‡ä»¤\u0026gt; } -credential \u0026lt;é ç«¯ç³»çµ±ä½¿ç”¨è€…å¸³æˆ¶å\u0026gt; å°‡ \u0026lt;é ç«¯ç³»çµ±åç¨±\u0026gt; æ›¿æ›ç‚ºé ç«¯ç³»çµ±çš„åç¨±æˆ– IP ä½å€ï¼Œä¸¦å°‡ \u0026lt;é ç«¯æŒ‡ä»¤\u0026gt; æ›¿æ›ç‚ºè¦åœ¨é ç«¯ç³»çµ±ä¸ŠåŸ·è¡Œçš„ PowerShell æŒ‡ä»¤ã€‚æŒ‡ä»¤æ‡‰è©²æ”¾åœ¨å¤§æ‹¬è™Ÿ {} å…§ï¼Œä»¥ä¾¿æ–¼å½¢æˆè…³æœ¬å¡Šã€‚æœ€å¾Œå¸¶ä¸Šè¦ä½¿ç”¨å“ªå€‹ä½¿ç”¨è€…å¸³æˆ¶åŸ·è¡Œï¼Œæœƒè·³å‡ºè¦–çª—è¼¸å…¥å¸³å¯†è³‡è¨Šã€‚\nReference\rhttps://dotblogs.com.tw/momoBear/2018/01/04/160854\rhttps://social.technet.microsoft.com/Forums/Azure/en-US/b853e77c-7c9a-4231-a32b-c63727ec5868/access-denied-when-trying-to-set-trusted-hosts-for-psremoting?forum=winserverpowershell\r","date":"2023-01-12T11:06:00+00:00","updated":"2023-01-12T11:06:00+00:00"},{"objectID":"1673345580","permalink":"/post/os-win10-openssh/win10-openssh/","title":"[Windows] ä½¿ç”¨ openssh é€£ç·šåˆ°å…¶ä»–ä¸»æ©Ÿ","content":"åœ¨é€£ç·šæ©Ÿå™¨ä¸Šçš„åœ¨ Windows é¸ç”¨åŠŸèƒ½ä¸‹å®‰è£ OpenSSH Server\næˆ–æ˜¯ä½¿ç”¨ powershell è¨­å®š\n1Get-Service -Name *ssh* 2Start-Service sshd 3Set-Service -Name sshd -StartupType \u0026#39;Automatic\u0026#39; 4New-NetFirewallRule -Name sshd -DisplayName \u0026#39;OpenSSH Server (sshd)\u0026#39; -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 ä¾¿å¯ä»¥ä½¿ç”¨ 22 ç«¯å£é€£ç·šè‡³æ©Ÿå™¨ä¸Š\n1ssh -p 22 Administrator@192.168.1.90 ","date":"2023-01-10T10:13:00+00:00","updated":"2023-01-10T10:13:00+00:00"},{"objectID":"1672258920","permalink":"/post/docker-exec-no-such-file-or-directory-in-wsl/","title":"[Docker] åœ¨ wsl docker å‡ºç¾ exec no such file or directory éŒ¯èª¤","content":"TL;DR\råœ¨ windows ç’°å¢ƒä¸‹ build docker image ä¸¦è·‘ container æ™‚æœƒå‡ºç¾ exec xxx no such file or directory çš„éŒ¯èª¤ï¼Œä½†æ˜æ˜ä½¿ç”¨åŒæ¨£çš„ dockerfile åœ¨ linux ç’°å¢ƒå»æ²’å•é¡Œã€‚\nReason\råŸå› æ˜¯å› ç‚ºæ›è¡Œå•é¡Œï¼ŒDocker ä¸èªè­˜ Windows çš„ CRLF æ›è¡Œã€‚å¯ä»¥çœ‹é€™å€‹ç¯„ä¾‹æ›´æ¸…æ¥šï¼Œåœ¨ alpine container ç’°å¢ƒåŸæœ¬çš„ CRLF æ›è¡Œæœƒè¢«è§£è­¯æˆ \\rã€‚\nSolution\rå°‡ Dockerfile çš„æ›è¡Œç¬¦å¾ CRLF æ”¹æˆ LFï¼Œå¯ä½¿ç”¨ VS Code æœ€ä¸‹æ–¹ status bar çš„ Select End of Line Sequence åŠŸèƒ½ï¼Œä¸¦å­˜æª”å†é‡ build å³å¯ã€‚\n","date":"2022-12-28T20:22:00+00:00","updated":"2022-12-28T20:22:00+00:00"},{"objectID":"1671393120","permalink":"/post/node-send-mail-by-nodemailer/","title":"[Node.js] ä½¿ç”¨ NodeMailer ç™¼é€ä¿¡ä»¶","content":"TL;DR\råœ¨æœ¬åœ°ç«¯é€é nodemailer å¯„é€éƒµä»¶æ™‚ï¼Œç™¼ç¾é è¨­çš„ 25 port æœƒæœ‰ connect ECONNREFUSED çš„éŒ¯èª¤ç„¡æ³•å‚³é€ã€‚\nSolution\r1import * as nodemailer from \u0026#39;nodemailer\u0026#39;; 2import {Options} from \u0026#39;nodemailer/lib/mailer\u0026#39;; 3 4async function mail(){ 5 const transporter = nodemailer.createTransport({ 6 host: \u0026#34;hqsmtp.abc.com\u0026#34;, 7 port: 587, 8 secure: false, 9 auth: { 10 user: \u0026#34;test1@abc.com\u0026#34;, 11 pass: \u0026#34;!Passw0rd\u0026#34; 12 }, 13 tls: { 14 rejectUnauthorized: false 15 } 16 }); 17 18 const options: Options = { 19\tfrom: \u0026#34;test1@abc.com\u0026#34;, 20\tto: \u0026#34;test2@abc.com\u0026#34;, 21\tsubject: \u0026#34;test\u0026#34;, 22\ttext: \u0026#34;test\u0026#34;, 23 }; 24 await transporter.sendMail(options); 25 transporter.close(); 26} secure \u0026lt;boolean\u0026gt; â€“ If false (the default) then TLS is used if server supports the STARTTLS extension. For port 587 or 25 keep it false\nrejectUnauthorized \u0026lt;boolean\u0026gt; â€“ If not false the server will reject any connection which is not authorized with the list of supplied CAs. This option only has an effect if requestCert is true. Default: true.\nReference\rhttps://stackoverflow.com/questions/46742402/error-self-signed-certificate-in-certificate-chain-nodejs-nodemailer-express\r","date":"2022-12-18T19:52:00+00:00","updated":"2022-12-18T19:52:00+00:00"},{"objectID":"1668892680","permalink":"/post/powershell-partition-and-format-all-disk-at-once/","title":"[PowerShell] ä¸€æ¬¡åˆ†å‰²æ‰€æœ‰ç¡¬ç¢Ÿ","content":"Get-Disk\rå–å¾—ç•¶å‰é€£æ¥åˆ° win10 çš„æ‰€æœ‰ç¡¬ç¢Ÿ\n1Get-Disk ç¡¬ç¢Ÿåˆå§‹åŒ–\rå°‡ç¡¬ç¢Ÿè¨­ç½®ç‚º online ä»¥åŠé—œé–‰ readonlyï¼Œä¸¦åˆå§‹åŒ–æ‰€æœ‰ç¡¬ç¢ŸæŒ‡å®šåˆ†å‰²å€æ¨£å¼ç‚º GPTï¼ˆGUID Partition Tableï¼‰ã€‚\n1try { 2 Get-Disk | ?{$_.number -ne 0}| Set-Disk -IsOffline $False 3 Get-Disk | ?{$_.number -ne 0}| Set-Disk -isReadOnly $False 4 Get-Disk | ?{$_.number -ne 0}| Initialize-Disk -PartitionStyle GPT 5}catch{ 6 Write-Host $_.Exception.Message 7} ç£ç¢Ÿåˆ†å‰²\rä¾åºåˆ†å‰²ç£ç¢Ÿä¸¦æŒ‡æ´¾ç£ç¢Ÿæ§½ä»£è™Ÿï¼Œæœ€å¾Œæ ¼å¼åŒ–\n1try { 2 # ç‚ºæ‰€æœ‰ç¡¬ç¢Ÿå»ºç«‹åˆ†å€ä¸¦è‡ªå‹•æŒ‡æ´¾ç¡¬ç¢Ÿä»£è™Ÿä»¥åŠä½¿ç”¨æœ€å¤§çš„ç¡¬ç¢Ÿå¤§å° 3 Get-Disk | ?{$_.number -ne 0}| New-Partition -AssignDriveLetter -UseMaximumSize 4 # å–å¾—æ‰€æœ‰ç¡¬ç¢Ÿçš„åˆ†å€ä¸¦æ ¼å¼åŒ– 5 Get-Disk | ?{$_.number -ne 0}| Get-Partition |?{$_.type -like \u0026#34;Basic\u0026#34;}| Format-Volume -Confirm:$false 6}catch{ 7 Write-Host $_.Exception.Message 8} å…¶ä¸­ Format-Volume ä½¿ç”¨é è¨­çš„æª”æ¡ˆç³»çµ± NTFSï¼Œé‚„æœ‰å…¶ä»–å¯èƒ½çš„å€¼ï¼š\nNTFSï¼šé è¨­æª”æ¡ˆç³»çµ±ï¼Œæä¾›äº†å°å¤§å‹æª”æ¡ˆå’Œåˆ†å‰²å€çš„æ”¯æ´ï¼Œä¸¦å…·æœ‰é«˜åº¦çš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚ FAT32ï¼šèˆ‡ Windows å’Œå…¶ä»–æ“ä½œç³»çµ±çš„ç›¸å®¹æ€§è¼ƒå¥½ï¼Œä½†ä¸æ”¯æ´å–®å€‹æª”æ¡ˆè¶…é 4GBã€‚ exFATï¼šèˆ‡ Windows å’Œå…¶ä»–æ“ä½œç³»çµ±çš„ç›¸å®¹æ€§è¼ƒå¥½ï¼Œæ”¯æ´å¤§å‹æª”æ¡ˆå’Œåˆ†å‰²å€ï¼Œä½†ä¸å¦‚ NTFSã€‚ Reference\rhttp://www.alexandreviot.net/2015/05/02/powershell-how-to-format-all-disks/\r","date":"2022-11-19T21:18:00+00:00","updated":"2022-11-19T21:18:00+00:00"},{"objectID":"1666552080","permalink":"/post/k8s-cronjob-run-job-alpine-at-last-sunday-of-the-month/cronjob-for-last-day-of-the-month-using-kubernetes/","title":"CronJob to Run the Job (alpine base image) at the Last Sunday of the Month","content":"TL;DR\ræœ¬ç¯‡æ–‡ç« è¨˜éŒ„å¦‚ä½•åœ¨ aplpine base çš„ container ä¸­æ–¼æ¯æœˆçš„æœ€å¾Œä¸€å€‹ç¦®æ‹œæ—¥åŸ·è¡ŒæŒ‡å®šä»»å‹™ã€‚\nSoluiton\r1apiVersion: batch/v1 2kind: CronJob 3metadata: 4 name: hello 5 namespace: test 6spec: 7 schedule: \u0026#34;0 8 * * 0\u0026#34; 8 jobTemplate: 9 spec: 10 template: 11 spec: 12 containers: 13 - name: hello 14 image: alpine:3.16 15 resources: 16 limits: 17 cpu: \u0026#34;2\u0026#34; 18 memory: 4000Mi 19 imagePullPolicy: Always 20 command: 21 - /bin/sh 22 - -c 23 - \u0026#39;[ $(date +%m) -ne $(date -d \u0026#34;@$(($(date +%s) + 604800))\u0026#34; +%m) ] \u0026amp;\u0026amp; echo Hello from the Kubernetes cluster\u0026#39; 24 restartPolicy: OnFailure å‘\råŸæœ¬å‰é¢åˆ¤æ–·çš„èªæ³•æ˜¯å¯«åœ¨ ubuntu ä¸‹ run å¾—å¥½å¥½çš„ [ $(date +%m) -ne $(date -d +7days +%m) ]ï¼Œä½†æ˜¯æ®Šä¸çŸ¥æ¬åˆ° alpine container å¾Œæœƒå ±éŒ¯ date: invalid date '+7days'ã€‚æ‰€ä»¥æ”¹å¯«æˆ apline ç’°å¢ƒä¸­èªå¾—çš„ -d æ ¼å¼ï¼\nReference\rhttps://stackoverflow.com/questions/71651529/schedule-cronjob-for-last-day-of-the-month-using-kubernetes\rhttps://unix.stackexchange.com/a/522622\r","date":"2022-10-23T19:08:00+00:00","updated":"2022-10-23T19:08:00+00:00"},{"objectID":"1666552020","permalink":"/post/k8s-minikube-pull-img-from-harbor-in-wsl2/minikube-pull-harbor-image/","title":"Minikube Pull Image from Private Repository in WSL2","content":"TL;DR\råœ¨ windows ç’°å¢ƒçš„ wsl2 Ubuntu ä¸Šè·‘äº† Minikube è¦ç”¨ä¾†æ¸¬è©¦ kubernetes çš„æ‡‰ç”¨ä½ˆå±¬ï¼Œä½†ä¸€ç›´å¡åœ¨æ‹‰å–å…¬å¸å…§éƒ¨ harbor é¡åƒçš„æ™‚å€™å ± x509: certificate signed by unknown authority éŒ¯èª¤ã€‚\nå˜—è©¦åœ¨ docker desktop çš„ docker engine åŠ ä¸Š insecure-registries çš„åƒæ•¸ä½†æ˜¯ minikube ä¸æ›‰å¾—ç‚ºä»€éº¼åƒä¸åˆ°ï¼Œä¹Ÿè©¦éæŠŠæ†‘è­‰æ”¾åˆ° /etc/ssl/certs ä¸‹ä½†ä¸€æ¨£ä¸èªå¾— =__=? ç¸½ä¹‹æœ€å¾Œæ‰ç™¼ç¾ minikube çš„ docker è·Ÿ docker desktop çš„ docker ç’°å¢ƒæ˜¯åˆ†é–‹çš„ã€‚\nSolution\r1vi ~/.minikube/machines/\u0026lt;PROFILE_NAME\u0026gt;/config.json (in my case ~/.minikube/machines/minikube/config.json) add private repo on InsecureRegistry attribute (json path: HostOptions.EngineOptions.InsecureRegistry) 1minikube stop 2minikube start Then, change the Docker daemon from Minikube\n1eval $(minikube docker-env) Reference\rhttps://stackoverflow.com/questions/38748717/can-not-pull-docker-image-from-private-repo-when-using-minikube\rhttps://tachingchen.com/tw/blog/build-docker-image-in-minikube-vm/\rhttps://stackoverflow.com/questions/52310599/what-does-minikube-docker-env-mean\r","date":"2022-10-23T19:07:00+00:00","updated":"2022-10-23T19:07:00+00:00"},{"objectID":"1666551840","permalink":"/post/k8s-run-crond-as-non-root-in-alpine/run-crond-as-non-root-in-alpine-container-by-pod-or-deployment/","title":"Run Crond as Non Root in Alpine Container by Pod/Deployment","content":"TL;DR\råœ¨\rä¸Šä¸€ç¯‡æ–‡ç« \rä¸­è©¦äº†åœ¨ alpine docker container ä¸­ä½¿ç”¨ non root user è·‘ crondï¼Œä½†å°‡ build å¥½çš„ docker image æ¬åˆ° kubernetes çµ¦ deployment çš„ pod ä½¿ç”¨æ™‚ï¼Œå»æœƒå‡ºç¾ initgroup operation not permitted çš„éŒ¯èª¤ã€‚\nè¸©å‘è¸©äº†æ•´æ•´ä¸‰å¤©ï¼Œè©²æ”¹çš„æ¬Šé™éƒ½æ”¹äº†ï¼Œæœ€å¾Œçµ‚æ–¼æ‰¾åˆ° supercronic é€™å€‹é…·æ±è¥¿ T_T\nDockerfile\ré€™é‚Šçš„ dockerfile ç›´æ¥å…ˆä¸‹è¼‰å¥½ supercronic build å¥½çš„ binaryï¼Œå† COPY é€² image ä¸­ï¼Œä¹Ÿå¯ä»¥åƒè€ƒ installation instruction\råœ¨ build çš„éšæ®µä¸‹è¼‰ã€‚\n1# We want to populate the module cache based on the go.{mod,sum} files. 2COPY go.mod . 3COPY go.sum . 4 5RUN go mod download 6 7COPY . . 8 9# Build the Go app 10RUN go build -o ./out/ccoe-bot . 11 12# Start fresh from a smaller image 13FROM harbor.wistron.com/base_image/alpine:3.12 14 15USER root 16 17RUN apk update \u0026amp;\u0026amp; addgroup --gid 1000 ccoebot \u0026amp;\u0026amp; adduser --disabled-password --ingroup ccoebot --uid \u0026#34;1000\u0026#34; ccoebot 18 19COPY --from=build_base --chown=ccoebot:ccoebot /tmp/ccoe-bot/out/ccoe-bot /home/ccoebot/app/ccoe-bot 20COPY bin/git-sync /usr/bin 21COPY bin/terragrunt /usr/bin 22COPY bin/terrascan /usr/bin 23COPY bin/supercronic /usr/bin 24COPY --chown=ccoebot:ccoebot init.sh /home/ccoebot/app 25 26USER ccoebot 27RUN git clone https://gitlab.wistron.com/ccoe/terrascan_policy.git /home/ccoebot/terrascan_policy 28WORKDIR /home/ccoebot/terrascan_policy 29RUN terrascan init -c terrascan-config.toml 30WORKDIR /home/ccoebot/.terrascan 31RUN git config --bool branch.master.sync true \u0026amp;\u0026amp; git branch -D HEAD 32 33# set scheduler for git-sync 34RUN echo \u0026#34;*/10 * * * * cd /home/ccoebot/.terrascan \u0026amp;\u0026amp; date \u0026gt;\u0026gt; /home/ccoebot/app/sync.log \u0026amp;\u0026amp; /usr/bin/git-sync \u0026gt;\u0026gt; /home/ccoebot/app/sync.log\u0026#34; \u0026gt;\u0026gt; /home/ccoebot/app/mycron 35 36# This container exposes port 8080 to the outside world 37EXPOSE 8080 38 39# Run the binary program produced by `go install` 40#CMD [\u0026#34;/app/ccoe-bot\u0026#34;] 41# repack the ccoe-bot and crond to init.sh 42 43CMD [\u0026#34;/home/ccoebot/app/init.sh\u0026#34;] init.sh\ré€™è£¡åˆæ˜¯å¦ä¸€å€‹è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå› ç‚º supercronic ä¹Ÿæ˜¯ä¸€å€‹è¦è·‘çš„ä½¿ç”¨è€…ç¨‹åºï¼Œæ•…é€™å€‹æ¡ˆä¾‹åŒæ™‚æœƒæœ‰å…©å€‹ç¨‹åºéœ€è¦åœ¨ CMD è£¡é¢ä¸€åŒè·‘èµ·ï¼Œä½¿ç”¨ä¸‹é¢çš„å¯«æ³•å®Œæˆåœ¨åŒå€‹ container ä¸­è·‘å…©å€‹ç¨‹åºã€‚\n1#!/bin/bash 2 3/usr/bin/supercronic /home/ccoebot/app/mycron \u0026amp; 4P1=$! 5/home/ccoebot/app/ccoe-bot \u0026amp; 6P2=$! 7wait $P1 $P2 æˆ–æ˜¯\n1#!/bin/bash 2 3# Start the first process 4/usr/bin/supercronic /home/ccoebot/app/mycron \u0026amp; 5 6# Start the second process 7/home/ccoebot/app/ccoe-bot \u0026amp; 8 9# Wait for any process to exit 10wait -n 11 12# Exit with status of process that exited first 13exit $? kubernetes deployment yaml\r1apiVersion: apps/v1 2kind: Deployment 3metadata: 4 name: dev-ccoebot 5 namespace: atlantis 6spec: 7 progressDeadlineSeconds: 600 8 replicas: 1 9 revisionHistoryLimit: 10 10 selector: 11 matchLabels: 12 app: dev-ccoebot 13 strategy: 14 rollingUpdate: 15 maxSurge: 1 16 maxUnavailable: 0 17 type: RollingUpdate 18 template: 19 spec: 20 containers: 21 - image: harbor.wistron.com/k8sprdwhqccoe/ccoe-bot:nonroot 22 imagePullPolicy: IfNotPresent 23 name: dev-ccoebot 24 resources: 25 requests: 26 memory: \u0026#39;256Mi\u0026#39; 27 cpu: \u0026#39;512m\u0026#39; 28 limits: 29 memory: \u0026#39;1024Mi\u0026#39; 30 cpu: \u0026#39;1024m\u0026#39; 31 securityContext: 32 runAsUser: 1000 33 runAsGroup: 1000 34 allowPrivilegeEscalation: false 35 privileged: false 36 readOnlyRootFilesystem: false 37 runAsNonRoot: true 38 stdin: true 39 terminationMessagePath: /dev/termination-log 40 terminationMessagePolicy: File 41 tty: true 42 dnsPolicy: ClusterFirst 43 imagePullSecrets: 44 - name: hbsrt 45 restartPolicy: Always 46 schedulerName: default-scheduler 47 securityContext: 48 runAsUser: 1000 49 runAsGroup: 1000 50 fsGroup: 1000 51 runAsNonRoot: true 52 terminationGracePeriodSeconds: 30 Result\rReference\ræ‹¯æ•‘æˆ‘ç”¨ supercronic çš„æ–‡ç« , æ„Ÿè¬ alesk å¤§\nhttps://gist.github.com/alesk/33b716f04cdce0751473b8232405dc32\rRun Mutiple Process in Container: https://docs.docker.com/config/containers/multi-service_container/\rhttps://stackoverflow.com/a/56663151\r","date":"2022-10-23T19:04:00+00:00","updated":"2022-10-23T19:04:00+00:00"},{"objectID":"1666551720","permalink":"/post/devops-run-cronjob-as-non-root-user-in-alpine-docker-container/docker-run-cronjob-as-non-root-user-in-alpine-container/","title":"[Docker] Run Cronjob as Non Root User in Alpine Container","content":"TL;DR\rapline image é è¨­åªèƒ½çµ¦ root åŸ·è¡Œ crondï¼Œä½†å‰›å¥½é‡åˆ°æœ‰ä¸å…è¨± container ä½¿ç”¨ root åŸ·è¡Œçš„å®‰å…¨æ”¿ç­–çš„æƒ…æ³ã€‚æœ¬ç¯‡è¨˜éŒ„å¦‚ä½•åœ¨ apline container ä¸­ä½¿ç”¨ non root user åŸ·è¡Œ crondã€‚\nDockerfile\r1FROM harbor.wistron.com/base_image/alpine:3.12 2 3USER root 4RUN apk update \u0026amp;\u0026amp; apk --no-cache add dcron libcap 5 6RUN addgroup --gid 1000 ula \u0026amp;\u0026amp; adduser --disabled-password --ingroup ula --uid \u0026#34;1000\u0026#34; ula 7 8RUN chown ula:ula /usr/sbin/crond \u0026amp;\u0026amp; setcap cap_setgid=ep /usr/sbin/crond 9 10COPY --chown=ula:ula init.sh /home/ula/app 11RUN touch /etc/crontabs/ula \u0026amp;\u0026amp; chown -R ula:ula /etc/crontabs/ula 12 13USER ula 14 15# set scheduler 16RUN echo \u0026#34;*/10 * * * * date \u0026gt;\u0026gt; /home/ccoebot/app/sync.log\u0026#34; \u0026gt;\u0026gt; /etc/crontabs/ula 17 18# This container exposes port 8080 to the outside world 19EXPOSE 8080 20 21CMD [\u0026#34;/home/ula/app/init.sh\u0026#34;] init.sh\r1#!/bin/bash 2crond -l 8 Result\rReference\rhttps://github.com/gliderlabs/docker-alpine/issues/381\r","date":"2022-10-23T19:02:00+00:00","updated":"2022-10-23T19:02:00+00:00"},{"objectID":"1666551540","permalink":"/post/devops-ansible-windows-update-with-auth-proxy/ansible-windows-update-with-auth-proxy/","title":"[Ansible] Windows Update with Authenticated Proxy","content":"èƒŒæ™¯\råœ¨é€é ansible windows update module æ›´æ–° windows æ™‚ï¼Œéƒ½æœƒå› ç‚º proxy æ²’æœ‰è¨­ç½®è€Œå¤±æ•—ã€‚\nè§£æ±ºæ–¹å¼\r1- name: Configure IE proxy settings to apply to all users 2 ansible.windows.win_regedit: 3 path: HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\CurrentVersion\\Internet Settings 4 name: ProxySettingsPerUser 5 data: 0 6 type: dword 7 state: present 8 9- name: Configure IE to use a specific proxy per protocol 10 community.windows.win_inet_proxy: 11 auto_detect: no 12 proxy: whqproxys.abc.com:8080 13 14- name: Set credential to use for proxy auth 15 community.windows.win_credential: 16 name: whqproxys.abc.com 17 type: generic_password 18 username: \u0026#34;{{ proxy_user }}\u0026#34; 19 secret: \u0026#34;{{ lookup(\u0026#39;env\u0026#39;, \u0026#39;VC_PASSWORD\u0026#39;) }}\u0026#34; 20 state: present 21 become: yes 22 become_user: Administrator 23 become_method: runas 24 25- name: Set the proxy to be able to run Windows Updates 26 ansible.windows.win_command: 27 cmd: netsh winhttp import proxy source=ie 28 29- name: Search-only, return list of found updates (if any), log to txt file 30 ansible.windows.win_updates: 31 category_names: \u0026#39;*\u0026#39; 32 state: searched 33 log_path: C:\\Users\\Administrator\\Desktop\\ansible_update_list.txt 34 35- name: Windows Update which may take a significant amount of time to complete 36 ansible.windows.win_updates: 37 category_names: \u0026#39;*\u0026#39; 38 state: installed 39 reboot: yes 40 log_path: C:\\Users\\Administrator\\Desktop\\ansible_update_log.txt è£œå……\rAnsible win_inet_proxy çš„æ–‡ä»¶\råœ¨è¨­å®š IE http proxy æ™‚æ˜¯é€é win_http_proxy çš„æ¨¡çµ„ï¼Œä½†è©²ä½œæ³•å¥½åƒå¤±æ•—ï¼Œé‚„æ˜¯éœ€ç”¨ netsh winhttp import proxy source=ie æ‰å¯æ­£ç¢ºæ‡‰ç”¨ã€‚\n1# å¤±æ•— 2- name: Import IE proxy configuration to WinHTTP 3 community.windows.win_http_proxy: 4 source: ie Reference\ræ„Ÿè¬æ¥µç‚ºç¨€æœ‰çš„ serverfault ä¸Šçš„å•é¡Œ T_T\r","date":"2022-10-23T18:59:00+00:00","updated":"2022-10-23T18:59:00+00:00"},{"objectID":"1666551300","permalink":"/post/programming-node-get-access-token-graph-api/node-get-azure-graph-access-token/","title":"[Node.js] Get Access Token ä¸¦ä½¿ç”¨ Microsoft Graph API æ“ä½œ AD Application","content":"æƒ…æ™¯\rä½¿ç”¨ NodeJS @azure/msal-node module å–å¾— Access Tokenï¼Œä¸¦é€²ä¸€æ­¥ä½¿ç”¨ Microsoft Graph API å°æ“ä½œ Azure AD Application åš Role Assignmentã€‚\nä½œæ³•\r1import * as https from \u0026#39;https\u0026#39;; 2import fetch from \u0026#39;node-fetch\u0026#39;; 3import * as msal from \u0026#39;@azure/msal-node\u0026#39;; 4 5const httpsAgent = new https.Agent({ 6 rejectUnauthorized: false, 7 keepAlive: true 8}); 9 10const msalConfig = { 11 auth: { 12 clientId: \u0026#39;\u0026lt;YOUR CLIENT ID\u0026gt;\u0026#39;, 13 clientSecret: \u0026#39;\u0026lt;YOUR CLIENT SECRET\u0026gt;\u0026#39;, 14 authority: \u0026#39;https://login.microsoftonline.com/\u0026lt;YOUR TENANT ID\u0026gt;/\u0026#39; 15 }, 16}; 17 18async function getToken(): Promise\u0026lt;any\u0026gt; { 19 const cca = new msal.ConfidentialClientApplication(msalConfig); 20 try{ 21 return await cca.acquireTokenByClientCredential({ 22 scopes: [\u0026#39;https://graph.microsoft.com/.default\u0026#39;], 23 }); 24 }catch(e){ 25 console.log(`Get Azure Access Token Error: ${e}`); 26 } 27} 28 29async function addAzureOpsgenieAppRole(userPrincipalName: string): Promise\u0026lt;any\u0026gt; { 30 const authResponse = await getToken(); 31 const response = await fetch(`https://graph.microsoft.com/v1.0/users/${userPrincipalName}`, { 32 method: \u0026#39;get\u0026#39;, 33 headers: {\u0026#39;Authorization\u0026#39;: `Bearer ${authResponse.accessToken}`}, 34 agent: httpsAgent 35 }).then( response =\u0026gt; { 36 if(response.ok){ 37 return response.json(); 38 }else{ 39 return Promise.reject(response); 40 } 41 }).then( data =\u0026gt; { 42 const createBody = { 43 principalId: data.id, 44 resourceId: \u0026#39;\u0026lt;YOUR RESOURCE ID\u0026gt;\u0026#39;, 45 appRoleId: \u0026#39;\u0026lt;YOUR APPLICATION ROLE ID\u0026gt;\u0026#39; 46 } 47 return fetch(`https://graph.microsoft.com/v1.0/users/${data.id}/appRoleAssignments`, { 48 method: \u0026#39;post\u0026#39;, 49 body: JSON.stringify(createBody), 50 headers: {\u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Authorization\u0026#39;: `Bearer ${authResponse.accessToken}`}, 51 agent: httpsAgent 52 }).then( response =\u0026gt; { 53 if (response.ok) { 54 console.log(\u0026#39;Successfully add user as assgined role to Azure AD Application\u0026#39;) 55 return response.json(); 56 } else { 57 return Promise.reject(response); 58 } 59 }) 60 }).catch( e =\u0026gt; { 61 console.warn(\u0026#39;User Assignment already exists or error happens\u0026#39;, e) 62 }); 63} 64 65addAzureOpsgenieAppRole(\u0026#39;ulahsieh@abc.com\u0026#39;) ","date":"2022-10-23T18:55:00+00:00","updated":"2022-10-23T18:55:00+00:00"},{"objectID":"1666551120","permalink":"/post/devops-ansible-cannot-resolve-module-action-windows-win-powershell/ansible-coundnot-resolve-module-action/","title":"[Ansible] couldn't resolve module/action 'ansible.windows.win_powershell","content":"å•é¡Œ\råœ¨ alphine 3.13 å®‰è£ ansible ä»¥åŠç›¸é—œ ansible æ¨¡çµ„å¾Œæ‰“åŒ… docker imageï¼Œåœ¨åŸ·è¡Œæ™‚ ansible.windows.win_powershell æ¨¡çµ„æ™‚æœƒå ±éŒ¯\n1ERROR! couldn\u0026#39;t resolve module/action \u0026#39;ansible.windows.win_powershell\u0026#39;. This often indicates a misspelling, missing collection, or incorrect module path. åŸå› \råŸå…ˆä½¿ç”¨çš„ docker base image ç‚ºå…¬å¸å…§éƒ¨äº‹å…ˆåŒ…å¥½çš„ alpine 3.13 ç‰ˆæœ¬ï¼Œä»¥è©²ç‰ˆç‚ºåŸºç¤ apk add å®‰è£çš„ ansible-core åªåˆ° 2.10ï¼Œå…¶ä¸­ ansible.windows collection ä¸¦ç„¡åŒ…å« win_powershell æ¨¡çµ„ã€‚\nè§£æ±ºæ–¹æ³•\rå°‡ docker base image alpine å‡ç´šåˆ° 3.16ï¼Œå³å¯è§£æ±ºã€‚\nè£œå……ä¸€ä¸‹ï¼Œåœ¨å…¬å¸å…§éƒ¨ç¶²è·¯ä¸Šç„¡æ³•ç›´æ¥ä½¿ç”¨ dockerhub çš„ alpineï¼Œå› ç‚ºæ²’æœ‰ proxy å‡ºä¸å»å¤–ç¶²ï¼Œæ•…é ˆå…ˆè‡ªå·±è¨­ proxy\n1FROM alpine:3.16 2 3ENV http_proxy=http://whqproxys.wistron.com:8080 4ENV https_proxy=http://whqproxys.wistron.com:8080 5ENV no_proxy=127.0.0.1,localhost,wistron.com,wistron.com.cn 6 7RUN apk upgrade \u0026amp;\u0026amp; rm -rf /var/cache/apk/* Reference\rhttps://bytemeta.vip/repo/ansible-collections/ansible.windows/issues/282\r","date":"2022-10-23T18:52:00+00:00","updated":"2022-10-23T18:52:00+00:00"},{"objectID":"1663792260","permalink":"/post/devops-terraform-azurerm-key-vault-secret-error-provider-produced-inconsistent-result/terraform-azurerm-key-vault-bug/","title":"[Terraform] azurerm_key_vault_secret Error: Provider produced inconsistent result after apply ","content":"å•é¡Œæè¿°\rä½¿ç”¨ Terraform çš„ azurerm provider å‰µå»º key vault secret æ™‚ï¼Œæœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤ï¼š\n1â”‚ Error: Provider produced inconsistent result after apply 2â”‚ 3â”‚ When applying changes to azurerm_key_vault_secret.sbcrptnid_srt, provider 4â”‚ \u0026#34;provider[\\\u0026#34;registry.terraform.io/hashicorp/azurerm\\\u0026#34;]\u0026#34; produced an unexpected 5â”‚ new value: Root resource was present, but now absent. 6â”‚ 7â”‚ This is a bug in the provider, which should be reported in the provider\u0026#39;s own 8â”‚ issue tracker. é›–ç„¶å ±éŒ¯ï¼Œä½† secret è³‡æºæœ‰æˆåŠŸè¢«å‰µå»ºã€‚è©²çµæœä¹Ÿå¯ä»¥åœ¨ç¬¬äºŒæ¬¡ apply å¾Œç™¼ç¾åˆ°ï¼Œæœƒæœ‰ä¸åŒéŒ¯èª¤è¨Šæ¯æŒ‡å‡ºè©² resource å·²ç¶“å­˜åœ¨çš„éŒ¯èª¤ï¼š\n1â•· 2â”‚ Error: A resource with the ID \u0026#34;https://kv-srt-test.vault.azure.net/secrets/test/458f9046eeef4ae08a114xxxxxxxxxx\u0026#34; already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for \u0026#34;azurerm_key_vault_secret\u0026#34; for more information. 3â”‚ 4â”‚ with azurerm_key_vault_secret.sbcrptnid_srt, 5â”‚ on main.tf line 5, in resource \u0026#34;azurerm_key_vault_secret\u0026#34; \u0026#34;sbcrptnid_srt\u0026#34;: 6â”‚ 5: resource \u0026#34;azurerm_key_vault_secret\u0026#34; \u0026#34;sbcrptnid_srt\u0026#34; { 7â”‚ ç‚ºäº†å®Œå–„è‡ªå‹•åŒ–æµç¨‹ï¼Œæ‰“ç®—é€é terraform import çš„æ‰‹æ³•å°‡å»ºæˆåŠŸä½†æ²’è¨˜éŒ„åœ¨ terraform state file çš„ secret åŒ¯å…¥ï¼Œä½†åŒ¯å…¥æ™‚æœƒå ±éŒ¯ï¼š\n1Error: Cannot import non-existent remote object 2â”‚ 3â”‚ While attempting to import an existing object to 4â”‚ \u0026#34;azurerm_key_vault_secret.sbcrptnid_srt\u0026#34;, the provider detected that no object 5â”‚ exists with the given id. Only pre-existing objects can be imported; check that 6â”‚ the id is correct and that it is associated with the provider\u0026#39;s configured 7â”‚ region or endpoint, or use \u0026#34;terraform apply\u0026#34; to create a new remote object for 8â”‚ this resource. åŸå› \rè©²éŒ¯èª¤åƒè€ƒ azurerm çš„ gitlab issue #11059\rï¼Œå¯ä»¥ç™¼ç¾åˆ°å¦‚éŒ¯èª¤è¨Šæ¯æ‰€æè¿°çš„æ˜¯ provider çš„ bugã€‚\nè§£æ±ºæ–¹æ³•\rç›®å‰ provider å°šæœª close æ‰è©² bugï¼Œä½†å¯ä»¥è®Šç›¸å¾ terraform import å»æ›´æ–° state fileï¼Œè§£æ±º apply éƒ½æœƒå ±éŒ¯çš„å•é¡Œã€‚åƒè€ƒè©² issue çš„è¨è«–ï¼ŒåŸæœ¬è©¦è‘—ç”¨ community æä¾›çš„ç‚º key vault åŠ ä¸Š tag çš„æ–¹å¼ï¼Œä½†å¤±æ•—ï¼Œå¾Œä¾†åœ¨åŒæ¨£çš„ issue ä¸‹çœ‹åˆ°è§£æ±ºæ–¹å¼ï¼š ç”¨ az account set -s ... å…ˆæŒ‡å®š key vault çš„ subscriptionï¼Œæ¥è‘—å†ä¸‹ terraform importï¼Œå°±å¯ä»¥æˆåŠŸåŒ¯å…¥ secret è‡³ state fileã€‚\næœ€å¾Œç…§å¸¸ä¸‹ terraform apply å°±éƒ½ä¸æœƒå ±éŒ¯äº†ã€‚\n","date":"2022-09-21T20:31:00+00:00","updated":"2022-09-21T20:31:00+00:00"},{"objectID":"1662585180","permalink":"/post/kubernets-basic/","title":"Kubernetes Introduction","content":"ç°¡ä»‹\rå®˜æ–¹å®šç¾©:\nKubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.\rKubernetes åˆç¨±ç‚º k8sï¼Œæœ€åˆç”± google ç”¨ golang é–‹ç™¼è€Œå¾Œé‡‹å‡ºçš„å°ˆæ¡ˆã€‚ç”¨æ–¼æ“ä½œè‡ªå‹•åŒ–å®¹å™¨ï¼ŒåŒ…æ‹¬éƒ¨ç½²ï¼Œèª¿åº¦å’Œç¯€é»é›†ç¾¤é–“æ“´å±•ã€‚\næ¶æ§‹\rä¸Šåœ–ç‚ºä¸€å€‹ç°¡æ˜“çš„ Kubernetes Clusterï¼Œé€šå¸¸ä¸€å€‹ Cluster ä¸­æœƒæœ‰å¤šå€‹ Master ä½œç‚ºå‚™æ´ï¼Œä½†ç‚ºäº†ç°¡åŒ–æˆ‘å€‘åªé¡¯ç¤ºä¸€å€‹ã€‚\né‹ä½œæ–¹å¼\rä½¿ç”¨è€…é€é User Commandï¼ˆkubectlï¼‰å»ºç«‹ Pod æ™‚ç¶“éä½¿ç”¨è€…èº«ä»½çš„èªè­‰å¾Œï¼Œå†å°‡æŒ‡ä»¤å‚³éåˆ° Master Node ä¸­çš„ API Serverï¼ŒAPI Server æœƒæŠŠæŒ‡ä»¤å‚™ä»½åˆ° etcd ã€‚æ¥ä¸‹ä¾† controller-manager æœƒå¾ API Server æ”¶åˆ°éœ€è¦å‰µå»ºä¸€å€‹æ–°çš„ Pod çš„è¨Šæ¯ï¼Œä¸¦æª¢æŸ¥å¦‚æœè³‡æºè¨±å¯ï¼Œå°±æœƒå»ºç«‹ä¸€å€‹æ–°çš„ Podã€‚æœ€å¾Œ Scheduler åœ¨å®šæœŸè¨ªå• API Server æ™‚ï¼Œæœƒè©¢å• controller-manager æ˜¯å¦æœ‰å»ºç½®æ–°çš„ Podï¼Œå¦‚æœç™¼ç¾æ–°å»ºç«‹çš„ Pod æ™‚ï¼ŒScheduler å°±æœƒè² è²¬æŠŠ Pod é…é€åˆ°æœ€é©åˆçš„ä¸€å€‹ Node ä¸Šé¢ã€‚\nç¯€é»èˆ‡çµ„ä»¶\rMaster Node\rç‚º Kubernetes å¢é›†çš„æ§åˆ¶å°ï¼Œè² è²¬ç®¡ç†é›†ç¾¤ã€å”èª¿æ‰€æœ‰æ´»å‹•ï¼ŒåŒ…å«çš„å…ƒä»¶å¦‚ä¸‹ï¼š\nAPI Server\rAPI Server ç®¡ç† Kubernetes çš„æ‰€æœ‰ api interfaceï¼Œç”¨ä¾†å’Œé›†ç¾¤ä¸­çš„å„ç¯€é»é€šè¨Šä¸¦é€²è¡Œæ“ä½œã€‚\nScheduler\rScheduler æ˜¯ Pods èª¿åº¦å“¡ï¼Œç›£è¦–æ–°å»ºç«‹ä½†é‚„æ²’æœ‰è¢«æŒ‡å®šè¦è·‘åœ¨å“ªå€‹ Worker Node ä¸Šçš„ Podï¼Œä¸¦æ ¹æ“šæ¯å€‹ Node ä¸Šé¢è³‡æºå»å”èª¿å‡ºä¸€å€‹æœ€é©åˆæ”¾ç½®çš„å°è±¡çµ¦è©² Podã€‚\nController Manager\rè² è²¬ç®¡ç†ä¸¦é‹è¡Œ Kubernetes controller çš„çµ„ä»¶ï¼Œcontroller æ˜¯è¨±å¤šè² è²¬ç›£è¦– Cluster ç‹€æ…‹çš„ Processï¼Œåˆå¯åˆ†ç‚ºä¸‹åˆ—ä¸åŒçš„ç¨®é¡\nNode controller - è² è²¬é€šçŸ¥èˆ‡å›æ‡‰ç¯€é»çš„ç‹€æ…‹ Replication controller - è² è²¬æ¯å€‹è¤‡å¯«ç³»çµ±å…§ç¶­æŒè¨­å®šçš„ Pod æ•¸é‡ End-Point controller - è² è²¬ç«¯é»çš„æœå‹™ç™¼å¸ƒ Service Account \u0026amp; Token controller - è² è²¬å‰µå»ºæœå‹™å¸³æˆ¶èˆ‡æ–°ç”Ÿæˆçš„ Namespace çš„ API å­˜å– Token etcd\rç”¨ä¾†å­˜æ”¾ Kubernetes Cluster çš„è³‡æ–™ä½œç‚ºå‚™ä»½ï¼Œç•¶ Master å› ç‚ºæŸäº›åŸå› è€Œæ•…éšœæ™‚ï¼Œæˆ‘å€‘å¯ä»¥é€é etcd å¹«æˆ‘å€‘é‚„åŸ Kubernetes çš„ç‹€æ…‹ã€‚\nWorker Node\rç‚º Kubernetes çš„ runtime åŸ·è¡Œç’°å¢ƒï¼ŒåŒ…å«çš„å…ƒä»¶å¦‚ä¸‹ï¼š\nPod\rKubernetes pod æ˜¯ Kubernetes ç®¡ç†çš„æœ€å°å–®å…ƒï¼Œè£¡é¢åŒ…å«ä¸€å€‹æˆ–å¤šå€‹ containerï¼Œå¯è¦–ç‚ºä¸€å€‹æ‡‰ç”¨ç¨‹å¼çš„é‚è¼¯ä¸»æ©Ÿã€‚ åŒä¸€å€‹ Pod ä¸­çš„ Containers å…±äº«ç›¸åŒè³‡æºåŠç¶²è·¯ï¼Œå½¼æ­¤é€é local port number æºé€šã€‚pod é‹è¡Œåœ¨ç§æœ‰éš”é›¢çš„ç¶²çµ¡ä¸Šï¼Œé»˜èªæƒ…æ³ä¸‹åœ¨åŒä¸€é›†ç¾¤çš„å…¶ä»– pod å’Œ service ä¸­å¯è¦‹ï¼Œä½†æ˜¯å¤–éƒ¨ä¸å¯è¦‹ï¼Œéœ€è¦è—‰åŠ© service æš´éœ²çµ¦å¤–éƒ¨ã€‚\nKubelet\rKubelet æ¥å— API server çš„å‘½ä»¤ï¼Œç”¨ä¾†å•Ÿå‹• pod ä¸¦ç›£æ¸¬ç‹€æ…‹ï¼Œç¢ºä¿æ‰€æœ‰ container éƒ½åœ¨é‹è¡Œã€‚å®ƒæ¯éš”å¹¾ç§’é˜å‘ master node æä¾›ä¸€æ¬¡ heartbeatã€‚å¦‚æœ replication controller æœªæ”¶åˆ°è©²æ¶ˆæ¯ï¼Œå‰‡å°‡è©²ç¯€é»æ¨™è¨˜ç‚ºä¸æ­£å¸¸ã€‚\nKube Proxy\ré€²è¡Œç¶²è·¯é€£ç·šçš„ forwardingï¼Œè² è²¬å°‡ request è½‰ç™¼åˆ°æ­£ç¢ºçš„ containerã€‚\nResource\rhttps://blog.sensu.io/how-kubernetes-works\rhttps://medium.com/@C.W.Hu/kubernetes-basic-concept-tutorial-e033e3504ec0\rhttps://ithelp.ithome.com.tw/articles/10202135\r","date":"2022-09-07T21:13:00+00:00","updated":"2022-09-07T21:13:00+00:00"},{"objectID":"1662499020","permalink":"/post/os-wsl2-ubuntu-nsenter-cannot-open-proc-ns-time/wsl2-ubuntu-nsenter-cannot-open-proc-no-such-file-or-directory/","title":"[WSL2] Ubuntu 22.04 LTS nsenter: cannot open /proc/xxx/ns/time: No such file or directory","content":"å•é¡Œ\råœ¨ä½¿ç”¨ https://github.com/DamionGans/ubuntu-wsl2-systemd-script.git\rå®‰è£ systemd å¾Œï¼Œé‡å•Ÿ wslï¼Œå†é–‹ terminal æ™‚æœƒé‡åˆ° cannot open /proc/xxx/ns/time: No such file or directory çš„éŒ¯èª¤ã€‚\nè§£æ±ºæ–¹æ³•\rä½¿ç”¨ powershell é–‹å•Ÿ wsl\n1wsl -d Ubuntu-22.04 -e bash --norc ä¿®æ”¹ enter-systemd-namespace æª”æ¡ˆ\n1sudo vi /usr/sbin/enter-systemd-namespace å°‡ä¸‹é¢å¹¾è¡Œå–ä»£åŸå…ˆçš„å€å¡Š\n1USER_HOME=\u0026#34;$(getent passwd | awk -F: \u0026#39;$1==\u0026#34;\u0026#39;\u0026#34;$SUDO_USER\u0026#34;\u0026#39;\u0026#34; {print $6}\u0026#39;)\u0026#34; 2if [ -n \u0026#34;$SYSTEMD_PID\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$SYSTEMD_PID\u0026#34; != \u0026#34;1\u0026#34; ]; then 3 if [ -n \u0026#34;$1\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$1\u0026#34; != \u0026#34;bash --login\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$1\u0026#34; != \u0026#34;/bin/bash --login\u0026#34; ]; then 4 exec /usr/bin/nsenter -t \u0026#34;$SYSTEMD_PID\u0026#34; -m -p \\ 5 /usr/bin/sudo -H -u \u0026#34;$SUDO_USER\u0026#34; \\ 6 /bin/bash -c \u0026#39;set -a; [ -f \u0026#34;$HOME/.systemd-env\u0026#34; ] \u0026amp;\u0026amp; source \u0026#34;$HOME/.systemd-env\u0026#34;; set +a; exec bash -c \u0026#39;\u0026#34;$(printf \u0026#34;%q\u0026#34; \u0026#34;$@\u0026#34;)\u0026#34; 7 else 8 exec /usr/bin/nsenter -t \u0026#34;$SYSTEMD_PID\u0026#34; -m -p \\ 9 /bin/login -p -f \u0026#34;$SUDO_USER\u0026#34; \\ 10 $([ -f \u0026#34;$USER_HOME/.systemd-env\u0026#34; ] \u0026amp;\u0026amp; /bin/cat \u0026#34;$USER_HOME/.systemd-env\u0026#34; | xargs printf \u0026#39; %q\u0026#39;) 11 fi 12 echo \u0026#34;Existential crisis\u0026#34; 13 exit 1 14fi é€€å‡º powershell terminal ä¹‹å¾Œå†é‡æ–°ä½¿ç”¨ wsl terminal å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±ã€‚\nè£œå……\råœ¨æ¯æ¬¡é‡é–‹æ©Ÿå¾Œï¼ŒWSL çš„ docker éƒ½ä¸æœƒè‡ªå‹•è¢«å«èµ·ä¾†\nè™•ç†æ–¹å¼ç‚ºï¼š é–‹å•Ÿ powershellï¼Œé—œé–‰å°æ‡‰ wsl\n1wsl -t Ubuntu-22.04 é€²å…¥ Docker Desktopï¼Œå–æ¶ˆå°æ‡‰çš„ wsl integration å‹¾é¸ï¼ŒæŒ‰ Apply \u0026amp; Restart\né‡å•Ÿå¾Œå†é‡è¤‡å‹¾é¸ wsl integrationï¼Œä¸¦é‡å•Ÿ\nå›åˆ° powershellï¼Œé‡æ–°å•Ÿå‹• wsl wsl -d Ubuntu-22.04 å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨ docker äº†ã€‚\nReference\rhttps://github.com/DamionGans/ubuntu-wsl2-systemd-script/issues/76#issuecomment-1122717349\rhttps://github.com/DamionGans/ubuntu-wsl2-systemd-script/issues/36#issuecomment-732090101\r","date":"2022-09-06T21:17:00+00:00","updated":"2022-09-06T21:17:00+00:00"},{"objectID":"1662498660","permalink":"/post/devops-ansible-winrm-plaintext-the-specified-credential-were-reject-by-server/ansible-winrm-plaintext-credentials-error/","title":"[Ansible] winrm plaintext: the specified credentials were rejected by the server","content":"ç´€éŒ„ Ansible ä½¿ç”¨ Add host å‹•æ…‹æ–°å¢ Windows æ§åˆ¶ç¯€é»æ™‚ï¼Œé‡åˆ°çš„ winrm å•é¡ŒåŠè§£æ±ºæ–¹æ³•ã€‚\nå•é¡Œ\råœ¨åªæœ‰é…ç½®ä»¥ä¸‹åƒæ•¸çš„æƒ…æ³ä¸‹é€£çµé ç«¯ windows serverï¼Œæœƒå‡ºç¾æ¨™é¡Œå¯«çš„éŒ¯èª¤è¨Šæ¯ã€‚\n1ansible_user: user@DOMAIN.COM 2ansible_password: password 3ansible_connection: winrm 4ansible_ssh_port: 5986 è§£æ±ºæ–¹å¼\rç¢ºèª remote windows çš„ winrm æ¨¡çµ„æ˜¯å¦æœ‰é…ç½® Ansible host é…ç½® 1- name: Add the host 2 add_host: 3 name: win2019 4 ansible_connection: winrm 5 ansible_port: 5985 6 ansible_host: \u0026#34;10.37.39.222\u0026#34; 7 ansible_user: \u0026#34;Administrator\u0026#34; 8 ansible_password: \u0026#34;Passw@ord\u0026#34; 9 ansible_winrm_transport: ntlm 10 ansible_winrm_server_cert_validation: ignore 11 no_log: true ","date":"2022-09-06T21:11:00+00:00","updated":"2022-09-06T21:11:00+00:00"},{"objectID":"1662498420","permalink":"/post/os-powershell-get-acl-drive-not-found/powershell-get-acl-drive-not-found-error/","title":"[PowerShell] Get-Acl Drive Not Found Error","content":"ç´€éŒ„ä¸€ä¸‹åœ¨ windows10 ç’°å¢ƒä¸‹ç„¡æ³•æ­£å¸¸ä½¿ç”¨ get-acl è¨ªå• active directory ç¶²åŸŸæœå‹™ä¸‹çš„è³‡æºçš„å•é¡Œèˆ‡è§£æ±ºæ–¹å¼ã€‚\nå•é¡Œæè¿°\ré€éåœ¨ Azure ä¸Šå»ºç«‹ä¸€å° Windows (21h2)ï¼Œä¸¦å»ºç«‹ peering åˆ°å…¬å¸å…§éƒ¨çš„ hubï¼Œä½¿é€™å° VM å¯ä»¥ç”¨å…¬å¸å…§éƒ¨çš„ IP é€£ç·šä¸¦åŠ å…¥å…¬å¸ç¶²åŸŸï¼Œä½†è¦é€éé€™å° VM åŸ·è¡Œ active directory module çš„ç³»åˆ—æ“ä½œæ™‚ï¼Œæœƒé‡åˆ°ä»¥ä¸‹å•é¡Œï¼š\né¦–å…ˆåœ¨ import ActiveDirectory æ™‚æœƒæœ‰ä»¥ä¸‹éŒ¯èª¤ åœ¨ä½¿ç”¨ get-acl cmdlet æ™‚æœƒé‡åˆ°ä»¥ä¸‹éŒ¯èª¤ Solution\råœ¨ import active directory module å¾Œï¼Œé‡å°æ‰¾ä¸åˆ° drive çš„éŒ¯èª¤å»æ–°å¢ PS Driveã€‚ é¦–å…ˆåœ¨ç›®å‰ç’°å¢ƒä¸‹ä½¿ç”¨ Get-PSDrive æŸ¥çœ‹ç›®å‰æ›è¼‰çš„ç›®éŒ„ï¼Œçš„ç¢ºåœ¨ç›®å‰ç’°å¢ƒä¸­æ²’æœ‰ä»»ä½• AD ç‚ºå‘½åçš„ driveã€‚\nç”¨ä»¥ä¸‹æ–¹å¼æ–°å¢ï¼Œä¸¦åˆ‡æ›ç›®éŒ„:\n1New-PSDrive -Name AD -PSProvider ActiveDirectory -Root \u0026#34;OU=CCOE,OU=Security_Group,OU=Group_Object,DC=whq,DC=wistron\u0026#34; -server \u0026#34;hqnhudc1.whq.wistron\u0026#34; 2 3set-location AD:\\ å®Œæˆå¾Œä¾¿å¯ä»¥æ­£å¸¸ä½¿ç”¨ get-acl æŒ‡ä»¤å»å–å¾—æŒ‡å®šè·¯å¾‘çš„å­˜å–æ¬Šé™ï¼š\n1get-acl -path \u0026#39;Microsoft.ActiveDirectory.Management.dll\\ActiveDirectory:://RootDSE/CN=COGTESTAD,OU=CCOE,OU=Security_Group,OU=Group_Object,DC=whq,DC=wistron\u0026#39; æ³¨æ„ path å¾Œå¸¶çš„ç›®éŒ„ä½å€ä¸èƒ½ç›´æ¥ä½¿ç”¨ distinguished nameï¼Œè€Œæ˜¯å®Œæ•´çš„è·¯å¾‘\nè£œå……èªªæ˜\ræ¸¬è©¦å¾Œï¼Œè©² new drive çš„å‹•ä½œç¨ç«‹æ–¼æ¯å€‹ powershell sessionï¼Œæ‰€ä»¥å¿…é ˆåœ¨æ¯æ¬¡é–‹å•Ÿ terminal æ™‚éƒ½å‹•ä½œï¼Œå¦‚æœæƒ³è¦åœ¨æ¯æ¬¡é–‹å•Ÿå¾Œéƒ½è‡ªå‹•åŠ è¼‰çš„è©±ï¼Œè«‹åƒè€ƒ PowerShell Profile çš„è¨­å®šæª”è¨­å®šã€‚\nReference\rhttps://www.reddit.com/r/PowerShell/comments/38o6me/how_do_i_save_a_newpsdrive_psprovider/\r","date":"2022-09-06T21:07:00+00:00","updated":"2022-09-06T21:07:00+00:00"},{"objectID":"1662498120","permalink":"/post/k8s-kustomize-render-configmap-hashing-name-cronjob-resource/kustomization-render-failed-in-cronjob/","title":"Kustomize Canâ€™t Render the ConfigMap Hashing Name to CronJob Resource","content":"å•é¡Œ\råœ¨ä½¿ç”¨ kustomize é…ç½® Kubernetes è³‡æºæ™‚ï¼ŒKustomization å®šç¾©çš„ ConfigMap ç„¡æ³•æ­£ç¢ºçš„æ¸²æŸ“åˆ° CronJob è³‡æºä¸­ã€‚ åŸ yaml æª”å¦‚ä¸‹:\n1# å»ºç«‹ templatevar æ–‡ä»¶ 2cat \u0026lt;\u0026lt;EOF \u0026gt;templatevar 3FOO=Bar 4EOF 5 6# å»ºç«‹ cronjob æ–‡ä»¶ 7cat \u0026lt;\u0026lt;EOF \u0026gt;cronjob.yaml 8apiVersion: batch/v1 9kind: CronJob 10metadata: 11 name: hello 12 namespace: infrase 13spec: 14 schedule: \u0026#34;25,45,05 * * * *\u0026#34; 15 concurrencyPolicy: Replace 16 jobTemplate: 17 spec: 18 template: 19 spec: 20 containers: 21 - name: hello 22 image: busybox:1.28 23 resources: 24 limits: 25 cpu: \u0026#34;1\u0026#34; 26 memory: 500Mi 27 imagePullPolicy: IfNotPresent 28 securityContext: 29 runAsNonRoot: true 30 runAsUser: 1000 31 allowPrivilegeEscalation: false 32 command: 33 - /bin/sh 34 - -c 35 - date; echo Hello from the Kubernetes cluster \u0026amp;\u0026amp; cat /config/templatevar 36 volumeMounts: 37 - mountPath: /config/ 38 name: templatevar 39 volumes: 40 - name: templatevar 41 configMap: 42 name: templatevar 43 restartPolicy: OnFailure 44EOF 45 46# å»ºç«‹ kustomization æ–‡ä»¶ 47cat \u0026lt;\u0026lt;EOF \u0026gt;./kustomization.yaml 48apiVersion: kustomize.config.k8s.io/v1beta1 49kind: Kustomization 50resources: 51 - cronjob.yaml 52 53configMapGenerator: 54- name: templatevar 55 files: 56 - templatevar 57EOF ä½¿ç”¨ kustomize æ¸²æŸ“å¾Œï¼Œå¯ä»¥çœ‹åˆ° CronJob ä¸­æŒ‡å®šçš„ ConfigMap æ²’æœ‰æ­£ç¢ºåƒåˆ° configMapGenerator æ‰€ç”¢ç”Ÿçš„æª”æ¡ˆã€‚\n1kubectl kustomize ./ 1apiVersion: v1 2data: 3 templatevar: \u0026#34;FOO=Bar\u0026#34; 4kind: ConfigMap 5metadata: 6 name: templatevar-tk9cdghbt6 7 namespace: infrase 8--- 9apiVersion: batch/v1 10kind: CronJob 11metadata: 12 name: hello 13 namespace: infrase 14spec: 15 jobTemplate: 16 spec: 17 template: 18 spec: 19 containers: 20 - command: 21 - /bin/sh 22 - -c 23 - date; echo Hello from the Kubernetes cluster \u0026amp;\u0026amp; cat /config/templatevar 24 image: busybox:1.28 25 imagePullPolicy: IfNotPresent 26 name: hello 27 securityContext: 28 allowPrivilegeEscalation: false 29 runAsNonRoot: true 30 runAsUser: 1000 31 volumeMounts: 32 - mountPath: /config/ 33 name: templatevar 34 imagePullSecrets: 35 - name: hbsrt 36 restartPolicy: OnFailure 37 volumes: 38 - configMap: 39 name: templatevar 40 name: templatevar 41 schedule: 57 * * * * è§£æ±ºæ–¹å¼\réœ€è¦åœ¨ kustomiztion æª”æ¡ˆä¸­æŒ‡å®š namespace\n1apiVersion: kustomize.config.k8s.io/v1beta1 2kind: Kustomization 3namespace: infrase 4resources: 5 - cronjob.yaml 6 7configMapGenerator: 8- name: templatevar 9 files: 10 - templatevar Reference\rhttps://github.com/kubernetes-sigs/kustomize/issues/1301\r","date":"2022-09-06T21:02:00+00:00","updated":"2022-09-06T21:02:00+00:00"},{"objectID":"1655133180","permalink":"/post/win10-plink-automate-ssh-copy-id/","title":"[Windows] ç”¨ plink è‡ªå‹•åŒ– ssh-copy-id åˆ°æŒ‡å®šæ©Ÿå™¨","content":"ç ”ç©¶æ€éº¼ä¸é€éäººç‚ºè¼¸å…¥å¯†ç¢¼ï¼Œå°‡æœ¬åœ°ä¸»æ©Ÿä¸Šçš„å…¬é‘°ä¸Šå‚³åˆ°é ç«¯ä¸»æ©Ÿçš„ authorized_keys æ–‡ä»¶ä¸­ï¼Œä»¥å¯¦ç¾ SSH é‡‘é‘°é©—è­‰ã€‚\n1cat id_rsa.pub | plink -ssh root@10.37.39.69 -pwfile pw.txt \u0026#34;cat \u0026gt;\u0026gt; ~/.ssh/authorized_keys\u0026#34; Info\nPlink æ˜¯ç”± PuTTY å¥—ä»¶æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¤šè¢«ä½¿ç”¨åœ¨è‡ªå‹•åŸ·è¡Œçš„å ´æ™¯æ‡‰ç”¨ï¼Œå¯åœ¨è‡ªå‹•åŒ–éƒ¨ç½²åŸ·è¡Œ SSH çš„æŒ‡ä»¤ã€‚\n","date":"2022-06-13T15:13:00+00:00","updated":"2022-06-13T15:13:00+00:00"},{"objectID":"1653905220","permalink":"/post/devops-azure-iot-hub-to-nodered/azure-iot-hub-to-nodered/","title":"Azure IoT Hub node-red å¯¦åš","content":"æœ¬ç¯‡è¨˜éŒ„å¦‚ä½•ä½¿ç”¨ Node-Red å¯¦ä½œ Azure IoT Hub çš„è³‡æ–™å‚³è¼¸ã€‚\nå®‰è£ Node-red\råœ¨é›²ç«¯ä»¥åŠåœ°ç«¯å…©é‚Šéƒ½æº–å‚™å¥½ node-red\n1# å®‰è£ nodejs \u0026amp; npm 2$ sudo apt update 3$ sudo apt install nodejs -y 4$ sudo apt install npm -y 5$ sudo npm install npm@6.14.0 -g 6$ sudo npm cache clean -f 7$ sudo npm install -g n 8$ sudo n 10.22.0 stable 9 10# å®‰è£ node-red 11$ sudo npm install -g --unsafe-perm node-red 12 13# å•Ÿå‹• node-red 14$ node-red å»ºç«‹ IoT Hub\råœ¨ azure å»ºç«‹ä¸€å€‹ IoT Hub\nå®‰è£ Node-Red Node\råœ¨é›²ç«¯ä»¥åŠåœ°ç«¯çš„æ©Ÿå™¨ä¸­çš„ manage palette å®‰è£ node-red-contrib-azure-iot-hub\næº–å‚™Local Node-red çš„ workflow\rè¨»å†Š Device\réœ€è¦å°‡æ©Ÿå™¨è¨»å†Šåˆ° Azure IoT Hub ä¸­ï¼Œæº–å‚™äº†ä¸‹é¢çš„ workflow\n1[{\u0026#34;id\u0026#34;:\u0026#34;8420253b.d369c8\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;tab\u0026#34;,\u0026#34;label\u0026#34;:\u0026#34;Flow 1\u0026#34;,\u0026#34;disabled\u0026#34;:false,\u0026#34;info\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;id\u0026#34;:\u0026#34;a937e034.afa3c\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;azureiothubregistry\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;8420253b.d369c8\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Azure IoT Hub Registry\u0026#34;,\u0026#34;x\u0026#34;:410,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[[\u0026#34;b7a4e98a.e50b18\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;dbdd68fc.579708\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;inject\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;8420253b.d369c8\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Register Payload\u0026#34;,\u0026#34;props\u0026#34;:[{\u0026#34;p\u0026#34;:\u0026#34;payload\u0026#34;}],\u0026#34;repeat\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;crontab\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;once\u0026#34;:false,\u0026#34;onceDelay\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;topic\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;payload\u0026#34;:\u0026#34;{\\\u0026#34;deviceId\\\u0026#34;:\\\u0026#34;hello\\\u0026#34;}\u0026#34;,\u0026#34;payloadType\u0026#34;:\u0026#34;json\u0026#34;,\u0026#34;x\u0026#34;:180,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[[\u0026#34;a937e034.afa3c\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;b7a4e98a.e50b18\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;debug\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;8420253b.d369c8\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Log\u0026#34;,\u0026#34;active\u0026#34;:true,\u0026#34;console\u0026#34;:\u0026#34;false\u0026#34;,\u0026#34;complete\u0026#34;:\u0026#34;true\u0026#34;,\u0026#34;x\u0026#34;:650,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[]}] åœ¨ Azure IoT Hub Registry node ä¸­è²¼ä¸Š IoT Hub çš„ connectionString (primary æˆ– secondary çš†å¯è¡Œ)\nåœ¨ inject node ä¸­è¨­å®š device id\nDeploy å¾ŒæŒ‰ä¸‹ injectï¼Œä¾¿è¨»å†Š device æˆåŠŸäº†ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ debug window ä¸­å›å‚³äº†è©² device çš„é‡‘é‘°ã€‚\nç™¼é€è³‡æ–™\rè¨»å†Šå®Œæ©Ÿå™¨å¾Œï¼Œé–‹å§‹æº–å‚™ä¸Ÿè³‡æ–™ï¼Œä½¿ç”¨ä»¥ä¸‹çš„ workflow\n1[{\u0026#34;id\u0026#34;:\u0026#34;7db92193.aed53\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;tab\u0026#34;,\u0026#34;label\u0026#34;:\u0026#34;Flow 2\u0026#34;,\u0026#34;disabled\u0026#34;:false,\u0026#34;info\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;id\u0026#34;:\u0026#34;897ffdd4.12ba3\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;debug\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;7db92193.aed53\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Log\u0026#34;,\u0026#34;active\u0026#34;:true,\u0026#34;console\u0026#34;:\u0026#34;false\u0026#34;,\u0026#34;complete\u0026#34;:\u0026#34;true\u0026#34;,\u0026#34;x\u0026#34;:870,\u0026#34;y\u0026#34;:200,\u0026#34;wires\u0026#34;:[]},{\u0026#34;id\u0026#34;:\u0026#34;66c43e6.4f5f7c\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;azureiothub\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;7db92193.aed53\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Azure IoT Hub\u0026#34;,\u0026#34;protocol\u0026#34;:\u0026#34;http\u0026#34;,\u0026#34;x\u0026#34;:660,\u0026#34;y\u0026#34;:200,\u0026#34;wires\u0026#34;:[[\u0026#34;897ffdd4.12ba3\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;c5686695.31d5e8\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;inject\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;7db92193.aed53\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Send Payload\u0026#34;,\u0026#34;props\u0026#34;:[],\u0026#34;repeat\u0026#34;:\u0026#34;5\u0026#34;,\u0026#34;crontab\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;once\u0026#34;:false,\u0026#34;onceDelay\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;topic\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;x\u0026#34;:200,\u0026#34;y\u0026#34;:200,\u0026#34;wires\u0026#34;:[[\u0026#34;84141515.9a1188\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;84141515.9a1188\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;function\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;7db92193.aed53\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;func\u0026#34;:\u0026#34;let a = Math.floor(Math.random()*100)+1;\\nmsg.payload={\\n \\\u0026#34;deviceId\\\u0026#34;:\\\u0026#34;device1\\\u0026#34;,\\n \\\u0026#34;key\\\u0026#34;:\\\u0026#34;pOX7pNKnt2aJoTy5JX4BYXidsezO+fr1sEz0TQQt1YM=\\\u0026#34;,\\n \\\u0026#34;protocol\\\u0026#34;:\\\u0026#34;http\\\u0026#34;,\\n \\\u0026#34;data\\\u0026#34;: a\\n}\\nreturn msg;\u0026#34;,\u0026#34;outputs\u0026#34;:1,\u0026#34;noerr\u0026#34;:0,\u0026#34;initialize\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;finalize\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;x\u0026#34;:420,\u0026#34;y\u0026#34;:200,\u0026#34;wires\u0026#34;:[[\u0026#34;66c43e6.4f5f7c\u0026#34;]]}] åœ¨ Azure IoT Hub node ä¸­è¨­å®š IoT Hub çš„ hostnameï¼Œä¸¦æŒ‡å®šæƒ³è¦ä½¿ç”¨çš„ protocol\nä¸¦åœ¨ msg.payload ä¸­ä»¥ JSON çš„å½¢å¼æŒ‡å®šä¸‹é¢è¨Šæ¯ï¼š\n1msg.payload={ 2 \u0026#34;deviceId\u0026#34;:\u0026#34;device1\u0026#34;, 3 \u0026#34;key\u0026#34;:\u0026#34;pOX7pNKnt2aJoTy5JX4BYXidsezO+fr1sEz0TQQt1YM=\u0026#34;, 4 \u0026#34;protocol\u0026#34;:\u0026#34;http\u0026#34;, 5 \u0026#34;data\u0026#34;: data 6} æŒ‰ä¸‹ Deploy å¾Œä¾¿å¯ä»¥çœ‹åˆ°è³‡æ–™å·²ç¶“æˆåŠŸé€å‡º\næº–å‚™ Cloud Node-red çš„ workflow\rç‚ºäº†å°‡æ”¶åˆ°çš„è³‡æ–™å‘ˆç¾åœ¨ dashboardï¼Œåœ¨ manage palette ä¸­å®‰è£äº† node-red-dashboardã€‚\næº–å‚™ã€€Azure IoT Hub Receiver æ¥æ”¶IoT Hub ä¸­çš„è³‡æ–™ï¼Œä¸¦æ¥ä¸Š chart nodeï¼Œä»¥ line chart çš„æ–¹å¼å°‡æ”¶åˆ°çš„è³‡æ–™å‘ˆç¾åœ¨ dashboard ä¸Šã€‚\n1[{\u0026#34;id\u0026#34;:\u0026#34;abefc0d0.8ba21\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;azureiothubreceiver\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;3664d073.9332c\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Azure IoT Hub Receiver\u0026#34;,\u0026#34;x\u0026#34;:360,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[[\u0026#34;ac07fe9f.05a0c\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;935ce90f.e63358\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;debug\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;3664d073.9332c\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Log\u0026#34;,\u0026#34;active\u0026#34;:true,\u0026#34;tosidebar\u0026#34;:true,\u0026#34;console\u0026#34;:false,\u0026#34;tostatus\u0026#34;:false,\u0026#34;complete\u0026#34;:\u0026#34;payload\u0026#34;,\u0026#34;targetType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;statusVal\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;statusType\u0026#34;:\u0026#34;auto\u0026#34;,\u0026#34;x\u0026#34;:810,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[]},{\u0026#34;id\u0026#34;:\u0026#34;ac07fe9f.05a0c\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ui_chart\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;3664d073.9332c\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;group\u0026#34;:\u0026#34;9f102f5f.29f03\u0026#34;,\u0026#34;order\u0026#34;:0,\u0026#34;width\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;height\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;label\u0026#34;:\u0026#34;chart2\u0026#34;,\u0026#34;chartType\u0026#34;:\u0026#34;line\u0026#34;,\u0026#34;legend\u0026#34;:\u0026#34;false\u0026#34;,\u0026#34;xformat\u0026#34;:\u0026#34;HH:mm:ss\u0026#34;,\u0026#34;interpolate\u0026#34;:\u0026#34;linear\u0026#34;,\u0026#34;nodata\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;dot\u0026#34;:false,\u0026#34;ymin\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;ymax\u0026#34;:\u0026#34;100\u0026#34;,\u0026#34;removeOlder\u0026#34;:1,\u0026#34;removeOlderPoints\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;removeOlderUnit\u0026#34;:\u0026#34;3600\u0026#34;,\u0026#34;cutout\u0026#34;:0,\u0026#34;useOneColor\u0026#34;:false,\u0026#34;useUTC\u0026#34;:false,\u0026#34;colors\u0026#34;:[\u0026#34;#1f77b4\u0026#34;,\u0026#34;#aec7e8\u0026#34;,\u0026#34;#ff7f0e\u0026#34;,\u0026#34;#2ca02c\u0026#34;,\u0026#34;#98df8a\u0026#34;,\u0026#34;#d62728\u0026#34;,\u0026#34;#ff9896\u0026#34;,\u0026#34;#9467bd\u0026#34;,\u0026#34;#c5b0d5\u0026#34;],\u0026#34;useOldStyle\u0026#34;:false,\u0026#34;outputs\u0026#34;:1,\u0026#34;x\u0026#34;:610,\u0026#34;y\u0026#34;:180,\u0026#34;wires\u0026#34;:[[\u0026#34;935ce90f.e63358\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;9f102f5f.29f03\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ui_group\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Default\u0026#34;,\u0026#34;tab\u0026#34;:\u0026#34;a79849a0.efb138\u0026#34;,\u0026#34;order\u0026#34;:1,\u0026#34;disp\u0026#34;:true,\u0026#34;width\u0026#34;:\u0026#34;15\u0026#34;,\u0026#34;collapse\u0026#34;:false},{\u0026#34;id\u0026#34;:\u0026#34;a79849a0.efb138\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ui_tab\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Home\u0026#34;,\u0026#34;icon\u0026#34;:\u0026#34;dashboard\u0026#34;,\u0026#34;disabled\u0026#34;:false,\u0026#34;hidden\u0026#34;:false}] Deploy ä¹‹å¾Œå¯ä»¥çœ‹åˆ° dashboard æˆåŠŸå‘ˆç¾ã€‚\n","date":"2022-05-30T10:07:00+00:00","updated":"2022-05-30T10:07:00+00:00"},{"objectID":"1653692400","permalink":"/post/coldplay-speed-of-sound/coldplay-speed-of-sound/","title":"[Coldplay] Speed of Sound","content":"How long before I get in,\nbefore it starts\nbefore I begin\né‚„è¦å¤šä¹… æˆ‘æ‰èƒ½åˆ°é”å‘¢\né‚„è¦å¤šä¹… é€™ä¸€åˆ‡æ‰é–‹å§‹å‘¢\né‚„è¦å¤šä¹… æˆ‘æ‰èƒ½é–‹å§‹å‘¢\nHow long before you decide\nbefore I know what it feels like\né‚„è¦å¤šä¹… ä½ æ‰èƒ½æ±ºå®šå‘¢\né‚„è¦å¤šä¹… æˆ‘æ‰èƒ½çŸ¥é“é€™ä»€éº¼æ„Ÿè¦ºå‘¢\nWhere to\nwhere do I go?\nif you never try\nthen you\u0026rsquo;ll never know\nå“ªè£¡å‘¢\næˆ‘è©²å»å“ªè£¡å‘¢\nä½†ä½ è‹¥ä¸å˜—è©¦ å°±æ°¸é ä¸æœƒçŸ¥é“\nHow long do I have to climb\nup on the side of this mountain of mine\næˆ‘é‚„éœ€è¦çˆ¬å¤šä¹…æ‰èƒ½çˆ¬ä¸Šè‡ªå·±äººç”Ÿçš„å·”å³°\nLook up\nI look up at night\nplanets are moving at the speed of light\nå¾€ä¸Šçœ‹\næˆ‘åœ¨å¤œè£¡ä»°æœ›æ˜Ÿç©º\næ˜Ÿæ˜Ÿå€‘åœ¨å…‰é€Ÿé£›è¡Œ\nClimb up\nup in the trees\nevery chance that you get\nis a chance you seize\nå‘ä¸Šçˆ¬\nå¾€æ¨¹ä¸Šçˆ¬\nä½ å¾—åˆ°çš„æ¯å€‹æ©Ÿæœƒéƒ½æ˜¯ä½ å¯ä»¥æŠ“ä½çš„!\nHow long am I gonna stand\nwith my head stuck under the sandï¼Ÿ\nI\u0026rsquo;ll start before I couldn\u0026rsquo;t stop\nor before I see things in the right way up\næˆ‘é‚„è¦å¿å—é€ƒé¿ç¾å¯¦å¤šä¹…\næˆ‘æœƒåœ¨æˆ‘ç„¡æ³•å¿å—å‰é–‹å§‹\næˆ–åœ¨æˆ‘ä»¥æ­£ç¢ºçš„æ–¹å¼çœ‹æ¸…äº‹ç‰©å‰é–‹å§‹\nAll that noise and all that sound\nall those places I got found\nand birds go flying at the speed of sound\nto show you how it all began\nçªç„¶æˆ‘æ„è­˜åˆ°æ‰€æœ‰é‚£äº›å™ªéŸ³ã€è²éŸ³ã€åœ°æ–¹\nä»¥åŠå‰é‚£é£›éçš„ç¾¤é³¥\néƒ½åªçˆ²å•“ç¤º\nä¸€åˆ‡å¦‚æ­¤é–‹ç«¯\nbirds came flying from the underground\nif you could see it then you\u0026rsquo;ll understand\nç¾¤é³¥å¾åœ°ä¸‹é£›èµ·\nç•¶ä½ çœ‹è¦‹é€™ä¸€å¹•æ™‚ä½ ä¹Ÿæœƒé†’æ‚Ÿ\nideas that you\u0026rsquo;ll never find\nall the inventors could never design\nthe buildings that you put up\nJapan and China all lit up\næœ‰äº›é“ç†æ°¸é æƒ³ä¸é€š\næœ‰äº›è¨­è¨ˆç™¼æ˜å®¶ä¹Ÿåšä¸åˆ°\nè€Œä½ çš„å‰µé€ \næŠŠä¸­åœ‹å’Œæ—¥æœ¬éƒ½ç…§äº®\nthe sign that I couldn\u0026rsquo;t read\nor a light that I couldn\u0026rsquo;t see\nsome things you have to believe\nbut others are puzzles\nare puzzles of me\næœ‰äº›è·¡è±¡æˆ‘ç„¡æ³•è§£è®€\næˆ–æˆ‘ç„¡æ³•çœ‹è¦‹çš„å…‰èŠ’\næœ‰äº›æ±è¥¿ä½ å¿…é ˆç›¸ä¿¡\nä½†å…¶ä»–è¬é¡Œå°±åªæ˜¯è¬é¡Œ\nall that noise and all that sound\nall those places I got found\nand birds go flying at the speed of sound\nto show you how it all began\nçªç„¶æˆ‘æ„è­˜åˆ°æ‰€æœ‰é‚£äº›å™ªéŸ³ã€è²éŸ³ã€åœ°æ–¹\nä»¥åŠå‰é‚£é£›éçš„ç¾¤é³¥\néƒ½åªçˆ²å•“ç¤º\nä¸€åˆ‡å¦‚æ­¤é–‹ç«¯\nbirds came flying from the underground\nif you could see it then you\u0026rsquo;ll understand\noh, when you see it then you\u0026rsquo;ll understand\nç•¶é³¥ç¾¤å¾åœ°ä¸‹é£›å‡º\nä½ çœ‹è¦‹å°±æ‡‚äº†\nä½ çœ‹è¦‹å°±æ‡‚äº†\nall those signs I knew what they meant\nsome things you can\u0026rsquo;t invent\nsome get made\nsome get sent\næˆ‘æ˜ç™½äº†æ‰€æœ‰çš„è·¡è±¡\næœ‰äº›æ±è¥¿ä½ ç„¡æ³•ç™¼æ˜\nä¸€äº›å°±æ˜¯é€™éº¼åšå‡ºä¾†çš„\nå¦ä¸€äº›æ˜¯è¢«å¤–æ˜Ÿäººé€ä¾†çš„ XD\nand birds go flying at the speed of sound\nto show you how it all began\nbirds came flying from the underground\nIf you could see it then you\u0026rsquo;ll understand\nOh, when you see it then you\u0026rsquo;ll understand\né³¥å‰é‚£é–“é£›é\néƒ½åªçˆ²å•“ç¤º\nä¸€åˆ‡å¦‚æ­¤é–‹ç«¯\nç•¶é³¥ç¾¤å¾åœ°ä¸‹é£›å‡º\nä½ ä¸€çœ‹è¦‹å°±æ‡‚äº†\næˆ‘æƒ³ ç•¶ä½ çœ‹è¦‹æ™‚ä½ ä¹Ÿæœƒæ‡‚çš„~\n","date":"2022-05-27T23:00:00+00:00","updated":"2022-05-27T23:00:00+00:00"},{"objectID":"1653254220","permalink":"/post/k8s-helm-migrate-stable-nginx-ingress-to-ingress-nginx/helm-migrate-stable-nginx-ingress-to-ingress-nginx/","title":"Helm Migrate stable/nginx-ingress to ingress-nginx","content":"å‰è¨€\råŸå…ˆé›†ç¾¤ä½¿ç”¨çš„ helm chart ç‚º stable/nginx-ingressï¼Œè€Œæ­¤ helm chart å·²ç¶“è¢«æ£„ç”¨ï¼Œè‹¥ nginx ç¶­æŒåœ¨èˆŠç‰ˆçš„è©±ï¼Œä¹‹å¾Œæ–°çš„æ¼æ´ä¿®è£œéƒ½ç„¡æ³•è¢«å«æ‹¬ã€‚\næ­¤ç¯‡è¨˜éŒ„å¦‚ä½•å°‡é›†ç¾¤ä¸Šé¢è·‘çš„ nginx-ingress-controller æ›æˆæ–°çš„ç‰ˆæœ¬çš„ chart ingress-nginx/ingress-nginxã€‚\nCurrent stable/nginx-ingress\råŸå…ˆ nginx-ingress ä½¿ç”¨çš„ç‰ˆæœ¬\n1$ kubectl exec -it -n nginx-ingress nginx-ingress-controller-585bb7f5b4-2nlzz -- /nginx-ingress-controller 2------------------------------------------------------------------------------- 3NGINX Ingress controller 4 Release: v0.34.1 5 Build: v20200715-ingress-nginx-2.11.0-8-gda5fa45e2 6 Repository: https://github.com/kubernetes/ingress-nginx 7 nginx version: nginx/1.19.1 8------------------------------------------------------------------------------- æŸ¥è©¢è©² helm chart æœ‰æ²’æœ‰æ›´æ–°çš„ç‰ˆæœ¬å¯ç›´æ¥æ›´æ–°ï¼Œä½†çµæœå¦‚ä¸‹ï¼Œç›®å‰é›†ç¾¤å®‰è£çš„å·²ç¶“æ˜¯è©² chart çš„æœ€æ–°ç‰ˆæœ¬äº†ï¼Œä¸”å·²æ¨™ç¤º deprecated ä¸æœƒå†ç¶­è­·ã€‚\n1$ helm search repo stable/nginx-ingress --versions 2NAME CHART VERSION APP VERSION DESCRIPTION 3stable/nginx-ingress 1.41.3 v0.34.1 DEPRECATED! An nginx Ingress controller that us... 4stable/nginx-ingress 1.41.2 v0.34.1 An nginx Ingress controller that uses ConfigMap... 5stable/nginx-ingress 1.41.1 v0.34.1 An nginx Ingress controller that uses ConfigMap... 6stable/nginx-ingress 1.41.0 v0.34.0 An nginx Ingress controller that uses ConfigMap... 7stable/nginx-ingress 1.40.3 0.32.0 An nginx Ingress controller that uses ConfigMap... 8stable/nginx-ingress 1.40.2 0.32.0 An nginx Ingress controller that uses ConfigMap... 9stable/nginx-ingress 1.40.1 0.32.0 An nginx Ingress Install ingress-nginx/ingress-nginx\rå®‰è£operator\n1$ helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx 2$ helm repo update 3$ kubectl create ns ingress-nginx 4$ helm install ingress-nginx ingress-nginx/ingress-nginx --namespace ingress-nginx å®Œæˆå¾Œæ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹è¼¸å‡º\n1[root@master1 ~]# helm install ingress-nginx ingress-nginx/ingress-nginx 2helm install ingress-nginx ingress-nginx/ingress-nginx 3NAME: ingress-nginx 4LAST DEPLOYED: Wed Aug 18 13:41:42 2021 5NAMESPACE: default 6STATUS: deployed 7REVISION: 1 8TEST SUITE: None 9NOTES: 10The ingress-nginx controller has been installed. 11It may take a few minutes for the LoadBalancer IP to be available. 12You can watch the status by running \u0026#39;kubectl --namespace default get services -o wide -w ingress-nginx-controller\u0026#39; 13 14An example Ingress that makes use of the controller: 15 16 apiVersion: networking.k8s.io/v1beta1 17 kind: Ingress 18 metadata: 19 annotations: 20 kubernetes.io/ingress.class: nginx 21 name: example 22 namespace: foo 23 spec: 24 rules: 25 - host: www.example.com 26 http: 27 paths: 28 - backend: 29 serviceName: exampleService 30 servicePort: 80 31 path: / 32 # This section is only required if TLS is to be enabled for the Ingress 33 tls: 34 - hosts: 35 - www.example.com 36 secretName: example-tls 37 38If TLS is enabled for the Ingress, a Secret containing the certificate and key must also be provided: 39 40 apiVersion: v1 41 kind: Secret 42 metadata: 43 name: example-tls 44 namespace: foo 45 data: 46 tls.crt: \u0026lt;base64 encoded cert\u0026gt; 47 tls.key: \u0026lt;base64 encoded key\u0026gt; 48 type: kubernetes.io/tls é©—è­‰å®‰è£\r1$ kubectl exec -it -n ingress-nginx ingress-nginx-controller-b65df6fbb-jx4tf -- /nginx-ingress-controller --version 2------------------------------------------------------------------------------- 3NGINX Ingress controller 4 Release: v0.48.1 5 Build: 30809c066cd027079cbb32dccc8a101d6fbffdcb 6 Repository: https://github.com/kubernetes/ingress-nginx 7 nginx version: nginx/1.20.1 8 9------------------------------------------------------------------------------- Create ingress resource\ræº–å‚™ ingress resource çš„ yaml æª”ï¼Œè«‹æ³¨æ„é›–ç„¶ä¸Šæ–¹çš„å®‰è£æˆåŠŸçš„è¨Šæ¯æœ‰ç¤ºç¯„ ingress çš„ yamlï¼Œä½†å› ç‚º networking.k8s.io/v1beta1\rå·²åœ¨ Kubernetes 1.19+ è¢«æ£„ç”¨ï¼Œå¦‚æœç¶­æŒä½¿ç”¨ï¼Œå‰‡æœƒé‡åˆ° Warning: [networking.k8s.io/v1beta1](http://networking.k8s.io/v1beta1) Ingress is deprecated in v1.19+, unavailable in v1.22+; use [networking.k8s.io/v1](http://networking.k8s.io/v1) Ingressçš„éŒ¯èª¤ï¼Œæ‰€ä»¥åƒè€ƒingress-nginx(\rhttps://kubernetes.github.io/ingress-nginx/user-guide/basic-usage/\r) çš„å®˜ç¶²ï¼Œæ”¹æˆä»¥ä¸‹æ ¼å¼ï¼š\n1apiVersion: networking.k8s.io/v1 2kind: Ingress 3metadata: 4 name: ingress-myservicea 5 annotations: 6 # use the shared ingress-nginx 7 kubernetes.io/ingress.class: \u0026#34;nginx\u0026#34; 8spec: 9 rules: 10 - host: myservicea.foo.org 11 http: 12 paths: 13 - path: / 14 pathType: Prefix 15 backend: 16 service: 17 name: myservicea 18 port: 19 number: 80 20--- 21apiVersion: networking.k8s.io/v1 22kind: Ingress 23metadata: 24 name: ingress-myserviceb 25 annotations: 26 # use the shared ingress-nginx 27 kubernetes.io/ingress.class: \u0026#34;nginx\u0026#34; 28spec: 29 rules: 30 - host: myserviceb.foo.org 31 http: 32 paths: 33 - path: / 34 pathType: Prefix 35 backend: 36 service: 37 name: myserviceb 38 port: 39 number: 80 åˆªé™¤èˆŠçš„ ingress controller\rç¢ºèªæ‰€æœ‰æµé‡éƒ½å·²ç¶“å°åˆ°æ–°çš„ controller å¾Œï¼Œå°±å¯ä»¥æŠŠèˆŠçš„ stable/nginx-ingress çš„ controller åˆªæ‰äº†ã€‚\n1$ helm uninstall nginx-ingress Reference\rhttps://jfrog.com/blog/migrate-nginx-from-stable-helm-charts-with-chartcenter/\rè£œå……ï¼šå¦‚æœè¦å¯¦ç¾ zero-downtime çš„éƒ¨å±¬ï¼Œå¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç«  https://medium.com/codecademy-engineering/kubernetes-nginx-and-zero-downtime-in-production-2c910c6a5ed8\r","date":"2022-05-22T21:17:00+00:00","updated":"2022-05-22T21:17:00+00:00"},{"objectID":"1653051600","permalink":"/post/coldplay-hymn-for-the-weekend/","title":"[Coldplay] Hymn For The Weekend","content":"A drink for me, drink for me\nOh-ah-oh-ah\nThen we\u0026rsquo;ll shoot across the sky\nSymphony\nThen we\u0026rsquo;ll shoot across the sky\nWe\u0026rsquo;re on a\u0026hellip;\nA drink for me, drink for me\n(Oh-ah-oh-ah)\nThen we\u0026rsquo;ll shoot across the sky\nSymphony\n(So high, so high)\nThen we\u0026rsquo;ll shoot across the sky\nOh, angels sent from up above å¤©ä½¿å¾å¤©è€Œé™\nYou know you make my world light up ä½ çš„å‡ºç¾è®“æˆ‘çš„ä¸–ç•Œå……æ»¿äº†å…‰èŠ’\nWhen I was down, when I was hurt ç•¶æˆ‘å¤±è½ï¼Œç•¶æˆ‘å—å‚·\nYou came to lift me up ä½ ä¾†æŒ¯å¥®æˆ‘èµ·ä¾†\nLife is a drink, and love\u0026rsquo;s a drug ç”Ÿå‘½å°±åƒä¸€æ¯é…’ï¼Œæ„›å°±åƒä¸€ç¨®æ¯’å“\nOh now I think I must be miles up æˆ‘æƒ³æˆ‘ç¾åœ¨å·²ç¶“é£„é£„æ¬²ä»™äº†\nWhen I was a river, dried up ç•¶æˆ‘è®Šæˆä¹¾æ¯çš„æ²³æµ\nYou came to rain a flood ä½ å¸¶ä¾†äº†æ´ªæ°´\nSo drink for me, drink for me æ‰€ä»¥ç‚ºæˆ‘ä¹¾æ¯ï¼Œç‚ºæˆ‘ä¹¾æ¯\nWhen I was so thirsty ç•¶æˆ‘å£æ¸´æ™‚\nWe\u0026rsquo;re on a symphony æˆ‘å€‘åœ¨ä¸€å ´äº¤éŸ¿æ¨‚ä¸­\nNow I just can\u0026rsquo;t get enough ç¾åœ¨æˆ‘å·²ç¶“ç„¡æ³•è‡ªæ‹”\nPut your wings on me, wings on me æŠŠä½ çš„ç¿…è†€æ”¾åœ¨æˆ‘èº«ä¸Šå§\nWhen I was so heavy ç•¶æˆ‘å¦‚æ­¤æ²‰é‡æ™‚\nWe\u0026rsquo;re on a symphony æˆ‘å€‘åœ¨ä¸€å ´äº¤éŸ¿æ¨‚\nWhen I\u0026rsquo;m lower, lower, lower, low ç•¶æˆ‘æ›´ä½è½ã€æ›´ä½è½ã€æ›´ä½è½æ™‚\nAh-oh-ah-oh-ah\nGot me feeling drunk and high\nSo high, so high\nOh-ah-oh-ah-oh-ah\nI\u0026rsquo;m feeling drunk and high\nSo high, so high\n(Woo)\n(Woo-ooo-ooo-woo)\nOh, angels sent from up above å¤©ä½¿å¾å¤©è€Œé™\nI feel it coursing through my blood æˆ‘è¦ºå¾—å…¨èº«è¡€æ¶²æ­£æ²¸é¨°ä¸­\nLife is a drink, your love\u0026rsquo;s about ç”Ÿå‘½æ˜¯æ¯é…’\nTo make the stars come out ä½ çš„æ„›æ˜¯è®“æ˜Ÿæ˜Ÿéƒ½é–ƒè€€\nPut your wings on me, wings on me\nWhen I was so heavy\nWe\u0026rsquo;re on a symphony\nWhen I\u0026rsquo;m lower, lower, lower, low\nAh-oh-ah-oh-ah\nGot me feeling drunk and high\nSo high, so high\nOh-ah-oh-ah-oh-ah\nI\u0026rsquo;m feeling drunk and high\nSo high, so high\nAh-oh-ah-oh-ah\nLa, la, la, la, la, la, la\nSo high, so high\nAh-oh-ah-oh-ah\nI\u0026rsquo;m feeling drunk and high\nSo high, so high\nThen we\u0026rsquo;ll shoot across the sky\nThen we\u0026rsquo;ll shoot across the\u0026hellip;\nThen we\u0026rsquo;ll shoot across the sky\nThen we\u0026rsquo;ll shoot across the\u0026hellip;\nThen we\u0026rsquo;ll shoot across the sky\nThen we\u0026rsquo;ll shoot across the\u0026hellip;\nThen we\u0026rsquo;ll shoot across the sky\nThen we\u0026rsquo;ll shoot across the\u0026hellip;\nThen we\u0026rsquo;ll shoot across the sky\nThen we\u0026rsquo;ll shoot across the\u0026hellip;\n","date":"2022-05-20T13:00:00+00:00","updated":"2022-05-20T13:00:00+00:00"},{"objectID":"1652965320","permalink":"/post/ansible-get-fact-to-target-nic/","title":"[Ansible] get_fact ipv4 address å–åˆ° eth0","content":"TL; DR\rAnsible çš„æ§åˆ¶ç¯€é»ä»¥åŠå—æ§ç¯€é»çš†ä½¿ç”¨ VM æ‰“èµ·ä¾†ï¼Œåœ¨æ§åˆ¶ç¯€é»ä½¿ç”¨ get-facts è¦å–å¾—å—æ§ç¯€é»çš„ IP è³‡æ–™æ™‚ï¼Œç¸½æ˜¯æœƒå–å¾—ç¬¬ä¸€å¼µç¶²å¡ eth0ï¼Œä½†ç›®æ¨™æ˜¯è¦å–å¾—ç¬¬äºŒå¼µç¶²å¡ã€‚\n1$ ifconfig 2eth0 Link encap:Ethernet HWaddr 08:00:27:84:06:a3 3 inet addr:10.0.2.15 Bcast:10.0.2.255 Mask:255.255.255.0 4 inet6 addr: fe80::a00:27ff:fe84:6a3/64 Scope:Link 5 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 6 RX packets:1922 errors:0 dropped:0 overruns:0 frame:0 7 TX packets:1247 errors:0 dropped:0 overruns:0 carrier:0 8 collisions:0 txqueuelen:1000 9 RX bytes:191345 (191.3 KB) TX bytes:163962 (163.9 KB) 10 11eth1 Link encap:Ethernet HWaddr 08:00:27:fc:bb:de 12 inet addr:192.168.56.10 Bcast:192.168.56.255 Mask:255.255.255.0 13 inet6 addr: fe80::a00:27ff:fefc:bbde/64 Scope:Link 14 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 15 RX packets:132 errors:0 dropped:0 overruns:0 frame:0 16 TX packets:91 errors:0 dropped:0 overruns:0 carrier:0 17 collisions:0 txqueuelen:1000 18 RX bytes:109552 (109.5 KB) TX bytes:23202 (23.2 KB) è§£æ±ºæ–¹å¼\råœ¨ç³»çµ±çš„è·¯ç”±è¡¨ä¸­æ·»åŠ ä¸€å€‹éœæ…‹è·¯ç”±ï¼Œè©²è·¯ç”±æŒ‡å®šå°‡æµé‡ç™¼é€åˆ° 8.8.8.8ï¼ˆGoogle DNS æœå‹™å™¨ï¼‰çš„æ¥å£ç‚º eth1ã€‚é€™æ¨£ï¼Œç•¶ç³»çµ±å˜—è©¦è¨ªå• 8.8.8.8 æ™‚ï¼Œå°‡ä½¿ç”¨æŒ‡å®šçš„æ¥å£é€²è¡Œé€šä¿¡ã€‚\n1route add -net 8.8.8.8 netmask 255.255.255.255 eth1 Reference\rhttps://superuser.com/questions/991711/vagrant-virtualbox-doesnt-setup-correct-gateway\r","date":"2022-05-19T13:02:00+00:00","updated":"2022-05-19T13:02:00+00:00"},{"objectID":"1652960160","permalink":"/post/k8s-delete-worker-node/kubernetes-delete-worker-node/","title":"[Kubernetes] åœæ­¢èª¿åº¦ / åˆªé™¤ç¯€é»","content":"cordonã€drain å’Œ delete ä¸‰å€‹å‘½ä»¤éƒ½æœƒä½¿ kubernetes node åœæ­¢è¢«èª¿åº¦ï¼Œæœ¬ç¯‡è¨˜éŒ„å¦‚ä½•å„ªé›…çš„åˆªé™¤ç¯€é»ã€‚\nDrain the Node\rä½¿ç”¨ kubectl drain å°‡ Node ç‹€æ…‹è®Šæ›´ç‚ºç¶­è­·æ¨¡å¼ï¼Œè©² Node ä¸Šé¢çš„ Pod å°±æœƒè½‰ç§»åˆ°å…¶ä»– Node ä¸Šã€‚\n1kubectl drain worker3 --ignore-daemonsets --delete-local-data kubectl drain æ“ä½œæœƒå°‡æŒ‡å®šç¯€é»ä¸Šçš„ Pod åˆªé™¤ï¼Œä¸¦åœ¨å¯èª¿åº¦ç¯€é»ä¸Šé¢èµ·ä¸€å€‹å°æ‡‰çš„ Podã€‚ç•¶èˆŠ Podæ²’æœ‰è¢«æ­£å¸¸åˆªé™¤çš„æƒ…æ³ä¸‹ï¼Œæ–° Pod ä¸æœƒèµ·ä¾†ã€‚ä¾‹å¦‚èˆŠ Pod ä¸€ç›´è™•æ–¼Terminating ç‹€æ…‹ã€‚æ‰€ä»¥å¯ä»¥å¼·åˆ¶åˆªé™¤è©² Podã€‚\n1kubectl get pod all -A -o wide | grep worker3 2 3kubectl delete pods -n my-kafka-project my-cluster-zookeeper-2 --force Delete the Node\r1kubectl delete nodes worker3 delete æ˜¯ä¸€ç¨®æš´åŠ›åˆªé™¤ node çš„æ–¹å¼ï¼Œæœƒå¼·åˆ¶é—œé–‰å®¹å™¨é€²ç¨‹ä»¥é©…é€ podã€‚ åŸºäº node çš„\rè‡ªè¨»å†Š\råŠŸèƒ½ï¼Œæ¢å¾©èª¿åº¦å‰‡é‡å•Ÿ kubelet æœå‹™å³å¯ã€‚\n1systemctl restart kubelet Drain v.s Cordon\rcordon åœæ­¢èª¿åº¦ï¼ˆä¸å¯èª¿åº¦ï¼Œå¾ K8S é›†ç¾¤éš”é›¢ï¼‰\råªæœƒå°‡ node æ¨™è­˜ç‚ºSchedulingDisabled ä¸å¯èª¿åº¦ç‹€æ…‹ã€‚æ–°å‰µå»ºçš„è³‡æºï¼Œä¸æœƒè¢«èª¿åº¦åˆ°è©²ç¯€é»ã€‚è€ŒèˆŠæœ‰çš„ pod ä¸æœƒå—åˆ°å½±éŸ¿ï¼Œä»æ­£å¸¸å°å¤–æä¾›æœå‹™ã€‚\n1# ç¦æ­¢èª¿åº¦ 2kubectl cordon \u0026lt;nodeName\u0026gt; 3# æ¢å¾©èª¿åº¦ 4kubectl uncordon \u0026lt;nodeName\u0026gt; drain é©…é€ç¯€é»ï¼ˆå…ˆä¸å¯èª¿åº¦ï¼Œç„¶å¾Œæ’ä¹¾ Podï¼‰\ræœƒé©…é€ Node ä¸Šçš„ pod è³‡æºåˆ°å…¶ä»–ç¯€é»é‡æ–°å‰µå»ºã€‚æ¥è‘—ï¼Œå°‡ç¯€é»èª¿ç‚º SchedulingDisabled ä¸å¯èª¿åº¦ç‹€æ…‹ã€‚\n1# ç¦æ­¢èª¿åº¦ 2kubectl drain \u0026lt;nodeName\u0026gt; --force --ignore-daemonsets --delete-local-data 3# æ¢å¾©èª¿åº¦ 4kubectl uncordon \u0026lt;nodeName\u0026gt; --force ç•¶ä¸€äº› pod ä¸æ˜¯ç¶“ReplicationController, ReplicaSet, Job, DaemonSet æˆ–è€… StatefulSet ç®¡ç†çš„æ™‚å€™å°±éœ€è¦ç”¨ \u0026ndash;force ä¾†å¼·åˆ¶åŸ·è¡Œ(ä¾‹å¦‚ kube-proxy) --ignore-daemonsets ç„¡è¦–DaemonSet ç®¡ç†ä¸‹çš„ Podã€‚å› ç‚ºdeamonset æœƒå¿½ç•¥ unschedulable æ¨™ç±¤ï¼Œå› æ­¤ deamonset æ§åˆ¶å™¨æ§åˆ¶çš„ pod è¢«åˆªé™¤å¾Œå¯èƒ½é¦¬ä¸Šåˆåœ¨æ­¤ç¯€é»ä¸Šå•Ÿå‹•èµ·ä¾†ï¼Œé€™æ¨£å°±æœƒæˆç‚ºæ­»å¾ªç’°ï¼Œå› æ­¤é€™è£¡å¿½ç•¥daemonsetã€‚ --delete-local-data å¦‚æœæœ‰ mount local volumn çš„ podï¼Œæœƒå¼·åˆ¶æ®ºæ‰è©² podã€‚ drain é©…é€æµç¨‹ï¼šå…ˆåœ¨ Node ç¯€é»å„ªé›…é—œé–‰ä¸¦åˆªé™¤ podï¼Œç„¶å¾Œå†åœ¨å…¶ä»– Node ç¯€é»å‰µå»ºè©² podã€‚æ‰€ä»¥ç‚ºäº†ç¢ºä¿ drain é©…é€ pod éç¨‹ä¸­ä¸ä¸­æ–·æœå‹™ï¼Œå¿…é ˆä¿è­‰è¦é©…é€çš„ pod å‰¯æœ¬æ•¸å¤§æ–¼ 1ï¼Œä¸¦ä¸”æ¡ç”¨äº† anti-affinity å°‡é€™äº› pod èª¿åº¦åˆ°ä¸åŒçš„ Node ç¯€é»ä¸Šã€‚ Reference\rhttps://www.cnblogs.com/kevingrace/p/14412254.html\r","date":"2022-05-19T11:36:00+00:00","updated":"2022-05-19T11:36:00+00:00"},{"objectID":"1652958900","permalink":"/post/database-mongodb-update-the-document/mongodb-update-new-field-to-old-document/","title":"MongoDB ä¸€æ¬¡ç‚ºèˆŠæœ‰è³‡æ–™åŠ ä¸Šæ–°å¢æ¬„ä½","content":"1db.collection1.update({\u0026#34;cameras\u0026#34;:{$exists:false}}, {$set:{\u0026#34;cameras\u0026#34;:{}}},false,true) æœ€å¾Œå…©å€‹ false, true åƒæ•¸å€‹åˆ¥ä»£è¡¨ï¼š\nUpsert: If set to true, creates a new document when no document matches the query criteria. Multi: If set to true, updates multiple documents that meet the query criteria. If set to false, updates one document. ","date":"2022-05-19T11:15:00+00:00","updated":"2022-05-19T11:15:00+00:00"},{"objectID":"1652951460","permalink":"/post/k8s-add-tls-to-istio-gw/add-https-to-istio-gw/","title":"ç‚ºå°å¤–çš„ istio gateway åŠ ä¸Š https","content":"æœ¬ç¯‡æ–‡ç« è¨˜éŒ„æ€éº¼ä½¿ç”¨ cert-manager ç‚ºå°å¤–çš„ istio gateway åŠ ä¸Š httpsã€‚\næ†‘è­‰åˆ†é¡\rè‡ªç°½æ†‘è­‰ï¼šæŸäº›ä¸éœ€è¦è¢«å…¬é–‹å­˜å–ã€ä½†å¸Œæœ›é”åˆ°è³‡æ–™å‚³è¼¸èƒ½åŠ å¯†çš„å…§éƒ¨æœå‹™ï¼Œå¯ä»¥ä½¿ç”¨è‡ªç°½æ†‘è­‰ï¼ŒClient å»å­˜å–çš„æ™‚å€™è‡ªå·±å¸¶ä¸Š CA æ†‘è­‰å»é©—è­‰å³å¯ï¼Œä¾‹å¦‚ HashiCorp Vault, AWS RDS TLS é€£ç·š\u0026amp;hellip;ç­‰ã€‚\nç¬¬ä¸‰æ–¹ CA æ©Ÿæ§‹ç°½ç™¼æ†‘è­‰ï¼šå¦‚æœæ˜¯å…¬é–‹çš„ç¶²è·¯æœå‹™ï¼Œå°±å¿…é ˆé€éæ­£è¦çš„ CA æ©Ÿæ§‹ä¾†ç°½ç™¼ï¼Œå¦‚éœ€è¦æ”¶è²»çš„ Digicert, SSL.com, Symantec\u0026amp;hellip;ç­‰ï¼Œæˆ–æ˜¯å…è²»çš„ Letâ€™s Encryptã€‚\ncert-manager\rcert-manager æ˜¯åŸºæ–¼ Kubernetes æ‰€é–‹ç™¼çš„æ†‘è­‰ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥å¯ä»¥å¹«å¿™ç™¼å‡ºä¾†è‡ªå„å®¶çš„ TLS æ†‘è­‰ï¼Œä¾‹å¦‚ä¸Šé¢æ‰€æåˆ°çš„ ACME (Letâ€™s Encrypt), HashiCorp Vault, Venafi æˆ–æ˜¯è‡ªå·±ç°½ç™¼çš„æ†‘è­‰ï¼Œè€Œä¸”å®ƒé‚„å¯ä»¥ç¢ºä¿ TLS æ†‘è­‰ä¸€ç›´ç¶­æŒåœ¨æœ‰æ•ˆæœŸé™å…§ã€‚\nAbove Reference\rInstall\r1$ kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.4.0/cert-manager.yaml 2$ kubectl get pods --namespace cert-manager 3 NAME READY STATUS RESTARTS AGE 4 cert-manager-5c6866597-zw7kh 1/1 Running 0 2m 5 cert-manager-cainjector-577f6d9fd7-tr77l 1/1 Running 0 2m 6 cert-manager-webhook-787858fcdb-nlzsq 1/1 Running 0 2m Issuer\rIssuer ç”¨ä¾†é ’ç™¼æ†‘è­‰ï¼Œåˆ†ç‚ºå…©ç¨®è³‡æºé¡å‹ï¼š\nissuerï¼šåªä½œç”¨æ–¼ç‰¹å®š namespace ClusterIssuerï¼šä½œç”¨æ–¼æ•´å€‹ k8s é›†ç¾¤ cert-manager æœ‰æ”¯æ´å¹¾ç¨®çš„ issuer typeï¼š\nCA: ä½¿ç”¨ x509 keypair ç”¢ç”Ÿ certificateï¼Œå­˜åœ¨ kubernetes secret Self â€¦","date":"2022-05-19T09:11:00+00:00","updated":"2022-05-19T09:11:00+00:00"},{"objectID":"1652950680","permalink":"/post/devops-terraform-helm-release-set-array/terraform-helm-release-pass-array/","title":"[Terraform] helm_release Pass Array/List to Set's Value","content":"åœ¨ terraform ä½¿ç”¨ helm_releaseï¼Œåœ¨å‚³å…¥ set åƒæ•¸æ™‚é‡åˆ°æœ‰ chart æŒ‡å®šè¦ array å‹æ…‹çš„å€¼ï¼Œä½†ä½¿ç”¨ [] å‚³å…¥ string array å»æœƒå ±ç„¡æ³• iterate arrayã€‚åœ¨é€™é‚Šç´€éŒ„ä¸€ä¸‹è§£æ³•ã€‚\nmetrics-server helm chart æè¿°\ré€™æ¬¡ä½¿ç”¨ Terraform å¯¦åšå®‰è£çš„ helm chart æ˜¯ metrics-serverï¼Œ\rå®˜ç¶²\ræåˆ°å¯ä»¥ä½¿ç”¨ args å‚³å…¥å•Ÿå‹• server çš„é¡å¤–åƒæ•¸ï¼Œå•Ÿå‹•åƒæ•¸ --kubelet-insecure-tls ç›®çš„æ˜¯é˜²æ­¢ metrics server è¨ªå• kubelet æ¡é›†æŒ‡æ¨™æ™‚å ±è­‰æ›¸éŒ¯èª¤ x509: certificate signed by unknown authority çš„å•é¡Œã€‚\nåŸæœ¬éŒ¯èª¤çš„ç¯„ä¾‹\r1resource \u0026#34;helm_release\u0026#34; \u0026#34;metrics-server\u0026#34; { 2 count = var.package.metrics == true ? 1 : 0 3 4 name = \u0026#34;metrics-server\u0026#34; 5 namespace = \u0026#34;kube-system\u0026#34; 6 chart = \u0026#34;metrics-server/metrics-server\u0026#34; 7 set { 8 name = \u0026#34;args\u0026#34; 9 value = \u0026#34;[\\\u0026#34;--kubelet-insecure-tls\\\u0026#34;]\u0026#34; 10 } 11} æœƒä¸Ÿä»¥ä¸‹éŒ¯èª¤\n1Error: template: metrics-server/templates/deployment.yaml:59:27: executing \u0026#34;metrics-server/templates/deployment.yaml\u0026#34; at \u0026lt;.Values.args\u0026gt;: range can\u0026#39;t iterate over [\u0026#34;--kubelet-insecure-tls\u0026#34;] æ­£ç¢ºå¯«æ³•\rå°‡ [] æ‹¬è™Ÿä½¿ç”¨ {} å–ä»£ï¼Œä¸”é™£åˆ—é …ç›®ä¸éœ€è¦åŠ ä¸Š \u0026quot;\u0026quot;ã€‚\n1resource \u0026#34;helm_release\u0026#34; \u0026#34;metrics-server\u0026#34; { 2 count = var.package.metrics == true ? 1 : 0 3 4 name = \u0026#34;metrics-server\u0026#34; 5 namespace = \u0026#34;kube-system\u0026#34; 6 chart = \u0026#34;metrics-server/metrics-server\u0026#34; 7 set { 8 name = \u0026#34;args\u0026#34; 9 value = \u0026#34;{--kubelet-insecure-tls}\u0026#34; 10 } 11} ","date":"2022-05-19T08:58:00+00:00","updated":"2022-05-19T08:58:00+00:00"},{"objectID":"1652950380","permalink":"/post/k8s-calico-running-but-unready/calico-running-but-unready/","title":"Calico Running but Unready (Ready 0/1)","content":"ç’°å¢ƒèªªæ˜\rKubernetes 1.20.10 Calico 3.23 éŒ¯èª¤æè¿°\réƒ¨ç½² calico ç¶²çµ¡å¾Œç‹€æ…‹é›–ç‚º Runningï¼Œä½† container éƒ½ç„¡æ³•æˆåŠŸé‹ä½œï¼Œcalico-controller ä»¥åŠæ”¾åœ¨æ¯å€‹ç¯€é»çš„ calico-node çš†ç„¡æ³•åˆå§‹åŒ–ï¼Œå¦‚ä¸‹åœ–\ncalico-kube-controllers æ—¥èªŒ 12022-05-17 01:11:09.503 [FATAL][1] main.go 120: Failed to initialize Calico datastore error=Get \u0026#34;https://10.254.0.1:443/apis/crd.projectcalico.org/v1/clusterinformations/default\u0026#34;: context deadline exceeded 22022-05-17 01:11:09.962 [INFO][1] main.go 94: Loaded configuration from environment config=\u0026amp;config.Config{LogLevel:\u0026#34;info\u0026#34;, WorkloadEndpointWorkers:1, ProfileWorkers:1, PolicyWorkers:1, NodeWorkers:1, Kubeconfig:\u0026#34;\u0026#34;, DatastoreType:\u0026#34;kubernetes\u0026#34;} 3W0822 01:11:09.963646 1 client_config.go:615] Neither --kubeconfig nor --master was specified. Using the inClusterConfig. This might not work. 42022-05-17 01:11:09.964 [INFO][1] main.go 115: Ensuring Calico datastore is initialized calico-node æ—¥èªŒ 12022-05-17 01:11:14.102 [WARNING][69] felix/health.go 211: Reporter is not ready. name=\u0026#34;async_calc_graph\u0026#34; 22022-05-17 01:11:14.102 [WARNING][69] felix/health.go 211: Reporter is not ready. name=\u0026#34;int_dataplane\u0026#34; 32022-05-17 01:11:14.103 [WARNING][69] felix/health.go 173: Health: not ready 42022-05-17 01:11:14.540 [INFO][69] felix/watchercache.go 180: Full resync is required ListRoot=\u0026#34;/calico/resources/v3/projectcalico.org/kubernetesendpointslices\u0026#34; 52022-05-17 01:11:14.544 [INFO][69] felix/watchercache.go 193: Failed to perform list of current data during resync ListRoot=\u0026#34;/calico/resources/v3/projectcalico.org/kubernetesendpointslices\u0026#34; error=resource does not exist: KubernetesEndpointSlice with error: the server could not find the requested resource åŸå› åŠè§£æ³•\råŸå› æ˜¯å› ç‚ºå®‰è£çš„ Calico ç‰ˆæœ¬ä¸ç›¸å®¹æ–¼ Kubernetesï¼Œä¾æ“š Calico å®˜ç¶²\rçš„æè¿°ï¼Œ3.23 ç‰ˆæœ€ä½æ”¯æ´çš„ k8s ç‰ˆæœ¬ç‚º 1.21ï¼Œæ•…ç™¼ç”Ÿè©²éŒ¯èª¤ã€‚ è§£æ±ºæ–¹æ³•æ˜¯å°‡ Calico é‡æ–°éƒ¨ç½²ç‚º 3.21 ç‰ˆï¼Œä»¥ç›¸å®¹æ–¼ k8s 1.20 çš„ç’°å¢ƒ\n1curl -s https://docs.projectcalico.org/manifests/calico.yaml | kubectl delete -f - 2 configmap \u0026#34;calico-config\u0026#34; deleted 3 customresourcedefinition.apiextensions.k8s.io \u0026#34;bgpconfigurations.crd.projectcalico.org\u0026#34; deleted 4 customresourcedefinition.apiextensions.k8s.io \u0026#34;bgppeers.crd.projectcalico.org\u0026#34; deleted 5 customresourcedefinition.apiextensions.k8s.io \u0026#34;blockaffinities.crd.projectcalico.org\u0026#34; deleted 6 customresourcedefinition.apiextensions.k8s.io \u0026#34;caliconodestatuses.crd.projectcalico.org\u0026#34; deleted 7 customresourcedefinition.apiextensions.k8s.io \u0026#34;clusterinformations.crd.projectcalico.org\u0026#34; deleted 8 customresourcedefinition.apiextensions.k8s.io \u0026#34;felixconfigurations.crd.projectcalico.org\u0026#34; deleted 9 customresourcedefinition.apiextensions.k8s.io \u0026#34;globalnetworkpolicies.crd.projectcalico.org\u0026#34; deleted 10 customresourcedefinition.apiextensions.k8s.io \u0026#34;globalnetworksets.crd.projectcalico.org\u0026#34; deleted 11 customresourcedefinition.apiextensions.k8s.io \u0026#34;hostendpoints.crd.projectcalico.org\u0026#34; deleted 12 customresourcedefinition.apiextensions.k8s.io \u0026#34;ipamblocks.crd.projectcalico.org\u0026#34; deleted 13 customresourcedefinition.apiextensions.k8s.io \u0026#34;ipamconfigs.crd.projectcalico.org\u0026#34; deleted 14 customresourcedefinition.apiextensions.k8s.io \u0026#34;ipamhandles.crd.projectcalico.org\u0026#34; deleted 15 customresourcedefinition.apiextensions.k8s.io \u0026#34;ippools.crd.projectcalico.org\u0026#34; deleted 16 customresourcedefinition.apiextensions.k8s.io \u0026#34;ipreservations.crd.projectcalico.org\u0026#34; deleted 17 customresourcedefinition.apiextensions.k8s.io \u0026#34;kubecontrollersconfigurations.crd.projectcalico.org\u0026#34; deleted 18 customresourcedefinition.apiextensions.k8s.io \u0026#34;networkpolicies.crd.projectcalico.org\u0026#34; deleted 19 customresourcedefinition.apiextensions.k8s.io \u0026#34;networksets.crd.projectcalico.org\u0026#34; deleted 20 clusterrole.rbac.authorization.k8s.io \u0026#34;calico-kube-controllers\u0026#34; deleted 21 clusterrolebinding.rbac.authorization.k8s.io \u0026#34;calico-kube-controllers\u0026#34; deleted 22 clusterrole.rbac.authorization.k8s.io \u0026#34;calico-node\u0026#34; deleted 23 clusterrolebinding.rbac.authorization.k8s.io \u0026#34;calico-node\u0026#34; deleted 24 daemonset.apps \u0026#34;calico-node\u0026#34; deleted 25 serviceaccount \u0026#34;calico-node\u0026#34; deleted 26 deployment.apps \u0026#34;calico-kube-controllers\u0026#34; deleted 27 serviceaccount \u0026#34;calico-kube-controllers\u0026#34; deleted 28 error: unable to recognize \u0026#34;STDIN\u0026#34;: no matches for kind \u0026#34;PodDisruptionBudget\u0026#34; in version \u0026#34;policy/v1\u0026#34; é‡æ–°éƒ¨ç½²\n1curl -s https://docs.projectcalico.org/v3.21/manifests/calico.yaml | kubectl apply -f - 2 configmap/calico-config created 3 Warning: apiextensions.k8s.io/v1beta1 CustomResourceDefinition is deprecated in v1.16+, unavailable in v1.22+; use apiextensions.k8s.io/v1 CustomResourceDefinition 4 customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created 5 customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created 6 customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created 7 customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created 8 customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created 9 customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created 10 customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created 11 customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created 12 customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created 13 customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created 14 customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created 15 customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created 16 customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created 17 customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created 18 clusterrole.rbac.authorization.k8s.io/calico-kube-controllers created 19 clusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created 20 clusterrole.rbac.authorization.k8s.io/calico-node created 21 clusterrolebinding.rbac.authorization.k8s.io/calico-node created 22 daemonset.apps/calico-node created 23 serviceaccount/calico-node created 24 deployment.apps/calico-kube-controllers created 25 serviceaccount/calico-kube-controllers created éƒ¨ç½²ä¾ç…§ç’°å¢ƒé…ç½®å¤§æ¦‚éœ€è¦ç­‰å¹¾åˆ†é˜ä¸ç­‰ï¼Œéç¨‹ä¸­å¯èƒ½æœƒé€ æˆå…¶ä»– Pod è¢«é‡å•Ÿï¼Œè§€å¯Ÿä¸‹ä¾†æ˜¯æ­£å¸¸çš„æƒ…æ³\nå…¨éƒ¨å®Œæˆå¾Œå°±å¯ä»¥çœ‹åˆ° pod çš†æ­£å¸¸é‹ä½œäº†\nReference\rhttps://projectcalico.docs.tigera.io/archive/v3.21/getting-started/kubernetes/requirements\rhttps://github.com/opsnull/follow-me-install-kubernetes-cluster/issues/633\r","date":"2022-05-19T08:53:00+00:00","updated":"2022-05-19T08:53:00+00:00"},{"objectID":"1652723581","permalink":"/post/network-using-router-as-switch/using-router-as-switch/","title":"æŠŠ Router ç•¶ Switch ç”¨","content":"åœ¨å…¬å¸æ¶ç’°å¢ƒæ™‚ï¼Œå‰›å¥½é‡åˆ°è¦è®“å¹¾å°é›»è…¦éƒ½è¦ç›´æ¥é€£å…¬å¸ç¶²æ®µçš„æƒ…æ³ï¼Œå¯æ˜¯æ‰‹ä¸Šåªæœ‰ä¸€å° routerï¼Œå¦‚æœæŠŠç¾æœ‰çš„ IP ç¶²è·¯ç·šæ’åœ¨ WAN port ä¸Šï¼Œé‚£éº¼æ’åœ¨ LAN port çš„æ©Ÿå™¨éƒ½æœƒæ˜¯è™›æ“¬ç¶²æ®µï¼Œä¸ç¬¦æ‰€éœ€ã€‚å¾Œä¾† google ç™¼ç¾åªè¦ç…§ä¸‹é¢äºŒå€‹æ­¥é©Ÿå°±å¯ä»¥è®“ router è®Šèº«æˆ switchï¼š\né€£é€² router çš„ web consoleï¼ŒæŠŠ dhcp server åŠŸèƒ½é—œæ‰ æŠŠåŸå…ˆæ¥åœ¨ WAN port çš„ç¶²è·¯ç·šæ”¹æ¥åˆ° LAN port ä»¥æ‰‹ä¸Šé€™å° totolink ac5 ç‚ºä¾‹ï¼Œåªè¦å°‡é›»è…¦è·Ÿå…¬å¸å…§éƒ¨ router å‡ºä¾†çš„å¯¦é«”ç¶²è·¯ç·šéƒ½æ’åˆ°ä¸­é–“ä¸‰å€‹ LAN port å³å¯ã€‚ è£œå……ä¸€ä¸‹åŸºæœ¬çŸ¥è­˜\nHubã€Switchã€Router å…±åŒé»åœ¨æ–¼\ré€£çµå¤šå°é›»è…¦ã€å‚³éå°åŒ…ï¼Œå»¶ä¼¸ç¶²è·¯ç¯„åœã€é€²è¡Œå»£æ’­ã€‚\nHub\ré›†ç·šå™¨ç”¨ä¸€å€‹ port ç›´æ¥é€£åˆ°ç¶²è·¯ä¸Šï¼Œå¤§éƒ¨åˆ†æ˜¯æœ‰ DHCP serverï¼Œå…¶é¤˜é›»è…¦æ¥åœ¨é€™é›†ç·šå™¨ä¸Šï¼Œå°±èƒ½è‡ªå‹•æ‹¿åˆ° IPã€‚é›†ç·šå™¨æ‰€æœ‰ port å…±äº«ä¸€å€‹é »å¯¬ï¼ŒåŒæ¨£çš„å°åŒ…æœƒå‚³é€è‡³é›†ç·šå™¨æ‰€é€£çµçš„æ¯ä¸€å°é›»è…¦ï¼Œé€ æˆéå¤šçš„å»£æ’­å°åŒ…ï¼Œå½±éŸ¿ç¶²è·¯å‚³è¼¸çš„æ•´é«”æ•ˆèƒ½ã€‚\nL2 Switch\räº¤æ›å™¨æ˜¯ä¸€ç¨®è² è²¬ç¶²è·¯æ©‹æ¥ï¼ˆnetwork bridgingï¼‰çš„ç¶²è·¯ç¡¬é«”è¨­å‚™ï¼Œæœƒè®€å–ç¶²è·¯å¡çš„ MAC ä½å€ä¾†è½‰ç™¼è³‡æ–™ï¼Œå°‡è³‡æ–™æº–ç¢ºåœ°é€é”ç›®çš„åœ°ã€‚äº¤æ›å™¨çš„æ¯å€‹ port éƒ½äº«æœ‰ä¸€å€‹å°ˆå±¬çš„é »å¯¬ä¸¦å…·å‚™è³‡æ–™äº¤æ›åŠŸèƒ½ï¼Œä½¿å¾—ç¶²è·¯å‚³è¼¸æ•ˆèƒ½å¾—æ–¼åŒä¸€æ™‚é–“å…§æ‰€èƒ½å‚³è¼¸çš„è³‡æ–™é‡è¼ƒå¤§\nL3 Switch\rå¦‚æœå†æŠŠè·¯ç”±è¡¨çš„åŠŸèƒ½åŠ å…¥ L2 Switchï¼Œé‚£éº¼å®ƒå°±æœƒè®Šæˆ L3 Switchï¼Œå¯ä»¥ç‚º VLAN å»ºç«‹é©ç•¶çš„è·¯ç”±è¡¨ï¼Œè®“æ•ˆèƒ½æ›´åŠ ææ˜‡ã€‚L3 çš„äº¤æ›å™¨åˆç¨±ç‚º IP Switch æˆ– Switch Routerï¼Œé€éå°ˆå±¬çš„ ASIC æ™¶ç‰‡ä¾†è§£æç¬¬ä¸‰å±¤è¡¨é ­ï¼ˆå¦‚ IP Headerï¼‰ä»¥é”åˆ°å‚³é€ç›®çš„ï¼Œå› æ­¤é€šå¸¸å¯ä»¥æé«˜åˆ°æ¯ç§’ç™¾è¬å°åŒ…çš„æ•ˆèƒ½ä»¥åŠæ•¸åå€‹é«˜é€Ÿä¹™å¤ªç¶²è·¯é€£æ¥åŸ ä¹‹å®¹é‡ã€‚L3 Switch çš„è·¯ç”±è¡¨å¯ä»¥å° VLAN åšæ›´æœ‰æ•ˆçš„ç®¡åˆ¶ï¼Œè®“å»£æ’­å°åŒ…ä¸æœƒç„¡é™åˆ¶çš„å‚³é€ã€‚\nL3 Swtich æ¯”è¼ƒå°ˆæ³¨åœ¨ä¼æ¥­å…§ç¶²çš„ LAN ç’°å¢ƒæ‡‰ç”¨ï¼Œé€šå¸¸æœƒæœ‰æä¾›å¤§é‡çš„ Port æ•¸ï¼Œå°æ–¼å°åŒ…è½‰é€çš„æ•ˆèƒ½é«˜ã€‚\nRouter\rRouter é€šå¸¸å®šä½åœ¨è·¨ WAN çš„é‚Šç•Œé€£æ¥ç”¨ï¼Œå¯å€éš”ä¸åŒçš„ IP ç¶²æ®µï¼Œå¯æ‹¿ä¾†ç•¶ä½œ NATã€é˜²ç«ç‰†ã€è² è¼‰å¹³è¡¡æˆ– VoIP ç­‰æœå‹™ã€‚é€šå¸¸ä¸æœƒæœ‰å¤ªå¤š Port (å› ç‚ºå¾ˆå°‘æœƒæœ‰æ•¸åæ¢ WAN åŒæ™‚æ¥é€²ä¾†)ã€‚é›–è»Ÿé«”é€Ÿåº¦è¼ƒç¡¬é«”æ…¢ (åŠ ä¸Šåœ¨ç¶²è·¯å”å®šä¸­ï¼Œè¶Šå¾€ä¸Šè·‘ï¼Œå°åŒ…è¦æ‹†é–‹è¶Šå¤šå±¤)ï¼Œä½†åœ¨å¯¦éš›é‹ç”¨ä¸Šè¼ƒæœ‰å½ˆæ€§ã€‚\n","date":"2022-05-16T17:53:01+00:00","updated":"2022-05-16T17:53:01+00:00"},{"objectID":"1652723340","permalink":"/post/devops-install-kvm-libvertd-by-vagrant-on-centos/install-kvm-by-vagrant-on-centos/","title":"Install KVM (libvert) by Vagrant on CentOS","content":"ä¸Šæ¬¡ç´€éŒ„äº†å¦‚ä½•åœ¨ Ubuntu é€é Virtualbox ä½¿ç”¨ Vagrantï¼Œæœ¬ç¯‡æ–‡ç« è¨˜éŒ„å¦‚ä½•åœ¨ CentOS é€é KVM ä½¿ç”¨ Vagrant è‡ªå‹•åŒ–å»ºç«‹ VMã€‚\nPrerequisite\rå®‰è£ KVMï¼Œè«‹åƒè€ƒä¹‹å‰\ræ–‡ç« è¨˜éŒ„\rå®‰è£ Vagrant\rå®‰è£ Plugin\rvagrant-libvirt ç”¨æ–¼æ”¯æŒ libvirt 1yum install -y libvirt-devel 2vagrant plugin install vagrant-libvirt éœ€è¦å®‰è£å¥½ libvirt-devel æ‰èƒ½å®‰è£ vagrant-libvirt æ’ä»¶ï¼Œå¦å‰‡æç¤ºä»¥ä¸‹éŒ¯èª¤ 1libvirt library not found in default locations (RuntimeError) vagrant-mutate ç”¨æ–¼å°‡å®˜æ–¹çš„ Vagrant guest box è½‰æ›æˆ KVM æ ¼å¼ 1vagrant plugin install vagrant-mutate åœ¨ Vagrant å®˜æ–¹é¡åƒä¸­ï¼Œä¹Ÿæœ‰éƒ¨åˆ†ç™¼è¡Œç‰ˆç›´æ¥æä¾›äº† libvirt ç‰ˆæœ¬ å®šç¾© Vagrantfile\r1ENV[\u0026#34;LC_ALL\u0026#34;] = \u0026#34;en_US.UTF-8\u0026#34; 2 3MASTER=3 4WORKER=2 5 6Vagrant.configure(\u0026#34;2\u0026#34;) do |config| 7 8$script_ansible = \u0026lt;\u0026lt;EOF 9 yum install -y net-tools git centos-release-ansible-29 10 yum install -y ansible 11 localectl set-locale LANG=en_US.UTF-8 12 source /etc/locale.conf 13 mkdir -p /root/.ssh 14 cp /home/vagrant/.ssh/authorized_keys /root/.ssh/ 15 cp /home/vagrant/.ssh/id_rsa /root/.ssh/ 16EOF 17 18$script = \u0026lt;\u0026lt;EOF 19 yum install -y net-tools 20 localectl set-locale LANG=zh_TW.UTF-8 21 source /etc/locale.conf 22 mkdir -p /root/.ssh 23 cp /home/vagrant/.ssh/authorized_keys /root/.ssh/ 24EOF 25 26 config.ssh.insert_key = false 27 config.vm.provider \u0026#34;libvirt\u0026#34; do |v| 28 v.memory = 8192 29 v.cpus = 4 30 v.storage_pool_name = \u0026#34;images\u0026#34; 31 end 32 33 (1..MASTER).each do |i| 34 config.vm.define \u0026#34;master#{i}\u0026#34; do |node| 35 node.vm.box = \u0026#34;generic/centos7\u0026#34; 36 node.vm.hostname = \u0026#34;master#{i}\u0026#34; 37 # node.vm.network :private_network, ip: \u0026#34;192.168.56.2#{i}\u0026#34;, :netmask =\u0026gt; \u0026#34;255.255.255.0\u0026#34; 38 node.vm.network \u0026#34;public_network\u0026#34; 39 :dev=\u0026gt;\u0026#34;br0\u0026#34; 40 node.vm.synced_folder \u0026#34;/root/k8sInstaller\u0026#34;, \u0026#34;/etc/ansible/roles/k8sInstaller\u0026#34; 41 node.vm.provision \u0026#34;file\u0026#34;, source: \u0026#34;~/.vagrant.d/insecure_private_key\u0026#34;, destination: \u0026#34;~/.ssh/id_rsa\u0026#34; 42 node.vm.provision :shell, :inline =\u0026gt; $script_ansible 43 end 44 end 45 46(1..WORKER).each do |i| 47 config.vm.define \u0026#34;worker#{i}\u0026#34; do |node| 48 node.vm.box = \u0026#34;generic/centos7\u0026#34; 49 node.vm.hostname = \u0026#34;worker#{i}\u0026#34; 50 # node.vm.network :private_network, ip: \u0026#34;192.168.56.3#{i}\u0026#34;, :netmask =\u0026gt; \u0026#34;255.255.255.0\u0026#34; 51 node.vm.network \u0026#34;public_network\u0026#34; 52 :dev=\u0026gt;\u0026#34;br0\u0026#34; 53 node.vm.provision :shell, :inline =\u0026gt; $script 54 end 55 end 56 57end æ›´å¤š provider è¨­å®šå¯åƒè€ƒ vagrant-libvert\ræ–‡æª”ã€‚\nå•Ÿå‹•\råŸ·è¡Œ vagrant up æŒ‡ä»¤éœ€è¦é¡å¤–æŒ‡å®š provider å¦‚ä¸‹ï¼š\n1vgrant up --provider=libvirt æˆ–è€…åœ¨åŸ·è¡Œå‰è¨­å®š VAGRANT_DEFAULT_PROVIDER ç’°å¢ƒè®Šæ•¸ï¼š\n1export VAGRANT_DEFAULT_PROVIDER=libvirt æˆåŠŸçš„è©±ï¼Œå¯ä»¥çœ‹åˆ°è™›æ“¬æ©Ÿåˆ—è¡¨æœ‰äº”å°ç”¨ vagrant å•Ÿå‹•çš„æ©Ÿå™¨\nCall to virStoragePoolDefineXML failed: operation failed: Storage source conflict with pool: \u0026lsquo;images\u0026rsquo;\rCentOS 7 éƒ¨ç½² kvm ä½¿ç”¨ SELinux å¢å¼·æ¨¡å¼ï¼Œä¸èƒ½ä½¿ç”¨éé»˜èªçš„ç›®éŒ„ä¾†å‰µå»º VM é¡åƒã€‚Vagrant æœƒå˜—è©¦ä½¿ç”¨ä¸€å€‹åç‚º default çš„å­˜å„²æ± ï¼Œå¦‚æœä¸å­˜åœ¨å°±æœƒå˜—è©¦åœ¨ /var/lib/libvirt/images ä¸Šå‰µå»º defualt å­˜å„²æ± ã€‚è¿”å›å¤±æ•—çš„åŸå› æ˜¯å·²ç¶“åœ¨æ­¤ç‚ºå€å‰µå»ºäº† images å„²å­˜æ± ã€‚\n1virsh pool-list --all 2Name State Autostart 3------------------------------------------- 4 images active yes ç›´æ¥å®šç¾© Vagrant çš„å­˜å„²æ± ä½¿ç”¨imagesï¼Œåœ¨ Libvirt é…ç½®ä¸­ï¼Œæœ‰é—œ Porvider Options ä¸­å¯ä»¥ä½¿ç”¨ storage_pool_name è¨­ç½® Libvirt å­˜å„²æ± åå­—ï¼Œä¹Ÿå°±æ˜¯ box image å’Œ instance snapshoot å­˜å„²ä½ç½®ã€‚ åœ¨ Vagrantfile ä¸­æ·»åŠ é…ç½®\n1Vagrant.configure(\u0026#34;2\u0026#34;) do |config| 2 ... 3 config.vm.provider :libvirt do |vm| 4 vm.storage_pool_name = \u0026#34;images\u0026#34; 5 end 6 ... 7end ç„¶å¾Œå†æ¬¡åŸ·è¡Œå‘½ä»¤ vagrant up --provider libvirt å°±å¯ä»¥æˆåŠŸå®‰è£ã€‚\nCall to virDomainCreateWithFlags failed: Unable to get index for interface eth0: No such device\rå¦‚æœç¶²è·¯ä½¿ç”¨ public networkï¼ŒVagrant é è¨­ä½¿ç”¨ä¾†ç•¶ bridge çš„ç¶²å¡æ˜¯ eth0ï¼Œè€Œç™¼ç”Ÿè©²éŒ¯èª¤è¨Šæ¯ä»£è¡¨æœ¬åœ°æ©Ÿå™¨ä¸­æ‰¾ä¸åˆ° eth0 ç¶²å¡ï¼Œè«‹åœ¨è¨­å®šæª”ä¸­åŠ ä¸Š dev æŒ‡å®šç¶²å¡åç¨±ã€‚\n1Vagrant.configure(\u0026#34;2\u0026#34;) do |config| 2 ... 3 config.vm.network \u0026#34;public_network\u0026#34; 4 :dev =\u0026gt; \u0026#34;br0\u0026#34; 5 ... 6end å…¶ä»–åƒæ•¸å¯ä»¥åƒè€ƒ public network options\rReference\rhttps://huataihuang.gitbooks.io/cloud-atlas/content/virtual/vagrant/vagrant_libvirt_kvm.html\r","date":"2022-05-16T17:49:00+00:00","updated":"2022-05-16T17:49:00+00:00"},{"objectID":"1652607600","permalink":"/post/programming-apache-redirect-http-to-https/redirect-http-to-https-on-apache/","title":"Apache Redirect http to https","content":"ç›®å‰æ‰‹ä¸Šæœ‰ä¸€å€‹ä½¿ç”¨ php é–‹ç™¼çš„ç¶²é ï¼Œweb server ä½¿ç”¨ Apache (httpd) å¯¦åšã€‚æœ¬ç¯‡è¨˜éŒ„å¦‚ä½•å°‡ http è‡ªå‹•è½‰å€åˆ° httpsã€‚\nmod_rewrite.c\rç·¨è¼¯ httpd config æª”ï¼Œ/etc/httpd/conf/httpd.confï¼Œåœ¨ \u0026lt;VirtualHost *:80\u0026gt; çš„å€å¡Šä¸‹æ–°å¢ä»¥ä¸‹ rewirte moduleï¼š\n1\u0026lt;IfModule mod_rewrite.c\u0026gt; 2 RewriteEngine on 3 RewriteRule ^ - [E=protossl] 4 5 RewriteCond %{HTTPS} on 6 RewriteRule ^ - [E=protossl:s] 7 8 RewriteCond %{HTTPS} !=on 9 RewriteRule ^ https://www.ula.com/$1 [L,R=301] 10\u0026lt;/IfModule\u0026gt; ä½œæ¥­ç’°å¢ƒç‚º CentOSï¼Œé‡å•Ÿ httpd\n1sudo systemctl restart httpd Reference\rhttps://stackoverflow.com/questions/57341254/how-to-redirect-http-to-https-on-apache\r","date":"2022-05-15T09:40:00+00:00","updated":"2022-05-15T09:40:00+00:00"},{"objectID":"1652522460","permalink":"/post/devops-install-vagrunt-on-ubuntu/install-vagrunt-on-ubuntu/","title":"Vagrant on Ubuntu","content":"Vagrant æ˜¯ç”± HashiCorp é–‹æºã€ä½¿ç”¨ Ruby é–‹ç™¼çš„è™›æ“¬æ©Ÿå™¨ç®¡ç†å·¥å…·ï¼Œç”¨æ–¼ç®¡ç†å¦‚ VirtualBoxã€VMwareã€AWS ç­‰ VMï¼Œä¸»è¦å¥½è™•æ˜¯å¯ä»¥æä¾›ä¸€å€‹å¯é…ç½®ã€å¯ç§»æ¤å’Œå¾©ç”¨çš„è™›æ“¬æ©Ÿç’°å¢ƒï¼Œå¯å¿«é€Ÿåœ°ä½¿ç”¨è¨­å®šæª” (Vagrantfile) å’Œ command line è‡ªå‹•åŒ–å®‰è£ã€é…ç½®ä¸€å° VMï¼Œé™ä½äº†é–‹ç™¼è€…æ­å»ºç’°å¢ƒçš„æ™‚é–“ã€‚\nPrerequisite\rDownload Provider Vagrant çš„è¡“èªä¸­ï¼Œåº•å±¤çš„è™›æ“¬æ©Ÿå™¨è»Ÿé«”å«ä½œ providerï¼Œé è¨­ provider æ˜¯ VirtualBoxï¼Œå…¶ä»–æ”¯æ´çš„ provider å¯åƒè€ƒ\rå®˜ç¶²\rã€‚æœ¬æ–‡ä½¿ç”¨å®˜æ–¹æ¨è–¦çš„ Virtualboxï¼Œä¾æ“š\rå®˜ç¶²ä¸‹è¼‰æ­¥é©Ÿå®‰è£\rã€‚ Download Vagrant\r1$ vagrant version 2Installed Version: 2.2.19 3Latest Version: 2.2.19 4 5You\u0026amp;#39;re running an up-to-date version of Vagrant! Before We Start - Vagrant Basic\rVagrant æä¾›ä¸€å€‹å‘½ä»¤è¡Œå·¥å…· vagrantï¼Œå¯ä»¥ç›´æ¥æ“ä½œè™›æ“¬æ©Ÿã€‚\nBoxï¼šVagrant çš„è™›æ“¬æ©Ÿé¡åƒï¼Œå¯ä»¥é€éåœ¨å…¬é–‹çš„ Vagrant Box Catalog\rä¸Šæœå°‹é©åˆçš„ box ä½¿ç”¨ã€‚ Provisioningï¼šè™›æ“¬æ©Ÿå¯¦ä¾‹å•Ÿå‹•å¾Œçš„åˆå§‹åŒ– Vagrant çš„å·¥ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\nç·¨å¯«è¨­å®šæª” (Vagrantfile) æ ¹æ“šè¨­å®šæª”ä¸‹è¼‰å¼•å…¥ Vagrant box æª”æ¡ˆã€‚ Vagarnt æ ¹æ“šè¨­å®šæª”é…ç½®ï¼Œé–‹é€šä¸¦åŸ·è¡Œè™›æ“¬æ©Ÿå™¨ï¼Œè®“å®ƒæˆç‚ºé‹è¡Œç‹€æ…‹ã€‚ å»ºç«‹ Vagrant è™›æ“¬æ©Ÿ\råˆå§‹åŒ–\råœ¨å…¬é–‹çš„ box catalog é¸å®šå¥½æƒ³è¦çš„ box å¾Œï¼Œé€é vagrant init åˆå§‹åŒ–ï¼Œæœƒåœ¨ç›®éŒ„ä¸‹ç”¢ç”Ÿä¸€å€‹ Vagrantfile æª”æ¡ˆï¼Œå»ºè­°å‰µå»ºä¸€å€‹å°ˆå±¬å­˜æ”¾ç•¶ä¸‹ç’°å¢ƒè¦ç”¨çš„ç›®éŒ„ï¼Œvagrant æŒ‡ä»¤éƒ½åœ¨ Vagrantfile æ‰€åœ¨çš„ç›®éŒ„åŸ·è¡Œï¼Œå…å¾— Vagrant æéŒ¯æˆåˆ¥å°æ©Ÿå™¨ã€‚\nç›´æ¥åœ¨ init æŒ‡å®š 1vagrant init generic/centos7 é€é Vagrantfile æŒ‡å®š è‹¥ä¸åŠ  box åç¨±ï¼Œå¯ç›´æ¥ä¸‹ vagrant initï¼Œå†å»ä¿®æ”¹ Vagrantfile ä¸­çš„ç›¸é—œ â€¦","date":"2022-05-14T10:01:00+00:00","updated":"2022-05-14T10:01:00+00:00"},{"objectID":"1652126040","permalink":"/post/os-ubuntu-install-local-deb/ubuntu-install-deb-file/","title":"Ubuntu 20.04 å®‰è£æœ¬åœ° deb åŒ…","content":"apt æ˜¯ ubuntu æœ€å¸¸ç”¨çš„åŒ…å‘½ä»¤ï¼Œç”¨æ–¼å¾ Ubuntu å­˜å„²åº«ã€PPA å’Œç¬¬ä¸‰æ–¹ apt å­˜å„²åº«å®‰è£ã€åˆªé™¤å’Œç®¡ç† packageã€‚å¾ Ubuntu 20.04 é–‹å§‹ï¼Œapt å‘½ä»¤æ”¯æŒå°æœ¬åœ° deb æ–‡ä»¶çš„å®‰è£ã€‚\ndpkg\råœ¨ä»¥å‰éƒ½æ˜¯ä½¿ç”¨ dpkg -i ä¾†å®‰è£æœ¬åœ° debã€‚ä½†æ˜¯ dpkg ä¸æœƒè‡ªå‹•å®‰è£ä¾è³´åŒ…ï¼Œå› æ­¤å®‰è£å¾ˆå®¹æ˜“å‡ºç¾ä¾è³´ç›¸é—œçš„éŒ¯èª¤ã€‚ä¹‹å¾Œéœ€è¦é€šéé‹è¡Œ sudo apt-get install -f ä¾†å®‰è£ä¾è³´ã€‚\napt/apt-get\rç›´æ¥é€šé apt/apt-get ä¾†å®‰è£æœ¬åœ° deb åŒ…ï¼Œåªéœ€è¦ç‚º apt/apt-get æŒ‡å®š deb åŒ…çš„ç›¸å°è·¯å¾‘æˆ–çµ•å°è·¯å¾‘å°±è¡Œäº†ï¼Œä¸èƒ½ç›´æ¥åœ¨ apt å‘½ä»¤å¾ŒæŒ‡å®š deb åŒ…çš„åå­—ï¼Œå¿…é ˆè¦æŒ‡å®šè·¯å¾‘ï¼Œå¦å‰‡ apt å‘½ä»¤æœƒå˜—è©¦å¾é ç¨‹å€‰åº«ä¸­æœç´¢ deb åŒ…åŒåçš„ packageï¼Œå¾è€Œå°è‡´å®‰è£å¤±æ•—ã€‚å¦‚ä¸‹ç¯„ä¾‹ï¼š\n1sudo apt install ./PACKAGE_NAME.deb 2sudo apt install /home/ula/PACKAGE_NAME.deb Reference\rhttps://ubuntuhandbook.org/index.php/2021/04/install-deb-file-ubuntu-4-ways/\r","date":"2022-05-09T19:54:00+00:00","updated":"2022-05-09T19:54:00+00:00"},{"objectID":"1650747600","permalink":"/post/coldplay-biutyful/","title":"[Coldplay] Biutyful","content":"All I know is I love you so\næˆ‘æ‰€çŸ¥é“çš„æ˜¯æˆ‘å¦‚æ­¤æ„›ä½ \nI hope that you get everything you want in this beautiful life\næˆ‘æ‰€å¸Œæœ›çš„æ˜¯ä½ åœ¨é€™å€‹ç¾å¥½ç”Ÿæ´»ä¸­å¾—åˆ°ä½ æƒ³è¦çš„ä¸€åˆ‡\nChange for your pocket, someone for the night\næ›å–ä½ å£è¢‹çš„é›¶éŒ¢ï¼Œæˆ–è€…é™ªä¼´ä½ åº¦éä¸€å€‹å¤œæ™š\nI hope they name you a rocket and take you for a ride for free\næˆ‘å¸Œæœ›ä»–å€‘èƒ½ç‚ºä½ çš„ç«ç®­å‘½åä¸¦å…è²»å¸¶ä½ ä¸€ç¨‹\nAnd if they tell you you\u0026rsquo;re nothin\u0026rsquo;, maybe you\u0026rsquo;d explain\nTo me you\u0026rsquo;re the summer sun after the rain\nå¦‚æœä»–å€‘å‘Šè¨´ä½ ä¸€ç„¡æ˜¯è™•ï¼Œä¹Ÿè¨±ä½ å¯ä»¥è§£é‡‹å°æˆ‘ä¾†èªªä½ æ˜¯é›¨å¾Œçš„å¤©æ™´\nYou were there when I needed something for the pain, you see\nä½ çœ‹ï¼Œç•¶æˆ‘éœ€è¦ä¸€äº›æ±è¥¿ä¾†æ­¢ç—›çš„æ™‚å€™ä½ ç¸½åœ¨é‚£è£¡\nWhen you love me, love me, love me\nç•¶ä½ æ„›æˆ‘ï¼Œæ„›æˆ‘ï¼Œæ„›æˆ‘\nWhen you love me, love me, love me\nç•¶ä½ æ„›æˆ‘ï¼Œæ„›æˆ‘ï¼Œæ„›æˆ‘\nWhen you love me, love me, love me\nç•¶ä½ æ„›æˆ‘ï¼Œæ„›æˆ‘ï¼Œæ„›æˆ‘\nWhen you love me, love me, love me\nç•¶ä½ æ„›æˆ‘ï¼Œæ„›æˆ‘ï¼Œæ„›æˆ‘\nI\u0026rsquo;m nowhere else\næˆ‘ä¸åœ¨ä»»ä½•åœ°æ–¹\nI\u0026rsquo;m on top of the world, man\nOn top of the world\næˆ‘åœ¨ä¸–ç•Œçš„é ‚ç«¯, å¤¥ä¼´, åœ¨ä¸–ç•Œçš„é ‚ç«¯\nAnd it\u0026rsquo;s so beautiful\nè€Œé€™å¦‚æ­¤ç¾éº—\nAnd you\u0026rsquo;re so beautiful\nä½ ä¹Ÿå¦‚æ­¤ç¾éº—\nI hope that you get everything you want in this beautiful life\næˆ‘æ‰€å¸Œæœ›çš„æ˜¯ä½ åœ¨é€™å€‹ç¾å¥½ç”Ÿæ´»ä¸­å¾—åˆ°ä½ æƒ³è¦çš„ä¸€åˆ‡\nWatermelon moon, so happy you\u0026rsquo;re alive\nè¥¿ç“œæœˆäº®ï¼ŒçœŸé«˜èˆˆä½ æ´»è‘—\nAnd I feel like a river finally arrived at sea\nè€Œæˆ‘æ„Ÿè¦ºåƒæ¢æ²³æµï¼Œçµ‚æ–¼æŠµé”æµ·æ´‹\n\u0026lsquo;Cause when you love me, love me, love me\nWhen you love me, love me, love me\nWhen you love me, love me, love me\nWhen you love me, love me, love me\nI know I\u0026rsquo;ll be on top of the world, man\nOn top of the world\nAnd it\u0026rsquo;s so beautiful\nAnd you\u0026rsquo;re so beautiful\nAnd it\u0026rsquo;s so beautiful\n\u0026lsquo;Cause when you love me, love me, love me\nWhen you love me, love me, love me\nWhen you love me, love me, love me\nWhen you love me, love me, love me\nI know I\u0026rsquo;ll be on top of the world, man\nOn top of the world\nAnd it\u0026rsquo;s so beautiful\nAnd you\u0026rsquo;re so beautiful\nAnd it\u0026rsquo;s so beautiful\nAnd you\u0026rsquo;re so beautiful\nAnd it\u0026rsquo;s so beautiful\n","date":"2022-04-23T21:00:00+00:00","updated":"2022-04-23T21:00:00+00:00"},{"objectID":"1650484740","permalink":"/post/database-mongodb-intro/install-mongodb-on-kubernetes/","title":"åœ¨ Kubernetes ä¸Šä½ˆç½² MongoDB","content":"ç´€éŒ„ä¸€ä¸‹ mongodb çš„ kubernetes ä½ˆç½²æª”ï¼Œåˆ†ç‚º standalone ä»¥åŠ replica setï¼Œæœƒå®£å‘Š persistent volume ä»¥å„²å­˜æ°¸ä¹…æ€§è³‡æ–™ (å¦‚ database è³‡æ–™ã€index ä»¥åŠè¨­å®šæª”)ã€‚\n**å‡è¨­å·²å»ºç«‹ä»¥ nfs ç‚ºåŸºåº•çš„ storage classã€‚\nStandalone\r1apiVersion: v1 2kind: PersistentVolumeClaim 3metadata: 4 name: test-mongo-pvc 5 namespace: test-mongo 6spec: 7 accessModes: 8 - ReadWriteOnce 9 resources: 10 requests: 11 storage: 10Gi 12 storageClassName: nfs 13 14--- 15 16kind: Deployment 17apiVersion: apps/v1 18metadata: 19 name: mongodb 20 namespace: test-mongo 21spec: 22 replicas: 1 23 selector: 24 matchLabels: 25 app: mongodb 26 template: 27 metadata: 28 labels: 29 app: mongodb 30 spec: 31 containers: 32 - name: mongodb 33 image: mongo:latest 34 command: [\u0026#34;mongod\u0026#34;, \u0026#34;--bind_ip_all\u0026#34;, \u0026#34;--noauth\u0026#34;, \u0026#34;--dbpath\u0026#34;, \u0026#34;/data/db\u0026#34;] 35 ports: 36 - containerPort: 27017 37 name: mongodb 38 protocol: TCP 39 imagePullPolicy: IfNotPresent 40 volumeMounts: 41 - name: mongodb-data 42 mountPath: /data/db 43 volumes: 44 - name: mongodb-data 45 persistentVolumeClaim: 46 claimName: test-mongo-pvc 47 48--- 49 50apiVersion: v1 51kind: Service 52metadata: 53 name: mongodb 54 namespace: test-mongo 55 labels: 56 name: mongodb 57spec: 58 ports: 59 - port: 27017 60 name: mongo-port 61 protocol: TCP 62 targetPort: 27017 63 selector: 64 app: mongodb 65 type: NodePort Replicaset\r(å¾…è£œå……)\n","date":"2022-04-20T19:59:00+00:00","updated":"2022-04-20T19:59:00+00:00"},{"objectID":"1650403140","permalink":"/post/programming-golang-sql-query/golang-sql-query/","title":"[Golang] æŸ¥è©¢ SQL DB çš„å¹¾ç¨®åŒ¯å‡ºæ–¹å¼","content":"ç°¡æ˜“ç´€éŒ„ä¸€ä¸‹ sql query å›å‚³(å°å‡º)æŸ¥è©¢çµæœçš„ä¸‰ç¨®ä¸åŒæ–¹æ³•ï¼Œä¸‰ç¨®æ–¹å¼å›å‚³çš„æ ¼å¼éƒ½å·®ä¸å¤šï¼Œåªæ˜¯å‹æ…‹å¯èƒ½ä¸ä¸€æ¨£ã€‚æœ¬æ–‡ä½¿ç”¨çš„ database æ˜¯ Oracleã€‚\né€£ç·š\r1package main 2 3import ( 4\t\u0026#34;database/sql\u0026#34; 5\t\u0026#34;fmt\u0026#34; 6 7\t_ \u0026#34;github.com/godror/godror\u0026#34; 8) 9 10const ( 11\tusername = \u0026#34;ula\u0026#34; 12\tpassword = \u0026#34;123456\u0026#34; 13\thost = \u0026#34;10.90.1.207\u0026#34; 14\tport = 1521 15\tsid = \u0026#34;emesHY\u0026#34; 16) 17 18func main() { 19 20\toralInfo := fmt.Sprintf(\u0026#34;%s/%s@%s:%d/%s\u0026#34;, username, password, host, port, sid) 21\tdb, err := sql.Open(\u0026#34;godror\u0026#34;, oralInfo) 22 23\terr = db.Ping() 24\tif err != nil { 25\tfmt.Println(\u0026#34;cant connect\u0026#34;) 26\tdb.Close() 27\t} 28 29\tsqlComand := fmt.Sprintf(\u0026#34;SELECT DISTINCT SERIAL_NUMBER,PRE_KPSN,THIS_KPSN,DATECODE,LOTCODE from EMESC.VP_ASSY_SUMMARY_SMT where serial_number = \u0026#39;TBCBB2039913\u0026#39;\u0026#34;) 30 31\trows, err := db.Query(sqlComand) 32\tif err != nil { 33\tfmt.Println(\u0026#34;Query Database Failed!\u0026#34;) 34\t} 35\tdefer rows.Close() 36 37\t// æ’å…¥ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®ä½œæ³• 38} ä½œæ³•ä¸€\r1columns, err := rows.Columns() 2if err != nil { 3\tfmt.Println(err) 4} 5count := len(columns) 6tableData := make([]map[string]interface{}, 0) 7values := make([]interface{}, count) 8valuePtrs := make([]interface{}, count) 9for rows.Next() { 10\tfor i := 0; i \u0026lt; count; i++ { 11\tvaluePtrs[i] = \u0026amp;values[i] 12\t} 13\trows.Scan(valuePtrs...) 14\tentry := make(map[string]interface{}) 15\tfor i, col := range columns { 16\tvar v interface{} 17\tval := values[i] 18\tb, ok := val.([]byte) 19\tif ok { 20\tv = string(b) 21\t} else { 22\tv = val 23\t} 24\tentry[col] = v 25\t} 26\ttableData = append(tableData, entry) 27} 28jsonData, err := json.Marshal(tableData) 29if err != nil { 30\tfmt.Println(err) 31} 32// fmt.Println(string(jsonData)) 33 34var result []map[string]interface{} 35 36if err := json.Unmarshal([]byte(jsonData), \u0026amp;result); err != nil { 37\tfmt.Println(\u0026#34;Can\u0026#39;t parse the json string\u0026#34;) 38} 39 40fmt.Println(result) ä½œæ³•äºŒ\r1type Kpsn struct { 2\tSN string `json:\u0026#34;Serial_Number\u0026#34;` 3\tPre string `json:\u0026#34;Pre_KPSN\u0026#34;` 4\tThis string `json:\u0026#34;This_KPSN\u0026#34;` 5\tDC string `json:\u0026#34;Datecode\u0026#34;` 6\tLC string `json:\u0026#34;Lotcode\u0026#34;` 7} 8 9var kpsns []*Kpsn 10 11for rows.Next() { 12\tk := new(Kpsn) 13\trows.Scan(\u0026amp;k.SN, \u0026amp;k.Pre, \u0026amp;k.This, \u0026amp;k.DC, \u0026amp;k.LC) 14\tkpsns = append(kpsns, k) 15} 16jsonStr, _ := json.Marshal(\u0026amp;kpsns) 17 18var result []map[string]interface{} 19// var result []Kpsn 20 21if err := json.Unmarshal([]byte(jsonStr), \u0026amp;result); err != nil { 22\tfmt.Println(\u0026#34;Can\u0026#39;t parse the json string\u0026#34;) 23} 24 25fmt.Println(result) ä½œæ³•ä¸‰\r1var sn, pre, this, dc, lc string 2var result []map[string]interface{} 3 4for rows.Next() { 5\trows.Scan(\u0026amp;sn, \u0026amp;pre, \u0026amp;this, \u0026amp;dc, \u0026amp;lc) 6\tvar tmp map[string]interface{} 7\ttmp = make(map[string]interface{}) 8\ttmp[\u0026#34;SERIAL_NUMBER\u0026#34;] = sn 9\ttmp[\u0026#34;PRE_KPSN\u0026#34;] = pre 10\ttmp[\u0026#34;THIS_KPSN\u0026#34;] = this 11\ttmp[\u0026#34;DATECODE\u0026#34;] = dc 12\ttmp[\u0026#34;LOTCODE\u0026#34;] = lc 13\tresult = append(result, tmp) 14} 15fmt.Println(result) Reference\rhttps://stackoverflow.com/a/29164115/13318115\r","date":"2022-04-19T21:19:00+00:00","updated":"2022-04-19T21:19:00+00:00"},{"objectID":"1650046680","permalink":"/post/devops-gitlab-cicd-pipeline-on-k8s/build-cicd-pipeline-and-cd-to-k8s/","title":"å‰µå»º GitLab CICD pipeline å®Œæˆè‡ªå‹•éƒ¨å±¬åˆ° Kubernetes","content":"å‰è¨€\råœ¨é‚„æ²’æ¥è§¸ CI/CD æ™‚ï¼Œä¸€ç›´æœ‰ã€é€™æ±è¥¿ä¸€å®šå¾ˆé›£ã€çš„é è¨­ç«‹å ´ï¼Œç›´åˆ°é–‹å§‹æ’°å¯«ç¬¬ä¸€å€‹ .gitlab-ci.yml æ™‚ï¼Œå¿ƒç†èªçŸ¥çš„å›°é›£åº¦ä»æ²’æ¶ˆå¤±ã€‚ä¸éæ…¶å¹¸çš„æ˜¯ï¼Œç¶²è·¯ä¸Šçš„æ•™å­¸çœŸçš„å¾ˆå¤šï¼ŒGitLab ç¤¾ç¾¤ä¹Ÿè¶…çµ¦åŠ›çš„æœ‰è‘—è±å¯Œçš„æ–‡æª”è·Ÿç¯„ä¾‹ã€‚GitLab CI/CD æ•´é«”æ¶æ§‹ (gitlab serverã€runnerã€excutorã€pipelineã€stageã€job) å…¶å¯¦å¾ˆå–®ç´”ï¼Œæ‰€ä»¥åœ¨å¯¦åšæ™‚ï¼Œå¯ä»¥æŠŠè‡ªå‹•åŒ–éœ€æ±‚åˆ‡åˆ†ï¼Œå…ˆå¾ç¬¬ä¸€æ®µ build é–‹å§‹åšï¼ŒåšæˆåŠŸå¾Œï¼Œå†é€²éšåˆ° test åŠ deployã€‚æŠŠå›°é›£çš„ä»»å‹™åˆ†æ®µåšï¼Œæ„Ÿè¦ºå°±ä¸é‚£éº¼é›£ä»¥è¦ªè¿‘äº†ï¼\nç¢ºèª CI/CD éœ€æ±‚\rå‰é¢æ–‡ç« \rå·²ç¶“å»ºå¥½äº†ä¸€å€‹ runnerï¼Œç¾åœ¨è¦å¯¦åš CI/CD pipelineã€‚åœ¨é–‹å§‹ä¹‹å‰è¦å…ˆç¢ºå®šé–‹ç™¼è€…æƒ³é€é CICD å®Œæˆå“ªéƒ¨åˆ†çš„è‡ªå‹•åŒ–ï¼Ÿä»¥æœ¬æ¬¡å¯¦åšç‚ºä¾‹ï¼Œæˆ‘æƒ³è¦é”æˆï¼š\ncode æ¨ä¸Š GitLab å¾Œï¼Œä¸é ˆæ¸¬è©¦ï¼Œå› ç‚ºåœ¨æ¨ä¸Š repo å‰ï¼Œçš†å·²åœ¨æœ¬åœ°ç«¯æ¸¬è©¦å®Œç•¢ã€‚ è‡ªå‹•ä¾æ“šå°ˆæ¡ˆä¸­çš„ Dockerfile æª”æ¡ˆ build æˆ imageï¼Œä¸¦ä¸Šå‚³åˆ° registryï¼Œå¦‚ DockerHub æˆ–ç§æœ‰å€‰åº« è‡ªå‹•ä¾æ“šå°ˆæ¡ˆä¸­çš„ kubernetes.yaml æª”éƒ¨å±¬åˆ° kubernetes cluster ä¸­ .gitlab-ci.yml\rGitLab CI/CD é€éæ”¾ç½®åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åº•ä¸‹çš„ .gitlab-ci.yml æª”æ¡ˆä¾†é©…å‹•ï¼Œå®˜ç¶²æä¾›äº†è¨±å¤š Template\rçµ¦åˆå­¸è€…åƒè€ƒã€‚ å®šç¾© pipeline ä¸­æœƒæœ‰å“ªäº› stages (é è¨ˆè¦æœ‰çš„æ§‹å»ºéšæ®µ)ï¼Œä¾åºè¨­ç½®ã€‚\n1stages: 2 - build 3 - deploy æ¥è‘—åœ¨ Stage ä¸­è¨­ç½®ä¸€å€‹åˆ°å¤šå€‹ Jobï¼Œä¾†æè¿°è©²éšæ®µæ‰€éœ€å®Œæˆçš„å·¥ä½œã€‚\n1\u0026amp;lt;jobName\u0026amp;gt;: 2 stage: \u0026amp;lt;stageName\u0026amp;gt; 3 only: 4 - \u0026amp;lt;branchName\u0026amp;gt; 5 script: 6 - echo \u0026amp;#34;My first job\u0026amp;#34; å…¶ä¸­\nstageï¼šæŒ‡å®šè©² Job å±¬æ–¼å“ªä¸€å€‹ Stage onlyï¼šæŒ‡å®šåœ¨å“ªå€‹ Branch è§¸ç™¼æ™‚æ‰æœƒåŸ·è¡Œ scriptï¼šéœ€è¦åŸ·è¡Œçš„æŒ‡ä»¤ é…ç½® .gitlab-ci.yml\rç¢ºå®šéœ€æ±‚å¾Œå°±å¯ä»¥é–‹å§‹å¯« .gitlab-ci.yml æª”ã€‚\nå…ˆå¯¦åš build éšæ®µ\r1stages: 2 - â€¦","date":"2022-04-15T18:18:00+00:00","updated":"2022-04-15T18:18:00+00:00"},{"objectID":"1649964780","permalink":"/post/k8s-kubelet-pull-image-backoff/image-pull-backoff-after-harbor-login/","title":"å·²ç™»å…¥ harbor ä½† kubelet ä»æœƒ ImagePullBackOff","content":"åœ¨ kubernetes ç’°å¢ƒä¸Šæ‹‰å–ç§æœ‰é¡åƒå€‰åº« harbor çš„ image æ™‚ï¼Œä¸€ç›´å¡åœ¨ ImagePullBackOff çš„ç‹€æ…‹ï¼Œdecribe pod ç™¼ç¾æ˜¯æ¬Šé™å•é¡Œå°è‡´æ‹‰å–å¤±æ•—ã€‚\nç‹€æ³èªªæ˜\réŒ¯èª¤è¨Šæ¯å¦‚ä¸‹\n1Failed to pull image \u0026#34;10.1.5.142:4433/test/findkpsn:9d2e44d2\u0026#34;: rpc error: code = Unknown desc = Error response from daemon: unauthorized: unauthorized to access repository: test/findkpsn, action: pull: unauthorized to access repository: test/findkpsn, action: pull ç„¶è€Œå¯¦éš›ä¸Šåœ¨æœ¬æ©Ÿä¸Šå·²ç¶“ docker login æˆåŠŸéäº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ docker pull æ‹‰å–ï¼Œä½†é€é k8s æ‹‰å–ä»æœƒå¤±æ•—ã€‚\ndebug æ€è·¯\rç¢ºèªåœ¨åŒæ¨£ repo çš„ project ä¸‹çš„å…¶ä»– image æ˜¯å¦ä¹Ÿç™¼ç”ŸåŒæ¨£çš„æƒ…æ³ æ˜¯ï¼ŒåŒæ¨£ repo çš„ project çš„å…¶ä»– image ä¹Ÿç›¸åŒã€‚ ç¢ºèªåœ¨ä¸åŒçš„ repo æ˜¯å¦ä¹Ÿç™¼ç”ŸåŒæ¨£çš„æƒ…æ³ å¦ï¼Œå…¶ä»– repo èƒ½æ­£å¸¸å¤ é kubectl æ‹‰å–ï¼Œæ‡‰èƒ½æ¨æ–·éƒ¨å±¬ç’°å¢ƒä¸Šæ²’å•é¡Œã€‚ åŸå› \rçµæœæ˜¯å› ç‚ºæ²’æœ‰æŠŠ project å…¬é–‹ =__=\næ„å¤–ç™¼ç¾\rä»ç„¶é‚„æ˜¯å¯ä»¥è®“ project ç¶­æŒåœ¨ç§æœ‰çš„ç‹€æ³ä¸‹ï¼Œé€é kubectl æ‹‰å–ã€‚åªè¦åœ¨å®šç¾©è³‡æºæ™‚ï¼ŒåŠ ä¸Š imagePullSecrets çš„å±¬æ€§ï¼Œå€¼æŒ‡å®šç‚ºæ¬²å‰µå»ºè³‡æºçš„ namespace ä¸‹çš„ kubernetes.io/dockerconfigjson çš„ secretï¼Œå³å¯æ‹‰å–æˆåŠŸã€‚\nå‰µå»º docker-registry secret\r1kubectl create secret docker-registry \u0026lt;secretName\u0026gt; \\ 2--docker-server=DOCKER_REGISTRY_SERVER \\ 3--docker-username=DOCKER_USER \\ 4--docker-password=DOCKER_PASSWORD -n \u0026lt;NAMESPACE\u0026gt; deployment éƒ¨å±¬æª”\råœ¨ spec.template.spec ä¸‹æ–°å¢ imagePullSecrets\n1apiVersion: apps/v1 2kind: Deployment 3metadata: 4 name: test 5 namespace: test 6 labels: 7 app: test 8spec: 9 replicas: 1 10 selector: 11 matchLabels: 12 app: test 13 template: 14 metadata: 15 labels: 16 app: test 17 spec: 18 containers: 19 - name: test 20 image: 10.1.5.142:4433/test/test/findkpsn:9d2e44d2 21 imagePullSecrets: 22 - name: harbor é‡æ–°ä½ˆç½²\råŠ ä¸Š imagePullSecrets å¾Œï¼Œå°±å¯ä»¥æˆåŠŸæ‹‰å–ç§æœ‰å°ˆæ¡ˆçš„é¡åƒäº†!\nReference\rhttps://kubernetes.io/docs/concepts/containers/images/#specifying-imagepullsecrets-on-a-pod\r","date":"2022-04-14T19:33:00+00:00","updated":"2022-04-14T19:33:00+00:00"},{"objectID":"1649608560","permalink":"/post/devops-install-gitlab-runner-on-k8s-using-helm/install-gitlab-runner-on-k8s-by-helm/","title":"åœ¨ Kubernetes ä¸Šä½¿ç”¨ helm å»ºç«‹ GitLab Runner","content":"GitLab Runner æ˜¯ä¸€å€‹ç¨ç«‹çš„ç¨‹åºï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä¸‰ç¨®æ–¹å¼å®‰è£ï¼Œè«‹åƒè€ƒ\rå®˜ç¶²æ•™å­¸\rã€‚\nGitLab Official Repositories RPM/deb packages Using Binaries Using Containers æ‰¿å‰ä¸€ç¯‡ä»‹ç´¹ï¼ŒRunner æœ‰ 3 ç¨®é¡å‹ï¼Œæ‰€æœ‰é …ç›®å…±äº«çš„ Shared Runnerã€æŒ‡å®š Group å…±äº«çš„ Group Runner å’Œå–®å€‹é …ç›®ç¨å çš„ Specific Runnerï¼Œå„æœ‰ä¸åŒçš„ registration tokenã€‚\nShared Runnerï¼šåœ¨ Admin Area \u0026amp;gt; Runners ä¸­è¨»å†Š Group Runnerï¼šåœ¨æŒ‡å®šçš„ group çš„ Settings \u0026amp;gt; CI/CD \u0026amp;gt; Runners ä¸­è¨»å†Š Specific Runnerï¼šåœ¨å„è‡ªçš„ project ä¸‹çš„ Settings \u0026amp;gt; CI/CD \u0026amp;gt; Runners ä¸­è¨»å†Š æœ¬ç¯‡è¨˜éŒ„ä½¿ç”¨ helm chart çš„æ–¹å¼å®‰è£ Runner æ–¼ Kubernetes ä¸Šçš„éç¨‹ã€‚\nPrerequisite\rGitLab Server (ç›®å‰ä½¿ç”¨ 14.9.2 ç‰ˆï¼Œç”¨å®˜æ–¹æä¾›çš„ docker-compose è…³æœ¬å®‰è£ï¼Œå¯åƒè€ƒä¹‹å‰çš„\ræ–‡ç« è¨˜éŒ„\r) Kubernetes 1.4+ (ç¤ºç¯„ç’°å¢ƒç‚º 1.20.10) Helm (2 æˆ– 3 çš†å¯ï¼Œæœ¬æ–‡ä½¿ç”¨ helm3) GitLab server èˆ‡ Kubernetes é›†ç¾¤èƒ½äº’é€š æº–å‚™ helm chart\r1helm repo add gitlab https://charts.gitlab.io 2 helm repo list 3 NAME URL 4 gitlab\thttps://charts.gitlab.io/ å»ºç«‹è‡ªç°½æ†‘è­‰çš„ Kubernetes Secret\rå°‡å»ºç«‹ gitlab æ™‚å‰µå»ºçš„è‡ªç°½æ†‘è­‰å‰µå»ºç‚º secret è³‡æºï¼Œè©²æ†‘è­‰çš„æª”åæ‡‰æ¡ç”¨ \u0026amp;lt;gitlab.hostname\u0026amp;gt;.crt æ ¼å¼ã€‚\n1kubectl create secret generic \u0026amp;lt;SECRET_NAME\u0026amp;gt; \\ 2 --namespace \u0026amp;lt;NAMESPACE\u0026amp;gt; \\ 3 --from-file=\u0026amp;lt;CERTIFICATE_FILENAME\u0026amp;gt; â€¦","date":"2022-04-10T16:36:00+00:00","updated":"2022-04-10T16:36:00+00:00"},{"objectID":"1649608440","permalink":"/post/devops-gitlab-cicd-intro/gitlab-cicd-intro/","title":"GitLab CICD ä»‹ç´¹","content":"CI/CD\rContinuous Integration æŒçºŒæ•´åˆ\ræŒ‡åœ¨æºä»£ç¢¼è®Šæ›´å¾Œçš„è‡ªå‹•æª¢æ¸¬(Lint)ã€æ§‹å»º(Build)å’Œé€²è¡Œå–®å…ƒæ¸¬è©¦ã€é›†æˆæ¸¬è©¦(Test)çš„éç¨‹ã€‚ç›®æ¨™æ˜¯é‡å°æ¯å€‹è®Šå‹•ï¼Œèƒ½æŒçºŒæ€§çš„é€²è¡Œé©—è­‰ä¸¦æ•´åˆï¼Œä»¥ç¢ºä¿ç¨‹å¼çš„å“è³ªã€‚\nContinuous Delivery æŒçºŒäº¤ä»˜\ræŒ‡é »ç¹åœ°å°‡è»Ÿé«”çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜çµ¦ QA æˆ–ä½¿ç”¨è€…ï¼Œä»¥ä¾›è©•å¯©ã€‚å¦‚æœè©•å¯©é€šéï¼Œç¨‹å¼ç¢¼å°±é€²å…¥ç”Ÿç”¢éšæ®µã€‚æŒçºŒäº¤ä»˜é€šå¸¸åŒ…å«äº†ä¸€å€‹æ‰‹å‹•çš„æ­¥é©Ÿï¼Œç”¨ä¾†è®“é–‹ç™¼äººå“¡ç¢ºèªå’Œéƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒã€‚\nContinuous Deployment æŒçºŒä½ˆç½²\ræŒçºŒéƒ¨ç½²æ˜¯æŒ‡ç•¶äº¤ä»˜çš„ç¨‹å¼ç¢¼é€šéè©•å¯©ä¹‹å¾Œï¼Œè‡ªå‹•éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒä¸­ã€‚æŒçºŒéƒ¨ç½²ä¸å†éœ€è¦é–‹ç™¼äººå“¡æ‰‹å‹•éƒ¨ç½²æˆå“åˆ°ç”Ÿç”¢ç’°å¢ƒï¼Œåªè¦ç¨‹å¼ç¢¼æäº¤çš„ PR é€šéäº†ï¼Œå‰©ä¸‹çš„æ•´å€‹éç¨‹éƒ½æœƒè‡ªå‹•å®Œæˆã€‚\nGitlab CI/CD\rPipeline\rä»£è¡¨ä¸€æ¬¡çš„å®Œæ•´çš„è‡ªå‹•åŒ–ä»»å‹™ï¼Œæ¯æ¬¡æäº¤éƒ½æœƒè§¸ç™¼ä¸€æ¬¡ã€‚æ ¹æ“š GitLab æ‰€è¿°\npipelines are the top-level component of continuous integration, delivery, and deployment pipeline ä½¿ç”¨å­˜åœ¨ GitLab é …ç›®çš„æ ¹ç›®éŒ„çš„ yaml æ–‡ä»¶ (.gitlab-ci.yml) å®šç¾©ã€‚\nStage\rä»£è¡¨æ§‹å»ºéšæ®µï¼Œä¸€æ¢ Pipeline ä¸­å¯å®šç¾©å¤šå€‹ Stages\næ‰€æœ‰ Stages æœƒé †åºåŸ·è¡Œï¼Œå³ç•¶ä¸€å€‹ Stage å®Œæˆå¾Œï¼Œä¸‹ä¸€å€‹ Stage æ‰æœƒé–‹å§‹ åªæœ‰ç•¶æ‰€æœ‰ Stages å®Œæˆå¾Œï¼Œè©²æ§‹å»ºä»»å‹™æ‰æœƒæˆåŠŸ å¦‚æœä»»ä½•ä¸€å€‹ Stage å¤±æ•—ï¼Œé‚£éº¼å¾Œé¢çš„ Stages ä¸æœƒåŸ·è¡Œï¼Œè©²æ§‹å»ºä»»å‹™å¤±æ•— Job\rä»£è¡¨æ§‹å»ºå·¥ä½œï¼Œæ˜¯ GitLab CI ä¸­å¯ä»¥ç¨ç«‹æ§åˆ¶ä¸¦é‹è¡Œçš„æœ€å°å–®ä½ï¼Œä¸€å€‹ Stage ä¸­å¯ä»¥æœ‰å¤šçš„ Jobsã€‚\nç›¸åŒ Stage ä¸­çš„ Jobs æœƒä¸¦è¡ŒåŸ·è¡Œ ä»»ä¸€ Job å¤±æ•—ï¼Œé‚£éº¼ Stage å¤±æ•—ï¼ŒPipeline å¤±æ•— ç›¸åŒ Stage ä¸­çš„ Jobs éƒ½åŸ·è¡ŒæˆåŠŸæ™‚ï¼Œè©² Stage æˆåŠŸ Runner\rRunner è² è²¬é‹è¡Œ jobã€‚éœ€è¦å…ˆæ¶å¥½ Runnerï¼Œä¸¦åœ¨ Gitlab ä¸Šç™»è¨˜ï¼Œç•¶ pipeline é‹è¡Œæ™‚ï¼ŒGitlab æœƒæŒ‡æ´¾ jobs çµ¦å¯ä½¿ç”¨çš„ runnerã€‚\nåˆ†ç‚ºä¸‰ç¨®é¡å‹\rShared runners\rare available to all groups and projects in a GitLab instance. Group runners\rare available to all projects and subgroups in a group. It process jobs by using FIFO. Specific runners\rare associated with specific projects. Typically, specific runners are used for one project at a time. It process jobs by using FIFO. Reference\rhttps://www.bmc.com/blogs/continuous-delivery-continuous-deployment-continuous-integration-whats-difference/\rhttps://blog.tienyulin.com/ci-cd-concept/\rhttp://myblog-maurice.blogspot.com/2021/01/cicd.html\rhttps://docs.gitlab.com/ee/ci/runners/runners_scope.html\r","date":"2022-04-10T16:34:00+00:00","updated":"2022-04-10T16:34:00+00:00"},{"objectID":"1649606100","permalink":"/post/devops-install-harbor-by-docker-compose/install-harbor-by-docker-compose/","title":"ä½¿ç”¨ docker-compose å»ºç«‹ Harbor ç§æœ‰å€‰åº« (w/ https)","content":"é»˜èªæƒ…æ³ä¸‹ï¼ŒHarbor ä¸é™„å¸¶è­‰æ›¸ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ http è¨ªå•ã€‚ä½†åœ¨æ­£å¼ä¸Šç·šçš„ç’°å¢ƒä¸­ï¼Œå»ºè­°é…ç½® httpsã€‚\næº–å‚™ https æ‰€éœ€è­‰æ›¸\råœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œå»ºè­°ä½¿ç”¨ç”±å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ CA ç°½åçš„è­‰æ›¸ã€‚åœ¨æ¸¬è©¦æˆ–é–‹ç™¼ç’°å¢ƒä¸­ï¼Œå‰‡å¯ä»¥ä½¿ç”¨è‡ªç°½çš„ CAã€‚ä»¥ä¸‹ç¯„ä¾‹ç‚ºä½¿ç”¨ openssl ç”Ÿæˆ CAï¼Œåˆ†ç‚ºä½¿ç”¨ DNS æˆ–æ˜¯ç›´æ¥ä½¿ç”¨ IPã€‚\nä½¿ç”¨åŸŸå(DNS)\ræº–å‚™ x509 v3 æœå‹™æª”ï¼Œå‡è¨­ harbor ä¼ºæœå™¨ä½¿ç”¨çš„ DNS ç‚º harbor.ula.comã€‚ 1cat \u0026amp;gt; v3.ext \u0026amp;lt;\u0026amp;lt;-EOF 2authorityKeyIdentifier=keyid,issuer 3basicConstraints=CA:FALSE 4keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment 5extendedKeyUsage = serverAuth 6subjectAltName = @alt_names 7 8[alt_names] 9DNS.1=harbor.ula.com 10DNS.2=ula.com 11DNS.3=harbor 12EOF æº–å‚™é‡‘é‘°åŠè­‰æ›¸çš„ shell script 1vim prepare_ssl.sh è²¼ä¸Šä»¥ä¸‹å…§å®¹\n1#!/bin/bash 2 3CURDIR=\u0026amp;#34;`pwd`\u0026amp;#34;/\u0026amp;#34;`dirname $0`\u0026amp;#34; 4HOSTNAME=$1 5DOMAIN=$2 6 7INSTALL_PATH=\u0026amp;#34;/data/certs\u0026amp;#34; 8mkdir -p $INSTALL_PATH 9 10cd $INSTALL_PATH 11# generate CA certificate private key 12openssl genrsa -out ca.key 4096 13 14# generate CA certificate 15openssl req -x509 -new -nodes -sha512 -days 3650 -subj \u0026amp;#34;/C=TW/ST=Taipei/L=Taipei/O=$HOSTNAME/OU=Personal/CN=$HOSTNAME.$DOMAIN\u0026amp;#34; -key â€¦","date":"2022-04-10T15:55:00+00:00","updated":"2022-04-10T15:55:00+00:00"},{"objectID":"1648767135","permalink":"/post/k8s-setup-liveness-probe-to-restart-pod-when-showup-err-log/setup-liveness-probe-to-restart-when-pod-has-error-log/","title":"è¨­å®š liveness probe ç›£è½æ‡‰ç”¨ä»¥é‡å•Ÿ pod","content":"ç›®å‰æ‰‹ä¸Šæœ‰ä¸€å€‹ç›£è½ Oracle CDC çš„ç¨‹å¼è·‘åœ¨ä»¥ Debian ç‚ºåŸºåº•çš„ kubernetes pod ä¸­ï¼Œæœƒå®šæœŸå› ç‚º Oracle çš„éŒ¯èª¤è¨Šæ¯ ORA-12518: TNS ç›£è½ç¨‹å¼ç„¡æ³•åˆ†ç™¼å®¢æˆ¶æ©Ÿé€£ç·šçš„å•é¡Œè€Œæ–·ç·šã€‚æ­¤æ™‚é›–ç„¶ç¨‹å¼æœ‰ error logï¼Œä½† Pod çš„ç‹€æ…‹ä»ç„¶ç‚º Runningï¼Œåªè¦é‡å•Ÿ Pod å³å¯é‡æ–°æ­£å¸¸é‹ä½œã€‚\nORA-12518\ré¦–å…ˆé †ä¾¿è§£é‡‹æ­¤éŒ¯èª¤çš„åŸå›  The process of handing off a client connection to another process failed. åƒè€ƒç¶²è·¯ä¸Šå…¶ä»–åˆ†äº«ï¼š\nstackoverflow\rittutorial\rcnblogs\rå¾æ ¹æœ¬å¯ä»¥è§£æ±ºçš„æ–¹å¼å¦‚ä¸‹ï¼š\nEdit /etc/systemd/system.conf file and Set DefaultTasksMax to â€˜infinityâ€™. dedicated server: ä¿®æ”¹ oracle processes \u0026amp; sessions parameters shared server: ä¿®æ”¹ oracle dispatcher parameters ç„¶è€Œ\rå› ç‚º IT server ä¸¦ä¸åœ¨æˆ‘æ§ç®¡çš„ç¯„åœï¼Œæ‰€ä»¥åªèƒ½è‡ªå·±æ‰‹å‹•é‡å•Ÿ Podã€‚åŸæœ¬æ˜¯æƒ³èªªå¯« cronJob å®šæœŸé‡å•Ÿ podï¼Œä½†åœ¨æ‰¾è³‡æ–™çš„éç¨‹ä¸­ï¼Œç™¼ç¾åœ¨ stackoverflow crobjob å•é¡Œ\rçš„è§£æ³•ä¸­æœ‰äººæå‡ºäº†ç›´æ¥ä½¿ç”¨ livenessprobe è§£æ±ºã€‚\nå¾è¨­å®š livenessProbe è§£æ±º\rKubelet ä½¿ç”¨ liveness probeï¼ˆå­˜æ´»æ¢é‡ï¼‰ä¾†ç¢ºå®šä½•æ™‚é‡å•Ÿå®¹å™¨ã€‚ç•¶æ‡‰ç”¨ç¨‹åºè™•æ–¼é‹è¡Œç‹€æ…‹ä½†ç„¡æ³•åšé€²ä¸€æ­¥æ“ä½œï¼Œliveness æ¢é‡å°‡æ•ç²åˆ° deadlockï¼Œé‡å•Ÿè™•æ–¼è©²ç‹€æ…‹ä¸‹çš„å®¹å™¨ï¼Œä½¿æ‡‰ç”¨ç¨‹åºåœ¨å­˜åœ¨ bug çš„æƒ…æ³ä¸‹ä¾ç„¶èƒ½å¤ ç¹¼çºŒé‹è¡Œä¸‹å»ã€‚\nexec.Commandï¼šè¦åœ¨å®¹å™¨å…§åŸ·è¡Œçš„æª¢æ¸¬å‘½ä»¤ï¼Œå¦‚æœå‘½ä»¤åŸ·è¡ŒæˆåŠŸï¼Œå°‡è¿”å› 0ï¼Œkubelet å°±æœƒèªç‚ºè©²å®¹å™¨æ˜¯æ´»è‘—çš„ä¸¦ä¸”å¾ˆå¥åº·ã€‚å¦‚æœè¿”å›é 0 å€¼ï¼Œkubelet å°±æœƒæ®ºæ‰é€™å€‹å®¹å™¨ä¸¦é‡å•Ÿå®ƒã€‚ periodSecondsï¼šliveness probe å¤šä¹…æª¢æŸ¥ä¸€æ¬¡ initialDelaySecondsï¼šé¦–æ¬¡å•Ÿå‹• pod å¾Œï¼Œè¦å»¶é²å¤šä¹…å¾ŒåŸ·è¡Œ liveness probe probe command è¦å¯«å•¥?\ræ¥ä¸‹ä¾†åˆå¦ä¸€å€‹å•é¡Œä¾†äº†ï¼Œæˆ‘çš„ probe ä¸­çš„æª¢æ¸¬å‘½ä»¤è¦å¯«å•¥? å› ç‚ºåœ¨æ‰‹å‹•é‡å•Ÿæ™‚ï¼Œåªèƒ½å¾ kubectl logs ç‚ºä¾æ“šï¼ŒæŸ¥çœ‹æœ‰ç„¡éŒ¯èª¤è¨Šæ¯ã€‚ç„¶è€Œç¾åœ¨ command è¦åŸ·è¡Œåœ¨å®¹å™¨ä¸­ï¼Œä½†å®¹å™¨è£¡é¢æ²’è¾¦æ³•ç›´æ¥ä½¿ç”¨ kubectl å–å¾—æ‡‰ç”¨çš„ stdout çš„è¨Šæ¯ã€‚åˆå»å †ç–Šæº¢ä½(XD æ‰¾åˆ°äº†å…©ç¨®è§£æ±ºæ–¹æ³•ã€‚\nåœ¨å®¹å™¨è£¡ curl Kubernete API server\rè¨­å®š pod é€£ kubernetes api server è«‹åƒè€ƒå¦å¤–ä¸€ç¯‡\ræ–‡ç« è¨˜éŒ„\rã€‚ command æ‡‰è©²å°±æœƒé•·æˆä»¥ä¸‹ï¼Œå¦‚æœ curl å›åˆ°çš„ output æœƒ grep åˆ° error è¨Šæ¯ï¼Œå‰‡é‡å•Ÿã€‚\n1livenessProbe: 2 exec: 3 command: 4 - bash 5 - -c 6 - \u0026#34;curl -s --cacert /var/run/secrets/kubernetes.io/serviceaccount/ca.crt --header \u0026#34;Authorization: Bearer $(cat /var/run/secrets/kubernetes.io/serviceaccount/token)\u0026#34; -X GET https://kubernetes.default.svc/api/v1/namespaces/converg-it/pods/converg-it-adapter-oracle-8575f54dc6-7lnv6/log?sinceSeconds=100 | grep \u0026#39;error\u0026#39;\u0026#34; 7 initialDelaySeconds: 120 8 periodSeconds: 60 åœ¨å®¹å™¨è£¡æŸ¥çœ‹ç›£è½çš„ port\råœ¨ç›®å‰è·‘çš„å®¹å™¨ä¸­ï¼Œä½¿ç”¨ ss æŸ¥çœ‹ç›®å‰ç³»çµ±çš„ socket ç‹€æ…‹ï¼Œå¯ä»¥ç™¼ç¾åˆ°å…¶å¯¦åœ¨æ­£å¸¸é€£çµçš„æƒ…æ³ä¸‹èƒ½åµæ¸¬åˆ°é€£ç·š(establish state) oracle server çš„ç›£è½ã€‚\né‚£éº¼ç•¶ç™¼ç”Ÿé€£ç·šç•°å¸¸æ™‚(ORA-12518)ï¼Œå°±å¯ä»¥ç•¶ä½œæ˜¯é‡å•Ÿçš„æ¢ä»¶ã€‚\n1livenessProbe: 2 exec: 3 command: 4 - bash 5 - -c 6 - \u0026#34;ss -an | grep -q \u0026#39;EST.*:1521 *$\u0026#39;\u0026#34; 7 initialDelaySeconds: 120 8 periodSeconds: 60 Reference\rhttps://jimmysong.io/kubernetes-handbook/guide/configure-pod-service-account.html\rhttps://stackoverflow.com/questions/49000280/monitor-and-take-action-based-on-pod-log-event\rhttps://stackoverflow.com/questions/57711963/kubernetes-liveness-probe-can-a-pod-monitor-its-own-stdout\r","date":"2022-03-31T22:52:15+00:00","updated":"2022-03-31T22:52:15+00:00"},{"objectID":"1648763832","permalink":"/post/k8s-curl-k8s-api-server-within-pod/curl-kubernetes-api-server-within-pod/","title":"åœ¨å®¹å™¨è£¡ curl Kubernetes API server","content":"é€£æ¥ k8s çš„ api-server æœ‰ä¸‰ç¨®æ–¹å¼ï¼š\nKubernetes Node é€šé kubectl proxy ä¸­è½‰é€£æ¥ é€šéæˆæ¬Šé©—è­‰ç›´æ¥é€£æ¥ï¼Œä¾‹å¦‚ kubectl å’Œå„ç¨® client å°±æ˜¯é€™ç¨®æƒ…æ³ å®¹å™¨å…§éƒ¨é€šé ServiceAccount é€£æ¥ æœ¬æ–‡ä»¥ç¬¬ä¸‰ç¨®æƒ…æ³ä½œç¯„ä¾‹ã€‚\nKubernetes API Server\råœ¨ Kubernetes é›†ç¾¤è¢«å‰µå»ºæ™‚ï¼Œé è¨­æœƒåœ¨ default namespace ä¸­å‰µå»º kubernetes çš„æœå‹™ï¼Œç”¨æ–¼è¨ªå• Kubernetes apiserverã€‚å› æ­¤ï¼ŒPod ä¹‹é–“å¯ä»¥ç›´æ¥ä½¿ç”¨ kubernetes.default.svc ä¸»æ©Ÿåä¾†æŸ¥è©¢ API serverã€‚\nService Account\rServiceAccount æ˜¯çµ¦åŸ·è¡Œåœ¨ Pod çš„ç¨‹å¼ä½¿ç”¨çš„èº«ä»½èªè­‰ï¼Œçµ¦ Pod å®¹å™¨çš„ç¨‹å¼è¨ªå• API Server æ™‚ä½¿ç”¨ï¼›ServiceAccount åƒ…ä¾·é™å®ƒæ‰€åœ¨çš„ namespaceï¼Œæ¯å€‹ namespace å»ºç«‹æ™‚éƒ½æœƒè‡ªå‹•å»ºç«‹ä¸€å€‹ default service accountï¼›å»ºç«‹ Pod æ™‚ï¼Œå¦‚æœæ²’æœ‰æŒ‡å®š Service Accountï¼ŒPod å‰‡æœƒä½¿ç”¨ default Service Accountã€‚\nService Account Secret\rSA å°æ‡‰çš„ Secret æœƒè‡ªå‹•æ›è¼‰åˆ° Pod çš„ /var/run/secrets/kubernetes.io/serviceaccount/ ç›®éŒ„ä¸­(åŒ…å« tokenã€ca.crtã€namespace)ã€‚\nå‰µå»º Role \u0026amp; Role Binding\rå¦‚æœç›´æ¥ä½¿ç”¨é è¨­çš„ sa è¨ªå• api server æœƒé‡åˆ°æ¬Šé™ä¸è¶³çš„å•é¡Œ\næ­¤æ™‚éœ€è¦å»ºç«‹è§’è‰²é–‹æ”¾å­˜å– api æŒ‡å®šè·¯å¾‘çš„æ¬Šé™ä¸¦ç¶å®šè§’è‰²åˆ° SA ä¸Š\n1# role\u0026amp;binding.yaml 2--- 3apiVersion: rbac.authorization.k8s.io/v1 4kind: Role 5metadata: 6 name: default-role 7 namespace: converg-it 8rules: 9 - apiGroups: [\u0026#34;\u0026#34;] 10 resources: 11 - pods 12 - pods/log 13 verbs: 14 - get 15 - list 16--- 17apiVersion: rbac.authorization.k8s.io/v1 18kind: RoleBinding 19metadata: 20 name: default-roldbinding 21 namespace: converg-it 22subjects: 23 - kind: ServiceAccount 24 name: default 25roleRef: 26 kind: Role 27 name: default-role 28 apiGroup: rbac.authorization.k8s.io 1kubectl -n converg-it apply -f role\u0026amp;binding.yaml 2role.rbac.authorization.k8s.io/default-role created 3rolebinding.rbac.authorization.k8s.io/default-roldbinding created curl API\ré€²å…¥å®¹å™¨ç’°å¢ƒ\n1kubectl exec -it -n converg-it converg-it-adapter-oracle-8575f54dc6-7lnv6 -- bash get target API\n1curl --cacert /var/run/secrets/kubernetes.io/serviceaccount/ca.crt --header \u0026#34;Authorization: Bearer $(cat /var/run/secrets/kubernetes.io/serviceaccount/token)\u0026#34; -X GET https://kubernetes.default.svc/api/v1/namespaces/converg-it/pods/converg-it-adapter-oracle-8575f54dc6-7lnv6/log?sinceSeconds=300 Reference\rhttps://kubernetes.io/docs/tasks/run-application/access-api-from-pod/\r","date":"2022-03-31T21:57:12+00:00","updated":"2022-03-31T21:57:12+00:00"},{"objectID":"1648585140","permalink":"/post/devops-git-your-branch-and-origin-master-have-diverged/git-your-branch-and-origin-master-have-diverged/","title":"[Git] Your branch and 'origin/master' have diverged","content":"åœ¨ git status çš„æ™‚å¾Œç™¼ç¾æœ¬åœ°ç«¯è·Ÿé ç«¯å€‰åº« commit åˆ†å²” (diverged)ï¼Œä»£è¡¨æœ¬åœ°æ‰€åœ¨çš„åˆ†æ”¯è·Ÿé ç«¯å€‰åº«çš„åˆ†æ”¯å„èµ°å„çš„è·¯ã€‚\nå•é¡Œ\r1git status 2 On branch master 3 Your branch and \u0026amp;#39;origin/master\u0026amp;#39; have diverged, 4 and have 1 and 1 different commits each, respectively. 5 (use \u0026amp;#34;git pull\u0026amp;#34; to merge the remote branch into yours) 6 7 nothing to commit, working tree clean åŸå› æ’æŸ¥\ræŸ¥çœ‹å„è‡ªçš„ commit logï¼Œåœ¨æœ¬åœ°ç«¯çš„ log ä¸­æ²’æœ‰ç™¼ç¾ origin/master é ç«¯å€‰åº«çš„ master HEADï¼Œæ‰€ä»¥ä»£è¡¨åˆ†æ”¯å·²ç¶“åˆ†æ­§ã€‚\n1git log --oneline origin/master 2 45b6977 (origin/master) v1.1 modified return body 3 2714cef add changelog 4 4a19b17 ula modified reverse rule 5 92d48af origin \u0026amp;#39;reverstapi\u0026amp;#39; version 6git log --oneline 7 733e302 (HEAD -\u0026amp;gt; master) v1.2 rebase from v1 and modified the sql command 8 2714cef add changelog 9 4a19b17 ula modified reverse rule 10 92d48af origin \u0026amp;#39;reverstapi\u0026amp;#39; version 11# åˆ©ç”¨ git cherry origin/master ä¾†çœ‹é ç«¯èˆ‡æœ¬åœ°ç«¯ commit çš„å·®åˆ¥ 12git cherry origin/master 13 + 733e302d65419093b386de9b286c96eecaa95200 14# é¡¯ç¤ºæœ‰ä¸€å€‹ç‰ˆæœ¬å¿˜äº†æäº¤ åŒæ­¥é ç«¯èˆ‡æœ¬åœ°åˆ†æ”¯\ræœ‰ä»¥ä¸‹å››ç¨®ç‹€æ³ï¼Œä¸»è¦åˆ†ç‚ºåˆä½µå…©åˆ†æ”¯èˆ‡å¿½ç•¥æŸä¸€æ–¹åˆ†æ”¯ã€‚åˆä½µåˆåˆ†ç‚ºå…©ç¨® merge â€¦","date":"2022-03-29T20:19:00+00:00","updated":"2022-03-29T20:19:00+00:00"},{"objectID":"1648158720","permalink":"/post/k8s-istio-404-not-found/istio-404-not-found/","title":"Istio æ²’æ›ï¼Œä½†æ­£ç¢ºçš„è¨­ç½® gateway è·Ÿ virtual service å¾Œï¼Œå»ä¸€ç›´ 404 not found","content":"æ‰‹ä¸Šæœ‰ä¸€å€‹å¯«å¥½çš„ API è¦å°å¤–é‡‹å‡ºï¼Œåœ¨è¨­ç½®å®Œ istio è³‡æºä¹‹å¾Œï¼Œcurl istio ingress gateway/targetAPI å»ä¸€ç›´å›å‚³ 404 Not Foundï¼Œç…§ç†ä¾†èªªé€™å€‹ API å¦‚æœæ‰¾ä¸åˆ°è³‡æ–™å›å‚³çš„ 404 è¨Šæ¯æ‡‰è©²æ˜¯ {\u0026quot;error\u0026quot;:\u0026quot;Record Not Found, the serial number doesn't exist\u0026quot;}ï¼Œç”¨é€™ç¯‡æ–‡ç« è¨˜éŒ„å•é¡Œè·Ÿè§£æ±ºæ–¹å¼ã€‚\nå•é¡Œæ’æŸ¥\råœ¨ç›¸åŒçš„ istio ingress gateway ä¸Šçš„ API çš†æ­£å¸¸é‹ä½œï¼Œæ’é™¤ istio æœ¬èº«å¯èƒ½æœƒæœ‰å•é¡Œ ç”¨åŒæ¨£çš„é…ç½®æª”ï¼Œéƒ¨å±¬åœ¨å¦å¤–ä¸€å€‹ K8s ç’°å¢ƒä¸Šçš„ istioï¼Œç™¼ç¾é‹ä½œæ­£å¸¸ï¼Œæ’é™¤é…ç½®æª”æœ‰èª¤çš„å•é¡Œ ç”¨å…¶ä»– API éƒ¨å±¬ï¼Œä¹Ÿä¸€æ¨£ç›´æ¥ 404 Not Foundï¼Œæ’é™¤åŸå…ˆ API æœ¬èº«å¯èƒ½æœ‰èª¤çš„å•é¡Œ æŸ¥çœ‹ istio ingress gateway çš„ log 1[2022-03-24T06:23:07.653Z] \u0026#34;GET /api/convergence/findRecord/TBCC32008806 HTTP/1.1\u0026#34; 200 - \u0026#34;-\u0026#34; \u0026#34;-\u0026#34; 0 9491 5 4 \u0026#34;10.1.5.32\u0026#34; \u0026#34;PostmanRuntime/7.29.0\u0026#34; \u0026#34;3655dd39-9c2c-9c14-ac5c-53fc7547a155\u0026#34; \u0026#34;10.1.5.41\u0026#34; \u0026#34;10.244.64.149:8080\u0026#34; outbound|8080||converg-api.converg-api.svc.cluster.local 10.244.128.48:42104 10.244.128.48:8080 10.1.5.32:39159 - http-Sbups 2--- 3[2022-03-24T06:26:32.759Z] \u0026#34;GET /api/convergence/grabreflow/TBCBB2039913 HTTP/1.1\u0026#34; 404 - \u0026#34;-\u0026#34; \u0026#34;-\u0026#34; 0 18 1 1 \u0026#34;10.1.5.32\u0026#34; \u0026#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:98.0) Gecko/20100101 Firefox/98.0\u0026#34; \u0026#34;61998a8c-0c79-94a0-9c84-cb03a2f10390\u0026#34; \u0026#34;10.1.5.41\u0026#34; \u0026#34;10.244.128.19:8080\u0026#34; outbound|8080||reverseapi.converg-apipost.svc.cluster.local 10.244.128.48:36740 10.244.128.48:8080 10.1.5.32:15717 - http-XbhqV ä¸Šé¢ 200 çš„æ˜¯æ­£å¸¸é‹ä½œçš„ APIï¼Œä¸‹é¢ 404 æ˜¯æ–°è¨­ç½®çš„ APIï¼Œæ‰€ä»¥å…¶å¯¦ 404 é€™å€‹ istio gw \u0026amp; virtual service å…¶å¯¦æ˜¯æœ‰é‹ä½œçš„ï¼Œå¾—å‡ºä¾†çš„çµè«–å°±æ˜¯ï¼Œistio æ‰¾ä¸åˆ°æ–°è¨­ç½®çš„ API å»è·¯ç”±ï¼Œæ¥µå¤§å¯èƒ½æ˜¯è·Ÿå…¶ä»– URL è¦å‰‡è¡çªã€‚\nè§£æ±º\rçµ‚æ–¼ç™¼ç¾å‰é¢æœ€å¾Œä¸€å€‹è¨­ç½®çš„ API æ²’æœ‰è¨­ prefixï¼Œæ‰€ä»¥ istio å°±ç›´æ¥ç›£è½ /ï¼Œå°è‡´å¾Œé¢æ€éº¼è¨­æ–°çš„ APIï¼Œéƒ½èªä¸åˆ°!!!!!!!!\n1kubectl get virtualservices.networking.istio.io -n converg-apipost converg-apipost-vs -o yaml 2apiVersion: networking.istio.io/v1beta1 3kind: VirtualService 4metadata: 5 creationTimestamp: \u0026#34;2021-08-04T10:04:00Z\u0026#34; 6 generation: 9 7 labels: 8 protocol: http 9 name: converg-apipost-vs 10 namespace: converg-apipost 11 resourceVersion: \u0026#34;241532937\u0026#34; 12 selfLink: /apis/networking.istio.io/v1beta1/namespaces/converg-apipost/virtualservices/converg-apipost-vs 13 uid: 15049a96-f97f-4b00-bee9-001fafcdd2ff 14spec: 15 gateways: 16 - converg-apipost-gw 17 hosts: 18 - \u0026#39;*\u0026#39; 19 http: 20 - match: 21 - uri: 22 prefix: \u0026#34;\u0026#34; 23 name: http-OuFqP 24 route: 25 - destination: 26 host: reverseapi 27 port: 28 number: 8080 æŠŠ prefix åŠ ä¸Šå»å¾Œï¼ŒåŸæœ¬å¾ŒåŠ çš„ API å°±æˆåŠŸé‹ä½œäº† âœŒï¸\n1[root@k8sm1 ~]# curl 10.1.5.41/api/convergence/grabreflow/test 2{\u0026#34;error\u0026#34;:\u0026#34;Record Not Found, the serial number doesn\u0026#39;t exist\u0026#34;} ","date":"2022-03-24T21:52:00+00:00","updated":"2022-03-24T21:52:00+00:00"},{"objectID":"1647969180","permalink":"/post/devops-terraform-upgrade-to-v1.1.7/terraform-upgrade-to-1-1-7/","title":"Terraform å¾ 0.14 å‡ç´šåˆ° 1.1.7 å•é¡Œæ’æŸ¥","content":"æ‰‹ä¸Šæœ‰ Terraform 0.14 ç‰ˆè·‘çš„è…³æœ¬ï¼Œæœ€è¿‘ç™¼ç¾ Terraform å·²ç¶“å‡ç´šåˆ° 1.1.7 äº†ï¼Œä¾¿æ‰“ç®—åœ¨å‡ç´šçš„ç’°å¢ƒä¸‹ï¼Œè·‘ 0.14 ç‰ˆè·‘æˆåŠŸçš„è…³æœ¬ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰èª¤ï¼Œç´€éŒ„ä¸€ä¸‹é‡åˆ°çš„å•é¡Œä»¥åŠè§£æ³•ã€‚\nTerraform å®‰è£\r1yum install -y yum-utils 2yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo 3yum -y install terraform 4terraform version å•é¡Œ\rError: Kubernetes cluster unreachable: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable\råŠ ä¸Š KUBE_CONFIG_PATH è®Šæ•¸è§£æ±ºã€‚\n1export KUBE_CONFIG_PATH=$HOME/.kube/config Error: failed to download \u0026ldquo;xxxx\u0026rdquo;\rå®‰è£ helm ä¸¦åŠ å…¥ç›¸å°æ‡‰çš„ repo\n1[ -f /usr/local/bin/helm ] || (cd /tmp \u0026amp;\u0026amp; curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 \u0026amp;\u0026amp; chmod 755 get_helm.sh \u0026amp;\u0026amp; /tmp/get_helm.sh) 2helm repo add stable https://charts.helm.sh/stable 3helm repo add prometheus-community https://prometheus-community.github.io/helm-charts 4helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx 5helm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/ 6helm repo update Error: Failed to create Ingress \u0026lsquo;xxxingress\u0026rsquo; because: the server could not find the requested resource (post ingresses.extensions)\rå°‡åŸå…ˆçš„ kubernetes_ingress provider æ”¹æˆ kubernetes_ingress_v1ï¼Œå¦å¤– service name \u0026amp; port çš„åƒæ•¸æ ¼å¼æœ‰è®Šï¼Œè«‹åƒè€ƒ\rå®˜ç¶²\rã€‚\nWarning: Helm release \u0026ldquo;xxx\u0026rdquo; was created but has a failed status. Use the helm command to investigate the error, correct it, then run Terraform again.\råŸºæœ¬ä¸Š terraform å®‰è£æ²’ä»€éº¼å•é¡Œï¼Œç›´æ¥ä¸‹ kubectl get pod åœ¨ç›¸å°æ‡‰çš„ namespace æŸ¥çœ‹å‡ºå•é¡Œçš„ pod æ˜¯å“ªäº›ï¼Œä¸¦é€²ä¸€æ­¥ debugã€‚\n","date":"2022-03-22T17:13:00+00:00","updated":"2022-03-22T17:13:00+00:00"},{"objectID":"1647960540","permalink":"/post/k8s-namespace-delete-terminating-status/kubernetes-namespace-delete-terminating/","title":"Kubernetes namespace ä¸€ç›´ delete ä¸æˆåŠŸçš„åŸå›  (å¡åœ¨ terminating status)","content":"æœ€è¿‘åœ¨åˆªé™¤ namespace çš„æ™‚å€™ç¸½æ˜¯æœƒå¡åœ¨ Terminating çš„ç‹€æ…‹ï¼Œä¸€ç›´ä¸ç–‘æœ‰ä»–çš„ç›´æ¥ä½¿ç”¨ç¶²è·¯ä¸Šå¸¸çœ‹çš„è§£æ±ºæ–¹æ³•å°‡ spec.finalizers æ¸…ç©ºã€‚ä½†å› ç‚ºæ¯æ¬¡åˆªã€æ¯æ¬¡å¡ï¼Œå°±é€£å®Œå…¨ç„¡ä»»ä½•è³‡æºçš„å‘½åç©ºé–“ä¹Ÿæ˜¯å¡ï¼ä»”ç´°çœ‹å¾Œæ‰ç™¼ç¾åŸä¾†æ˜¯æœ‰å…¶ä»–å…ƒä»¶éŒ¯èª¤ï¼Œé€²è€Œé€ æˆå½±éŸ¿ã€‚\nåŸå› æ’æŸ¥\rå…ˆä½¿ç”¨æ¸…ç©º finalizer çš„æ–¹æ³•å¼·åˆ¶åˆªé™¤ namespaceï¼Œ\n1kubectl proxy 2Starting to serve on 127.0.0.1:8001 å¦é–‹ä¸€å€‹ terminal\n1cat \u0026lt;\u0026lt;EOF | curl -X PUT \\ 2 localhost:8001/api/v1/namespaces/test/finalize \\ 3 -H \u0026#34;Content-Type: application/json\u0026#34; \\ 4 --data-binary @- 5{ 6 \u0026#34;kind\u0026#34;: \u0026#34;Namespace\u0026#34;, 7 \u0026#34;apiVersion\u0026#34;: \u0026#34;v1\u0026#34;, 8 \u0026#34;metadata\u0026#34;: { 9 \u0026#34;name\u0026#34;: \u0026#34;test\u0026#34; 10 }, 11 \u0026#34;spec\u0026#34;: { 12 \u0026#34;finalizers\u0026#34;: null 13 } 14} 15EOF æœƒå›å‚³ä¸‹é¢çµæœ\n1{ 2 \u0026#34;kind\u0026#34;: \u0026#34;Namespace\u0026#34;, 3 \u0026#34;apiVersion\u0026#34;: \u0026#34;v1\u0026#34;, 4 \u0026#34;metadata\u0026#34;: { 5 \u0026#34;name\u0026#34;: \u0026#34;test\u0026#34;, 6 \u0026#34;uid\u0026#34;: \u0026#34;353766ea-be97-4ccf-9275-0b39bd651afe\u0026#34;, 7 \u0026#34;resourceVersion\u0026#34;: \u0026#34;1359585\u0026#34;, 8 \u0026#34;creationTimestamp\u0026#34;: \u0026#34;2022-03-21T04:18:38Z\u0026#34;, 9 \u0026#34;deletionTimestamp\u0026#34;: \u0026#34;2022-03-21T04:18:51Z\u0026#34;, 10 \u0026#34;labels\u0026#34;: { 11 \u0026#34;kubernetes.io/metadata.name\u0026#34;: \u0026#34;test\u0026#34; 12 }, 13 \u0026#34;managedFields\u0026#34;: [ 14 { 15 \u0026#34;manager\u0026#34;: \u0026#34;kubectl-create\u0026#34;, 16 \u0026#34;operation\u0026#34;: \u0026#34;Update\u0026#34;, 17 \u0026#34;apiVersion\u0026#34;: \u0026#34;v1\u0026#34;, 18 \u0026#34;time\u0026#34;: \u0026#34;2022-03-21T04:18:38Z\u0026#34;, 19 \u0026#34;fieldsType\u0026#34;: \u0026#34;FieldsV1\u0026#34;, 20 \u0026#34;fieldsV1\u0026#34;: { 21 \u0026#34;f:metadata\u0026#34;: { 22 \u0026#34;f:labels\u0026#34;: { 23 \u0026#34;.\u0026#34;: {}, 24 \u0026#34;f:kubernetes.io/metadata.name\u0026#34;: {} 25 } 26 } 27 } 28 }, 29 { 30 \u0026#34;manager\u0026#34;: \u0026#34;kube-controller-manager\u0026#34;, 31 \u0026#34;operation\u0026#34;: \u0026#34;Update\u0026#34;, 32 \u0026#34;apiVersion\u0026#34;: \u0026#34;v1\u0026#34;, 33 \u0026#34;time\u0026#34;: \u0026#34;2022-03-21T04:18:57Z\u0026#34;, 34 \u0026#34;fieldsType\u0026#34;: \u0026#34;FieldsV1\u0026#34;, 35 \u0026#34;fieldsV1\u0026#34;: { 36 \u0026#34;f:status\u0026#34;: { 37 \u0026#34;f:conditions\u0026#34;: { 38 \u0026#34;.\u0026#34;: {}, 39 \u0026#34;k:{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;NamespaceContentRemaining\\\u0026#34;}\u0026#34;: { 40 \u0026#34;.\u0026#34;: {}, 41 \u0026#34;f:lastTransitionTime\u0026#34;: {}, 42 \u0026#34;f:message\u0026#34;: {}, 43 \u0026#34;f:reason\u0026#34;: {}, 44 \u0026#34;f:status\u0026#34;: {}, 45 \u0026#34;f:type\u0026#34;: {} 46 }, 47 \u0026#34;k:{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;NamespaceDeletionContentFailure\\\u0026#34;}\u0026#34;: { 48 \u0026#34;.\u0026#34;: {}, 49 \u0026#34;f:lastTransitionTime\u0026#34;: {}, 50 \u0026#34;f:message\u0026#34;: {}, 51 \u0026#34;f:reason\u0026#34;: {}, 52 \u0026#34;f:status\u0026#34;: {}, 53 \u0026#34;f:type\u0026#34;: {} 54 }, 55 \u0026#34;k:{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;NamespaceDeletionDiscoveryFailure\\\u0026#34;}\u0026#34;: { 56 \u0026#34;.\u0026#34;: {}, 57 \u0026#34;f:lastTransitionTime\u0026#34;: {}, 58 \u0026#34;f:message\u0026#34;: {}, 59 \u0026#34;f:reason\u0026#34;: {}, 60 \u0026#34;f:status\u0026#34;: {}, 61 \u0026#34;f:type\u0026#34;: {} 62 }, 63 \u0026#34;k:{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;NamespaceDeletionGroupVersionParsingFailure\\\u0026#34;}\u0026#34;: { 64 \u0026#34;.\u0026#34;: {}, 65 \u0026#34;f:lastTransitionTime\u0026#34;: {}, 66 \u0026#34;f:message\u0026#34;: {}, 67 \u0026#34;f:reason\u0026#34;: {}, 68 \u0026#34;f:status\u0026#34;: {}, 69 \u0026#34;f:type\u0026#34;: {} 70 }, 71 \u0026#34;k:{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;NamespaceFinalizersRemaining\\\u0026#34;}\u0026#34;: { 72 \u0026#34;.\u0026#34;: {}, 73 \u0026#34;f:lastTransitionTime\u0026#34;: {}, 74 \u0026#34;f:message\u0026#34;: {}, 75 \u0026#34;f:reason\u0026#34;: {}, 76 \u0026#34;f:status\u0026#34;: {}, 77 \u0026#34;f:type\u0026#34;: {} 78 } 79 } 80 } 81 }, 82 \u0026#34;subresource\u0026#34;: \u0026#34;status\u0026#34; 83 } 84 ] 85 }, 86 \u0026#34;spec\u0026#34;: {}, 87 \u0026#34;status\u0026#34;: { 88 \u0026#34;phase\u0026#34;: \u0026#34;Terminating\u0026#34;, 89 \u0026#34;conditions\u0026#34;: [ 90 { 91 \u0026#34;type\u0026#34;: \u0026#34;NamespaceDeletionDiscoveryFailure\u0026#34;, 92 \u0026#34;status\u0026#34;: \u0026#34;True\u0026#34;, 93 \u0026#34;lastTransitionTime\u0026#34;: \u0026#34;2022-03-21T04:18:56Z\u0026#34;, 94 \u0026#34;reason\u0026#34;: \u0026#34;DiscoveryFailed\u0026#34;, 95 \u0026#34;message\u0026#34;: \u0026#34;Discovery failed for some groups, 1 failing: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently un able to handle the request\u0026#34; 96 }, 97 { 98 \u0026#34;type\u0026#34;: \u0026#34;NamespaceDeletionGroupVersionParsingFailure\u0026#34;, 99 \u0026#34;status\u0026#34;: \u0026#34;False\u0026#34;, 100 \u0026#34;lastTransitionTime\u0026#34;: \u0026#34;2022-03-21T04:18:57Z\u0026#34;, 101 \u0026#34;reason\u0026#34;: \u0026#34;ParsedGroupVersions\u0026#34;, 102 \u0026#34;message\u0026#34;: \u0026#34;All legacy kube types successfully parsed\u0026#34; 103 }, 104 { 105 \u0026#34;type\u0026#34;: \u0026#34;NamespaceDeletionContentFailure\u0026#34;, 106 \u0026#34;status\u0026#34;: \u0026#34;False\u0026#34;, 107 \u0026#34;lastTransitionTime\u0026#34;: \u0026#34;2022-03-21T04:18:57Z\u0026#34;, 108 \u0026#34;reason\u0026#34;: \u0026#34;ContentDeleted\u0026#34;, 109 \u0026#34;message\u0026#34;: \u0026#34;All content successfully deleted, may be waiting on finalization \u0026#34; 110 }, 111 { 112 \u0026#34;type\u0026#34;: \u0026#34;NamespaceContentRemaining\u0026#34;, 113 \u0026#34;status\u0026#34;: \u0026#34;False\u0026#34;, 114 \u0026#34;lastTransitionTime\u0026#34;: \u0026#34;2022-03-21T04:18:57Z\u0026#34;, 115 \u0026#34;reason\u0026#34;: \u0026#34;ContentRemoved\u0026#34;, 116 \u0026#34;message\u0026#34;: \u0026#34;All content successfully removed\u0026#34; 117 }, 118 { 119 \u0026#34;type\u0026#34;: \u0026#34;NamespaceFinalizersRemaining\u0026#34;, 120 \u0026#34;status\u0026#34;: \u0026#34;False\u0026#34;, 121 \u0026#34;lastTransitionTime\u0026#34;: \u0026#34;2022-03-21T04:18:57Z\u0026#34;, 122 \u0026#34;reason\u0026#34;: \u0026#34;ContentHasNoFinalizers\u0026#34;, 123 \u0026#34;message\u0026#34;: \u0026#34;All content-preserving finalizers finished\u0026#34; 124 } 125 ] 126 } 127} å¯ä»¥çœ‹åˆ°æœ€å¾Œçš„ Terminating çš„å€å¡Šæœ‰è§£é‡‹åŸå› ã€‚\nè§£æ±ºæ–¹æ³•\ræŒ‰ç…§åŸå› è§£æ±ºå³å¯æˆåŠŸåˆªé™¤ namespaceï¼Œæœ¬æ–‡é‡åˆ°çš„å•é¡Œæ˜¯å› ç‚ºå®‰è£ metric server æ™‚å¤±æ•—ï¼Œå¯ä»¥çœ‹åˆ° apiservice å…¶ä¸­æœ‰å‡ºç¾ false ç‹€æ…‹ã€‚\n1kubectl get apiservice 2NAME SERVICE AVAILABLE AGE 3v1. Local True 9d 4v1.admissionregistration.k8s.io Local True 9d 5v1.apiextensions.k8s.io Local True 9d 6v1.apps Local True 9d 7v1.authentication.k8s.io Local True 9d 8v1.authorization.k8s.io Local True 9d 9v1.autoscaling Local True 9d 10v1.batch Local True 9d 11v1.certificates.k8s.io Local True 9d 12v1.coordination.k8s.io Local True 9d 13v1.crd.projectcalico.org Local True 9d 14v1.discovery.k8s.io Local True 9d 15v1.events.k8s.io Local True 9d 16v1.monitoring.coreos.com Local True 3d23h 17v1.networking.k8s.io Local True 9d 18v1.node.k8s.io Local True 9d 19v1.policy Local True 9d 20v1.rbac.authorization.k8s.io Local True 9d 21v1.scheduling.k8s.io Local True 9d 22v1.storage.k8s.io Local True 9d 23v1alpha1.kafka.strimzi.io Local True 3h3m 24v1alpha1.monitoring.coreos.com Local True 3d23h 25v1beta1.batch Local True 9d 26v1beta1.discovery.k8s.io Local True 9d 27v1beta1.events.k8s.io Local True 9d 28v1beta1.flowcontrol.apiserver.k8s.io Local True 9d 29v1beta1.kafka.strimzi.io Local True 3h3m 30v1beta1.metrics.k8s.io kube-system/metrics-server False (MissingEndpoints) 3d1h 31v1beta1.node.k8s.io Local True 9d 32v1beta1.policy Local True 9d 33v1beta1.storage.k8s.io Local True 9d 34v1beta2.core.strimzi.io Local True 3h3m 35v1beta2.flowcontrol.apiserver.k8s.io Local True 9d 36v1beta2.kafka.strimzi.io Local True 3h3m 37v2.autoscaling Local True 9d 38v2beta1.autoscaling Local True 9d 39v2beta2.autoscaling Local True 9d å…ˆæš«æ™‚ç§»é™¤è‡¨æ™‚è£çš„ metric server\n1helm uninstall metrics-server --namespace kube-system å°±å¯ä»¥æˆåŠŸ delete äº†\n1[root@node ~]# kubectl create ns test 2namespace/test created 3[root@node ~]# 4[root@node ~]# kubectl delete ns test 5namespace \u0026#34;test\u0026#34; deleted 6[root@node ~# Warning\nå¦å¤–é—œæ–¼ metric-server çš„ debugï¼Œç´€éŒ„åœ¨å¦å¤–ä¸€ç¯‡ æ–‡ç« ã€‚\n","date":"2022-03-22T14:49:00+00:00","updated":"2022-03-22T14:49:00+00:00"},{"objectID":"1647958860","permalink":"/post/data-debezium-1.5-snapshot-mode-schema-only-not-work/debezium-snapshot-mode-schema-only-not-work/","title":"Debezium 1.5 snapshot.mode schema_only not work","content":"ä½¿ç”¨ Debezium 1.5 é€£ä¸Š connector å¾Œï¼Œç™¼ç¾è³‡æ–™æœƒå¾è³‡æ–™è¡¨çš„æœ€èˆŠè³‡æ–™ä¸€ç­†è³‡æ–™é–‹å§‹é€ï¼ŒæŸ¥å®˜ç¶²å¾Œç™¼ç¾æœ‰ snapshot.mode çš„åƒæ•¸å¯ä»¥è¨­ç½®ï¼Œä½†è¨­ç½®å®Œç•¢å¾Œå»ç™¼ç¾æœ‰ errorï¼Œæœ¬ç¯‡è¨˜éŒ„è§£æ³•ã€‚\nsnapshot.mode\rDebezium 1.5 ç‰ˆæœ¬çš„ Oracle connector çš„é…ç½®ä¸­ï¼Œç”¨ snapshot.mode é…ç½®é …è¡¨ç¤ºå¿«ç…§æ¨¡å¼ã€‚é»˜èªç‚º initial æ¨¡å¼ï¼Œç•¶é€£æ¥å™¨å•Ÿå‹•çš„æ™‚å€™ï¼ŒæœƒåŸ·è¡Œä¸€æ¬¡æ•¸æ“šåº«åˆå§‹çš„ä¸€è‡´æ€§å¿«ç…§ä»»å‹™ã€‚ ç¬¬äºŒç¨®å¿«ç…§æ¨¡å¼æ˜¯ schema_onlyã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œconnector ä»æœƒæ•ç²ç›¸é—œè¡¨çš„çµæ§‹ï¼Œä½†å®ƒä¸æœƒåœ¨å•Ÿå‹•æ™‚ç”¢ç”Ÿ READ äº‹ä»¶å‰µå»ºå®Œæ•´æ•¸æ“šé›†ã€‚æ•…å¦‚æœåªå°å¾ç¾åœ¨é–‹å§‹çš„æ•¸æ“šæ›´æ”¹æ„Ÿèˆˆè¶£ï¼Œè€Œä¸å°æ‰€æœ‰è¨˜éŒ„çš„å®Œæ•´ç•¶å‰ç‹€æ…‹æ„Ÿèˆˆè¶£ï¼Œé ˆå°‡æ¨¡å¼æ”¹ç‚º schema_onlyã€‚\néŒ¯èª¤\råœ¨ connector çš„è¨­å®šé …åŠ ä¸Š \u0026quot;snapshot.mode\u0026quot;: \u0026quot;schema_only\u0026quot; å¾Œï¼Œç™¼ç¾ connector æœƒå ±ä»¥ä¸‹éŒ¯èª¤ï¼š\n12022-03-22 05:06:45,029 ERROR || WorkerSourceTask{id=oracle2-0} Task threw an uncaught and unrecoverable exception. Task i s being killed and will not recover until manually restarted [org.apache.kafka.connect.runtime.WorkerTask] 2org.apache.kafka.connect.errors.ConnectException: An exception occurred in the change event producer. This connector will be stopped. 3 at io.debezium.pipeline.ErrorHandler.setProducerThrowable(ErrorHandler.java:42) 4 at io.debezium.connector.oracle.logminer.LogMinerStreamingChangeEventSource.execute(LogMinerStreamingChangeEventSour ce.java:208) 5 at io.debezium.pipeline.ChangeEventSourceCoordinator.streamEvents(ChangeEventSourceCoordinator.java:152) 6 at io.debezium.pipeline.ChangeEventSourceCoordinator.lambda$start$0(ChangeEventSourceCoordinator.java:119) 7 at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) 8 at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) 9 at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) 10 at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) 11 at java.base/java.lang.Thread.run(Thread.java:834) 12Caused by: io.debezium.DebeziumException: Supplemental logging not configured for table EMESHY.EMESP.tp_sn_log. Use command : ALTER TABLE EMESP.tp_sn_log ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS 13 at io.debezium.connector.oracle.logminer.LogMinerHelper.checkSupplementalLogging(LogMinerHelper.java:407) 14 at io.debezium.connector.oracle.logminer.LogMinerStreamingChangeEventSource.execute(LogMinerStreamingChangeEventSour ce.java:132) 15 ... 7 more éŒ¯èª¤æ’æŸ¥\ræŒ‰ç…§éŒ¯èª¤åŸå› æ˜¯æŒ‡å®šçš„è¡¨æ²’æœ‰è¨­ç½® Supplemental Logï¼Œä½†ç†æ‡‰ä¸å¯èƒ½ï¼Œå› ç‚ºåœ¨é è¨­çš„ snapshot mode initial æ™‚æ˜¯å¯é€£æ¥æˆåŠŸçš„ï¼Œé‚„æ˜¯æŒ‰ç…§æŒ‡ç¤ºé€²å…¥è³‡æ–™åº«è¨­ç½®ï¼Œ\nç„¶çµæœä¸å‡ºæ‰€æ–™çš„å›å ±å·²ç¶“è¨­ç½®äº†ï¼Œä½¿ç”¨ç¶²è·¯ä¸Šçš„å¦ä¸€å€‹ command æŸ¥çœ‹ ALL_LOG_GROUP çš„é…ç½®ï¼š\nä¸€æ¨£æ˜¯é¡¯ç¤ºåœ¨æˆ‘æŒ‡å®šçš„ TP_SN_LOG è¡¨æœ‰è¨­ç½®è£œå……æ—¥èªŒã€‚ ç„¡æ„é–“åœ¨ community ç™¼ç¾ä¹Ÿæœ‰äººé‡åˆ°ä¸€æ¨£çš„éŒ¯èª¤(\rgitter thread\r)ï¼Œç™¼ç¾å¯èƒ½æ˜¯ bugï¼Œå…¶å¯¦å¯ä»¥çœ‹åˆ°éŒ¯èª¤è¨Šæ¯çš„å…§å®¹æŠŠåŸæœ¬æ‡‰è©²å¤§å¯«çš„è¡¨å TP_SN_LOG è½‰æˆå°å¯« tp_sn_logã€‚æŸ¥çœ‹ jira issue\ræåˆ°ï¼Œç…§ç†ä¾†èªª oracle æ¨™è­˜ç¬¦åœ¨æŸ¥è©¢ä¸­ä¸å€åˆ†å¤§å°å¯«ï¼Œé™¤éå®ƒå€‘åœ¨å­—ç¬¦ä¸²è¬‚è©ä¸­é¡¯å¼ä½¿ç”¨ï¼Œå³ â€œWHERE TABLE_NAME = \u0026rsquo;table\u0026rsquo;â€ï¼Œæˆ–è€…æ¨™è­˜ç¬¦æ˜¯ç”¨é›™å¼•è™Ÿå‰µå»ºçš„ã€‚ä½†æˆ‘åœ¨é€ config æ™‚å°±æ˜¯ä½¿ç”¨å¤§å¯«æŠ¼~~æ€ª!\nè§£æ±ºæ–¹å¼\ræš«æ™‚åœ¨ connector è¨­å®šé …åŠ ä¸Š database.tablename.case.insensitive åƒæ•¸ï¼Œå€¼è¨­ç‚º falseï¼Œå³å¯é †åˆ©è§£æ±ºã€‚è¶…æ€ª =___=ï¼Œéå¤§å°å¯«ä¸æ•æ„Ÿä¸å°±æ˜¯æŒ‡æ•æ„Ÿçš„æ„æ€å˜›!!! åªèƒ½ç•¶ä½œæ˜¯ 1.5 çš„ bug äº†ã€‚\né™„ä¸Šæœ€çµ‚çš„ config\n1{ 2 \u0026#34;name\u0026#34;:\u0026#34;oracle2\u0026#34;, 3 \u0026#34;connector.class\u0026#34;:\u0026#34;io.debezium.connector.oracle.OracleConnector\u0026#34;, 4 \u0026#34;tasks.max\u0026#34;:\u0026#34;1\u0026#34;, 5 \u0026#34;database.hostname\u0026#34;:\u0026#34;10.90.1.207\u0026#34;, 6 \u0026#34;database.port\u0026#34;:\u0026#34;1521\u0026#34;, 7 \u0026#34;database.user\u0026#34;:\u0026#34;logminer\u0026#34;, 8 \u0026#34;database.password\u0026#34;:\u0026#34;logminer\u0026#34;, 9 \u0026#34;database.dbname\u0026#34;:\u0026#34;EMESHY\u0026#34;, 10 \u0026#34;database.server.name\u0026#34;:\u0026#34;oracle\u0026#34;, 11 \u0026#34;database.history.kafka.bootstrap.servers\u0026#34;:\u0026#34;kafka:9092\u0026#34;, 12 \u0026#34;database.history.kafka.topic\u0026#34;:\u0026#34;tpsn2\u0026#34;, 13 \u0026#34;database.connection.adapter\u0026#34;:\u0026#34;logminer\u0026#34;, 14 \u0026#34;table.include.list\u0026#34;:\u0026#34;EMESP.TP_SN_LOG\u0026#34;, 15 \u0026#34;log.mining.strategy\u0026#34;:\u0026#34;online_catalog\u0026#34;, 16 \u0026#34;snapshot.mode\u0026#34;: \u0026#34;schema_only\u0026#34;, 17 \u0026#34;database.tablename.case.insensitive\u0026#34;: \u0026#34;false\u0026#34; 18} Reference\rhttps://debezium.io/documentation/reference/1.5/connectors/oracle.html#oracle-snapshots\rhttps://gitter.im/debezium/user?at=6034b854e634904e60ba19a4\r","date":"2022-03-22T14:21:00+00:00","updated":"2022-03-22T14:21:00+00:00"},{"objectID":"1647902005","permalink":"/post/data-install-strimzi-kafka-operator-to-watch-all-namespace/install-strimzi-kafka-operator-to-watch-all-namespace/","title":"å®‰è£ç›£è½æ–¼æ‰€æœ‰ namespace çš„ strimzi kafka operator, ä¾¿æ–¼åœ¨ä¸åŒ namespace ä¸‹å®‰è£ä¸åŒåº§ Kafka cluster","content":"ä»¥ä¸‹ç´€éŒ„å¦‚ä½•éš”é›¢ kafka operator èˆ‡å»ºç«‹çš„ kafka cluster çš„å‘½åç©ºé–“ï¼Œé è¨ˆæ˜¯å¯ä»¥åœ¨ä¸€åº§ kubernetes cluster ä¸Šåªéœ€å®‰è£ä¸€å€‹ kafka operator ä¾†å»ºç«‹å¤šå€‹ kafka clusterã€‚\nå®‰è£ operator\rä¸‹è¼‰ CRD è³‡æº\n1wget https://github.com/strimzi/strimzi-kafka-operator/releases/download/0.28.0/strimzi-0.28.0.tar.gz -P /tmp \u0026amp;\u0026amp; tar zxvf /tmp/strimzi-0.28.0.tar.gz -C /tmp ä¿®æ”¹ strimzi-0.28.0/install/cluster-operator/060-Deployment-strimzi-cluster-operator.yaml æª”æ¡ˆä¸­çš„ STRIMZI_NAMESPACE çš„å€¼ï¼Œæ”¹ç‚ºç›£è½æ‰€æœ‰ \u0026quot;*\u0026quot; namespaceã€‚\n1# vim /tmp/strimzi-0.28.0/install/cluster-operator/060-Deployment-strimzi-cluster-operator.yaml 2apiVersion: apps/v1 3kind: Deployment 4spec: 5 # ... 6 template: 7 spec: 8 # ... 9 serviceAccountName: strimzi-cluster-operator 10 containers: 11 - name: strimzi-cluster-operator 12 image: strimzi/operator:0.16.2 13 imagePullPolicy: IfNotPresent 14 env: 15 - name: STRIMZI_NAMESPACE 16 value: \u0026#34;*\u0026#34; 17 # ... ä»¥ä¸Šå¯ä»¥ç”¨ä¸‹é¢ä¸€è¡Œ command è§£æ±º\n1sed -z \u0026#39;s/ valueFrom:\\n fieldRef:\\n fieldPath: metadata.namespace/ value: \\\u0026#34;*\\\u0026#34;/\u0026#39; -i /tmp/strimzi-0.28.0/install/cluster-operator/060-Deployment-strimzi-cluster-operator.yaml å»ºç«‹ ClusterRoleBindingsï¼Œä½¿å¯æˆæ¬Š Cluster Operator å­˜å– cluster-wide çš„æ‰€æœ‰ namespaces\n1kubectl create clusterrolebinding strimzi-cluster-operator-namespaced --clusterrole=strimzi-cluster-operator-namespaced --serviceaccount system-kafka-operator:strimzi-cluster-operator 2kubectl create clusterrolebinding strimzi-cluster-operator-entity-operator-delegation --clusterrole=strimzi-entity-operator --serviceaccount system-kafka-operator:strimzi-cluster-operator 3kubectl create clusterrolebinding strimzi-cluster-operator-topic-operator-delegation --clusterrole=strimzi-topic-operator --serviceaccount system-kafka-operator:strimzi-cluster-operator æ­£å¼ä½ˆç½² operator\n1kubectl apply -f /tmp/strimzi-0.28.0/install/cluster-operator -n system-kafka-operator æŸ¥çœ‹è³‡æº\n1[root@node ~]# kubectl get all -n system-kafka-operator 2NAME READY STATUS RESTARTS AGE 3pod/strimzi-cluster-operator-7548bd689f-xlr9j 1/1 Running 0 29m 4 5NAME READY UP-TO-DATE AVAILABLE AGE 6deployment.apps/strimzi-cluster-operator 1/1 1 1 29m 7 8NAME DESIRED CURRENT READY AGE 9replicaset.apps/strimzi-cluster-operator-7548bd689f 1 1 1 29m å®‰è£ kafka cluster\ræº–å‚™ kafka.yaml\n1apiVersion: kafka.strimzi.io/v1beta2 2kind: Kafka 3metadata: 4 name: my-cluster 5 namespace: kafka 6spec: 7 kafka: 8 version: 3.1.0 9 replicas: 3 10 listeners: 11 - name: plain 12 port: 9092 13 type: internal 14 tls: false 15 - name: tls 16 port: 9093 17 type: internal 18 tls: true 19 - name: external 20 port: 9094 21 type: loadbalancer 22 tls: false 23 config: 24 default.replication.factor: 3 25 num.partitions: 1 26 offsets.topic.replication.factor: 3 27 transaction.state.log.replication.factor: 3 28 transaction.state.log.min.isr: 2 29 log.message.format.version: \u0026#34;3.1\u0026#34; 30 storage: 31 class: nfs 32 type: jbod 33 volumes: 34 - id: 0 35 type: persistent-claim 36 size: 10Gi 37 deleteClaim: false 38 zookeeper: 39 replicas: 3 40 storage: 41 class: nfs ä½ˆç½² cluster\n1kubectl apply -f kafka.yaml æŸ¥çœ‹è³‡æº\n1[root@node terraform]# kubectl get all -n kafka 2NAME READY STATUS RESTARTS AGE 3pod/my-cluster-kafka-0 1/1 Running 0 25s 4pod/my-cluster-kafka-1 1/1 Running 0 25s 5pod/my-cluster-kafka-2 1/1 Running 0 25s 6pod/my-cluster-zookeeper-0 1/1 Running 0 52s 7pod/my-cluster-zookeeper-1 1/1 Running 0 52s 8pod/my-cluster-zookeeper-2 1/1 Running 0 52s 9 10NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE 11service/my-cluster-kafka-0 LoadBalancer 10.109.143.19 10.1.5.151 9094:32608/TCP 27s 12service/my-cluster-kafka-1 LoadBalancer 10.96.7.88 10.1.5.154 9094:32057/TCP 27s 13service/my-cluster-kafka-2 LoadBalancer 10.99.44.55 10.1.5.152 9094:31265/TCP 27s 14service/my-cluster-kafka-bootstrap ClusterIP 10.105.207.155 \u0026lt;none\u0026gt; 9091/TCP,9092/TCP,9093/TCP 27s 15service/my-cluster-kafka-brokers ClusterIP None \u0026lt;none\u0026gt; 9090/TCP,9091/TCP,9092/TCP,9093/TCP 27s 16service/my-cluster-kafka-external-bootstrap LoadBalancer 10.96.136.137 10.1.5.153 9094:30262/TCP 27s 17service/my-cluster-zookeeper-client ClusterIP 10.107.192.225 \u0026lt;none\u0026gt; 2181/TCP 53s 18service/my-cluster-zookeeper-nodes ClusterIP None \u0026lt;none\u0026gt; 2181/TCP,2888/TCP,3888/TCP 53s 19 20NAME READY AGE 21statefulset.apps/my-cluster-kafka 3/3 25s 22statefulset.apps/my-cluster-zookeeper 3/3 52s Reference\rhttps://strimzi.io/docs/0.16.2/full.html#deploying-cluster-operator-to-watch-whole-cluster-deploying-co\r","date":"2022-03-21T22:33:25+00:00","updated":"2022-03-21T22:33:25+00:00"},{"objectID":"1647898080","permalink":"/post/k8s-helm-install-metrics-server/kubernets-install-metrics-server-by-helm/","title":"ä½¿ç”¨ helm å®‰è£ Metrics Server","content":"Metrics Server é€šé kubeletï¼ˆcAdvisorï¼‰ç²å–ç›£æ§æ•¸æ“šï¼Œä¸»è¦ä½œç”¨æ˜¯ç‚º kube-schedulerã€HPA(Horizontal Pod Autoscaler)ç­‰ k8s æ ¸å¿ƒçµ„ä»¶ï¼Œä»¥åŠ kubectl top å‘½ä»¤å’Œ Dashboard ç­‰ UI çµ„ä»¶æä¾›æ•¸æ“šä¾†æºï¼Œå¯ä»¥ç”¨ä¾†çœ‹ node æˆ– pod çš„è³‡æº (CPU \u0026amp; Memory) æ¶ˆè€—ã€‚é ˆæ³¨æ„çš„æ˜¯ï¼ŒMetric Server æ˜¯ in memory çš„ monitorï¼Œåªå¯ä»¥æŸ¥è©¢ç•¶å‰çš„åº¦é‡æ•¸æ“šï¼Œä¸¦ä¸ä¿å­˜æ­·å²æ•¸æ“šã€‚\nå®‰è£\r1helm repo add metrics-server https://kubernetes-sigs.github.io/metrics-server/ 2helm upgrade --install metrics-server metrics-server/metrics-server --namespace kube-system 3Release \u0026#34;metrics-server\u0026#34; does not exist. Installing it now. 4NAME: metrics-server 5LAST DEPLOYED: Mon Mar 21 16:32:14 2022 6NAMESPACE: kube-system 7STATUS: deployed 8REVISION: 1 9TEST SUITE: None 10NOTES: 11*********************************************************************** 12* Metrics Server * 13*********************************************************************** 14 Chart version: 3.8.2 15 App version: 0.6.1 16 Image tag: k8s.gcr.io/metrics-server/metrics-server:v0.6.1 17*********************************************************************** é€£ç·šå¤±æ•—å•é¡Œ\rå¯ä»¥ç™¼ç¾ä½¿ç”¨é è¨­å€¼å®‰è£å®Œå¾Œ deployment ä¸€ç›´ç„¡æ³• readyï¼ŒæŸ¥çœ‹ deployment è³‡è¨Š\n1# kubectl describe deployments.apps -n kube-system metrics-server 2Name: metrics-server 3Namespace: kube-system 4CreationTimestamp: Mon, 21 Mar 2022 16:32:17 +0800 5Labels: app.kubernetes.io/instance=metrics-server 6 app.kubernetes.io/managed-by=Helm 7 app.kubernetes.io/name=metrics-server 8 app.kubernetes.io/version=0.6.1 9 helm.sh/chart=metrics-server-3.8.2 10Annotations: deployment.kubernetes.io/revision: 1 11 meta.helm.sh/release-name: metrics-server 12 meta.helm.sh/release-namespace: kube-system 13Selector: app.kubernetes.io/instance=metrics-server,app.kubernetes.io/name=metrics-server 14Replicas: 1 desired | 1 updated | 1 total | 0 available | 1 unavailable 15StrategyType: RollingUpdate 16MinReadySeconds: 0 17RollingUpdateStrategy: 25% max unavailable, 25% max surge 18Pod Template: 19 Labels: app.kubernetes.io/instance=metrics-server 20 app.kubernetes.io/name=metrics-server 21 Service Account: metrics-server 22 Containers: 23 metrics-server: 24 Image: k8s.gcr.io/metrics-server/metrics-server:v0.6.1 25 Port: 4443/TCP 26 Host Port: 0/TCP 27 Args: 28 --secure-port=4443 29 --cert-dir=/tmp 30 --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname 31 --kubelet-use-node-status-port 32 --metric-resolution=15s 33 Liveness: http-get https://:https/livez delay=0s timeout=1s period=10s #success=1 #failure=3 34 Readiness: http-get https://:https/readyz delay=20s timeout=1s period=10s #success=1 #failure=3 35 Environment: \u0026lt;none\u0026gt; 36 Mounts: 37 /tmp from tmp (rw) 38 Volumes: 39 tmp: 40 Type: EmptyDir (a temporary directory that shares a pod\u0026#39;s lifetime) 41 Medium: 42 SizeLimit: \u0026lt;unset\u0026gt; 43 Priority Class Name: system-cluster-critical 44Conditions: 45 Type Status Reason 46 ---- ------ ------ 47 Available False MinimumReplicasUnavailable 48 Progressing True ReplicaSetUpdated 49OldReplicaSets: \u0026lt;none\u0026gt; 50NewReplicaSet: metrics-server-7d76b744cd (1/1 replicas created) 51Events: 52 Type Reason Age From Message 53 ---- ------ ---- ---- ------- 54 Normal ScalingReplicaSet 3m50s deployment-controller Scaled up replica set metrics-server-7d76b744cd to 1 æŸ¥çœ‹ Pod log\n1kubectl logs -f -n kube-system metrics-server-7d76b744cd-fv9ns é€£ç·šå¤±æ•—å•é¡Œä¿®æ­£\råŠ ä¸Š --kubelet-insecure-tls å•Ÿå‹•åƒæ•¸\n1kubectl patch -n kube-system deployment metrics-server --type=json -p \u0026#39;[{\u0026#34;op\u0026#34;:\u0026#34;add\u0026#34;,\u0026#34;path\u0026#34;:\u0026#34;/spec/template/spec/containers/0/args/-\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;--kubelet-insecure-tls\u0026#34;}]\u0026#39; æ¸¬è©¦\ræŸ¥çœ‹ç¯€é»è³‡æºæ¶ˆè€—\n1[root@node ~]# kubectl top nodes 2NAME CPU(cores) CPU% MEMORY(bytes) MEMORY% 3node 312m 7% 2769Mi 36% 4rockyw 234m 2% 3335Mi 21% 5rockyw2 199m 2% 2727Mi 17% Reference\råœ¨æ‰¾è³‡æ–™çš„æ™‚å€™ç™¼ç¾ä»¥ä¸‹å…©ç¯‡é‡å° metric server çš„ä»‹ç´¹ï¼Œå€¼å¾—æ‹œè®€ã€‚\nKubernetes Monitoring 101 â€” Core pipeline \u0026amp; Services Pipeline\rKubernetes è‡ªå‹•å½ˆæ€§ä¼¸ç¸®\r","date":"2022-03-21T21:28:00+00:00","updated":"2022-03-21T21:28:00+00:00"},{"objectID":"1647454980","permalink":"/post/devops-containerd-crictl-configure-private-img-registry/containerd-configure-private-harbor/","title":"Containerd (crictl) é…ç½®ç§æœ‰é¡åƒå€‰åº«","content":"å‰å¹¾å¤©å°‡ k8s å‡ç´šåˆ° 1.23 ç‰ˆï¼Œä½¿ç”¨ containerd ç•¶ CRIï¼Œç«‹é¦¬å°±é‡åˆ°è¦æ‹‰å–ç§æœ‰ image registry çš„ç‹€æ³ï¼Œæœ¬æ–‡ç´€éŒ„é…ç½®éç¨‹ã€‚\né…ç½® containerd config.toml\rä¾æ“šé ç«¯ç§æœ‰å€‰åº«æ˜¯å¦åŠ å¯†ï¼Œæœ‰ä¸åŒé…ç½®ï¼š\n- ç§æœ‰å€‰åº«å¸¶æœ‰ tls åŠ å¯† (https)\r1vim /etc/containerd/config.toml åœ¨ [plugins.\u0026quot;io.containerd.grpc.v1.cri\u0026quot;.registry.mirror] ä¸‹åŠ ä¸Šç§æœ‰å€‰åº«ä½å€/URL\n1[plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.mirrors.\u0026#34;harbor.nexmasa.com\u0026#34;] 2 endpoint = [\u0026#34;https://harbor.nexmasa.com\u0026#34;] å¦å¤–å†æ¥è‘—åŠ ä¸Š [plugins.\u0026quot;io.containerd.grpc.v1.cri\u0026quot;.registry.configs] çš„é …ç›®\n1[plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.configs] 2 [plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.configs.\u0026#34;harbor.nexmasa.com\u0026#34;.tls] 3 ca_file = \u0026#34;/etc/containerd/harbor.nexmasa.com/ca.pem\u0026#34; 4 cert_file = \u0026#34;/etc/containerd/harbor.nexmasa.com/cert.pem\u0026#34; 5 key_file = \u0026#34;/etc/containerd/harbor.nexmasa.com/key.pem\u0026#34; 6 [plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.configs.\u0026#34;harbor.nexmasa.com\u0026#34;.auth] 7 username = \u0026#34;xxxxxx\u0026#34; 8 password = \u0026#39;xxxxxx\u0026#39; - ç§æœ‰å€‰åº«ç„¡åŠ å¯† (http) æˆ–æ˜¯æƒ³ç•¥éæ†‘è­‰æª¢æŸ¥\råœ¨ tls é…ç½®é …ä¸‹ï¼Œä»¥ insecure_skip_verify = true åƒæ•¸å–ä»£ä¸Šé¢é…ç½®çš„é‡‘é‘°åŠæ†‘è­‰ã€‚\n1[plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.configs] 2 [plugins.\u0026#34;io.containerd.grpc.v1.cri\u0026#34;.registry.configs.\u0026#34;harbor.nexmasa.com\u0026#34;.tls] 3 insecure_skip_verify = true é‡å•Ÿ containerd\r1systemctl restart containerd æŸ¥çœ‹é…ç½®\n1[root@node ~]# crictl info 2{ 3 \u0026#34;status\u0026#34;: { 4 \u0026#34;conditions\u0026#34;: [ 5 { 6 \u0026#34;type\u0026#34;: \u0026#34;RuntimeReady\u0026#34;, 7 \u0026#34;status\u0026#34;: true, 8 \u0026#34;reason\u0026#34;: \u0026#34;\u0026#34;, 9 \u0026#34;message\u0026#34;: \u0026#34;\u0026#34; 10 }, 11 { 12 \u0026#34;type\u0026#34;: \u0026#34;NetworkReady\u0026#34;, 13 \u0026#34;status\u0026#34;: true, 14 \u0026#34;reason\u0026#34;: \u0026#34;\u0026#34;, 15 \u0026#34;message\u0026#34;: \u0026#34;\u0026#34; 16 } 17 ] 18 }, 19. 20. 21. 22\u0026#34;config\u0026#34;: { 23. 24. 25. 26 \u0026#34;registry\u0026#34;: { 27 \u0026#34;mirrors\u0026#34;: { 28 \u0026#34;docker.io\u0026#34;: { 29 \u0026#34;endpoint\u0026#34;: [ 30 \u0026#34;https://registry-1.docker.io\u0026#34; 31 ] 32 }, 33 \u0026#34;harbor.nexmasa.com\u0026#34;: { 34 \u0026#34;endpoint\u0026#34;: [ 35 \u0026#34;https://harbor.nexmasa.com\u0026#34; 36 ] 37 } 38 }, 39 \u0026#34;configs\u0026#34;: { 40 \u0026#34;harbor.nexmasa.com\u0026#34;: { 41 \u0026#34;auth\u0026#34;: { 42 \u0026#34;username\u0026#34;: \u0026#34;xxxxx\u0026#34;, 43 \u0026#34;password\u0026#34;: \u0026#34;xxxxx\u0026#34;, 44 \u0026#34;auth\u0026#34;: \u0026#34;\u0026#34;, 45 \u0026#34;identitytoken\u0026#34;: \u0026#34;\u0026#34; 46 }, 47 \u0026#34;tls\u0026#34;: { 48 \u0026#34;insecure_skip_verify\u0026#34;: false, 49 \u0026#34;caFile\u0026#34;: \u0026#34;/etc/containerd/harbor.nexmasa.com/ca.pem\u0026#34;, 50 \u0026#34;certFile\u0026#34;: \u0026#34;/etc/containerd/harbor.nexmasa.com/cert.pem\u0026#34;, 51 \u0026#34;keyFile\u0026#34;: \u0026#34;/etc/containerd/harbor.nexmasa.com/key.pem\u0026#34; 52 } 53 } 54 }, 55 \u0026#34;auths\u0026#34;: null, 56 \u0026#34;headers\u0026#34;: null 57 }, æ¸¬è©¦\ræ‹‰å–é¡åƒ\n1crictl pull harbor.nexmasa.com/test/hello-world@sha256:90659bf80b44ce6be8234e6ff90a1ac34acbeb826903b02cfa0da11c82cbc042 Reference\rhttps://github.com/containerd/containerd/blob/main/docs/cri/registry.md\r","date":"2022-03-16T18:23:00+00:00","updated":"2022-03-16T18:23:00+00:00"},{"objectID":"1647287580","permalink":"/post/database-mongodb-oom-crash/mongodb-oom-crash/","title":"Mongodb å¯èƒ½æ˜¯è®“æ©Ÿå™¨ OOM crash çš„å…ƒå…‡ ?!","content":"å•é¡Œ\ræ‰‹ä¸Šæœ‰ä¸‰å°å„æœ‰ 160GB çš„æ©Ÿå™¨ï¼Œä½†å»æœƒåœ¨è·‘ä¸€æ®µæ™‚é–“å¾Œè¼ªæµæ­»ç•¶ã€‚è§€å¯Ÿè¨˜æ†¶é«”æ¶ˆè€—ä¹‹å¾Œï¼Œç™¼ç¾å…‡æ‰‹å°±æ˜¯ MongoDB!!!\nåŸå› \rMongoDB ä½¿ç”¨è¨˜æ†¶é«”æ˜ å°„å­˜å„²å¼•æ“ (Memory Mapped Storage Engine) WiredTigerï¼Œæ˜¯ MongoDB 3.2 ç‰ˆä¹‹å¾Œçš„é»˜èªå¼•æ“ï¼Œå®ƒæœƒæŠŠç£ç›¤ IO æ“ä½œè½‰æ›æˆè¨˜æ†¶é«”æ“ä½œï¼Œå¦‚æœæ˜¯è®€æ“ä½œï¼Œè¨˜æ†¶é«”ä¸­çš„æ•¸æ“šèµ·åˆ°ç·©å­˜çš„ä½œç”¨ï¼Œå¦‚æœæ˜¯å¯«æ“ä½œï¼Œè¨˜æ†¶é«”é‚„å¯ä»¥æŠŠéš¨æ©Ÿçš„å¯«æ“ä½œè½‰æ›æˆé †åºçš„å¯«æ“ä½œï¼Œç¸½ä¹‹å¯ä»¥å¤§å¹…åº¦æå‡æ€§èƒ½ã€‚ æˆªè‡ª Mongodb doucument\r1With WiredTiger, MongoDB utilizes both the WiredTiger internal cache and the filesystem cache. 2Starting in MongoDB 3.4, the default WiredTiger internal cache size is the larger of either: 3- 50% of (RAM - 1 GB), or 4- 256 MB. å› ç‚ºä¼ºæœå™¨è¨˜æ†¶é«”å¤§å°ç‚º 160GBï¼Œä¸€å€‹ Mongodb å°±å¯èƒ½æœƒå æ‰è¿‘ 80GB çš„è¨˜æ†¶é«”ã€‚ æ­¤æ™‚æœå‹™å™¨ä¸Šè‹¥é‚„æœ‰è·‘å…¶ä»– Mongodb æˆ–æ‡‰ç”¨ç¨‹åºçš„è©±ï¼Œå°±æœƒå°è‡´è¨˜æ†¶é«”ä¸è¶³è€Œé€€å‡ºã€‚\nè§£æ±ºæ–¹æ³•\råœ¨ mongodb å•Ÿå‹•æ™‚è¨­å®š\rrun on baremetal 1mongod --wiredTigerCacheSizeGB 10 run on docker 1docker run --name mymongo -d mongo --wiredTigerCacheSizeGB 10 run on kubernetes 1cat \u0026lt;\u0026lt;EOF | kubectl apply -f - 2kind: Deployment 3apiVersion: apps/v1 4metadata: 5 name: mongodb 6spec: 7 replicas: 1 8 selector: 9 matchLabels: 10 app: mongodb 11 template: 12 metadata: 13 labels: 14 app: mongodb 15 spec: 16 containers: 17 - image: mongo 18 name: mongodb 19 ports: 20 - containerPort: 27017 21 name: mongodb 22 protocol: TCP 23 imagePullPolicy: IfNotPresent 24 command: [\u0026#34;docker-entrypoint.sh\u0026#34;] 25 args: [\u0026#34;mongod\u0026#34;, \u0026#34;--wiredTigerCacheSizeGB\u0026#34;, \u0026#34;10\u0026#34;] 26 restartPolicy: Always 27--- 28apiVersion: v1 29kind: Service 30metadata: 31 name: mongodb 32 labels: 33 name: mongodb 34spec: 35 ports: 36 - port: 27017 37 name: mongo-port 38 protocol: TCP 39 targetPort: 27017 40 selector: 41 app: mongodb 42 type: NodePort 43EOF mongodb é‹è¡Œæ™‚è¨­å®š\rå¦‚æœ mongodb å·²ç¶“å•Ÿå‹•çš„è©±ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼å‹•æ…‹è¨­å®š\n1db.adminCommand({setParameter: 1, wiredTigerEngineRuntimeConfig: \u0026#34;cache_size=10G\u0026#34;}) æŸ¥çœ‹è¨­å®šçµæœ\r1db.serverStatus().wiredTiger.cache[\u0026#39;maximum bytes configured\u0026#39;]/1024/1024/1024 Reference\rhttps://docs.mongodb.com/manual/reference/program/mongod/\rhttps://stackoverflow.com/questions/64809287/how-to-set-wiredtigercachesize-in-mongodb-when-deployed-in-kubernetes/64859613#64859613\rhttps://blog.csdn.net/LuyaoYing001/article/details/75576820\r","date":"2022-03-14T19:53:00+00:00","updated":"2022-03-14T19:53:00+00:00"},{"objectID":"1647183360","permalink":"/post/k8s-1.23-installation/install-kubernetes-123-on-rocky-linux/","title":"åœ¨ Rocky Linux 8 å®‰è£ Kubernetes 1.23 (containerd as cri)","content":"kubernetes 1.22 ç‰ˆä¹‹å¾Œï¼Œå°±ä¸å†æ”¯æŒ Docker ä½œç‚º container runtime ä»¥åŠç®¡ç†å®¹å™¨åŠé¡åƒçš„å·¥å…·äº†ã€‚å¯ä»¥ä½¿ç”¨ containerd å–ä»£ docker çš„ container runtimeï¼›ä»¥åŠ crictl ä½œç‚º CRI(Container Runtime Interface)ï¼Œå¦å¤– podman ä¹Ÿå¯ä»¥ç”¨ä¾†ç®¡ç†å®¹å™¨å’Œé¡åƒã€‚æœ¬ç¯‡è¨˜éŒ„åŸºæ–¼ containerd \u0026amp;amp; crictl ä½¿ç”¨ kubeadm éƒ¨å±¬ Kubernetes é›†ç¾¤çš„éç¨‹ã€‚\nç³»çµ±ç’°å¢ƒé…ç½® (æ‰€æœ‰ç¯€é»)\ræœ€å°ç³»çµ±è³‡æºéœ€æ±‚\ræ¯å°æ©Ÿå™¨ 4 GiB ä»¥ä¸Š RAM master control plane ç¯€é»è‡³å°‘éœ€è¦æœ‰å…©å€‹ä»¥ä¸Šçš„ vCPU é›†ç¾¤ä¸­æ‰€æœ‰æ©Ÿå™¨ä¹‹é–“çš„å®Œæ•´ç¶²çµ¡é€£æ¥ (can be private or public) Server Type Hostname Spec master node.ulatest.com 4 vCPU, 8G RAM worker rockyw.ulatest.com 8 vCPU, 16G RAM worker rockyw2.ulatest.com 8 vCPU, 16G RAM é…ç½® /etc/hosts\r1cat /etc/hosts 2127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 3::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 4 510.1.5.130 nexdata nexdata.ulatest.com 610.1.5.146 node node.ulatest.com 710.1.5.147 rockyw rockyw.ulatest.com 810.1.5.148 rockyw2 rockyw2.ulatest.com 9 1010.1.5.130 nfs nfs.ulatest.com æ›´æ–°è»Ÿé«”å¥—ä»¶\r1yum update -y ç³»çµ±é…ç½®\råœç”¨é˜²ç«ç‰†\r1systemctl stop firewalld 2systemctl disable firewalld é—œé–‰ SELINUX\r1sed -i â€¦","date":"2022-03-13T14:56:00+00:00","updated":"2022-03-13T14:56:00+00:00"},{"objectID":"1647182760","permalink":"/post/k8s-install-kubernetes-dashboard/kubernets-dashboard-installation/","title":"å®‰è£ Kubernetes Dashboard - å–®é›†ç¾¤å¯è¦–åŒ–ç®¡ç†","content":"Kubernetes Dashboard æ˜¯ç”±å®˜æ–¹ç¶­è­·çš„ Kubernetes é›†ç¾¤ WEB UI ç®¡ç†å·¥å…·ï¼Œèƒ½æŸ¥çœ‹ Kubernetes Cluster ä¸Šè³‡æºåˆ†ä½ˆèˆ‡ä½¿ç”¨ç‹€æ³ï¼Œä¹Ÿå¯ä»¥å‰µå»ºæˆ–è€…ä¿®æ”¹ Kubernetes è³‡æºï¼Œè®“ä½¿ç”¨è€…é€é Web UI ä»‹é¢å–ä»£æŒ‡ä»¤çš„ç®¡ç† Kubernetesã€‚\nå®‰è£\rå®‰è£éå¸¸ç°¡å–®ï¼Œåªè¦é€éä¸‹é¢ command å³å¯éƒ¨å±¬ã€‚\n1kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.1/aio/deploy/recommended.yaml ç¢ºèªå®‰è£çµæœ\n1[root@ula ~]# kubectl get all -n kubernetes-dashboard 2NAME READY STATUS RESTARTS AGE 3pod/dashboard-metrics-scraper-799d786dbf-zhvlc 1/1 Running 0 24s 4pod/kubernetes-dashboard-fb8648fd9-wd4t5 1/1 Running 0 24s 5 6NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE 7service/dashboard-metrics-scraper ClusterIP 10.111.121.48 \u0026lt;none\u0026gt; 8000/TCP 24s 8service/kubernetes-dashboard ClusterIP 10.107.248.188 \u0026lt;none\u0026gt; 443/TCP 25s 9 10NAME READY UP-TO-DATE AVAILABLE AGE 11deployment.apps/dashboard-metrics-scraper 1/1 1 1 24s 12deployment.apps/kubernetes-dashboard 1/1 1 1 25s 13 14NAME DESIRED CURRENT READY AGE 15replicaset.apps/dashboard-metrics-scraper-799d786dbf 1 1 1 24s 16replicaset.apps/kubernetes-dashboard-fb8648fd9 1 1 1 24s è¨ªå•\rå°‡ kubernetes-dashboard æœå‹™æš´éœ² NodePort\n1kubectl edit svc -n kubernetes-dashboard kubernetes-dashboard å°‡åŸæœ¬ type: ClusterIP æ”¹æˆ type: NodePortã€‚å®Œæˆå¾Œå°±å¯ä»¥ä½¿ç”¨ https://NodeIP:nodePort åœ°å€è¨ªå• dashboardã€‚\n1[root@ula ~]# kubectl get svc -n kubernetes-dashboard kubernetes-dashboard 2NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE 3kubernetes-dashboard NodePort 10.107.248.188 \u0026lt;none\u0026gt; 443:31302/TCP 44m ç”±æ–¼ Dashboard é»˜èªä½¿ç”¨ httpsï¼Œå…¶è­‰æ›¸ä¸å—ç€è¦½å™¨ä¿¡ä»»ï¼Œæ‰€ä»¥è¨ªå•æ™‚åŠ ä¸Š https å¼·åˆ¶è·³è½‰å°±å¯ä»¥äº†ã€‚\nç™»å…¥\rç™»éŒ„ Dashboard æ”¯æŒ Kubeconfig å’Œ Token å…©ç¨®èªè­‰æ–¹å¼ï¼ŒKubeconfig ä¸­ä¹Ÿä¾è³´ token å­—æ®µï¼Œæ‰€ä»¥ç”Ÿæˆ token é€™ä¸€æ­¥æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä¸‹é¢ç´€éŒ„ä½¿ç”¨ token çš„æ–¹å¼ç™»éŒ„ã€‚\nå»ºç«‹ service account \u0026amp; role binding\ræº–å‚™ yaml æª” sc-ula.yaml\n1kind: ClusterRoleBinding 2apiVersion: rbac.authorization.k8s.io/v1beta1 3metadata: 4 name: ula 5 annotations: 6 rbac.authorization.kubernetes.io/autoupdate: \u0026#34;true\u0026#34; 7roleRef: 8 kind: ClusterRole 9 name: cluster-admin # k8s é è¨­å»ºç«‹çš„è§’è‰² 10 apiGroup: rbac.authorization.k8s.io 11subjects: 12- kind: ServiceAccount 13 name: ula 14 namespace: kube-system 15 16 --- 17 apiVersion: v1 18 kind: ServiceAccount 19 metadata: 20 name: ula 21 namespace: kube-system 22 labels: 23 kubernetes.io/cluster-service: \u0026#34;true\u0026#34; 24 addonmanager.kubernetes.io/mode: Reconcile ä½¿ç”¨ kubectl apply å»ºç«‹\n1kubectl apply -f sc-ula.yaml å–å¾— Server Account Token\ræŸ¥çœ‹ service account secret\n1kubectl get sa ula -n kube-system -o=yaml 2apiVersion: v1 3kind: ServiceAccount 4metadata: 5 creationTimestamp: \u0026#34;2022-03-14T03:12:41Z\u0026#34; 6 name: ula 7 namespace: kube-system 8 resourceVersion: \u0026#34;332586\u0026#34; 9 uid: f048e242-5947-4945-8310-432628e635b7 10secrets: 11- name: ula-token-qwddr å–å¾— token å­—æ®µï¼Œä¸¦ä½¿ç”¨ base64 decode\n1kubectl get secret ula-token-qwddr -o jsonpath={.data.token} -n kube-system | base64 -d 2eyJhbGciOiJSUzI1NiIsImtpZCI6IjVadWpvSGEtR2tMR2ZFMGVHaGloWjJNOFdRcn............... ç„¶å¾Œåœ¨ dashboard ç™»éŒ„é é¢ä¸Šç›´æ¥ä½¿ç”¨ä¸Šé¢å¾—åˆ°çš„ token å­—ç¬¦ä¸²å³å¯ç™»éŒ„ï¼Œé€™æ¨£å°±å¯ä»¥æ“æœ‰ç®¡ç†å“¡æ¬Šé™æ“ä½œæ•´å€‹ kubernetes é›†ç¾¤çš„å°è±¡ï¼Œä¹Ÿå¯ä»¥æ–°å»ºä¸€å€‹æŒ‡å®šæ“ä½œæ¬Šé™çš„ç”¨æˆ¶ã€‚\nReference\rhttps://github.com/kubernetes/dashboard\rhttps://kubernetes.io/zh/docs/tasks/access-application-cluster/web-ui-dashboard/\r","date":"2022-03-13T14:46:00+00:00","updated":"2022-03-13T14:46:00+00:00"},{"objectID":"1646862852","permalink":"/post/data-install-kafka-by-docker-compose/install-kafka-by-docker-compose/","title":"ä½¿ç”¨ docker compose å®‰è£ kafka","content":"å®‰è£å–®ç¯€é» Kafka\r1. æº–å‚™ docker-compose.yaml æª”æ¡ˆ\r1version: \u0026#39;3\u0026#39; 2services: 3 zookeeper: 4 restart: always 5 image: confluentinc/cp-zookeeper:latest 6 environment: 7 ZOOKEEPER_CLIENT_PORT: 2181 8 ZOOKEEPER_TICK_TIME: 2000 9 ports: 10 - 22181:2181 11 volumes: 12 - ./zoo/data:/var/lib/zookeeper/data 13 - ./zoo/log:/var/lib/zookeeper/log 14 15 kafka: 16 restart: always 17 image: confluentinc/cp-kafka:latest 18 depends_on: 19 - zookeeper 20 ports: 21 - 29092:29092 22 volumes: 23 - ./kafka/data:/var/lib/kafka/data 24 environment: 25 KAFKA_BROKER_ID: 1 26 KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181 27 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://10.13.1.100:29092 28 KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT 29 KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT 30 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1 åœ¨ä½¿ç”¨ docker æˆ–æ˜¯å…¬æœ‰é›²éƒ¨å±¬ kafka æ™‚ï¼Œéœ€è¦ç”¨åˆ° KAFKA_ADVERTISED_LISTENER åƒæ•¸ã€‚å…¶ä¸­ç¬¬ä¸€å€‹å€¼æ˜¯çœŸæ­£å»ºç«‹ kafka broker ç”¨çš„ï¼Œç¬¬äºŒå€‹æ•¸å€¼æ˜¯ç”¨æ–¼å°å¤–ç™¼å¸ƒçš„æœå‹™ç«¯å£ã€‚ KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR ç”¨ä¾†é…ç½® __consumer_offsets å‰¯æœ¬æ•¸ã€‚ 2. å•Ÿå‹• container\r1docker-compose up -d 2Creating network \u0026#34;kafka_default\u0026#34; with the default driver 3Creating kafka_zookeeper_1 ... done 4Creating kafka_kafka_1 ... done 3. æŸ¥çœ‹æœå‹™\r1docker ps 2CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 39afa79af69e7 confluentinc/cp-kafka:latest \u0026#34;/etc/confluent/dockâ€¦\u0026#34; 39 minutes ago Up 39 minutes 9092/tcp, 0.0.0.0:29092-\u0026gt;29092/tcp, :::29092-\u0026gt;29092/tcp kafka_kafka_1 42445639c8af9 confluentinc/cp-zookeeper:latest \u0026#34;/etc/confluent/dockâ€¦\u0026#34; 39 minutes ago Up 39 minutes 2888/tcp, 3888/tcp, 0.0.0.0:22181-\u0026gt;2181/tcp, :::22181-\u0026gt;2181/tcp kafka_zookeeper_1 4. æª¢æŸ¥é‹ä½œ\rä½¿ç”¨ä¸‹è¼‰ kafka å¥—ä»¶æä¾›çš„ script æ¸¬è©¦\nlist topicï¼Œè‹¥ç„¡éŒ¯èª¤è¨Šæ¯å‰‡ä»£è¡¨å»ºç«‹ä¸¦é€£ç·š kafka broker æˆåŠŸã€‚ 1[root@ula bin]# ./kafka-topics.sh --list --bootstrap-server 10.13.1.100:29092 2 3[root@ula bin]# produce message 1[root@ula bin]# ./kafka-console-producer.sh --bootstrap-server 10.13.1.100:29092 --topic test 2\u0026gt;life 3\u0026gt;is 4\u0026gt;what 5\u0026gt;you 6\u0026gt;make 7\u0026gt;it 8\u0026gt;! 9\u0026gt;^C[root@ula bin]# consume message 1[root@ula bin]# 2[root@ula bin]# ./kafka-console-consumer.sh --bootstrap-server 10.13.1.100:29092 --topic test --from-beginning 3life 4is 5what 6you 7make 8it 9! 10^CProcessed a total of 7 messages å®‰è£ Kafka Cluster\r1--- 2version: \u0026#39;3\u0026#39; 3services: 4 zookeeper-1: 5 image: confluentinc/cp-zookeeper:latest 6 environment: 7 ZOOKEEPER_CLIENT_PORT: 2181 8 ZOOKEEPER_TICK_TIME: 2000 9 ports: 10 - 22181:2181 11 zookeeper-2: 12 image: confluentinc/cp-zookeeper:latest 13 environment: 14 ZOOKEEPER_CLIENT_PORT: 2181 15 ZOOKEEPER_TICK_TIME: 2000 16 ports: 17 - 32181:2181 18 kafka-1: 19 image: confluentinc/cp-kafka:latest 20 depends_on: 21 - zookeeper-1 22 - zookeeper-2 23 ports: 24 - 29092:29092 25 environment: 26 KAFKA_BROKER_ID: 1 27 KAFKA_ZOOKEEPER_CONNECT: zookeeper-1:2181,zookeeper-2:2181 28 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka-1:9092,PLAINTEXT_HOST://10.13.1.100:29092 29 KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT 30 KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT 31 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 32 kafka-2: 33 image: confluentinc/cp-kafka:latest 34 depends_on: 35 - zookeeper-1 36 - zookeeper-2 37 ports: 38 - 39092:39092 39 environment: 40 KAFKA_BROKER_ID: 2 41 KAFKA_ZOOKEEPER_CONNECT: zookeeper-1:2181,zookeeper-2:2181 42 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka-2:9092,PLAINTEXT_HOST://10.13.1.100:39092 43 KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT 44 KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT 45 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 2 ","date":"2022-03-09T21:54:12+00:00","updated":"2022-03-09T21:54:12+00:00"},{"objectID":"1646335260","permalink":"/post/os-linux-eat-all-memory/linux-eat-all-memory/","title":"Linux åƒæ‰äº†è¨˜æ†¶é«” ?!","content":"å‰è¨€\råœ¨è§€å¯Ÿç”¨æ–¼å„²å­˜ k8s çš„ nfs server æ™‚ï¼Œç™¼ç¾è¨˜æ†¶é«”çš„ cache/buffer å€¼éå¸¸é«˜ï¼Œä½†ç´°çœ‹ top å»ç„¡ä»»ä½•æ‡‰ç”¨ç¨‹å¼ä½”ç”¨è¨˜æ†¶é«”ç©ºé–“ã€‚æŸ¥äº†ä¸€ä¸‹ç¶²è·¯ï¼Œç™¼ç¾æ˜¯ linux ç³»çµ±æœ¬èº«çš„æ©Ÿåˆ¶ã€‚\nåŸå› \rLinux æœƒå€Ÿç”¨æœªä½¿ç”¨çš„è¨˜æ†¶é«”ä¾†åšç£ç¢Ÿå¿«å–ï¼Œå¯ä»¥è®“æ‡‰ç”¨è¼‰å…¥æ›´å¿«ä¸¦ä¸”åŸ·è¡Œæ›´åŠ æµæš¢ï¼Œæé«˜ IO æ€§èƒ½ã€‚å¦‚æœæœ‰å…¶ä»–æ‡‰ç”¨è¦ç”¨åˆ°è¨˜æ†¶é«”æ™‚ï¼Œç³»çµ±æœƒå¾ç£ç¢Ÿå¿«å–ä¸­æ‹¿èµ°ä¸€å¡Šè¢«å€Ÿç”¨çš„è¨˜æ†¶é«”ï¼Œä¸æœƒç”¨åˆ° swapã€‚\nfree å‘½ä»¤çš„è¨˜æ†¶é«”ç©ºé–“è§£æ\r1[root@nfs ~]# free -h 2 total used free shared buff/cache available 3Mem: 188G 6.4G 1.0G 138M 181G 181G 4Swap: 4.0G 0B 4.0G 5[root@nfs ~]# total è¨˜æ†¶é«”ç¸½æ•¸ used å·²ç¶“ä½¿ç”¨çš„è¨˜æ†¶é«” free ç©ºé–’çš„è¨˜æ†¶é«”æ•¸ shared å¤šå€‹é€²ç¨‹å…±äº«çš„è¨˜æ†¶é«”ç¸½é¡ buffer ä½œç‚º buffer cache çš„ç·©å­˜ cache ä½œç‚º page cache çš„ç·©å­˜ available = free + buff/cache ä¸Šè¡¨ä¸­ something ä»£è¡¨çš„æ­£æ˜¯ free å‘½ä»¤ä¸­ buffers/cached ä½¿ç”¨çš„è¨˜æ†¶é«”ã€‚ç”±æ–¼é€™å€‹è¨˜æ†¶é«”å¯¦éš›ä¸Šæ˜¯å¾ä½œæ¥­ç³»çµ±çš„è§’åº¦ä½¿ç”¨çš„ï¼Œæ‰€ä»¥å¦‚æœç”¨æˆ¶æƒ³è¦ä½¿ç”¨å®ƒï¼Œé‚£éº¼å®ƒå¯ä»¥è¢«ç”¨æˆ¶çš„æ‡‰ç”¨å¿«é€Ÿåœ°å›æ”¶å’Œä½¿ç”¨ã€‚\nbuffer \u0026amp; cache\rbuffer cache ç·©è¡\rBuffer cache ä¹Ÿå«å¡Šç·©è¡ï¼Œæ˜¯å°ç‰©ç†ç£ç›¤ä¸Šçš„ä¸€å€‹ç£ç›¤å¡Šé€²è¡Œçš„ç·©è¡ï¼Œå…¶å¤§å°çˆ²é€šå¸¸çˆ² 1kã€‚å®ƒæ˜¯çˆ²äº†ç·©è¡å¯«æ“ä½œç„¶å¾Œä¸€æ¬¡æ€§å°‡å¾ˆå¤šæ”¹å‹•å¯«å…¥ç¡¬ç›¤ï¼Œé¿å…é »ç¹å¯«ç¡¬ç›¤ï¼Œæé«˜å¯«å…¥æ•ˆç‡ã€‚\npage cache å¿«å–\rpage cache é ç·©è¡/æ–‡ä»¶ç·©è¡ï¼Œç”±è‹¥å¹²å€‹ç£ç›¤å¡Šçµ„æˆ(ä¹Ÿå³ç”±è‹¥å¹²å€‹bufferCacheçµ„æˆï¼Œç‰©ç†ä¸Šä¸ä¸€å®šé€£çºŒ)ï¼Œé€šå¸¸ç‚º 4Kã€åœ¨ 64 ä½ç³»çµ±ä¸Šçˆ² 8kã€‚å®ƒæ˜¯çˆ²äº†çµ¦è®€æ“ä½œæä¾›ç·©è¡ï¼Œé¿å…é »ç¹è®€ç¡¬ç›¤ï¼Œæé«˜è®€å–æ•ˆç‡ã€‚\nç°¡å–®èªªä¾†ï¼Œbuffer cache ç”¨ä¾†ç·©å­˜ç£ç›¤æ•¸æ“šã€å„ªåŒ–ç£ç›¤çš„ I/Oï¼›page cache ç”¨ä¾†ç·©å­˜æ–‡ä»¶æ•¸æ“šã€å„ªåŒ–æ–‡ä»¶ç³»çµ±çš„ I/Oã€‚åœ¨æœ‰æ–‡ä»¶ç³»çµ±çš„æƒ…æ³ä¸‹ï¼Œå°æ–‡ä»¶æ“ä½œï¼Œé‚£éº¼æ•¸æ“šæœƒç·©å­˜åˆ° page cacheï¼Œå¦‚æœç›´æ¥æ¡ç”¨ dd ç­‰å·¥å…·å°ç£ç›¤é€²è¡Œè®€å¯«ï¼Œé‚£éº¼æ•¸æ“šæœƒç·©å­˜åˆ° buffer cacheã€‚\nå¦‚ä½•æ¸…é™¤ cache\rä¸€èˆ¬ä¾†èªªä½¿ç”¨è€…æ˜¯ä¸éœ€è¦å»ç®¡é€™äº› cache ä½•æ™‚æœƒè¢«æ¸…é™¤çš„ï¼Œæ‰€ä»¥ Linux ä¹Ÿæ²’æœ‰å°ˆé–€çš„æŒ‡ä»¤ä¾†åšé€™ä»¶äº‹ï¼Œä¸éä¾ç„¶æœ‰æä¾›ä¸€å€‹ proc file system ä»‹é¢ /proc/sys/vm/drop_cachesï¼Œå¯ä»¥å¼·åˆ¶ kernel æ¸…ç†å¿«å–ã€‚drop_caches çš„å€¼å¯ä»¥æ˜¯ 0-3 ä¹‹é–“çš„æ•¸å­—ï¼Œä»£è¡¨ä¸åŒæ¶µç¾©ï¼š\n0ï¼šä¸é‡‹æ”¾(ç³»çµ±é»˜èªå€¼)ï¼›ä¸é‡‹æ”¾å†…å­˜ï¼Œç”±æ“ä½œç³»çµ±è‡ªå‹•ç®¡ç†\n1ï¼šé‡‹æ”¾ pagecache.\n1# sync \u0026amp;\u0026amp; echo 1 \u0026gt; /proc/sys/vm/drop_caches 2ï¼šé‡‹æ”¾ dentries(ç›®éŒ„ç·©å­˜) å’Œ inodes (æ–‡ä»¶å…ƒæ•¸æ“š)\n1# sync \u0026amp;\u0026amp; echo 2 \u0026gt; /proc/sys/vm/drop_caches 3ï¼šé‡‹æ”¾æ‰€æœ‰ç·©å­˜ pagecache, dentries and inodes.\n1# sync \u0026amp;\u0026amp; echo 3 \u0026gt; /proc/sys/vm/drop_caches åŸºæœ¬ä¸ŠåŸ·è¡Œé€™äº›æŒ‡ä»¤æ²’æœ‰ä»€éº¼å¥½è™•ï¼Œæ‰€ä»¥é™¤éä½ å¾ˆæ˜ç¢ºçŸ¥é“ä½ æƒ³å¹¹å˜›ï¼ˆä¾‹å¦‚ç‚ºäº†é¿å… cache å½±éŸ¿å¯¦é©—çµæœï¼‰ï¼Œå¦å‰‡å»ºè­°ä¸è¦éš¨ä¾¿æ‰‹å‹•æ¸…é™¤å¿«å–è¨˜æ†¶é«”ã€‚å¦å¤–ï¼Œä¹Ÿå»ºè­°åœ¨åšé€™å€‹å‹•ä½œå‰å…ˆåŸ·è¡Œ sync è®“æª”æ¡ˆå¯«å…¥æ“ä½œå…ˆå®Œæˆï¼Œå¦å‰‡å¯èƒ½æœƒé€ æˆæ„æƒ³ä¸åˆ°çš„çµæœã€‚\nReference\rhttps://www.linuxatemyram.com/\rhttps://medium.com/hungys-blog/clear-linux-memory-cache-manually-90bec95ea003\r","date":"2022-03-03T19:21:00+00:00","updated":"2022-03-03T19:21:00+00:00"},{"objectID":"1646053200","permalink":"/post/smangus/","title":"å¸é¦¬åº«æ–¯å…©æ—¥éŠğŸ¤","content":"å»å¹´ç–«æƒ…æ‚¶äº†åŠå¹´ï¼Œåä¸€æœˆåˆå°±æ—©æ—©è¨‚äº† 228 çš„å¸é¦¬åº«æ–¯çš„æ«»èŠ±ç¥­æ—…éŠã€‚å› ç‚ºä¸æƒ³èˆŸè»Šå‹é “çš„é–‹ä¸‰å››å€‹å°æ™‚çš„å±±è·¯ï¼Œå°±æ±ºå®šé‚€è«‹å¤§å§Šç”·å‹å®¶ä¸€èµ·ç›´æ¥åŒ…å…«äººå°åœ˜å‡ºéŠï¼æ¯æ¬¡å‡ºéŠå‰ä¸€å€‹ç¦®æ‹œå°±æœƒå¿ä¸ä½æ¯å¤©éƒ½çœ‹å¥½å¹¾æ¬¡çš„æ°£è±¡é å ±ï¼Œä½†çµæœæ˜¯ï¼Œä¸æ˜¯å‰ä¸€å¤©çœ‹çš„é å ±éƒ½ä¸æº– ğŸ¤£\nç„¶è¶…ç´šå¹¸é‹çš„æ˜¯ï¼ŒåŸå…ˆé€£çºŒå…©å€‹ç¦®æ‹œæ¯å¤©éƒ½åœ¨ä¸‹é›¨çš„åŒ—éƒ¨ï¼Œç«Ÿç„¶å°±é€™éº¼å‰›å‰›å¥½çš„åœ¨é€£å‡å‰ä¸€å¤©æ­£å¼æ”¾æ™´ â˜€ï¸ â˜€ï¸ è¡Œå‰æ¯å¤©éƒ½åœ¨ç¥ˆç¦±å¤§æ™´å¤©ï¼Œç”šè‡³é‚„åœ¨å›å˜‰çš„å‰ä¸€å¤©æŒ‰ç…§ç¶²è·¯ä¸Šçš„ä¸ç§‘å­¸ç¿’ä¿—ç•«äº†çƒé¾œç‡’ XD ä½†å„˜ç®¡å®Œå…¨æ²’æ ¹æ“šï¼Œé‚„æ˜¯å¾ˆç¥å¥‡çš„å…©å¤©éƒ½æ˜¯ä¸€é»é›²éƒ½æ²’æœ‰çš„è¶…ç´šå¥½å¤©æ°£!!(æ•…æ„æ²’ç•«é›²) amazing~~ ğŸ¥³ ğŸ˜ ç¬¬ä¸€æ™šå¤œå®¿æ–°ç«¹å¸‚å€\rå› ç‚ºæƒ³å¤šç•™ä¸€é»æ™‚é–“åœ¨å¸é¦¬åº«æ–¯ï¼Œæ‰€ä»¥ç¬¬ä¸€å€‹æ™šä¸Šæ±ºå®šå…ˆä¸Šæ–°ç«¹ä½ä¸€æ™šã€‚æº–æ™‚çš„ç´„äº†æ—…è¡Œç¤¾å®‰æ’çš„æ™šä¸Šä¸ƒé»ï¼Œä½†é€£å‡åœ‹é“å¡å¥½å¡æ»¿ï¼Œæ‰€ä»¥æœ€å¾Œåé»æ‰åˆ°é£¯åº—ã€‚åŸéšå»Ÿå¤œå¸‚å¹¾ä¹éƒ½é—œäº†ï¼Œæ‰€å¹¸é‚„èƒ½é‡åˆ°é–‹å¾—å¾ˆæ™šçš„ç¢³çƒ¤ï¼Œä¾¿è²·äº†å¹¾é“èœé…é…’ï¼Œä¸äº¦æ¨‚ä¹ï¼ ç„¶å¾Œç¬¬ä¸€å¤©æ™šä¸Šçš„æ—…é¤¨çˆ›åˆ°ä¸çŸ¥é“å¦‚ä½•è©•è«– ğŸ™ƒ ä¸‹æ¬¡éè»Šç¨‹å¾ˆé çš„æ—…è¡Œé‚„æ˜¯è‡ªåŠ©éŠæœ€å¥½äº†ï¼Œå¦‚ä»Šå·²ç¶“ä¸åƒå¤§å­¸æ™‚çš„çª®éŠå¯ä»¥äº«å—çœéŒ¢çš„å¿«æ¨‚å•¦ ğŸ¤ª\nåˆèˆˆè»Šç«™\réš”å¤©ä¸€æ—©å…«é»åŠä¾¿å¾é£¯åº—å‡ºç™¼ï¼Œæ—©ä¸Šé£¯åº—é™„é¤æ˜¯å¾ˆç¥å¥‡çš„ä¾¿ç•¶ =_=? åƒå®Œä¾¿ç•¶é…èœå°±è·Ÿå§Šå€‘å»é™„è¿‘çš„å…¨å®¶è§£æ±ºã€‚è·¯ä¸Šè²·äº†å¸æ©Ÿæ¨è–¦çš„æ–°ç«¹æº«åª½åª½å®¢å®¶èœåŒ…è·Ÿè‰ä»”ç²¿ï¼Œç±³é¦™å¾ˆé¦™ï¼Œå…§é¤¡ä¹Ÿå¥½åƒï¼ å°æ¯”ä¹‹ä¸‹ï¼Œæˆ‘çš„æ§‹åœ–é‚„æ˜¯æœ‰å¾…åŠ å¼· TVT è¾›è‹¦æˆ‘å§Šäº† åˆ°ç¬¬ä¸€å€‹æ™¯é»æ™‚ï¼Œé›²å°±éƒ½æ•£äº†ï¼Œå¤©æ°£è¶…å¥½! è»è‰¦å²©\rå‰å¾€è»è‰¦å²©å‰ç¶“éäº†ä¸€å€‹è§€æ™¯å°ï¼Œåœ¨é¦¬é‡Œå…‰éƒ¨è½é™„è¿‘ã€‚ åœ¨è»è‰¦å²©æœ‰å…©åº§åŠæ©‹ï¼Œæ˜¥å¤©å¤§éƒ¨åˆ†çš„æ¨¹è‘‰éƒ½è®Šç¶ äº†ï¼Œä½†é‚„èƒ½çœ‹åˆ°äº›è¨±ç´…é»ƒè¤è‰²çš„è‘‰å­ç©¿æ’ï¼Œå‘ˆç¾å±±å·’çš„å±¤æ¬¡ç¾ã€‚æ²³æ°´é‡å……æ²›ï¼Œä¸”éå¸¸ä¹¾æ·¨ï¼Œå¥½ç¾å“‡~~ å¸é¦¬åº«æ–¯\rä¸€å€‹å°æ™‚å¾Œï¼Œå¤§æ¦‚ä¸€é»å°±åˆ°å¸é¦¬åº«æ–¯äº†ï¼å…ˆåƒå€‹å¾åˆèˆˆè»Šç«™å¸¶ä¸Šä¾†çš„å±±è±¬è‚‰ä¾¿ç•¶(æ„å¤–å¥½åƒ)ã€‚åœ¨ä¸‰é»å…¥ä½å‰åˆ°è™•åœ¨éƒ¨è½é€›é€›ï¼Œè¶è‘—å‰ä¸€æ‰¹éŠå®¢é›¢é–‹ã€ä¸‹ä¸€æ‰¹éŠå®¢åˆ°ä¾†å‰ï¼Œåœ¨å¤§é“è·Ÿéƒ¨è½å…¥å£æ‹ç…§ï¼Œææ—©ä¾†çœŸçš„æ˜¯å¤ªå°äº† ğŸ¥º ğŸ˜‡ å¤§æ¦‚ååˆ†é˜åˆ°ä¸Šé¢çš„è§€æ™¯å°ï¼Œè·¯é€”ä¸Šæœ‰ä¸€éš»å¯æ„›çš„é»ƒç‰› ğŸ®ï¼Œè§€æ™¯å°å¯ä»¥çœ‹åˆ°æ•´å€‹å¸é¦¬åº«æ–¯éƒ¨è½ã€‚ ç„¶å¾Œä¸‰é»æº–æ™‚è·Ÿå¸æ©Ÿ check-in å°æœ¨å±‹ã€‚é€™æ¬¡å› ç‚ºæ²’æœ‰é¦¬ä¸Šå°±è¨‚å¥½ï¼Œæ‰€ä»¥åªèƒ½ä½é è¿‘å¤§é–€çš„ä¼¯ç‰¹åˆ©å±‹ é›…æˆ¿ï¼Œä½†æ…¶å¹¸çš„æ˜¯ä½åœ¨äºŒæ¨“ï¼Œè€Œä¸”è¡›æµ´å°±æˆ¿é–“åœ¨æ—é‚Šï¼å¤§å®¶åœ¨æˆ¿é–“å…§å„è‡ªä¼‘æ¯ï¼Œå—‘äº†ä¸€äº›å¸¶ä¾†çš„é›¶é£Ÿè·Ÿæ—©ä¸Šæ²’åƒå®Œçš„èœåŒ…å……é£¢ï¼Œé‚„ç¡äº†ä¸€å°è¦ºè£œçœ ï¼Œå¤•é™½ç‘é€²ä¾†ï¼Œå‰›å‰›å¥½çš„æº«åº¦ï¼Œå¤ªèˆ’æœå•¦ ğŸ˜† å¾äºŒæ¨“æ‹å‡ºå»çš„é¢¨æ™¯ï¼Œç´€éŒ„å¸é¦¬åº«æ–¯å¤ªé™½ä¸‹å±±çš„å…‰å½±è®Š â€¦","date":"2022-02-28T21:00:00+08:00","updated":"2022-02-28T21:00:00+08:00"},{"objectID":"1645634220","permalink":"/post/os-kvm-install-rocky-linux/kvm-install-rocky-linux/","title":"[KVM] Install Rocky Linux","content":"å®‰è£ KVM å¥—ä»¶\rè«‹åƒè€ƒä¹‹å‰çš„\ræ–‡ç« \rå®‰è£ Rocky Linux VM\ræ–¼å®˜ç¶²ä¸‹è¼‰ iso æ˜ åƒæª”\r1wget --no-check-certificate https://download.rockylinux.org/pub/rocky/8/isos/x86_64/Rocky-8.5-x86_64-minimal.iso é–‹å§‹å®‰è£\r1virt-install --name rockym \\ 2--disk path=/var/lib/libvirt/images/rockym,size=60,format=qcow2 \\ 3--vcpus 4 --memory 16384 \\ 4--network bridge=br0 \\ 5--graphics none --os-type linux --os-variant=rhl8.0 \\ 6--location /var/lib/libvirt/images/Rocky-8.5-x86_64-minimal.iso \\ 7--extra-args \u0026amp;#39;console=ttyS0\u0026amp;#39; 3) Installation source é¸é …é…ç½®\r1Installation 2 31) [x] Language settings 2) [x] Time settings 4 (English (United States)) (Asia/Taipei timezone) 53) [x] Installation source 4) [x] Software selection 6 (Local media) (Server) 75) [!] Installation Destination 6) [x] Kdump 8 (Automatic partitioning (Kdump is enabled) 9 selected) 107) [ ] Network configuration 8) [!] Root password 11 (Not connected) (Root account is disabled.) 129) [!] User creation 13 (No user will be created) 14 15Please make a selection from the above â€¦","date":"2022-02-23T16:37:00+00:00","updated":"2022-02-23T16:37:00+00:00"},{"objectID":"1645568520","permalink":"/post/os-kvm-shrink-image/kvm-shrink-image/","title":"[KVM] ç‚º image ç˜¦èº«","content":"å•é¡Œèªªæ˜\råœ¨å»ºç«‹ vm å¾Œï¼Œç™¼ç¾å…¶ä½¿ç”¨çš„ qcow2 image æª”æ¡ˆå¤§å°è¶…ç´šå¤§ã€‚ä½¿ç”¨ qemu-img info æŸ¥çœ‹ vm çœŸæ­£çš„ä½¿ç”¨å®¹é‡åƒ… 2G ä½†å¯¦éš›ä¸Šå»ä½”ç”¨äº†å•Ÿå‹•æ™‚åŠƒåˆ†çš„ disk size å¦‚ç¯„ä¾‹çš„ 60Gã€‚\n1[root@nexdata images]# qemu-img info rockym 2image: rockym 3file format: qcow2 4virtual size: 60G (64424509440 bytes) 5disk size: 2.1G 6cluster_size: 65536 7Format specific information: 8 compat: 1.1 9 lazy refcounts: true 10 refcount bits: 16 11 corrupt: false è§£æ±ºæ–¹å¼\ré€é convert è½‰æ› qcow2 æª”æ¡ˆç¸®å°ï¼š\n1qemu-img convert -p -f qcow2 ./vm-disk-original.qcow2 -O qcow2 ./vm-disk-shrinked.qcow2 Warning\nä»¥é˜²è¬ä¸€ï¼Œè«‹å…ˆå°‡ VM é—œæ©Ÿå¾Œå†æ“ä½œã€‚\nReference\rhttps://serverfault.com/questions/881595/kvm-guest-qcow2-larger-than-disk-size\r","date":"2022-02-22T22:22:00+00:00","updated":"2022-02-22T22:22:00+00:00"},{"objectID":"1645560060","permalink":"/post/programming-lamp-apache-mariadb-php-on-linux/deploy-lamp-on-linux/","title":"ä½ˆç½² LAMP (Apache + MariaDB + PHP Web Server on Linux)","content":"ç³»çµ±ç’°å¢ƒ\rCentOS 7.9 PHP 7.2.34 Apache/2.4.6 1[root@ewrula ~]# httpd -v 2Server version: Apache/2.4.6 (CentOS) 3Server built: Jan 25 2022 14:08:43 MariaDB 5.5.68 1[root@ewrula ~]# mysql -V 2mysql Ver 15.1 Distrib 5.5.68-MariaDB, for Linux (x86_64) using readline 5.1 å®‰è£\rApache\r1yum install -y httpd 2systemctl start httpd 3systemctl enable httpd å®‰è£å®Œç•¢ä¸¦å•Ÿå‹•å¾Œ Apache å·²ç¶“å¯ä»¥å­˜å–äº†\nMariaDB\r1yum install mariadb-server mariadb 2systemctl start mariadb 3systemctl enable mariadb è¨­å®š MariaDB çš„ root å¯†ç¢¼ï¼š\n1/usr/bin/mysql_secure_installation æœƒè·³å‡ºæç¤ºï¼Œé è¨­æ˜¯ç©ºå¯†ç¢¼ï¼Œæ•…è«‹æŒ‰ç…§æŒ‡ç¤º enter for none\n1Enter current password for root (enter for none): 2OK, successfully used password, moving on... 3 4Setting the root password ensures that nobody can log into the MariaDB 5root user without the proper authorization. 6 7New password: password 8Re-enter new password: password 9Password updated successfully! 10Reloading privilege tables.. 11 ... Success! æ¸¬è©¦é€£ç·š MariaDBï¼š\n1mysql -u root -p php 7.2\rç›®å‰ php æœ€é«˜çš„ç©©å®šç‰ˆæœ¬æ˜¯ 7.2ï¼Œè‹¥ç›´æ¥æ¡ç”¨ CentOS ä¸­çš„ yum å®‰è£ yum -y install phpï¼Œç‰ˆæœ¬æ˜¯5.4ï¼Œå› æ­¤éœ€è¦æ‰‹å‹•æ›´æ–° rpmã€‚\n1rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm 2rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm 7.2 ç‰ˆæœ¬åç‚º 72wï¼Œé™¤äº† php åº«å¤–é‚„éœ€å®‰è£å…¶ä»–å¸¸ç”¨å¥—ä»¶ï¼š\n1yum -y install php72w php72w-bcmath php72w-cli php72w-common php72w-dba php72w-devel php72w-embedded php72w-enchant php72w-fpm php72w-gd php72w-imap php72w-interbase php72w-intl php72w-ldap php72w-mbstring php72w-mcrypt php72w-mysqlnd php72w-odbc php72w-opcache php72w-pdo php72w-pdo_dblib php72w-pear php72w-pecl-apcu php72w-pecl-apcu-devel php72w-pecl-imagick php72w-pecl-imagick-devel php72w-pecl-xdebug php72w-pgsql php72w-phpdbg php72w-process php72w-pspell php72w-recode php72w-snmp php72w-soap php72w-tidy php72w-xml php72w-xmlrpc æŸ¥çœ‹å·²å®‰è£å¥—ä»¶:\n1[root@ewrula ~]# php -m 2[PHP Modules] 3apcu 4bcmath 5bz2 6calendar 7Core 8ctype 9curl 10date 11dba 12dom 13enchant 14exif 15fileinfo 16filter 17ftp 18gd 19gettext 20gmp 21hash 22iconv 23imagick 24imap 25interbase 26intl 27json 28ldap 29libxml 30mbstring 31mysqli 32mysqlnd 33odbc 34openssl 35pcntl 36pcre 37PDO 38pdo_dblib 39PDO_Firebird 40pdo_mysql 41PDO_ODBC 42pdo_pgsql 43pdo_sqlite 44pgsql 45Phar 46posix 47pspell 48readline 49recode 50Reflection 51session 52shmop 53SimpleXML 54snmp 55soap 56sockets 57SPL 58sqlite3 59standard 60sysvmsg 61sysvsem 62sysvshm 63tidy 64tokenizer 65wddx 66xdebug 67xml 68xmlreader 69xmlrpc 70xmlwriter 71xsl 72Zend OPcache 73zip 74zlib 75 76[Zend Modules] 77Xdebug 78Zend OPcache 79 80[root@ewrula ~]# é…ç½®\rè¨­å®šé˜²ç«ç‰†\r1firewall-cmd --zone=public --permanent --add-port=80/tcp 2firewall-cmd --zone=public --permanent --add-port=443/tcp 3service firewalld restart è¨­å®š apache conf æª”\r1vim /etc/httpd/conf/httpd.conf ä¸»è¦è¦è¨­å®šç¶²é è·¯å¾‘æ‰€åœ¨ï¼Œè©³ç´°çš„è¨­å®šé …èªªæ˜å¯ä»¥åƒè€ƒé³¥å“¥çš„\ræ–‡ç« \ræ¬Šé™è¨­å®š\r1chown -R apache.apache /var/www/blog 2chmod -R 755 /var/www/blog 3sudo chcon -t httpd_sys_rw_content_t /var/www/blog -R é‡å•Ÿ server\r1systemctl restart httpd è§£æ±º QueryException (2002) SQLSTATE[HY000] [2002] Permission denied çš„éŒ¯èª¤\ré€™æ˜¯ SELinux å° httpd é‹è¡Œæœå‹™çš„å®‰å…¨æ§ç®¡æ©Ÿåˆ¶ï¼Œè«‹å…ˆæŸ¥è©¢ httpd é‹è¡Œæ™‚çš„è¨­å®š\n1getsebool -a | grep httpd å¦‚æœ httpd_can_network_connect_db çš„è¨­å®šæ˜¯ Off (é—œé–‰)ï¼Œè«‹é€éä¸‹åˆ—æŒ‡ä»¤äºˆä»¥é–‹å•Ÿ\n1setsebool -P httpd_can_network_connect_db 1 åŸ·è¡Œéç¨‹ï¼š\n1[root@ewrula ewr]# getsebool -a | grep httpd 2httpd_anon_write --\u0026gt; off 3httpd_builtin_scripting --\u0026gt; on 4httpd_can_check_spam --\u0026gt; off 5httpd_can_connect_ftp --\u0026gt; off 6httpd_can_connect_ldap --\u0026gt; off 7httpd_can_connect_mythtv --\u0026gt; off 8httpd_can_connect_zabbix --\u0026gt; off 9httpd_can_network_connect --\u0026gt; off 10httpd_can_network_connect_cobbler --\u0026gt; off 11httpd_can_network_connect_db --\u0026gt; off 12httpd_can_network_memcache --\u0026gt; off 13httpd_can_network_relay --\u0026gt; off 14httpd_can_sendmail --\u0026gt; off 15httpd_dbus_avahi --\u0026gt; off 16httpd_dbus_sssd --\u0026gt; off 17httpd_dontaudit_search_dirs --\u0026gt; off 18httpd_enable_cgi --\u0026gt; on 19httpd_enable_ftp_server --\u0026gt; off 20httpd_enable_homedirs --\u0026gt; off 21httpd_execmem --\u0026gt; off 22httpd_graceful_shutdown --\u0026gt; on 23httpd_manage_ipa --\u0026gt; off 24httpd_mod_auth_ntlm_winbind --\u0026gt; off 25httpd_mod_auth_pam --\u0026gt; off 26httpd_read_user_content --\u0026gt; off 27httpd_run_ipa --\u0026gt; off 28httpd_run_preupgrade --\u0026gt; off 29httpd_run_stickshift --\u0026gt; off 30httpd_serve_cobbler_files --\u0026gt; off 31httpd_setrlimit --\u0026gt; off 32httpd_ssi_exec --\u0026gt; off 33httpd_sys_script_anon_write --\u0026gt; off 34httpd_tmp_exec --\u0026gt; off 35httpd_tty_comm --\u0026gt; off 36httpd_unified --\u0026gt; off 37httpd_use_cifs --\u0026gt; off 38httpd_use_fusefs --\u0026gt; off 39httpd_use_gpg --\u0026gt; off 40httpd_use_nfs --\u0026gt; off 41httpd_use_openstack --\u0026gt; off 42httpd_use_sasl --\u0026gt; off 43httpd_verify_dns --\u0026gt; off 44[root@ewrula ewr]# setsebool -P httpd_can_network_connect_db 1 45[root@ewrula ewr]# 46[root@ewrula ewr]# 47[root@ewrula ewr]# 48[root@ewrula ewr]# getsebool -a | grep httpd 49httpd_anon_write --\u0026gt; off 50httpd_builtin_scripting --\u0026gt; on 51httpd_can_check_spam --\u0026gt; off 52httpd_can_connect_ftp --\u0026gt; off 53httpd_can_connect_ldap --\u0026gt; off 54httpd_can_connect_mythtv --\u0026gt; off 55httpd_can_connect_zabbix --\u0026gt; off 56httpd_can_network_connect --\u0026gt; off 57httpd_can_network_connect_cobbler --\u0026gt; off 58httpd_can_network_connect_db --\u0026gt; on 59httpd_can_network_memcache --\u0026gt; off 60httpd_can_network_relay --\u0026gt; off 61httpd_can_sendmail --\u0026gt; off 62httpd_dbus_avahi --\u0026gt; off 63httpd_dbus_sssd --\u0026gt; off 64httpd_dontaudit_search_dirs --\u0026gt; off 65httpd_enable_cgi --\u0026gt; on 66httpd_enable_ftp_server --\u0026gt; off 67httpd_enable_homedirs --\u0026gt; off 68httpd_execmem --\u0026gt; off 69httpd_graceful_shutdown --\u0026gt; on 70httpd_manage_ipa --\u0026gt; off 71httpd_mod_auth_ntlm_winbind --\u0026gt; off 72httpd_mod_auth_pam --\u0026gt; off 73httpd_read_user_content --\u0026gt; off 74httpd_run_ipa --\u0026gt; off 75httpd_run_preupgrade --\u0026gt; off 76httpd_run_stickshift --\u0026gt; off 77httpd_serve_cobbler_files --\u0026gt; off 78httpd_setrlimit --\u0026gt; off 79httpd_ssi_exec --\u0026gt; off 80httpd_sys_script_anon_write --\u0026gt; off 81httpd_tmp_exec --\u0026gt; off 82httpd_tty_comm --\u0026gt; off 83httpd_unified --\u0026gt; off 84httpd_use_cifs --\u0026gt; off 85httpd_use_fusefs --\u0026gt; off 86httpd_use_gpg --\u0026gt; off 87httpd_use_nfs --\u0026gt; off 88httpd_use_openstack --\u0026gt; off 89httpd_use_sasl --\u0026gt; off 90httpd_verify_dns --\u0026gt; off 91[root@ewrula ewr]# systemctl restart httpd Reference\rhttps://ithelp.ithome.com.tw/questions/10186688\r","date":"2022-02-22T20:01:00+00:00","updated":"2022-02-22T20:01:00+00:00"},{"objectID":"1645470840","permalink":"/post/os-virtualbox-vm-efail/virtualbox-efail-error/","title":"VirtualBox å®‰è£ VM éŒ¯èª¤ (E_FAIL 0x80004005) ä¹‹è§£æ±º","content":"åœ¨ Win10 ä½¿ç”¨ VirtualBox å®‰è£ VM æ™‚é‡åˆ°ä¸‹è¿°éŒ¯èª¤ï¼Œç´€éŒ„ä¸€ä¸‹è§£æ±ºæ–¹å¼ã€‚\nError:\r1Failed to open a session for the virtual machine xxx. 2Call to WHvSetupPartition failed: ERROR_SUCCESS (Last=0xc000000d/87) (VERR_NEM_VM_CREATE_FAILED). 3Result Code: E_FAIL (0x80004005) 4Component: ConsoleWrap 5Interface: IConsole {872da645-4a9b-1727-bee2-5585105b9eed} Reason\rè¨±å¤šè™›æ“¬åŒ–æ‡‰ç”¨ç¨‹å¼ä¾è³´è™•ç†å™¨ä¸Šçš„ç¡¬é«”è™›æ“¬åŒ–æ“´å……ï¼ŒåŒ…æ‹¬ Intel VT-x å’Œ AMD-Vï¼Œä¸€æ¬¡åƒ…èƒ½å…è¨±ä¸€å€‹è»Ÿé«”ä½¿ç”¨ã€‚è‹¥è¦ä½¿ç”¨å…¶ä»–è™›æ“¬åŒ–è»Ÿé«”å¦‚ VirtualBOX æˆ– VMwareï¼Œå¿…é ˆåœç”¨ Hyper-V è™›æ“¬æ©Ÿå™¨ç›£æ§ç¨‹å¼ã€è£ç½®é˜²è­·å’Œèªè­‰é˜²è­·ã€‚\nSolution:\r1Windows Features 2---------------------- 3Disabled -\u0026gt; Hyper-V 4Enabled -\u0026gt; Virtual Machine Platform 5Enabled -\u0026gt; Windows Hypervisor Platform 6Disabled -\u0026gt; Windows Sandbox 7 8Elevated Powershell/Cmd 9------------------------------- 10bcdedit /set hypervisorlaunchtype off 11 12BIOS 13----- 14Enabled -\u0026gt; Virtualization Technology (VTx) 15Enabled -\u0026gt; Virtualization Technology for Directed I/O (VTd) 16Disabled -\u0026gt; HP Hypervisor Other Windows Features (Possibly irrelevant, can view img below)\nReference\rhttps://forums.virtualbox.org/viewtopic.php?f=6\u0026t=93443\rhttps://docs.microsoft.com/zh-tw/troubleshoot/windows-client/application-management/virtualization-apps-not-work-with-hyper-v\r","date":"2022-02-21T19:14:00+00:00","updated":"2022-02-21T19:14:00+00:00"},{"objectID":"1644560400","permalink":"/post/kubernets-ingress-invalid-ingressclass/","title":"Ingress does not contain a valid IngressClass","content":"å•é¡Œæè¿°\rnginx ingress å¾åŸæœ¬ deprecated çš„ stable/nginx-ingress helm chart æ”¹ç‚º ingress-nginx/ingress-nginx chart å¾Œï¼Œç™¼ç¾ ingress resource çš„ nginx ç¶²é  404 not foundï¼ŒæŸ¥çœ‹ ingress nginx controller log ç™¼ç¾æœ‰ ingress does not contain a valid IngressClass çš„éŒ¯èª¤ã€‚\nå®Œæ•´ log å¦‚ä¸‹ï¼š\n1[root@testm terraform]# kubectl logs -f -n ingress-nginx ingress-nginx-controller-5c5bf8c854-7pcf7 2------------------------------------------------------------------------------- 3NGINX Ingress controller 4 Release: v1.1.1 5 Build: a17181e43ec85534a6fea968d95d019c5a4bc8cf 6 Repository: https://github.com/kubernetes/ingress-nginx 7 nginx version: nginx/1.19.9 8 9------------------------------------------------------------------------------- 10 11W0209 05:43:07.359176 7 client_config.go:615] Neither --kubeconfig nor --master was specified. Using thesterConfig. This might not work. 12I0209 05:43:07.359883 7 main.go:223] \u0026#34;Creating API client\u0026#34; host=\u0026#34;https://10.96.0.1:443\u0026#34; 13I0209 05:43:07.379993 7 main.go:267] \u0026#34;Running in Kubernetes cluster\u0026#34; major=\u0026#34;1\u0026#34; minor=\u0026#34;20\u0026#34; git=\u0026#34;v1.20.15\u0026#34; \u0026#34;clean\u0026#34; commit=\u0026#34;8f1e5bf0b9729a899b8df86249b56e2c74aebc55\u0026#34; platform=\u0026#34;linux/amd64\u0026#34; 14I0209 05:43:07.644539 7 main.go:104] \u0026#34;SSL fake certificate created\u0026#34; file=\u0026#34;/etc/ingress-controller/ssl/defake-certificate.pem\u0026#34; 15I0209 05:43:07.675915 7 ssl.go:531] \u0026#34;loading tls certificate\u0026#34; path=\u0026#34;/usr/local/certificates/cert\u0026#34; key=\u0026#34;/ual/certificates/key\u0026#34; 16I0209 05:43:07.727278 7 nginx.go:255] \u0026#34;Starting NGINX Ingress controller\u0026#34; 17I0209 05:43:07.828276 7 event.go:282] Event(v1.ObjectReference{Kind:\u0026#34;ConfigMap\u0026#34;, Namespace:\u0026#34;ingress-nginxe:\u0026#34;ingress-nginx-controller\u0026#34;, UID:\u0026#34;c6943575-18fe-471a-aa44-5f251af7a277\u0026#34;, APIVersion:\u0026#34;v1\u0026#34;, ResourceVersion:\u0026#34;104FieldPath:\u0026#34;\u0026#34;}): type: \u0026#39;Normal\u0026#39; reason: \u0026#39;CREATE\u0026#39; ConfigMap ingress-nginx/ingress-nginx-controller 18I0209 05:43:08.929877 7 nginx.go:297] \u0026#34;Starting NGINX process\u0026#34; 19I0209 05:43:08.930002 7 leaderelection.go:248] attempting to acquire leader lease ingress-nginx/ingress-cler-leader... 20I0209 05:43:08.930504 7 nginx.go:317] \u0026#34;Starting validation webhook\u0026#34; address=\u0026#34;:8443\u0026#34; certPath=\u0026#34;/usr/local/icates/cert\u0026#34; keyPath=\u0026#34;/usr/local/certificates/key\u0026#34; 21I0209 05:43:08.930926 7 controller.go:155] \u0026#34;Configuration changes detected, backend reload required\u0026#34; 22I0209 05:43:08.945063 7 leaderelection.go:258] successfully acquired lease ingress-nginx/ingress-controllder 23I0209 05:43:08.945130 7 status.go:84] \u0026#34;New leader elected\u0026#34; identity=\u0026#34;ingress-nginx-controller-5c5bf8c854- 24I0209 05:43:09.015595 7 controller.go:172] \u0026#34;Backend successfully reloaded\u0026#34; 25I0209 05:43:09.015708 7 controller.go:183] \u0026#34;Initial sync, sleeping for 1 second\u0026#34; 26I0209 05:43:09.015766 7 event.go:282] Event(v1.ObjectReference{Kind:\u0026#34;Pod\u0026#34;, Namespace:\u0026#34;ingress-nginx\u0026#34;, Namress-nginx-controller-5c5bf8c854-7pcf7\u0026#34;, UID:\u0026#34;f84b09e4-7d7d-40bf-ae66-f2eb72ab7a59\u0026#34;, APIVersion:\u0026#34;v1\u0026#34;, ResourceV:\u0026#34;104846\u0026#34;, FieldPath:\u0026#34;\u0026#34;}): type: \u0026#39;Normal\u0026#39; reason: \u0026#39;RELOAD\u0026#39; NGINX reload triggered due to a change in configurat 27W0209 05:43:26.721706 7 controller.go:988] Error obtaining Endpoints for Service \u0026#34;monitoring/prometheus-or-prometheus\u0026#34;: no object matching key \u0026#34;monitoring/prometheus-operator-prometheus\u0026#34; in local store 28W0209 05:43:26.721831 7 controller.go:1083] Service \u0026#34;monitoring/prometheus-operator-grafana\u0026#34; does not havactive Endpoint. 29W0209 05:43:26.722981 7 controller.go:988] Error obtaining Endpoints for Service \u0026#34;monitoring/prometheus-or-alertmanager\u0026#34;: no object matching key \u0026#34;monitoring/prometheus-operator-alertmanager\u0026#34; in local store 30I0209 05:43:26.781310 7 admission.go:149] processed ingress via admission controller {testedIngressLengthtedIngressTime:0.06s renderingIngressLength:1 renderingIngressTime:0.001s admissionTime:18.0kBs testedConfiguraze:0.061} 31I0209 05:43:26.781370 7 main.go:101] \u0026#34;successfully validated configuration, accepting\u0026#34; ingress=\u0026#34;monitorinetheus-ingress\u0026#34; 32I0209 05:43:26.784116 7 admission.go:149] processed ingress via admission controller {testedIngressLengthtedIngressTime:0.063s renderingIngressLength:1 renderingIngressTime:0s admissionTime:18.0kBs testedConfiguratio0.063} 33I0209 05:43:26.784155 7 main.go:101] \u0026#34;successfully validated configuration, accepting\u0026#34; ingress=\u0026#34;monitorinana-ingress\u0026#34; 34I0209 05:43:26.785125 7 admission.go:149] processed ingress via admission controller {testedIngressLengthtedIngressTime:0.063s renderingIngressLength:1 renderingIngressTime:0.002s admissionTime:18.1kBs testedConfigurize:0.065} 35I0209 05:43:26.785171 7 main.go:101] \u0026#34;successfully validated configuration, accepting\u0026#34; ingress=\u0026#34;monitorintmanager-ingress\u0026#34; 36I0209 05:43:26.785238 7 admission.go:149] processed ingress via admission controller {testedIngressLengthtedIngressTime:0.064s renderingIngressLength:1 renderingIngressTime:0s admissionTime:18.0kBs testedConfiguratio0.064} 37I0209 05:43:26.785259 7 main.go:101] \u0026#34;successfully validated configuration, accepting\u0026#34; ingress=\u0026#34;istio-sysali-ingress\u0026#34; 38I0209 05:43:26.931088 7 store.go:420] \u0026#34;Ignoring ingress because of error while validating ingress class\u0026#34; s=\u0026#34;monitoring/grafana-ingress\u0026#34; error=\u0026#34;ingress does not contain a valid IngressClass\u0026#34; 39I0209 05:43:26.931132 7 store.go:420] \u0026#34;Ignoring ingress because of error while validating ingress class\u0026#34; s=\u0026#34;monitoring/prometheus-ingress\u0026#34; error=\u0026#34;ingress does not contain a valid IngressClass\u0026#34; 40I0209 05:43:26.931149 7 store.go:420] \u0026#34;Ignoring ingress because of error while validating ingress class\u0026#34; s=\u0026#34;monitoring/alertmanager-ingress\u0026#34; error=\u0026#34;ingress does not contain a valid IngressClass\u0026#34; 41I0209 05:43:26.945691 7 store.go:420] \u0026#34;Ignoring ingress because of error while validating ingress class\u0026#34; s=\u0026#34;istio-system/kiali-ingress\u0026#34; error=\u0026#34;ingress does not contain a valid IngressClass\u0026#34; åŸ Ingress é…ç½®\rä»¥ grafana-ing.tf ç‚ºç¯„ä¾‹ (ä½¿ç”¨ terraform è‡ªå‹•éƒ¨ç½²å·¥å…·å®‰è£)\n1resource \u0026#34;kubernetes_ingress\u0026#34; \u0026#34;grafana_ingress\u0026#34; { 2 count = var.package.prometheus == true ? 1 : 0 3 4 metadata { 5 name = \u0026#34;grafana-ingress\u0026#34; 6 namespace = \u0026#34;monitoring\u0026#34; 7 } 8 9 spec { 10 rule { 11 host = \u0026#34;${var.prometheus-options.host_grafana}.${var.domain}\u0026#34; 12 http { 13 path { 14 backend { 15 service_name = \u0026#34;prometheus-operator-grafana\u0026#34; 16 service_port = 80 17 } 18 path = \u0026#34;/\u0026#34; 19 } 20 } 21 } 22 } 23 24 depends_on = [ 25 helm_release.ingress-nginx, 26 ] 27} ç™¼ç”ŸåŸå› \råŸå› æ˜¯åœ¨ ingress v1.0.0 ç‰ˆä¹‹å¾Œï¼Œingress éœ€è¦åŠ ä¸Š ingress classï¼Œè«‹åƒè€ƒ github çš„ #7341\rpull requestï¼Œå¦‚æœæ²’æœ‰ï¼Œcontroller æœƒä¸Ÿ Ignoring ingress because of error while validating ingress class\u0026quot; ingress=\u0026quot;k8sNamespace/ingressResourceName\u0026quot; error=\u0026quot;ingress does not contain a valid IngressClass\u0026quot; çš„éŒ¯èª¤ã€‚\nInfo\nAn Ingress Class is basically a category which specify who needs to serve and manage the Ingress, this is necessary since in a cluster you can have more than one Ingress controller, each one with its rules and configurations.\nè§£æ±ºæ–¹æ³•\råœ¨ ingress resource ä¸­çš„ metadata æ¬„ä½åŠ ä¸Š annotations: kubernetes.io/ingress.class: \u0026quot;nginx\u0026quot; å³å¯ã€‚\n1resource \u0026#34;kubernetes_ingress\u0026#34; \u0026#34;grafana_ingress\u0026#34; { 2 count = var.package.prometheus == true ? 1 : 0 3 4 metadata { 5 name = \u0026#34;grafana-ingress\u0026#34; 6 namespace = \u0026#34;monitoring\u0026#34; 7 annotations = { 8 \u0026#34;kubernetes.io/ingress.class\u0026#34; = \u0026#34;nginx\u0026#34; 9 } 10 } 11 12 spec { 13 rule { 14 host = \u0026#34;${var.prometheus-options.host_grafana}.${var.domain}\u0026#34; 15 http { 16 path { 17 backend { 18 service_name = \u0026#34;prometheus-operator-grafana\u0026#34; 19 service_port = 80 20 } 21 path = \u0026#34;/\u0026#34; 22 } 23 } 24 } 25 } 26 27 depends_on = [ 28 helm_release.ingress-nginx, 29 ] 30} æ³¨æ„\rä¸Šè¿°æ–¹æ³•åƒ…é©ç”¨æ–¼ kubernetes 1.22 ç‰ˆä»¥å‰ã€‚k8s 1.22 ç‰ˆä»¥å¾Œè«‹ä½¿ç”¨ ingressClassName æ–¼ spec å€å¡Šä¸‹ã€‚è«‹åƒè€ƒ\rå®˜ç¶²\rèªªæ˜ã€‚\nReference\rhttps://forum.linuxfoundation.org/discussion/859965/exercise-7-nginx-update-requires-change-to-yaml\rhttps://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/ingress\rhttps://stackoverflow.com/questions/65979766/ingress-with-nginx-controller-not-working-address-missing\r","date":"2022-02-11T06:20:00+00:00","updated":"2022-02-11T06:20:00+00:00"},{"objectID":"1644434460","permalink":"/post/blog-hexo-add-search-function-next8/hexo-add-search-bar/","title":"[Hexo] Add Search Function under NexT8 Theme","content":"æ–‡ç« æ„ˆä¾†æ„ˆå¤šå•¦ï¼Œåªç”¨ç›®éŒ„è·Ÿæ¨™ç±¤æ‰¾æœ‰å¦‚å¤§æµ·æ’ˆé‡ï¼Œæ‰€ä»¥ä¾†å¹«éƒ¨è½æ ¼æ·»åŠ æœ¬ç«™æœç´¢çš„åŠŸèƒ½ï¼åœ¨é€™é‚Šè¨˜éŒ„ä¸€ä¸‹ã€‚\nnpm å®‰è£å¥—ä»¶\rHexo æ²’æœ‰æœ¬åœ°æœå°‹çš„åŠŸèƒ½ï¼Œä½† NexT ä¸»é¡Œå·²ç¶“å…§å»ºæœå°‹åŠŸèƒ½çš„é¸é …ï¼Œä¸ééœ€é¡å¤–å®‰è£å¥—ä»¶ã€‚å»ºè­°ç›´æ¥å®‰è£ NexT é‡‹å‡ºçš„ hexo-generator-searchdb å¥—ä»¶æœƒæ¯”è¼ƒç©©å®šã€‚\n1npm install hexo-generator-searchdb ä¿®æ”¹ config æª”\rå¯ä»¥ç›´æ¥åœ¨ themes/_config.yml æ‰¾åˆ° search çš„ç›¸é—œè¨­ç½®ï¼Œå°‡ enable: false æ”¹æˆ trueã€‚\n1# Local Search 2# Dependencies: https://github.com/theme-next/hexo-generator-searchdb 3local_search: 4 enable: false 5 # If auto, trigger search by changing input. 6 # If manual, trigger search by pressing enter key or search button. 7 trigger: auto 8 # Show top n results per article, show all results by setting to -1 9 top_n_per_article: 1 10 # Unescape html strings to the readable one. 11 unescape: false 12 # Preload the search data when the page loads. 13 preload: false é‡æ–°å•Ÿå‹• hexo server\rå°±ç°¡ç°¡å–®å–®çš„å¤§åŠŸå‘Šæˆäº†ï¼Œè®šå˜† NexT!\nReference\rhttps://home.gamer.com.tw/artwork.php?sn=5273365\r","date":"2022-02-09T19:21:00+00:00","updated":"2022-02-09T19:21:00+00:00"},{"objectID":"1644353160","permalink":"/post/os-kvm-guest-cannot-access-internet/kvm-guest-cannot-access-internet/","title":"[KVM] guest can't access Internet","content":"ç‹€æ³\råœ¨ CentOS å»ºç«‹äº†å¹¾å° KVM è™›æ“¬æ©Ÿï¼Œä½†æ˜¯åœ¨ç³»çµ±é‡å•Ÿå¾Œç™¼ç¾é€™å¹¾å°æ©Ÿå™¨éƒ½ç„¡æ³•é€£ç¶²äº†ã€‚åªèƒ½èˆ‡ host äº’ pingï¼Œç„¡æ³•é€£ç¶²ã€ç„¡æ³• ping åŒç¶²æ®µçš„å…¶ä»–ä¸»æ©Ÿã€KVM guest èˆ‡ guest é–“ä¹Ÿä¸èªå¾—ã€‚\nå…¶ä¸­ä¸€å€‹ VM çš„ç¶²è·¯è¨­å®šï¼š ï¼ˆCentOS 7.9ï¼‰\nHost IP: 10.1.5.130 Guest IP: 10.1.5.141 Host Network: Bridge (br0) Guest KVM Network Ineterface: eth0 Ping results:\n1root@host:~$ ping 10.1.5.141 2PING 10.0.10.13 (10.0.10.13) 56(84) bytes of data. 364 bytes from 10.0.10.13: icmp_seq=1 ttl=64 time=0.207 ms 4 5root@host:~$ ping 1.1.1.1 6PING 1.1.1.1 (1.1.1.1) 56(84) bytes of data. 764 bytes from 1.1.1.1: icmp_seq=1 ttl=58 time=119 ms 8 9root@guest:~$ ping 10.1.5.130 10PING 10.0.10.2 (10.0.10.2) 56(84) bytes of data. 1164 bytes from 10.0.10.2: icmp_seq=1 ttl=64 time=0.257 ms 12 13root@guest:~$ ping 1.1.1.1 14PING 1.1.1.1 (1.1.1.1) 56(84) bytes of data. 15 16--- 1.1.1.1 ping statistics --- 179 packets transmitted, 0 received, 100% packet loss, time 7999ms æŸ¥çœ‹é›™æ–¹çš„ç¶²è·¯è¨­å®šçš†ç„¡ç•°å¸¸ï¼Œé‡å•Ÿ server æˆ– kvm çš„ç¶²å¡çš†ç„¡æ•ˆã€‚\n1[root@host ~]# ifconfig 2br0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 3 inet 10.1.5.130 netmask 255.255.255.0 broadcast 10.1.5.255 4 inet6 fe80::3c9b:4cc9:bd11:8919 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; 5 ether 0c:c4:7a:b7:39:66 txqueuelen 1000 (Ethernet) 6 RX packets 5179086 bytes 284472155 (271.2 MiB) 7 RX errors 0 dropped 79272 overruns 0 frame 0 8 TX packets 81432 bytes 13931170 (13.2 MiB) 9 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 10 11br-3138c45de2ae: flags=4099\u0026lt;UP,BROADCAST,MULTICAST\u0026gt; mtu 1500 12 inet 172.18.0.1 netmask 255.255.0.0 broadcast 172.18.255.255 13 ether 02:42:c1:cf:65:cc txqueuelen 0 (Ethernet) 14 RX packets 0 bytes 0 (0.0 B) 15 RX errors 0 dropped 0 overruns 0 frame 0 16 TX packets 0 bytes 0 (0.0 B) 17 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 18 19docker0: flags=4099\u0026lt;UP,BROADCAST,MULTICAST\u0026gt; mtu 1500 20 inet 172.17.0.1 netmask 255.255.0.0 broadcast 172.17.255.255 21 ether 02:42:fc:40:fa:e4 txqueuelen 0 (Ethernet) 22 RX packets 0 bytes 0 (0.0 B) 23 RX errors 0 dropped 0 overruns 0 frame 0 24 TX packets 0 bytes 0 (0.0 B) 25 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 26 27ens1f0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 28 ether 0c:c4:7a:b7:39:66 txqueuelen 1000 (Ethernet) 29 RX packets 4745249 bytes 350711453 (334.4 MiB) 30 RX errors 0 dropped 39639 overruns 0 frame 0 31 TX packets 117171 bytes 12372319 (11.7 MiB) 32 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 33 34lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 35 inet 127.0.0.1 netmask 255.0.0.0 36 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; 37 loop txqueuelen 1000 (Local Loopback) 38 RX packets 567 bytes 64847 (63.3 KiB) 39 RX errors 0 dropped 0 overruns 0 frame 0 40 TX packets 567 bytes 64847 (63.3 KiB) 41 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 42 43vnet1: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 44 inet6 fe80::fc54:ff:fe12:db6c prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; 45 ether fe:54:00:12:db:6c txqueuelen 1000 (Ethernet) 46 RX packets 2674 bytes 254695 (248.7 KiB) 47 RX errors 0 dropped 0 overruns 0 frame 0 48 TX packets 94305 bytes 5469690 (5.2 MiB) 49 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 50 51[root@host ~]# nmcli con show 52NAME UUID TYPE DEVICE 53bridge-br0 a2d389db-dfb8-4fb4-b5e1-c98fa4f08f71 bridge br0 54br-3138c45de2ae 3e78cb65-cc77-4a9f-b485-a672a2631b86 bridge br-3138c45de2ae 55bridge-slave-ens1f0 de082284-5730-4648-8353-804805894e46 ethernet ens1f0 56vnet1 bb2d992a-72f9-4b29-b4b6-0553f7a46772 tun vnet1 57 58[root@host ~]# cat /etc/sysconfig/network-scripts/ifcfg-bridge-br0 59STP=yes 60BRIDGING_OPTS=priority=32768 61TYPE=Bridge 62PROXY_METHOD=none 63BROWSER_ONLY=no 64BOOTPROTO=none 65DEFROUTE=yes 66IPV4_FAILURE_FATAL=no 67IPV6INIT=yes 68IPV6_AUTOCONF=yes 69IPV6_DEFROUTE=yes 70IPV6_FAILURE_FATAL=no 71IPV6_ADDR_GEN_MODE=stable-privacy 72NAME=bridge-br0 73UUID=a2d389db-dfb8-4fb4-b5e1-c98fa4f08f71 74DEVICE=br0 75ONBOOT=yes 76IPADDR=10.1.5.130 77PREFIX=24 78GATEWAY=10.1.5.254 79DNS1=10.1.1.3 80 81######################################### 82 83[root@guest ~]# ifconfig 84eth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 85 inet 10.1.5.141 netmask 255.255.255.0 broadcast 10.1.5.255 86 inet6 fe80::432b:25e4:8f2:328 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; 87 ether 52:54:00:12:db:6c txqueuelen 1000 (Ethernet) 88 RX packets 786 bytes 76712 (74.9 KiB) 89 RX errors 0 dropped 0 overruns 0 frame 0 90 TX packets 167 bytes 16793 (16.3 KiB) 91 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 92 93lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 94 inet 127.0.0.1 netmask 255.0.0.0 95 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; 96 loop txqueuelen 1000 (Local Loopback) 97 RX packets 32 bytes 2592 (2.5 KiB) 98 RX errors 0 dropped 0 overruns 0 frame 0 99 TX packets 32 bytes 2592 (2.5 KiB) 100 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 101 102 103[root@guest ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0 104TYPE=\u0026#34;Ethernet\u0026#34; 105PROXY_METHOD=\u0026#34;none\u0026#34; 106BROWSER_ONLY=\u0026#34;no\u0026#34; 107BOOTPROTO=\u0026#34;static\u0026#34; 108DEFROUTE=\u0026#34;yes\u0026#34; 109IPV4_FAILURE_FATAL=\u0026#34;no\u0026#34; 110IPV6INIT=\u0026#34;yes\u0026#34; 111IPV6_AUTOCONF=\u0026#34;yes\u0026#34; 112IPV6_DEFROUTE=\u0026#34;yes\u0026#34; 113IPV6_FAILURE_FATAL=\u0026#34;no\u0026#34; 114IPV6_ADDR_GEN_MODE=\u0026#34;stable-privacy\u0026#34; 115HWADDR=\u0026#34;52:54:00:12:db:6c\u0026#34; 116NAME=\u0026#34;eth0\u0026#34; 117UUID=\u0026#34;c43aa0f0-7327-4807-975b-9e1dc5e46332\u0026#34; 118DEVICE=\u0026#34;eth0\u0026#34; 119ONBOOT=\u0026#34;yes\u0026#34; 120IPADDR=\u0026#34;10.1.5.141\u0026#34; 121PREFIX=\u0026#34;24\u0026#34; 122GATEWAY=\u0026#34;10.1.5.254\u0026#34; 123DNS1=\u0026#34;10.1.1.3\u0026#34; åŸå›  \u0026amp; è§£æ±ºæ–¹æ³•\rThe problem is that Docker (which is installed on host machine) changes the default policy for the FORWARD chain in iptables to DROP. ğŸ˜‘\nTo fix the issue, a rule to allow traffic has to be added. Running this command added the required rule:\n1# from host 2iptables -I FORWARD -i br0 -o br0 -j ACCEPT Reference\rhttps://askubuntu.com/questions/1134115/kvm-guest-cant-access-internet\rhttps://www.reddit.com/r/linuxadmin/comments/bdy6sz/kvm_guest_cant_access_internet/\r","date":"2022-02-08T20:46:00+00:00","updated":"2022-02-08T20:46:00+00:00"},{"objectID":"1644346680","permalink":"/post/os-centos-crash-and-analysis-kexec-kdump/centos-crash-analysis/","title":"[CentOS] Crash Analysis (kexec \u0026 kdump)","content":"åŸç†\rkexecï¼ˆkernel executionï¼‰æ˜¯ Linux æ ¸å¿ƒçš„ä¸€ç¨®æ©Ÿåˆ¶ï¼Œå…è¨±å¾ç•¶å‰åŸ·è¡Œçš„æ ¸å¿ƒå•Ÿå‹•æ–°æ ¸å¿ƒã€‚kexec æœƒç¹éç³»çµ±éŸŒé«” (BIOS or UEFI) çš„åˆå§‹åŒ–ï¼Œä¸¦ç›´æ¥å°‡æ–°æ ¸å¿ƒè¼‰å…¥åˆ°ä¸»è¨˜æ†¶é«”åŸ·è¡Œï¼Œå¯ä»¥å¯¦ç¾ç³»çµ±çš„å¿«é€Ÿé‡å•Ÿã€‚\nkdump æ˜¯ä¸€ç¨®åŸºæ–¼ kexec å¯¦ç¾çš„æ ¸å¿ƒå´©æ½°è½‰å„²æŠ€è¡“ã€‚ç•¶ç³»çµ±å´©æ½°æ™‚ï¼Œkdump ä½¿ç”¨ kexec å•Ÿå‹•å¦ä¸€å€‹æ ¸å¿ƒä¸¦ç²å¾—è¨˜æ†¶é«”è½‰å„²ï¼Œä¸¦ä½¿ç”¨å®ƒä¾†åŒ¯å‡ºå’Œå„²å­˜è¨˜æ†¶é«”è½‰å„²ä¾†ä¿æŒç³»çµ±ä¸€è‡´æ€§ï¼Œæœ€çµ‚æœƒåŒ¯å‡ºä¸€å€‹è¨˜æ†¶é«”æ˜ åƒï¼ˆä¹Ÿç¨±ç‚º vmcoreï¼‰ï¼Œè©²æ˜ åƒå¯ç”¨æ–¼é™¤éŒ¯å’Œç¢ºå®šå´©æ½°çš„åŸå› ã€‚\ncrash æ˜¯ä¸€å€‹è¢«å»£æ³›æ‡‰ç”¨çš„æ ¸å¿ƒå´©æ½°è½‰å„²æª”æ¡ˆåˆ†æå·¥å…·ï¼Œå¯ä»¥é€šé crash åˆ†æ vmcore æª”æ¡ˆä»¥åˆ†æå‡ºæ ¸å¿ƒå´©æ½°çš„åŸå› ã€‚\nå®‰è£\r1. æª¢è¦–ç³»çµ±æ ¸å¿ƒ\r1[root@kvm2 ~]# uname -r 23.10.0-1127.el7.x86_64 å¦å¤–èªªæ˜ä¸€ä¸‹ç›®å‰ä½¿ç”¨çš„ CentOS ç‰ˆæœ¬ç‚º 7.9\n1[root@kvm2 ~]# cat /etc/centos-release 2CentOS Linux release 7.9.2009 (Core) 2. å®‰è£ kexec \u0026amp;amp; crash\r1yum install crash kexec-tools -y kdump é€šå¸¸åœ¨å®‰è£ CentOS æ™‚å°±æœƒé è¨­é–‹å•Ÿäº†\nNote\nç¶²è·¯ä¸Šæœ‰äº›æ•™å­¸æœƒå¯«éœ€è¦ä¿®æ”¹ grub çš„ crashkernel é ç•™è¨˜æ†¶é«”å¤§å°ã€ä»¥åŠæ›´æ–° kdump.conf é…ç½®ï¼Œä½†ä¹Ÿå¯ä»¥ä¸é…ç½®ã€ä¸æ›´æ–°ï¼›çš†ä¿æŒé è¨­ã€‚ åœ¨ Linux 4.15 ä¸­é è¨­ä½¿ç”¨ crashkernel=autoï¼Œkernel å°‡é€šé memblock_find_in_range è‡ªå‹•è¨ˆç®—æ ¸å¿ƒçš„è¨˜æ†¶é«”å¤§å°å’Œèµ·å§‹ä½ç½®ï¼Œä½†æ˜¯æœ‰äº›æ ¸å¿ƒå¯èƒ½ä¸æ”¯æŒï¼Œéœ€è¦æ‰‹å‹•æŒ‡å®šã€‚ å¦‚æœè¦è‡ªå·±æ‰‹å‹•è¨­å®šï¼Œå¯åƒè€ƒ é€™ç¯‡æ•™å­¸ 3. å®‰è£ kernel-debuginfo\rä½¿ç”¨ crash é™¤éŒ¯æ ¸å¿ƒè½‰å„²æª”æ¡ˆï¼Œéœ€è¦å®‰è£ crash å·¥å…·å’Œæ ¸å¿ƒé™¤éŒ¯å·¥å…· kernel-debuginfoã€‚ä¸‹è¼‰é€£çµ http://debuginfo.centos.org/7/x86_64/\r1wget â€¦","date":"2022-02-08T18:58:00+00:00","updated":"2022-02-08T18:58:00+00:00"},{"objectID":"1643219160","permalink":"/post/programming-python-golang-selenium-screenshot-specific-area/screenshot-specific-area-by-selenium/","title":"[Python \u0026 Golang] Selenium Screenshot to the Specific Area","content":"æœ¬ç¯‡æ–‡ç« ç´€éŒ„å¦‚ä½•ä½¿ç”¨ python ä»¥åŠ golang æ”¹å¯«çš„ seleniumï¼Œè¢å¹•æˆªåœ–æŒ‡å®šç¶²å€çš„ç‰¹å®šç¯„åœä¸¦å­˜æˆåœ–ç‰‡ã€‚\nç›®æ¨™\ré è¨ˆçˆ¬å– selenium å®˜ç¶²\rçš„ project é é¢ï¼Œä¸¦æ“·å–æŒ‡å®šç¯„åœå­˜æˆåœ–ç‰‡ã€‚ Python Sample Code\r1from PIL import Image 2import time 3from selenium import webdriver 4from selenium.webdriver.chrome.options import Options 5 6print(\u0026#34;é–‹å§‹çˆ¬å–\u0026#34;) 7 8if __name__ == \u0026#34;__main__\u0026#34;: 9 options = Options() 10 options.add_argument(\u0026#39;--headless\u0026#39;) 11 options.add_argument(\u0026#39;--no-sandbox\u0026#39;) 12 options.add_argument(\u0026#39;lang=zh_TW.UTF-8\u0026#39;) 13 driver = webdriver.Chrome(\u0026#39;./chromedriver\u0026#39;, options=options) 14 driver.set_window_size(1400, 1500) # è¨­å®šè¦–çª—å¤§å° 15 16 driver.get(\u0026#34;https://www.selenium.dev/projects/\u0026#34;) 17 time.sleep(1) 18 19 driver.save_screenshot(\u0026#34;./scrnsht.png\u0026#34;) 20 21 # crop curve table only 22 ele = driver.find_elements_by_xpath(\u0026#34;/html/body/div/main/div[1]/div\u0026#34;) 23 24 left = ele[0].location[\u0026#39;x\u0026#39;] 25 top = ele[0].location[\u0026#39;y\u0026#39;] 26 right = left + ele[0].size[\u0026#39;width\u0026#39;] 27 bottom = top + ele[0].size[\u0026#39;height\u0026#39;] 28 29 im = Image.open(\u0026#34;./scrnsht.png\u0026#34;) 30 im = im.crop((left, top, right, bottom)) 31 im.save(\u0026#34;./crop.png\u0026#34;) 32 33 driver.quit() 34 35print(\u0026#34;çˆ¬å–å®Œæˆ\u0026#34;) Golang(tebeka/selenium) Sample Code\r1package main 2 3import ( 4\t\u0026#34;fmt\u0026#34; 5\t\u0026#34;image\u0026#34; 6\t\u0026#34;image/png\u0026#34; 7\t\u0026#34;io/ioutil\u0026#34; 8 9\t\u0026#34;os\u0026#34; 10\t\u0026#34;time\u0026#34; 11 12\t\u0026#34;github.com/tebeka/selenium\u0026#34; 13\t\u0026#34;github.com/tebeka/selenium/chrome\u0026#34; 14) 15 16func main() { 17 18\topts := []selenium.ServiceOption{ 19\tselenium.Output(os.Stderr), // Output debug information to STDERR 20\t} 21\tservice, err := selenium.NewChromeDriverService(\u0026#34;/home/nexdata/chromedriver\u0026#34;, 9515, opts...) 22\tif err != nil { 23\tfmt.Printf(\u0026#34;Error starting the ChromeDriver server: %v\u0026#34;, err) 24\t} 25\tdefer service.Stop() 26 27\t// call browser 28\tcaps := selenium.Capabilities{ 29\t\u0026#34;browserName\u0026#34;: \u0026#34;chrome\u0026#34;, 30\t} 31\t// set chrome arguments 32\tchromeCaps := chrome.Capabilities{ 33\tArgs: []string{ 34\t\u0026#34;--headless\u0026#34;, // do not open the browser (run in background) 35\t\u0026#34;--no-sandbox\u0026#34;, // allow non-root to execute chrome 36\t\u0026#34;--disable-deb-shm-usage\u0026#34;, 37\t\u0026#34;--window-size=1400,1500\u0026#34;, 38\t//\u0026#34;--start-maximized\u0026#34;, 39\t}, 40\t} 41\tcaps.AddChrome(chromeCaps) 42 43\t// connect to the webdriver instance which running locally 44\twd, err := selenium.NewRemote(caps, \u0026#34;http://127.0.0.1:9515/wd/hub\u0026#34;) 45\tif err != nil { 46\tfmt.Printf(\u0026#34;connect to the webDriver faild: %v\u0026#34;, err) 47\t} 48\t// delay closing Chrome 49\tdefer wd.Quit() 50 51\t// connect to the target website 52\tif err := wd.Get(\u0026#34;https://www.selenium.dev/projects/\u0026#34;); err != nil { 53\tfmt.Printf(\u0026#34;connect to the reflow server failed: %v\u0026#34;, err) 54\t} 55 56\ttime.Sleep(time.Duration(1) * time.Second) 57 58\tele, err := wd.FindElement(selenium.ByXPATH, \u0026#34;/html/body/div/main/div[1]/div\u0026#34;) 59\tif err != nil { 60\tfmt.Printf(\u0026#34;target element doesn\u0026#39;t exist!\u0026#34;) 61\t} 62\tscrnsht, _ := wd.Screenshot() 63\tioutil.WriteFile(\u0026#34;scrnsht.png\u0026#34;, scrnsht, 0666) 64\tloc, _ := ele.Location() 65\tsz, _ := ele.Size() 66\t// fmt.Println(loc) 67\t// fmt.Println(sz) 68\tfile, _ := os.Open(\u0026#34;./scrnsht.png\u0026#34;) 69\tdefer file.Close() 70\timg, _ := png.Decode(file) 71\tsub_image := img.(interface { 72\tSubImage(r image.Rectangle) image.Image 73\t}).SubImage(image.Rect(loc.X, loc.Y, loc.X+sz.Width, loc.Y+sz.Height)) 74\tfile, _ = os.Create(\u0026#34;./crop.png\u0026#34;) 75\tpng.Encode(file, sub_image) 76 77\tfmt.Println(\u0026#34;çˆ¬å–å®Œæˆ\u0026#34;) 78} Result\rscrnsht.png\rcrop.png\r","date":"2022-01-26T17:46:00+00:00","updated":"2022-01-26T17:46:00+00:00"},{"objectID":"1643045220","permalink":"/post/devops-selenium-chrome-docker-img/build-selenium-chrome-docker-image/","title":"[Docker] åŒ… Selenium Chrome Docker Image","content":"ç´€éŒ„ä¸€ä¸‹æŠŠ golang æ”¹å¯«çš„ selenium çˆ¬èŸ²ç¨‹å¼åŒ…æˆ docker image é‡åˆ°çš„å•é¡Œã€‚\næœ€çµ‚çš„ Dockerfile\rChrome è·Ÿ chromedrive ç«Ÿç„¶éƒ½å¯ä»¥é€é apk å®‰è£ï¼Œæ–¹ä¾¿åˆè¼•é¬† ğŸ‘\n1FROM golang:1.15.3-alpine3.12 AS build 2WORKDIR / 3COPY . . 4RUN CGO_ENABLED=0 go build -o /grabreflow -ldflags=\u0026amp;#34;-s -w\u0026amp;#34; 5 6 7FROM alpine:edge 8WORKDIR / 9COPY ./config /config 10COPY ./view /view 11COPY --from=build /grabreflow /grabreflow 12RUN apk add --no-cache chromium chromium-chromedriver \u0026amp;amp;\u0026amp;amp; apk add wqy-zenhei --update-cache --repository https://nl.alpinelinux.org/alpine/edge/testing 13ENTRYPOINT [ \u0026amp;#34;/grabreflow\u0026amp;#34; ] è¸©å‘ç´€éŒ„\r1. ä½¿ç”¨ selenium å®˜æ–¹ docker image standalone-chrome æ™‚ç„¡æ³•è®€å¯«æª”æ¡ˆ\rDockerfile\r1FROM golang:1.15.3-alpine3.12 AS build 2WORKDIR / 3COPY . . 4RUN CGO_ENABLED=0 go build -o /grabreflow -ldflags=\u0026amp;#34;-s -w\u0026amp;#34; 5 6FROM selenium/standalone-chrome 7WORKDIR / 8COPY ./config /config 9COPY ./view /view 10COPY --from=build /grabreflow /grabreflow 11COPY ./chromedriver /chromedriver 12ENTRYPOINT [ \u0026amp;#34;/grabreflow\u0026amp;#34; ] 1docker build -t â€¦","date":"2022-01-24T17:27:00+00:00","updated":"2022-01-24T17:27:00+00:00"},{"objectID":"1642590180","permalink":"/post/data-oracle-11g-xe-cdc-debezium/install-oracle-11g-and-establish-cdc-by-debezium/","title":"[Oracle] Install Oracle 11g XE and Establish CDC by Debezium","content":"Debezium\rç°¡ä»‹\rDebezium æ˜¯ä¸€å€‹ç”± RedHat é–‹æºçš„åŸºæ–¼è³‡æ–™åº«è®Šæ›´æ—¥èªŒçš„å¯¦æ™‚è®Šæ›´æ•¸æ“šæ•ç²ï¼ˆCDCï¼‰å·¥å…·ï¼Œæ§‹å»ºåœ¨ Apache Kafka ä¹‹ä¸Šï¼Œæ˜¯ Apache Kafka Connect çš„ Source Connectorï¼Œå¯ä»¥å¯¦æ™‚ç²å–è¡Œç´šåˆ¥ï¼ˆrow-levelï¼‰è³‡æ–™çš„æ›´æ”¹äº‹ä»¶ï¼ˆINSERTã€UPDATE å’Œ DELETEï¼‰ä¸¦åŒæ­¥åˆ° Kafkaã€‚ç›®å‰æ”¯æ´çš„å¸¸è¦‹è³‡æ–™åº«æœ‰ MySQL(binlog)ã€Oracle(logminer or xstream)ã€MongoDB(change streams)ã€PostgreSQL(logical replication stream mode)ã€SQL Server(transaction log)\u0026amp;hellip;ç­‰ã€‚æœ¬æ–‡ç¯„ä¾‹æ˜¯ä½¿ç”¨ Oracle çš„ logminer æ—¥èªŒé€é Debezium ç²å–æŒ‡å®šè³‡æ–™åº«çš„è®Šæ›´äº‹ä»¶ã€‚\nCDC\rCDC å…¨ç¨±æ˜¯ Change Data Capture è®Šæ›´æ•¸æ“šæ•ç²ï¼Œå®ƒæ˜¯ä¸€å€‹æ¯”è¼ƒå»£ç¾©çš„æ¦‚å¿µï¼Œåªè¦èƒ½æ•ç²è®Šæ›´çš„è³‡æ–™ï¼Œéƒ½å¯ä»¥ç¨±ç‚º CDCï¼Œä¸»è¦æœ‰åŸºæ–¼æŸ¥è©¢çš„ CDC å’ŒåŸºæ–¼æ—¥èªŒçš„ CDCã€‚\nåŸºæ–¼æŸ¥è©¢çš„ CDC åŸºæ–¼æ—¥èªŒçš„ CDC æ¦‚å¿µ æ¯æ¬¡æ•ç²è®Šæ›´ç™¼èµ· Select æŸ¥è©¢é€²è¡Œå…¨è¡¨æƒæï¼Œéæ¿¾å‡ºæŸ¥è©¢ä¹‹é–“è®Šæ›´çš„è³‡æ–™ è®€å–è³‡æ–™å„²å­˜ç³»çµ±çš„ log ï¼Œä¾‹å¦‚ Mysql è£¡é¢çš„ binlogæŒçºŒç›£æ§ é–‹æºç”¢å“ Sqoop, Kafka JDBC Source Canal, Maxwell, Debezium åŸ·è¡Œæ¨¡å¼ Batch Streaming æ•ç²æ‰€æœ‰è³‡æ–™çš„è®ŠåŒ– X O ä½å»¶é²ï¼Œä¸å¢åŠ è³‡æ–™åº«è² è¼‰ X O ä¸ä¾µå…¥æ¥­å‹™ï¼ˆLastUpdatedæ¬„ä½ï¼‰ X O æ•ç²åˆªé™¤äº‹ä»¶å’ŒèˆŠè¨˜éŒ„çš„ç‹€æ…‹ X O æ•ç²èˆŠè¨˜éŒ„çš„ç‹€æ…‹ X O å®‰è£ Oracle 11g Express Edition\rCreate Container\r1docker run -d -it --name oracle -p 1521:1521 -e ORACLE_ALLOW_REMOTE=true -v oracle:/u01/app/oracle --restart=always wnameless/oracle-xe-11g-r2 Connect to the Database\r1$ docker ps 2CONTAINER ID â€¦","date":"2022-01-19T11:03:00+00:00","updated":"2022-01-19T11:03:00+00:00"},{"objectID":"1641830580","permalink":"/post/programming-golang-tebeka-selenium/golang-tebeka-selenium/","title":"[golang] ä½¿ç”¨ tebeka selenium çˆ¬èŸ²æ¨¡æ“¬æ“æ§ç¶²é ","content":"æœ€è¿‘ç¢°åˆ°ä¸€å€‹éœ€å¾ç¶²é å»æ“·å–åœ–ç‰‡çš„éœ€æ±‚ï¼ŒåŸæœ¬æ‹¿åˆ°çš„ sample code æ˜¯ç”± python çš„ selenium çˆ¬çš„ï¼Œä½†å¾Œä¾†ç™¼ç¾æœ‰å¤§ç¥å°‡æ­¤åŒ…æ”¹å¯«æˆ golang tebeka/selenium\rï¼Œæ‰€ä»¥å°±è©¦è‘—æ”¹å¯«çœ‹çœ‹ï¼Œåœ¨æ­¤ç´€éŒ„ä¸€ä¸‹ã€‚\nç›®æ¨™ç¶²é çˆ¬å–éœ€æ±‚\rç›®æ¨™ç¶²é æ˜¯ä¸€å€‹çˆæº«ç›£æ§çš„ç¶²ç«™ï¼Œä»»å‹™æ˜¯çˆ¬å–æŒ‡å®šç”¢å“æ‰€ç¶“çš„è¿´ç„Šçˆçš„ç”Ÿç”¢æ­·å²ç´€éŒ„ã€‚éœ€è¦æ¨¡æ“¬çš„æ­¥é©Ÿå¦‚ä¸‹\næŸ¥è©¢é é¢éœ€å…ˆè¼¸å…¥çš„åƒæ•¸æœ‰ï¼š ä¸‹æ‹‰å¼é¸å–®é¸å–ç·šåˆ¥ æ–‡å­—æ¡†æ™‚é–“ç¯„åœ ï¼ˆé–‹å§‹èˆ‡çµæŸï¼‰ æ–‡å­—æ¡†ç”¢å“ç·¨è™Ÿ é»é¸æŸ¥è©¢æŒ‰éˆ• å›å‚³æœå°‹çµæœè¡¨æ ¼ï¼Œé»é¸è¡¨æ ¼çš„æ¯ä¸€åˆ—çš„ä»»æ„ä½ç½®/æ¬„ä½ å½ˆå‡ºä¸€å€‹ modal è¦–çª—ï¼Œå…§å®¹ç‚ºè¢«é»é¸åˆ—çš„è©³ç´°çˆæº«åœ–è¡¨ æ“·å–è¢å¹•ä¸¦è£åˆ‡åœ–ç‰‡åˆ°ç›®æ¨™ç¯„åœå­˜åˆ°æœ¬æ©Ÿ é»é¸ OK æŒ‰éˆ•ä»¥é—œé–‰ modal è¦–çª— ç¹¼çºŒé»é¸ä¸‹åˆ—ï¼Œé‡è¤‡ 3ï½6 æ­¥é©Ÿï¼Œç›´åˆ°è¡¨æ ¼çš„æœ€å¾Œä¸€åˆ—è³‡è¨Š é‹è¡Œç’°å¢ƒ\rUbuntu v20.04 Golang v1.15 Google Chrome v96.0.4664.110 äº‹å‰æº–å‚™\ré ˆåœ¨ ubuntu ä¸‹è¼‰ Chrome ä»¥åŠç›¸å°æ‡‰çš„ chromedriverã€‚\næ›´æ–°ç³»ç»Ÿ 1sudo apt-get update å®‰è£ç›¸é—œçš„å¿…è¦å¥—ä»¶ 1sudo apt-get install libxss1 libappindicator1 libindicator7 2# å®‰è£ xvfb ä»¥ä¾¿å¯ä»¥ç”¨ headless æ¨¡å¼ï¼ˆè·‘åœ¨èƒŒæ™¯ï¼Œä¸é–‹å•Ÿç€è¦½å™¨ï¼‰é‹è¡Œ Chrome 3sudo apt-get install xvfb ä¸‹è¼‰å®‰è£åŒ… 1wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb å®‰è£… chrome 1sudo apt-get install dpkg 2# å®‰è£…chromeï¼Œå®‰è£éç¨‹ä¸­ç”±æ–¼ç¼ºå°‘ä¸€äº›ä¾è³´è€Œå ±éŒ¯æ˜¯æ­£å¸¸çš„ 3sudo dpkg -i google-chrome*.deb 4#è‡ªå‹•å®‰è£ä¸Šä¸€æ­¥ç¼ºå°‘çš„ä¾è³´ 5sudo apt-get install -f ä¸‹è¼‰ chromedriver ç¢ºèªå®‰è£çš„ Chrome ç‰ˆæœ¬ï¼Œä¸¦ä¸‹è¼‰èˆ‡ä¹‹åŒ¹é…çš„ chromedriverã€‚ 1wget -N â€¦","date":"2022-01-10T16:03:00+00:00","updated":"2022-01-10T16:03:00+00:00"},{"objectID":"1641478200","permalink":"/post/programming-golang-mod-replace-for-fork-repo/go-mod-replace-fork-repo/","title":"[golang]  go mod replace è§£å†³ fork repo åŒ¯å…¥å•é¡Œ","content":"é–‹ç™¼ç¨‹å¼æ™‚ä½¿ç”¨ github ä¸Šå„å¤§ç¥é–‹ç™¼çš„ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œæœ‰æ™‚å€™æœ‰è‡ªå·±çš„é¡å¤–éœ€æ±‚éœ€è¦é€²è¡Œæ”¹é€ ï¼Œæ‰€ä»¥ fork åˆ°è‡ªå·±çš„ github ä¿®æ”¹å¾Œï¼Œå† import åˆ°è‡ªå·±çš„å°ˆæ¡ˆä¸­ã€‚ä½†ç•¶åœ¨é€²è¡Œæ§‹å»ºçš„æ™‚å€™ï¼Œå ±éŒ¯å¦‚ä¸‹ï¼š\n1go get: github.com/bbb/xxx@v1.0.2: parsing go.mod: 2 module declares its path as: github.com/aaa/xxx 3 but was required as: github.com/bbb/xxx è§£å†³æ–¹å¼\rä½¿ç”¨ replace å°‡æ–°çš„ package å»æ›¿æ›å¦ä¸€å€‹ packageï¼Œä»–å€‘å¯ä»¥æ˜¯ä¸åŒçš„ packageï¼Œä¹Ÿå¯ä»¥æ˜¯åŒä¸€å€‹ package çš„ä¸åŒç‰ˆæœ¬ã€‚ åŸºæœ¬èªæ³•ï¼š\n1$ go mod edit -replace=old[@v]=new@v æ–°çš„ package å¾Œé¢çš„ version ä¸å¯çœç•¥ï¼Œå¯ä»¥æ˜¯ release ç‰ˆæœ¬è™Ÿæˆ–æ˜¯ git çš„æäº¤è™Ÿï¼ˆcommit-idï¼‰ã€‚ ï¼ˆeditæ‰€æœ‰æ“ä½œéƒ½éœ€è¦ç‰ˆæœ¬ tagï¼‰\nä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¾‘ go.mod æ–‡ä»¶ï¼š\n1module test 2 3go 1.16 4 5require ( 6\tgithub.com/gin-contrib/cors v1.3.1 7\tgithub.com/gin-gonic/gin v1.7.7 8\tgithub.com/sirupsen/logrus v1.8.1 9\tgithub.com/spf13/viper v1.10.1 10\tgithub.com/tebeka/selenium v0.9.9 11\tgopkg.in/alecthomas/kingpin.v2 v2.2.6 12) 13 14replace github.com/tebeka/selenium =\u0026gt; github.com/ulahsieh/selenium v0.9.10-0.20220105013444-c7d3f285d0e7 15// æ³¨æ„ç‰ˆæœ¬è™Ÿæ˜¯ç”¨ç©ºæ ¼éš”é–‹ å®Œæˆå¾Œåœ¨ç¨‹å¼ä¸‹é¢è·‘ go mod tidy ç²å–æ–°çš„å¥—ä»¶ä¸¦å–ä»£èˆŠçš„ï¼Œå°±å¤§åŠŸå‘Šæˆå•¦ï¼\nReference\rhttps://github.com/Bpazy/blog/issues/164\rhttps://www.cnblogs.com/sunsky303/p/12150575.html\r","date":"2022-01-06T14:10:00+00:00","updated":"2022-01-06T14:10:00+00:00"},{"objectID":"1641416700","permalink":"/post/programming-golang-notepad-highlight/golang-highlight-on-notepad/","title":"ç‚º Notepad++ åŠ ä¸Š golang èªæ³•é«˜äº®","content":"åŸç”Ÿ Notepad++ æ²’æœ‰æ”¯æ´ golang çš„èªæ³•ï¼Œåœ¨æ­¤ç´€éŒ„ä¸€ä¸‹è¦æ€éº¼åœ¨ Notepad ä¸­åŠ å…¥è‡ªå®šç¾©çš„ golang ç¨‹å¼èªè¨€çš„èªæ³•é«˜äº®(ä½¿ç”¨æš—é»‘æ¨¡å¼ Obsidian)ã€‚ç›®å‰ notepad ä½¿ç”¨çš„ç‰ˆæœ¬ç‚º v8.1.9.3ã€‚\nå®šç¾©ä½¿ç”¨è€…è‡ªè¨‚èªè¨€\råœ¨å·¥å…·åˆ—ä¸­é»é¸ èªè¨€\u0026amp;gt;è‡ªè¨‚ç¨‹å¼èªæ³•\u0026amp;gt;é–‹å•Ÿè‡ªè¨‚èªæ³•æ¨£å¼è³‡æ–™å¤¾ï¼Œåœ¨è©²è³‡æ–™ä¸‹æ–°å¢ä¸€å€‹ userDefineLang-Go-Obsidian.xml æª”æ¡ˆï¼Œå…§å®¹ç‚ºä»¥ä¸‹ xml ä»£ç¢¼ã€‚\n1\u0026amp;lt;NotepadPlus\u0026amp;gt; 2 \u0026amp;lt;UserLang name=\u0026amp;#34;Go\u0026amp;#34; ext=\u0026amp;#34;go\u0026amp;#34; udlVersion=\u0026amp;#34;2.1\u0026amp;#34;\u0026amp;gt; 3 \u0026amp;lt;Settings\u0026amp;gt; 4 \u0026amp;lt;Global caseIgnored=\u0026amp;#34;no\u0026amp;#34; allowFoldOfComments=\u0026amp;#34;yes\u0026amp;#34; foldCompact=\u0026amp;#34;no\u0026amp;#34; forcePureLC=\u0026amp;#34;0\u0026amp;#34; decimalSeparator=\u0026amp;#34;0\u0026amp;#34; /\u0026amp;gt; 5 \u0026amp;lt;Prefix Keywords1=\u0026amp;#34;no\u0026amp;#34; Keywords2=\u0026amp;#34;no\u0026amp;#34; Keywords3=\u0026amp;#34;no\u0026amp;#34; Keywords4=\u0026amp;#34;no\u0026amp;#34; Keywords5=\u0026amp;#34;no\u0026amp;#34; Keywords6=\u0026amp;#34;no\u0026amp;#34; Keywords7=\u0026amp;#34;no\u0026amp;#34; Keywords8=\u0026amp;#34;no\u0026amp;#34; /\u0026amp;gt; 6 \u0026amp;lt;/Settings\u0026amp;gt; 7 \u0026amp;lt;KeywordLists\u0026amp;gt; 8 \u0026amp;lt;Keywords name=\u0026amp;#34;Comments\u0026amp;#34;\u0026amp;gt;00// 01 02 03/* 04*/\u0026amp;lt;/Keywords\u0026amp;gt; 9 \u0026amp;lt;Keywords name=\u0026amp;#34;Numbers, prefix1\u0026amp;#34;\u0026amp;gt;\u0026amp;lt;/Keywords\u0026amp;gt; 10 \u0026amp;lt;Keywords name=\u0026amp;#34;Numbers, prefix2\u0026amp;#34;\u0026amp;gt;0X 0x 0\u0026amp;lt;/Keywords\u0026amp;gt; 11 \u0026amp;lt;Keywords â€¦","date":"2022-01-05T21:05:00+00:00","updated":"2022-01-05T21:05:00+00:00"},{"objectID":"1637516160","permalink":"/post/kubernets-ca-expired/","title":"Unable to connect to the server: x509: certificate has expired or is not yet valid","content":"åœ¨ä¸‹ kubectl æ™‚å‡ºç¾ Unable to connect to the server: x509: certificate has expired or is not yet valid çš„éŒ¯èª¤ï¼ŒåŸå› æ˜¯ kubernetes apiserver è­‰æ›¸å·²éæœŸï¼Œkubernetes çš„ apiServer èˆ‡ kubelet çš„è¨ªå•æˆæ¬Šè­‰æ›¸æ˜¯ä¸€å¹´ï¼Œå®˜æ–¹è¡¨ç¤ºé€šéé€™ç¨®æ–¹å¼ï¼Œè®“ç”¨æˆ¶ä¸æ–·çš„å‡ç´šç‰ˆæœ¬ã€‚\nç›®å‰æœ‰å¹¾ç¨®è§£æ±ºæ–¹å¼ï¼š\né‡æ–°ç”Ÿæˆè­‰æ›¸å–ä»£éæœŸçš„è­‰æ›¸ (æœ¬æ¬¡ä½œæ³•) å‡ç´šé›†ç¾¤ä»¥è‡ªå‹•æ›´æ–°è­‰æ›¸ éƒ¨å±¬ä¸€å¥—æ–°çš„ç’°å¢ƒï¼Œå°‡æ¥­å‹™é·ç§»éå» å»æ‰è­‰æ›¸é©—è­‰åŠŸèƒ½ (ä¸å®‰å…¨ä¸”ä¸ç§‘å­¸ï¼Œéœ€è¦è‡ªå·±æ”¹ source code) æŸ¥çœ‹è­‰æ›¸çš„æœ‰æ•ˆæ—¥æœŸ\ré€é openssl ç›´æ¥æŸ¥è­‰æ›¸å…§å®¹\n1$ openssl x509 -in /etc/kubernetes/pki/apiserver.crt -noout -text | grep Not 2 Not Before: Nov 17 04:48:20 2020 GMT 3 Not After : Nov 17 04:48:20 2021 GMT æˆ–æ˜¯é€é kubeadm æª¢æŸ¥ Kubernetes ç’°å¢ƒè­‰æ›¸\n1$ kubeadm alpha certs check-expiration 2[check-expiration] Reading configuration from the cluster... 3[check-expiration] FYI: You can look at this config file with \u0026#39;kubectl -n kube-system get cm kubeadm-config -oyaml\u0026#39; 4[check-expiration] Error reading configuration from the Cluster. Falling back to default configuration 5 6W1118 09:51:35.880390 7092 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io] 7CERTIFICATE EXPIRES RESIDUAL TIME CERTIFICATE AUTHORITY EXTERNALLY MANAGED 8admin.conf Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; no 9apiserver Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; ca no 10apiserver-etcd-client Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; etcd-ca no 11apiserver-kubelet-client Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; ca no 12controller-manager.conf Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; no 13etcd-healthcheck-client Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; etcd-ca no 14etcd-peer Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; etcd-ca no 15etcd-server Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; etcd-ca no 16front-proxy-client Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; front-proxy-ca no 17scheduler.conf Nov 17, 2021 04:48 UTC \u0026lt;invalid\u0026gt; no 18 19CERTIFICATE AUTHORITY EXPIRES RESIDUAL TIME EXTERNALLY MANAGED 20ca Nov 15, 2030 04:48 UTC 8y no 21etcd-ca Nov 15, 2030 04:48 UTC 8y no 22front-proxy-ca Nov 15, 2030 04:48 UTC 8y no ç¶“æŸ¥çœ‹ k8s master çµ„ä»¶è­‰æ›¸éƒ½éæœŸäº†ã€‚\næ›´æ–°è­‰æ›¸\rå‚™ä»½èˆŠæœ‰çš„é…ç½®æ–‡ä»¶èˆ‡è­‰æ›¸ 1$ cp -rf /etc/kubernetes /etc/kubernets.bak æ›´æ–°è­‰æ›¸ 1$ kubeadm alpha certs renew all 2[renew] Reading configuration from the cluster... 3[renew] FYI: You can look at this config file with \u0026#39;kubectl -n kube-system get cm kubeadm-config -oyaml\u0026#39; 4[renew] Error reading configuration from the Cluster. Falling back to default configuration 5 6W1118 11:11:52.322016 26585 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io] 7certificate embedded in the kubeconfig file for the admin to use and for kubeadm itself renewed 8certificate for serving the Kubernetes API renewed 9certificate the apiserver uses to access etcd renewed 10certificate for the API server to connect to kubelet renewed 11certificate embedded in the kubeconfig file for the controller manager to use renewed 12certificate for liveness probes to healthcheck etcd renewed 13certificate for etcd nodes to communicate with each other renewed 14certificate for serving etcd renewed 15certificate for the front proxy client renewed 16certificate embedded in the kubeconfig file for the scheduler manager to use renewed é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶\né€™äº›é…ç½®æ–‡ä»¶ä¸­åŒ…å«è­‰æ›¸ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°ç”Ÿæˆ\n1$ rm -rf /etc/kubernetes/*.conf 2$ kubeadm init phase kubeconfig all --apiserver-advertise-address 10.1.5.21 æ›´æ–°é…ç½®èº«ä»½èªè­‰çš„ $HOME/.kube/config æª”æ¡ˆ\nå°‡é‡æ–°ç”Ÿæˆæ–¼ /etc/kubernetes ä¸‹çš„ admin.conf æª”æ¡ˆè¦†è“‹åŸå…ˆçš„ ~/.kube/config 1$ cp -i /etc/kubernetes/admin.conf $HOME/.kube/config 2$ chown $(id -u):$(id -g) $HOME/.kube/config é‡æ–°å•Ÿå‹• kubelet \u0026amp; docker service 1$ systemctl restart kubelet 2$ systemctl restart docker é‡æ–°ä½¿ç”¨ kubectl è¨ªå•é›†ç¾¤ 1$ kubectl get nodes 2NAME STATUS ROLES AGE VERSION 3k8sm1 Ready master 365d v1.17.13 4k8sm2 Ready master 365d v1.17.13 5k8sm3 Ready master 365d v1.17.13 6k8sw1 Ready \u0026lt;none\u0026gt; 365d v1.17.13 7k8sw2 Ready \u0026lt;none\u0026gt; 365d v1.17.13 8k8sw3 Ready \u0026lt;none\u0026gt; 365d v1.17.13 å¦‚æœæ˜¯å¤š masterï¼Œä¸Šé¢çš„æ­¥é©Ÿåœ¨æ¯å€‹ master éƒ½è¦åš Reference\rhttps://stackoverflow.com/questions/56320930/renew-kubernetes-pki-after-expired\rhttps://cloud.tencent.com/developer/article/1832411\r","date":"2021-11-21T17:36:00+00:00","updated":"2021-11-21T17:36:00+00:00"},{"objectID":"1636369380","permalink":"/post/os-scp-exclude-specific-file/linux-scp-exclude-files/","title":"[Linux] SCP å‚³é€æ’é™¤ç‰¹å®šæª”æ¡ˆæˆ–è³‡æ–™å¤¾ (å¦‚ .git)","content":"Scp all files and folders to the remote server without copying .git \u0026amp; other dot files/folders:\n1cd sourceFolder 2scp -r [!.]* root@remoteServer:/root/targetForder The command means transfer all the files/folders * under current directory except [!] the files\u0026rsquo;/folders\u0026rsquo; named starting with .\n","date":"2021-11-08T11:03:00+00:00","updated":"2021-11-08T11:03:00+00:00"},{"objectID":"1635713400","permalink":"/post/blog-hexo-dark-mode/hexo-darkmode/","title":"[Hexo] è¨­å®šå¯åˆ‡æ›çš„ Dark Mode","content":"åœ¨ NexT ä¸»é¡Œä¸­å¼•å…¥ Darkmode.js ä»¥æ”¯æŒç¶²é çš„ Dark Modeã€‚\næ‰“é–‹ .\\themes\\next\\layout\\_scripts æ–‡ä»¶å¤¾å…§çš„ vendors.njk æ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ ä»¥ä¸‹ä»£ç¢¼ï¼š\n1\u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; 2\u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; 3\u0026lt;script\u0026gt; 4 function addDarkmodeWidget() { 5 const options = { 6 bottom: \u0026#39;64px\u0026#39;, // default: \u0026#39;32px\u0026#39; 7 right: \u0026#39;unset\u0026#39;, // default: \u0026#39;32px\u0026#39; 8 left: \u0026#39;32px\u0026#39;, // default: \u0026#39;unset\u0026#39; 9 time: \u0026#39;1s\u0026#39;, // default: \u0026#39;0.3s\u0026#39; 10 mixColor: \u0026#39;#fff\u0026#39;, // default: \u0026#39;#fff\u0026#39; 11 backgroundColor: \u0026#39;#fff\u0026#39;, // default: \u0026#39;#fff\u0026#39; 12 buttonColorDark: \u0026#39;#100f2c\u0026#39;, // default: \u0026#39;#100f2c\u0026#39; 13 buttonColorLight: \u0026#39;#fff\u0026#39;, // default: \u0026#39;#fff\u0026#39; 14 saveInCookies: true, // default: true, 15 label: \u0026#39;ğŸŒ“\u0026#39;, // default: \u0026#39;\u0026#39; 16 autoMatchOsTheme: true // default: true 17 } 18 const darkmode = new Darkmode(options); 19 darkmode.showWidget(); 20 } 21 window.addEventListener(\u0026#39;load\u0026#39;, addDarkmodeWidget); 22\u0026lt;/script\u0026gt; p.s. ç”¨æ­¤æ–¹å¼è¨­å®šæ™‚ï¼Œæ­¤ä»£ç¢¼å’Œåœ¨ Next ä¸­æ’å…¥èƒŒæ™¯åœ–ç‰‡ä»¥åŠé€æ˜åŒ–æœƒæœ‰è¡çªï¼Œä½†å‰›å¥½ç›®å‰éƒ½æ²’æœ‰è©²è¨­å®šï¼Œå°±ç›´æ¥å¥—ç”¨äº†ã€‚\n","date":"2021-10-31T20:50:00+00:00","updated":"2021-10-31T20:50:00+00:00"},{"objectID":"1635700980","permalink":"/post/blog-hexo-next-upgrade/hexo-and-next-upgrade/","title":"[Hexo] å‡ç´šè‡³ 5.x èˆ‡ NexT ä¸»é¡Œ 8.x","content":"Hexo å‡ç´š\rHexo ç‰ˆæœ¬åŠç³»çµ±æ’ä»¶å¯ä»¥é€é npm å¯¦ç¾ï¼Œè«‹æŒ‰ç…§ä¸‹åˆ—æ­¥é©ŸåŸ·è¡Œï¼š\n1# å…¨å±€å‡ç´š hexo-cli 2npm install hexo-cli -g 3 4# æª¢å¯Ÿå·²å®‰è£çš„æ’ä»¶(package.json)æ˜¯å¦å¯å‡ç´š 5npm install -g npm-check 6npm-check 7 8# å‡ç´šç³»çµ±ä¸­çš„æ’ä»¶ 9npm install -g npm-upgrade 10npm-upgrade 11 12# æ›´æ–°å…¨å±€æ’ä»¶ 13npm update -g 14npm update --save 15 16# æŸ¥çœ‹ hexo ç‰ˆæœ¬ï¼Œçœ‹æ˜¯å¦æœ‰å‡ç´šæˆåŠŸ 17hexo v æ›´æ–°å®Œæˆå¾Œæˆ‘å°±ç›´æ¥ä¸‹ hexo g äº†ï¼Œå› ç‚ºå‰å¾Œç‰ˆçš„é…ç½®æœ‰äº›è¨±å·®ç•°ï¼Œæ‰€ä»¥å ±éŒ¯ä¸é ˆç·Šå¼µï¼Œåªè¦æ ¹æ“šéŒ¯èª¤è¨Šæ¯ä¿®æ”¹å·² deprecated çš„é…ç½®é …ã€‚\n1# Deprecated 2external_link: true|false 3# New option 4external_link: 5 enable: true # Open external links in new tab 6 field: site # Apply to the whole site 7 exclude: \u0026#39;\u0026#39; 8 9# Deprecated 10use_date_for_updated: true 11# New option 12updated_option: date NexTå‡ç´š\rç”¨ä¸åŒæ–¼åŸå…ˆç‰ˆæœ¬çš„åå­—ï¼Œä¸‹è¼‰æ–°çš„ v8 å€‰åº« 1git clone https://github.com/next-theme/hexo-theme-next themes/next8 å¦‚æ­¤ï¼Œä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰çš„ NexT èˆŠç‰ˆç›®éŒ„çš„åŒæ™‚ä½¿ç”¨ next8 ç›®éŒ„ä¸­çš„æ–°ç‰ˆæœ¬ä¸»é¡Œã€‚\nåœ¨ hexo çš„ä¸»é…ç½®æ–‡ä»¶è¨­ç½®ä¸»é¡Œï¼š 1theme: next8 å¦‚æ­¤ï¼Œæ–°ä¸»é¡Œå°‡åœ¨ç”Ÿæˆç«™é»æ™‚è¢«åŠ è¼‰ã€‚å¦‚æœå‡ç´šé€”ä¸­é‡åˆ°äº†ä»»ä½•éŒ¯èª¤ã€æˆ–åªæ˜¯ä¸å–œæ­¡é€™ä¸€æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥éš¨æ™‚åˆ‡æ›å›èˆŠç‰ˆæœ¬ã€‚\næ¯”å°æ–°èˆŠä¸»é¡Œçš„ _config.ymlï¼Œé‡å°å®¢è£½åŒ–çš„æ¨£å¼é€²è¡Œè¨­å®šï¼Œå¦‚å­—é«”ã€icon\u0026hellip; Reference\rhttps://www.cylong.com/blog/2020/08/10/update-hexo-next/\r","date":"2021-10-31T17:23:00+00:00","updated":"2021-10-31T17:23:00+00:00"},{"objectID":"1635515280","permalink":"/post/devops-install-gitlab-by-docker-compose/install-gitlab-server-by-docker-compose/","title":"[Docker] ä½¿ç”¨ docker-compose å»ºç«‹ GitLab (w/ https)","content":"å®‰è£ docker \u0026amp;amp; docker compose\rè«‹åƒè€ƒä¹‹å‰çš„ç­†è¨˜\nInstall Docker \u0026amp;amp; Docker Compose on CentOS\rInstall Docker \u0026amp;amp; Docker Compose on Ubuntu18.04\ræº–å‚™è‡ªç°½æ†‘è­‰\rå»ºç«‹ ssl.conf è¨­å®šæª”\r1[req] 2prompt = no 3default_md = sha256 4default_bits = 2048 5distinguished_name = dn 6x509_extensions = v3_req 7 8[dn] 9C = TW 10ST = Taiwan 11L = Taipei 12O = ABC Inc. 13OU = IT Department 14emailAddress = ulahsieh@abc.com 15CN = 10.1.5.8 16 17[v3_req] 18subjectAltName = @alt_names 19 20[alt_names] 21DNS.1 = 10.1.5.8 22IP.1 = 10.1.5.8 [dn]Â å€æ®µ (\rDistinguished Name\r) ç‚ºæ†‘è­‰çš„ç›¸é—œè³‡è¨Š\nC: åœ‹ç¢¼ï¼Œè‡ºç£æ˜¯ TW ST: å· L: åœ°å€ O: çµ„ç¹”åç¨± OU: éƒ¨é–€åç¨± emailAddress: E-Mail CN: æ†‘è­‰åç¨±ï¼Œé€šå¸¸å¡«åŸŸååç¨± alt_namesÂ ç”¨ä¾†è¨­å®š SSL æ†‘è­‰çš„åŸŸåã€‚å¯ä»¥è¨­å®šå¾ˆå¤šçµ„ï¼Œä¹Ÿå¯ä»¥æŠŠå€ç¶²çš„ IP å¡«ä¸Šå»ã€‚\nç”¢ç”Ÿè‡ªç°½æ†‘è­‰èˆ‡ç§å¯†é‡‘é‘°\r1openssl req -x509 -new -nodes -sha256 -utf8 -days 3650 -newkey rsa:2048 -keyout gitlab.key -out gitlab.crt -config ssl.conf ç”¢ç”Ÿ stronger DHE parameters åŠ å¼· server å®‰å…¨æ€§\n1openssl dhparam -out dhparam.pem 2048 å®Œæˆå¾Œï¼Œç¸½å…±æœƒç”¢ç”Ÿå‡ºå…©å€‹æª”æ¡ˆï¼Œåˆ†åˆ¥æ˜¯ï¼š\nserver.keyÂ (ç§å¯†é‡‘é‘°) (ä½¿ç”¨ PEM æ ¼å¼) (ç„¡å¯†ç¢¼ä¿è­·) server.crtÂ (æ†‘è­‰æª”æ¡ˆ) (ä½¿ç”¨ PEM æ ¼å¼) dhparam.pem â€¦","date":"2021-10-29T13:48:00+00:00","updated":"2021-10-29T13:48:00+00:00"},{"objectID":"1635280020","permalink":"/post/kubernets-install-istio/","title":"ä½¿ç”¨ istio operator å®‰è£ Istio v1.11","content":"ä¸‹è¼‰ Istio\rä¸‹è¼‰è³‡æº\rç”¨è‡ªå‹•åŒ–å·¥å…·ä¸‹è¼‰ä¸¦æå–æœ€æ–°ç‰ˆæœ¬ï¼ˆLinux æˆ– macOSï¼‰ï¼š\n1$ curl -L https://istio.io/downloadIstio | sh - æˆ–æ˜¯ç”¨æŒ‡å®šåƒæ•¸ä¸‹è¼‰æŒ‡å®šçš„ã€ä¸åŒè™•ç†å™¨é«”ç³»çš„ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä¸‹è¼‰ x86_64 æ¶æ§‹çš„ã€1.6.8 ç‰ˆæœ¬çš„ Istio ï¼Œé‹è¡Œï¼š\n1$ curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.6.8 TARGET_ARCH=x86_64 sh - é€²å…¥ Istio åŒ…ç›®éŒ„\r1$ cd istio-1.11.4 å®‰è£ç›®éŒ„åŒ…å«ï¼š\nsamples/Â ç›®éŒ„ä¸‹çš„ç¤ºä¾‹æ‡‰ç”¨ç¨‹åº bin/Â ç›®éŒ„ä¸‹çš„Â [istioctl](https://www.bookstack.cn/read/istio-1.11-zh/af90c7c768b11bf8.md)Â å®¢æˆ·ç«¯äºŒé€²åˆ¶æ–‡ä»¶ è¨­å®š istioctl\rå°‡Â istioctlÂ å®¢æˆ·ç«¯åŠ å…¥åŸ·è¡Œè·¯å¾„ï¼ˆLinux or macOSï¼‰:\n1$ export PATH=$PWD/bin:$PATH éƒ¨ç½² Istio Operator\r1$ istioctl operator init æ­¤å‘½ä»¤é‹è¡Œ Operator åœ¨ istio-operator å‘½åç©ºé–“ä¸­å‰µå»ºä»¥ä¸‹è³‡æºï¼š\nOperator è‡ªå®šç¾©è³‡æºå®šç¾©ï¼ˆCRDï¼‰ Operator æ§åˆ¶å™¨çš„ deployment å°è±¡ ä¸€å€‹ç”¨ä¾†è¨ªå• Operator æŒ‡æ¨™çš„æœå‹™ Istio Operator é‹è¡Œå¿…é ˆçš„ RBAC è¦å‰‡ æŸ¥çœ‹å‰µå»ºçš„è³‡æº\n1kubectl get all -n istio-operator å®‰è£ Istio\rå¯ä»¥ä¾æ“š profile å®‰è£æŒ‡å®šçš„ istio å¥—ä»¶\n1$ kubectl create ns istio-system 2$ kubectl apply -f - \u0026lt;\u0026lt;EOF 3apiVersion: install.istio.io/v1alpha1 4kind: IstioOperator 5metadata: 6 namespace: istio-system 7 name: istiocontrolplane 8spec: 9 profile: demo 10EOF å„ç¨® profile çš„ yaml æª”æ”¾ç½®åœ¨ ./manifests/profiles ä¸‹ï¼Œå¯ä¾ç…§éœ€æ±‚æ”¹å…§å®¹åƒæ•¸ã€‚ä¸¦ä½¿ç”¨ $ kubectl apply -f xxx.yaml éƒ¨å±¬ã€‚\nå®‰è£ Addons Component\rä¸åŒæ–¼ä»¥å¾€ 1.6 ä»¥å‰çš„ç‰ˆæœ¬çš„ istio yaml æª”å¯ç›´æ¥æŒ‡å®š addonComponentsï¼Œåœ¨ 1.11 ç‰ˆå¦‚æœè¦å®‰è£ Kialiã€Jaeger ç­‰ addon componentï¼Œå‰‡éœ€è¦å¦å¤–éƒ¨å±¬ã€‚ 1# ä¸€æ¬¡éƒ¨å±¬æ‰€æœ‰ addons 2$ kubectl apply -f samples/addons 3 4# å–®ç¨æŒ‡å®šå¥—ä»¶éƒ¨å±¬ 5$ kubectl apply -f samples/addons/kiali.yaml Resource\rhttps://preliminary.istio.io/latest/zh/docs/setup/install/operator/\rhttps://istio.io/latest/docs/setup/getting-started/\r","date":"2021-10-26T20:27:00+00:00","updated":"2021-10-26T20:27:00+00:00"},{"objectID":"1635241440","permalink":"/post/k8s-install-nodered/install-nodered-on-kubernetes/","title":"[Node-RED] Deploy on Kubernetes","content":"åŸå…ˆä½¿ç”¨ k8s-at-home çš„ helm chart\réƒ¨å±¬ï¼Œä½†å®Œæˆå¾Œç™¼ç¾ node å®‰è£å¾Œæœƒ deploy ç•°å¸¸ï¼Œæ‡·ç–‘æ˜¯ persistence è¨­å®šå•é¡Œï¼Œä½†åˆä¸æƒ³èŠ±æ™‚é–“æ·±ç©¶ï¼Œæ‰€ä»¥å°±ç›´æ¥è‡ªå·±å¯« yaml éƒ¨å±¬æ¯”è¼ƒå¿«ã€‚\næº–å‚™ node-red.yaml æª” 1apiVersion: v1 2kind: PersistentVolumeClaim 3metadata: 4 name: nodered-pvc 5 namespace: node-red 6spec: 7 accessModes: 8 - ReadWriteOnce 9 resources: 10 requests: 11 storage: 10Gi 12 storageClassName: nfs 13 14--- 15 16apiVersion: apps/v1 17kind: Deployment 18metadata: 19 name: node-red 20 namespace: node-red 21spec: 22 replicas: 1 23 selector: 24 matchLabels: 25 app: node-red 26 template: 27 metadata: 28 labels: 29 app: node-red 30 spec: 31 containers: 32 - name: node-red 33 image: nodered/node-red:2.1.2 34 ports: 35 - containerPort: 1880 36 name: node-red 37 protocol: TCP 38 imagePullPolicy: IfNotPresent 39 volumeMounts: 40 - name: nodered-data 41 mountPath: /data 42 volumes: 43 - name: nodered-data 44 persistentVolumeClaim: 45 claimName: nodered-pvc 46 47--- 48 49apiVersion: v1 50kind: Service 51metadata: 52 name: node-red 53 namespace: node-red 54spec: 55 type: NodePort 56 selector: 57 app: node-red 58 ports: 59 - protocol: TCP 60 port: 1880 61 nodePort: 31880 éƒ¨å±¬ 1kubectl create ns node-red 2kubectl -n node-red apply -f node-red.yaml å®Œæˆ 1kubectl get all -n node-red è¨ªå• service ä½¿ç”¨ NodePortï¼Œå‰‡ç›´æ¥ä½¿ç”¨ control plane çš„ IP ä»¥åŠ NodePort æŒ‡å®šçš„ port 31880 è¨ªå• Node-RED å³å¯ã€‚ ","date":"2021-10-26T09:44:00+00:00","updated":"2021-10-26T09:44:00+00:00"},{"objectID":"1635241140","permalink":"/post/programming-node-red-mail-node-send-error/nodered-mail-node-error/","title":"[Node-RED] mail node 534-5.7.14 Error","content":"ç•¶ google å¸³è™Ÿè¨­ç½®äº†å•Ÿç”¨ å…è¨±å®‰å…¨æ€§è¼ƒä½çš„æ‡‰ç”¨ç¨‹å¼ï¼Œä½† node-red çš„ mail node é‚„æ˜¯å‡ºç¾ 534-5.7.14 Please log in via your web browser and then try again. çš„éŒ¯èª¤ã€‚\nå¯èƒ½æ˜¯å› ç‚º Gmail è‡ªå‹•é˜»æ“‹äº†å¯ç–‘çš„ç™»å…¥ã€‚\næ­¤æ™‚åˆ°ç”¨ä¾†ç™¼ä¿¡çš„ Gmail ä¿¡ç®±ï¼Œå¯ç™¼ç¾ä¸€å° ç³»çµ±å·²é˜»æ­¢å¯ç–‘çš„ç™»å…¥çš„ç³»çµ±é€šçŸ¥ä¿¡ã€‚ æˆ–åˆ°\rç•°å¸¸æ´»å‹•\ré é¢Â ï¼Œä¹Ÿå¯çœ‹åˆ° æ‡‰ç”¨ç¨‹å¼/è£ç½®ç™»å…¥å˜—è©¦é­æ‹’ çš„è¨˜éŒ„ã€‚ å¦‚æœé€šçŸ¥ä¿¡ã€ç•°å¸¸æ´»å‹•è¨˜éŒ„ä¸­çš„ IP èˆ‡æ™‚é–“æ˜¯æ­£å¸¸ç”±æˆ‘å€‘çš„ç¨‹å¼ç™¼å‡ºçš„ï¼Œå‰‡å¯åˆ° æˆæ¬Šå­˜å–æ‚¨çš„ Google å¸³æˆ¶ é é¢Â https://accounts.google.com/DisplayUnlockCaptcha\rï¼ŒæŒ‰ ç¹¼çºŒã€‚ ç„¶åˆ°åˆ°åŸæœ¬çš„ç¨‹å¼ï¼ŒåŸ·è¡Œç™»å…¥/å¯„ä¿¡ï¼Œæ‡‰è©²å°±å¯ä»¥èªè­‰äº†ã€‚ å…¶ä»–ï¼š\nå¦‚æœåŸç¨‹å¼æ›äº† IPï¼Œå¯èƒ½æœƒå†æ¬¡è¢« Gmail è‡ªå‹•é˜»æ“‹ï¼Œå‰‡é ˆåœ¨é€²è¡Œä¸€æ¬¡ä»¥ä¸Šçš„çš„å‹•ä½œã€‚ æœ‰æ™‚å€™é¡¯ç¤ºå¯†ç¢¼éŒ¯èª¤ï¼Œæœ‰å¯èƒ½å¯†ç¢¼æ˜¯å°çš„ï¼Œä½†è¢« Google ç•¶æˆå¯ç–‘çš„ç™»å…¥é˜»æ“‹äº†ã€‚ Source\rhttps://xyz.cinc.biz/2014/09/gmail-password-not-accepted-from-server.html\rhttps://stackoverflow.com/questions/20337040/getting-error-while-sending-email-through-gmail-smtp-please-log-in-via-your-w\rå¦å¤–è£œå……ä¸€ä¸‹ email node çš„ä½¿ç”¨\nfunction node\n1msg.to = \u0026#39;ulahsieh@domain.com\u0026#39;; 2msg.topic = \u0026#39;ä¿¡ä»¶ä¸»æ—¨\u0026#39;; 3msg.payload = \u0026#39;ä¿¡ä»¶å…§å®¹\u0026#39; 4return msg; åœ¨ function node å¯«ä¸Šå¯„ä»¶è€…å¾Œï¼Œmail node çš„ To æ¬„ä½å³å¯çœç•¥ã€‚\n","date":"2021-10-26T09:39:00+00:00","updated":"2021-10-26T09:39:00+00:00"},{"objectID":"1635173460","permalink":"/post/os-ubuntu-create-applications-shortcut-on-desktop/ubuntu-app-shortcut/","title":"[Ubuntu] Create Application's Shortcut on Desktop","content":"Follow the steps to create the app\u0026rsquo;s shortcut on desktop in Ubuntu.\nFind the target application\u0026rsquo;s .desktop file The file usually can be found in the following path:\n/usr/share/applications/ /var/lib/snapd/desktop/applications Copy the specific .desktop file to ~/Desktop\nGo the Desktop and right-click the copied .desktop file\nEnable the \u0026ldquo;Allow Launching\u0026rdquo; option\nDone ","date":"2021-10-25T14:51:00+00:00","updated":"2021-10-25T14:51:00+00:00"},{"objectID":"1633713900","permalink":"/post/programming-vscode-ssh-remote-without-password/vscode-remote/","title":"VSCode å…å¯†ç¢¼ SSH åˆ°é ç«¯æ©Ÿå™¨","content":"VS Code å®‰è£æ’ä»¶\rå®‰è£å®Œæˆå¾Œæˆ‘å€‘å°±å¯ä»¥çœ‹åˆ°åœ¨å·¦å´æ–°å¢äº†ä¸€å€‹æ–°çš„Remoteæ¬„ä½\nåˆ° Settings \u0026gt; Extensions \u0026gt;Remote - SSH ä¸­å°‡ Remote.SSH: Show Login Terminal å‹¾é¸\nWindows è¨­å®šå®‰è£ OpenSSH\rä½¿ç”¨ Windows Server 2019 å’Œ Windows 10 è£ç½®ä¸Šçš„ Windows è¨­å®šï¼Œå®‰è£ OpenSSH å…ƒä»¶ã€‚\nè‹¥è¦å®‰è£ OpenSSH å…ƒä»¶ï¼š\né–‹å•ŸÂ è¨­å®šï¼Œé¸å– [æ‡‰ç”¨ç¨‹å¼]Â \u0026gt; æ‡‰ç”¨ç¨‹å¼ \u0026amp; åŠŸèƒ½ï¼Œç„¶å¾Œé¸å– [é¸ç”¨åŠŸèƒ½]ã€‚ æƒææ¸…å–®ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²å®‰è£ OpenSSHã€‚ å¦‚æœæ²’æœ‰ï¼Œè«‹åœ¨é é¢é ‚ç«¯é¸å– [Â æ–°å¢åŠŸèƒ½]ï¼Œç„¶å¾Œï¼š å°‹æ‰¾Â OpenSSH ç”¨æˆ¶ç«¯ï¼Œç„¶å¾ŒæŒ‰ä¸€ä¸‹ [å®‰è£]ã€‚ å°‹æ‰¾Â OpenSSH ä¼ºæœå™¨ï¼Œç„¶å¾ŒæŒ‰ä¸€ä¸‹ [å®‰è£]ã€‚ å®‰è£ç¨‹å¼å®Œæˆå¾Œï¼Œè«‹è¿”å›Â æ‡‰ç”¨ç¨‹å¼ \u0026gt; æ‡‰ç”¨ç¨‹å¼ \u0026amp; åŠŸèƒ½Â å’ŒÂ é¸ç”¨åŠŸèƒ½Â ï¼Œæ‡‰è©²æœƒçœ‹åˆ°å·²åˆ—å‡º OpenSSHã€‚\nSSH Key è¨­å®š\rRemote-SSH extension æä¾›æˆ‘å€‘ä½¿ç”¨ ssh key çš„æ–¹å¼é€²è¡Œé€£æ¥ï¼Œå¯ä»¥ä¸ç”¨è¼¸å¯†ç¢¼æ›´æ–¹ä¾¿çš„é€£æ¥ã€‚æ–¹å¼æ˜¯å°‡æœ¬åœ°ç«¯çš„å…¬é‘°ï¼ˆid_rsa.pubï¼‰å­˜åˆ°é ç«¯çš„ authorized_keys æª”æ¡ˆä¸­ï¼Œç„¶å¾Œåœ¨æœ¬åœ°ç«¯çš„ config æª”ä¸­è¨­å®šé€£ç·šè³‡è¨Šã€‚\nåœ¨æœ¬åœ°æ©Ÿå™¨ä¸Šä½¿ç”¨ ssh-keygen ç”¢ç”Ÿ key pair å°‡æœ¬åœ°å…¬é–‹é‡‘é‘°åŠ å…¥åˆ°é ç«¯æ©Ÿå™¨ä¸Šçš„ authorized_keys æª”æ¡ˆä¸­ï¼Œè‹¥é ç«¯æ©Ÿå™¨ç„¡è©²æª”æ¡ˆï¼Œå‰‡ touch ~/.ssh/authorized_keysï¼Œä¸¦ä¿®æ”¹æ¬Šé™ chmod 644 ~/.ssh/authorized_keysï¼Œæœ€å¾Œå°‡æœ¬åœ°ç«¯çš„ id_rsa.pub å…§å®¹è¤‡è£½åˆ°æª”æ¡ˆä¸­ã€‚ ä¿®æ”¹æœ¬åœ°ç«¯æ©Ÿå™¨çš„å®¶ç›®éŒ„ä¸‹çš„ .ssh ä¸­çš„ C:\\Users\\%USER%\\.ssh\\config æª” 1Host remoteLinux #å¡«å¯«åˆ¥åä¾‹å¦‚ LabSever 2HostName 10.1.5.130 #ä¸»æ©Ÿåç¨±æˆ–æ˜¯ipä½ç½® 3User root #ç™»å…¥çš„ä½¿ç”¨è€…åç¨± 4IdentityFile ~/.ssh/id_rsa #æŒ‡å®šé€£ç·šçš„ç§é‘° æ¸¬è©¦æ˜¯å¦å¯ ssh ç™»å…¥ï¼Œé–‹å•Ÿ CMD åŸ·è¡ŒæŒ‡ä»¤Â ssh ç™»å…¥å¸³æˆ¶@ServerIPï¼Œå³å¯å…å¯†ç¢¼ç›´æ¥ç™»å…¥ Linux Serverï¼Œå¦‚æœé‡‘é‘°åç¨±ä¸ç‚ºé è¨­ id_rsaï¼Œå‰‡ä½¿ç”¨ -i åƒæ•¸æŒ‡å®šé‡‘é‘° ssh ç™»å…¥å¸³æˆ¶@ServerIP -i C:\\Users\\%USER%\\.ssh\\mykeyã€‚ SSH Key åŸç†\ré€é\rå…¬é–‹é‡‘é‘°åŠ å¯†\r(Public-key cryptography) æˆ–ç¨±ã€Œéå°ç¨±é‡‘é‘°åŠ å¯†ã€çš„å…©æŠŠåŠ è§£å¯†é‘°åŒ™ Public Key (å…¬é‘°) å’Œ Private Key (ç§é‘°)ï¼Œå–ä»£ Client ä½¿ç”¨Â SSH\r(Secure Shellï¼Œå®‰å…¨æ®¼å”è­°) å”å®šé€£çµ Server ç™»å…¥æ™‚å¿…é ˆè¼¸å…¥é©—è­‰å¯†ç¢¼çš„å‹•ä½œï¼š\nPublic Keyï¼šæµé€šæ–¼å…¬é–‹ç¶²è·¯ä¸Šï¼Œåœ¨å„ä¼ºæœå™¨ä¸Šå…¬é‘°é›†ä¸­ä¿å­˜çš„æª”æ¡ˆç‚º authorized_keysï¼Œå¿…é ˆä¾æ“š /etc/ssh/sshd_config å…§çš„ AuthorizedKeysFile å®šç¾©ä¾†è¨­å®šã€‚ Private Keyï¼šå­˜æ”¾æ–¼å„ä¼ºæœå™¨çš„æœ¬åœ°ç«¯ï¼Œç”¨ä¾†è§£å¯†å…¬é–‹çµ¦ä¸åŒä¾†æºç«¯çš„ Public Keyï¼Œä¸å¯å¤–æµã€‚ æ¬Šé™\ré›–ç„¶ ssh-keygen é è¨­çš„æ¬Šé™å°±éƒ½æ˜¯æ­£ç¢ºçš„äº†ï¼Œä½†é‚„æ˜¯æœ‰å¿…è¦äº†è§£ä¸€äº›è¦å‰‡ï¼Œå› ç‚ºåªè¦ä¸€å€‹è¨­å®šæœ‰èª¤ï¼Œå°±å¯èƒ½æœƒè¢«åˆ¤å®šç‚ºå±éšªï¼Œè€Œé€ æˆ Public Key å’Œ Private Key ç„¡æ³•é †åˆ©æ¯”å°ï¼š\nç›®éŒ„æˆ–æª”æ¡ˆ è¨±å¯æ¬Š ~/.ssh/ 700 (drwx\u0026mdash;\u0026mdash;) ~/.ssh/id_rsa (Private Key) 600 (-rw\u0026mdash;\u0026mdash;-) ~/.ssh/authorized_keys \u0026amp; ~/.ssh/id_rsa.pub (Public Key) 600 (-rw\u0026mdash;\u0026mdash;-)ã€‚é è¨­ç‚º 600ï¼Œå¯ä»¥å°‡è¨±å¯æ¬Šè®Šæ›´ç‚º 640 æˆ– 644ï¼Œä½¿å…¬é–‹é‡‘é‘°è®Šæˆå¯è®€å–ã€‚ Reference\rhttps://hackmd.io/@brick9450/vscode-remote\rhttps://www.footmark.info/linux/centos/windows-ssh-nopassword-linux/\r","date":"2021-10-08T17:25:00+00:00","updated":"2021-10-08T17:25:00+00:00"},{"objectID":"1633620720","permalink":"/post/data-datapipeline-definition/what-is-data-pipeline/","title":"Data Pipeline æ„ç¾©ã€è¦è§£æ±ºä»€éº¼ã€æ‡‰å…·å‚™çš„åŠŸèƒ½","content":"æ„ç¾©\ræ•¸æ“šç®¡é“ï¼ˆData Pipelineï¼‰æ˜¯ä¸€ç¨®å…è¨±æ•¸æ“šé€šéæ•¸æ“šåˆ†æéç¨‹å¾ä¸€å€‹ä½ç½®é«˜æ•ˆæµå‘å¦ä¸€å€‹ä½ç½®çš„è»Ÿé«”ï¼Œæ˜¯è™•ç†è³‡æ–™æµçš„ç³»çµ±ã€‚é€™å°±å¥½æ¯”ä¸€æ¢å‚³é€å¸¶ï¼Œå®ƒèƒ½é«˜æ•ˆã€æº–ç¢ºåœ°å°‡æ•¸æ“šå‚³é€åˆ°æµç¨‹çš„æ¯ä¸€æ­¥ã€‚ æ•¸æ“šç®¡é“æ˜¯æå–ã€è½‰æ›ã€åˆä½µã€é©—è­‰ã€é€²ä¸€æ­¥åˆ†ææ•¸æ“šå’Œæ•¸æ“šå¯è¦–åŒ–çš„éç¨‹è‡ªå‹•åŒ–ã€‚é€šéæ¶ˆé™¤éŒ¯èª¤ä¸¦é¿å…ç“¶é ¸å’Œå»¶é²ï¼Œæ•¸æ“šç®¡é“å¯æä¾›ç«¯åˆ°ç«¯æ•ˆç‡ã€‚ æ•¸æ“šç®¡é“å°‡æ‰€æœ‰æ•¸æ“šè¦–ç‚ºæµå¼æ•¸æ“šï¼Œå› æ­¤å®ƒå€‘è€ƒæ…®äº†éˆæ´»çš„æ¶æ§‹ã€‚ç„¡è«–æ•¸æ“šä¾†è‡ªéœæ…‹æºé‚„æ˜¯å¯¦æ™‚æºï¼Œæ•¸æ“šç®¡é“éƒ½å¯ä»¥å°‡æ•¸æ“šæµåˆ†å‰²æˆæ›´å°çš„ç‰‡æ®µï¼Œä»¥ä¾¿ä¸¦è¡Œè™•ç†ï¼Œå¾è€Œæå‡äº†è¨ˆç®—èƒ½åŠ›ã€‚ ETL æ˜¯ Data Pipeline çš„ä¸€éƒ¨åˆ†ï¼Œä¸€æ¢ Data Pipeline å¯ä»¥æ˜¯å¥½å¹¾æ®µ ETL çš„çµ„åˆã€‚ ETL é€šå¸¸æŒ‡è³‡æ–™çš„å–ã€ç”¨ã€å­˜é€™ä¸‰å€‹å‹•ä½œè€Œå·²ï¼›è€Œ Data Pipeline é™¤äº† ETL ä¹‹å¤–ï¼Œä¹Ÿå¯åŒ…å«åŸ·è¡Œ ETL çš„ç³»çµ±ã€‚ è¦è§£æ±ºä»€éº¼\rå‚³çµ±ä½¿ç”¨ ETL tools å¯èƒ½æœƒé‡åˆ°çš„ç—›é»ï¼š\nå•é¡Œ1 ï¼š\nä½¿ç”¨çš„ RDS é¡å‹å¤šç¨®å¤šæ¨£ï¼Œæœ‰ ORALCEã€SQL SERVERã€MYSQLï¼Œç”šè‡³æœ‰ MONGODBã€‚ç¾åœ¨è¦é€²è¡Œå¤§æ•¸æ“šåˆ†æï¼Œå¦‚ä½•æ•´åˆé€™äº›æ•¸æ“šåº«çš„æ•¸æ“šï¼Œåˆ°ä¸€å€‹å¤§æ•¸æ“šå¹³å°é€²è¡Œæ•¸æ“šåˆ†æï¼Ÿå¦‚ä½•è§£æ±ºå¤šå€‹æ•¸æ“šæºæ•¸æ“šç²å–ä¸åŠæ™‚é€ æˆæ•¸æ“šç²å–å»¶é²ï¼Ÿ\nå•é¡Œ2ï¼š\næ•¸æ“šè¨­è¨ˆä¹‹åˆï¼Œæ²’æœ‰è€ƒæ…®ETLæ•¸æ“šæŠ½å–çš„å•é¡Œï¼Œæ‰€ä»¥æ•¸æ“šæ²’æœ‰æ™‚é–“å­—æ®µï¼Œå¦‚ä½•åœ¨ä¸Šç™¾Gçš„æ•¸æ“šä¸­æŠ½å–å¢é‡æ•¸æ“šï¼Ÿ\nå•é¡Œ3ï¼š\né¢å°æ¥­å‹™éƒ¨é–€å¤šç¨®éœ€æ±‚ï¼Œè¦æ±‚åœ¨æ¥­å‹™ç²å¾—æ•¸æ“šçš„1å€‹å°æ™‚å…§ï¼Œå°‡æ›´æ–°çš„æ¥­å‹™æ•¸æ“šå‚³éåˆ°æ•¸æ“šéƒ¨é–€é€²è¡Œè™•ç†ï¼Œä¸¦ç²å¾— DATAVIEWã€‚\nå•é¡Œ4ï¼š\næ•¸æ“šåˆ†æäººå“¡æœ‰çš„ç²¾é€š T-SQLã€æœ‰çš„æ“…é•· PL/SQLï¼Œé‚„æœ‰çš„åªæœƒJAVA ï¼Œä½ å¦‚ä½•æ»¿è¶³é€™æ¨£å¤šç¨®å¤šæ¨£çš„æ•¸æ“šç›®çš„åœ°éœ€æ±‚ï¼Ÿ\nå•é¡Œ5ï¼š\nç›®å‰ç”±æ–¼æ•¸æ“šåº«æ›´æ–°ï¼Œå°‡ ORACLE æ•¸æ“šåº«æ›¿ä»£ï¼Œä½¿ç”¨ PostgresQL ä¾†ä»£æ›¿ ORACLEã€‚ç›®å‰éœ€è¦é€²è¡Œç°åº¦ç™¼å¸ƒ(é‡‘çµ²é›€ç™¼å¸ƒ)ï¼ŒORACLE å’Œ POSTGRESQL æ•¸æ“šä¹‹é–“é€²è¡Œå¯¦æ™‚åŒæ­¥ï¼Œç•¶ç¨‹åºè·‘é€šï¼Œä¸Šç·šå…©å€‹ç¦®æ‹œå¾Œæ²’æœ‰å•é¡Œï¼Œå°‡ ORACLE æ¸…é™¤ï¼Œå¦‚ä½•åšåˆ°ï¼Ÿ\nå•é¡Œ6ï¼š\næ•¸æ“šæµæ˜¯å¦èƒ½åŠæ™‚ä¸”ä¸€è‡´çš„å‚³å°åˆ°å„ç¨®ç›®çš„åœ°ï¼Œä»¥é€²è¡Œåˆ†ä½ˆå¼çš„é‹ç®—ï¼ŒåŒæ™‚æ•¸æ“šå¿…é ˆåœ¨ç®¡é“é€²è¡ŒåŠ å·¥è™•ç†ä¸”é ˆä¿è­‰äº‹ä»¶åªèƒ½è¢«è™•ç†ä¸€æ¬¡ï¼Œå¦å¤–é‚„è¦ä¿ç•™ raw data å°è¨ˆç®—çš„æ•¸æ“šé€²è¡Œé©—è­‰ã€‚ä¹Ÿå°±æ˜¯å–®é»å¤šå‚³ã€æ•¸æ“šæ¸…æ´—ã€æ•¸æ“šæ•´ç†çš„è¦æ±‚ï¼Œæ•¸æ“šç²å–ä¸å‡†ç¢ºã€æ•¸æ“šæä¾›çš„æ ¼å¼ä¸å°ã€æ•¸æ“šæå–å°ç³»çµ±çš„è²  â€¦","date":"2021-10-07T15:32:00+00:00","updated":"2021-10-07T15:32:00+00:00"},{"objectID":"1631789520","permalink":"/post/os-kvm-virt-install-centos-vm/kvm-virt-install-centos-vm/","title":"[KVM] virt-install å»ºç«‹ CentOS è™›æ“¬æ©Ÿ","content":"å®‰è£ KVM å¥—ä»¶\ræª¢æŸ¥ CPU æ˜¯å¦æ”¯æ´è™›æ“¬åŒ–\n1lscpu | grep -i virtualization åŠ å…¥ qemu repo\n1yum install -y centos-release-qemu-ev å®‰è£å¥—ä»¶\n1yum install -y qemu-kvm-ev libvirt libvirt-python libguestfs-tools virt-install ç¢ºèª kvm module æœ‰æ­£å¸¸è¼‰å…¥ï¼Œå¦‚æœåŸ·è¡Œçµæœæœ‰ kvm_xxx(CPUç³»åˆ—ï¼‰å‰‡èªªæ˜ kvm æœå‹™å·²ç¶“å•Ÿå‹•\n1lsmod | grep kvm å¦‚æœæœªå•Ÿå‹•ï¼Œå¯é€šéå¦‚ä¸‹å‘½ä»¤å•Ÿå‹•\n1systemctl start libvirtd å°‡æœå‹™è¨­ç‚ºé–‹æ©Ÿå•Ÿç”¨\n1systemctl enable libvirtd 2systemctl is-enabled libvirtd é…ç½® KVM ç¶²çµ¡æ©‹æ¥åŠŸèƒ½\rç”¢ç”Ÿè™›æ“¬æ©‹æ¥å™¨ï¼Œä¸¦å°‡å¯¦é«”ç¶²å¡ç´å…¥è©² bridge ä¹‹ä¸‹ï¼Œä½¿å¾—å°‡ä¾† VM å¯ä»¥ä½¿ç”¨ bridge æ¨¡å¼ï¼Œå…·æœ‰ç¨ç«‹å°å¤– IPã€‚\næœ¬æ©Ÿç¶²è·¯è¨­å®š\n1nmcli con add type bridge ifname br0 2nmcli connection show 3 4# 10.1.5.1 ç‚ºå¯¦é«”ç¶²å¡å€‹ç¶²è·¯ä½ç½® 5nmcli con modify bridge-br0 ipv4.method manual ipv4.address \u0026amp;#34;10.1.5.1/24\u0026amp;#34; ipv4.gateway \u0026amp;#34;10.1.5.254\u0026amp;#34; ipv4.dns \u0026amp;#34;10.1.1.3\u0026amp;#34; autoconnect yes 6 7# æŠŠåŸå…ˆä½¿ç”¨çš„ç¶²å¡ ens1f0 åŠ åœ¨ bridge è£¡ 8nmcli con add type bridge-slave ifname ens1f0 master bridge-br0 9 10# å•Ÿç”¨ bridge 11nmcli connection up bridge-br0 12 13# é‡å•Ÿç¶²è·¯ 14systemctl restart network 15nmcli connection show KVM ç¶²è·¯è¨­å®š\n1# å…¶ä¸­ uuid çš„æ¬„ä½å¯ç”¨ uuidgen ç”¢ç”Ÿ 2cat \u0026amp;lt;\u0026amp;lt; EOF \u0026amp;gt; br0.xml â€¦","date":"2021-09-16T10:52:00+00:00","updated":"2021-09-16T10:52:00+00:00"},{"objectID":"1631788200","permalink":"/post/kubernets-metallb/","title":"Change MetalLB IP Range","content":" 1# note the old IPs allocated to the services 2kubectl get svc 3 4# edit config 5kubectl edit cm -n metallb-system config 6 7# delete the metallb pods 8kubectl -n metallb-system delete pod --all 9 10# watch the pods come back up 11kubectl -n metallb-system get pods -w 12 13# inspect new IPs of services 14kubectl get svc or\n1cat \u0026lt;\u0026lt; EOF \u0026gt; new_config.yaml 2apiVersion: v1 3kind: ConfigMap 4metadata: 5 namespace: metallb-system 6 name: config 7data: 8 config: | 9 address-pools: 10 - name: default 11 protocol: layer2 12 addresses: 13 - 10.0.0.10-10.0.0.19 14EOF 15 16# delete the old configmap 17kubectl -n metallb-system delete cm config 18 19# apply the new configmap 20kubectl apply -f new_config.yaml why we need to delete all metallb pod\rMetalLB rejects new configurations if the new configuration would break existing services. Your new configuration does not allow existing services to continue existing, so MetalLB ignored it. There are log entries in the controller and speaker pods about this.\nTo force MetalLB to accept an unsafe configuration, delete all the controller and speaker pods. When they restart, they\u0026rsquo;ll accept the new configuration and change all your services.Â kubectl delete po -n metallb-system --all\nReference\rhttps://github.com/metallb/metallb/issues/308\rhttps://github.com/metallb/metallb/issues/348\r","date":"2021-09-16T10:30:00+00:00","updated":"2021-09-16T10:30:00+00:00"},{"objectID":"1631624520","permalink":"/post/devops-terraform-upgrade/terraform-upgrage-to-v1/","title":"[Terraform] Upgrade to the Latest Version","content":"ç›®å‰çš„ç’°å¢ƒä½¿ç”¨çš„ terraform ç‰ˆæœ¬æ˜¯ v0.13.5\nåƒè€ƒä»¥ä¸‹å®˜ç¶²èªªæ˜ï¼Œå¦‚æœå¾ 0.13 ç‰ˆè¦å¾€æœ€æ–°ç‰ˆ v1 å‡ï¼Œéœ€è¦å…ˆå‡åˆ° 0.14ã€‚\nCurrent Version Recommendation v0.10 or earlier Refer to the upgrade guides for these historical versions until you have upgraded to the latest v0.11 release, then refer to the following item. v0.11 Use the terraform 0.12checklist command to detect any situations that must be addressed before upgrading to v0.12, resolve them, and then upgrade to the latest v0.12 release and follow the v0.12 Upgrade Guide. v0.12 Upgrade to the latest Terraform v0.13 release and then follow the v0.13 upgrade guide to upgrade your configuration and state for explicit provider requirements. v0.13 Upgrade to the latest Terraform v0.14 release and attempt a normal Terraform run. If you encounter any new errors, refer to the v0.14 upgrade guide for resolution steps. v0.14 Upgrade directly to the latest Terraform v1.0 release and attempt a normal Terraform run. If you encounter any new errors, refer to the v0.15 upgrade guide for resolution steps. v0.15 Upgrade directly to the latest Terraform v1.0 release and attempt a normal Terraform run. Terraform v1.0 is a continuation of the v0.15 series, and so v1.0.0 and later are directly backward-compatible with Terraform v0.15.5. é–‹å§‹å‡ç´š\rå„ç‰ˆ release è¼‰é»\rï¼Œè«‹ä¾ç…§ä¸åŒçš„ä½œæ¥­ç³»çµ±å®‰è£ã€‚\n1[root@master1 ~]# wget https://releases.hashicorp.com/terraform/0.14.11/terraform_0.14.11_linux_amd64.zip 2--2021-09-14 13:00:30-- https://releases.hashicorp.com/terraform/0.14.11/terraform_0.14.11_linux_amd64.zip 3Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.1.183, 151.101.65.183, 151.101.129.183, ... 4Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.1.183|:443... connected. 5HTTP request sent, awaiting response... 200 OK 6Length: 33789439 (32M) [application/zip] 7Saving to: â€˜terraform_0.14.11_linux_amd64.zipâ€™ 8 9100%[==============================================================================================\u0026gt;] 33,789,439 8.05MB/s in 4.0s 10 112021-09-14 13:00:34 (8.10 MB/s) - â€˜terraform_0.14.11_linux_amd64.zipâ€™ saved [33789439/33789439] 12 13[root@master1 ~]# 14[root@master1 ~]# unzip terraform_0.14.11_linux_amd64.zip 15Archive: terraform_0.14.11_linux_amd64.zip 16 inflating: terraform 17 18[root@master1 ~]# 19[root@master1 ~]# mv terraform /usr/local/bin/ 20mv: overwrite â€˜/usr/local/bin/terraformâ€™? y 21[root@master1 ~]# terraform version 22Terraform v0.14.11 23 24Your version of Terraform is out of date! The latest version 25is 1.0.6. You can update by downloading from https://www.terraform.io/downloads.html 26[root@master1 ~]# 27[root@master1 ~]# wget https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip 28[root@master1 ~]# wget https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip 29--2021-09-14 13:31:21-- https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip 30Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.129.183, 151.101.1.183, 151.101.65.183, ... 31Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.129.183|:443... connected. 32HTTP request sent, awaiting response... 200 OK 33Length: 32677516 (31M) [application/zip] 34Saving to: â€˜terraform_1.0.6_linux_amd64.zipâ€™ 35 36100%[=================================================================================================================\u0026gt;] 32,677,516 11.0MB/s in 2.8s 37 382021-09-14 13:31:24 (11.0 MB/s) - â€˜terraform_1.0.6_linux_amd64.zipâ€™ saved [32677516/32677516] 39 40[root@master1 ~]# 41[root@master1 ~]# unzip terraform_1.0.6_linux_amd64.zip 42Archive: terraform_1.0.6_linux_amd64.zip 43 inflating: terraform 44 45[root@master1 ~]# 46[root@master1 ~]# mv terraform /usr/local/bin/ 47mv: overwrite â€˜/usr/local/bin/terraformâ€™? y 48[root@master1 ~]# terraform version 49Terraform v1.0.6 cannot execute binary file\rå¦‚æœåœ¨å®‰è£å®Œå¾Œï¼Œä½¿ç”¨ terrform cli æ™‚ï¼Œç™¼ç¾ä»¥ä¸‹éŒ¯èª¤\n1[root@master1 ~]# terraform version 2-bash: /usr/local/bin/terraform: cannot execute binary file å‰‡æ˜¯å› ç‚ºä¸‹è¼‰åˆ°éŒ¯èª¤çš„ä½œæ¥­ç³»çµ±çš„å®‰è£åŒ…ã€‚\nReference\rhttps://www.terraform.io/upgrade-guides/1-0.html\r","date":"2021-09-14T13:02:00+00:00","updated":"2021-09-14T13:02:00+00:00"},{"objectID":"1631052300","permalink":"/post/devops-build-golang-and-oracle-instant-client-img/build-golang-and-oracle-instant-client-docker-image/","title":"[Docker] å»ºç«‹ golang ä¸­ä½¿ç”¨åˆ° oracle instant client çš„ image","content":"ç´€éŒ„ä¸€ä¸‹å»ºç«‹çš„éç¨‹ä¸­ç¸½å…±é‡åˆ°å…©å€‹å•é¡Œï¼š\nstandard_init_linux.go:xxx: exec user process caused \u0026amp;ldquo;no such file or directory\u0026amp;rdquo;\rä¹‹å‰åœ¨ build golang çš„æ™‚å€™æ²’æœ‰ç”¨åˆ° C libraryï¼Œæ‰€ä»¥åœ¨ç·¨è­¯çš„æ™‚å€™ CGO éƒ½æ˜¯é—œé–‰çš„ã€‚ä½†ç›®å‰è¦ build çš„é€™éš»ç¨‹å¼æœ‰ä½¿ç”¨åˆ° oracle ç¬¬ä¸‰æ–¹å¥—ä»¶ godror\réœ€è¦ç”¨åˆ° C libraryï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨åŸç”Ÿ alpine image æ™‚ï¼Œè·‘ container èµ·ä¾†æœƒé‡åˆ° standard_init_linux.go:228: exec user process caused \u0026amp;quot;no such file or directory\u0026amp;quot; çš„éŒ¯èª¤ã€‚\næ¦‚å¿µ\réœæ…‹ç·¨è­¯ \u0026amp;amp; å‹•æ…‹ç·¨è­¯\réœæ…‹ç·¨è­¯æŒ‡çš„æ˜¯ï¼Œåœ¨ç·¨è­¯å¯åŸ·è¡Œæ–‡ä»¶çš„æ™‚å€™ï¼Œå°‡å¯åŸ·è¡Œæ–‡ä»¶éœ€è¦èª¿ç”¨çš„å°æ‡‰åº«éƒ½é›†æˆåˆ°å¯åŸ·è¡Œæ–‡ä»¶å…§éƒ¨ï¼Œä½¿å¾—å¯åŸ·è¡Œæ–‡ä»¶ä¸éœ€è¦å…¶ä»–ä»»ä½•ä¾è³´å°±èƒ½é‹è¡Œã€‚\né»˜èªæƒ…æ³ä¸‹ï¼Œgolang çš„ç·¨è­¯æ˜¯å‹•æ…‹ç·¨è­¯ï¼Œé€šéç’°å¢ƒè®Šé‡ CGO_ENABLED æ§åˆ¶ï¼Œé»˜èªé–‹å•Ÿï¼Œå…è¨±åœ¨ Go ä»£ç¢¼ä¸­èª¿ç”¨ C ä»£ç¢¼ã€‚\nAlpine é¡åƒ\rAlpine æ˜¯çœ¾å¤š Linux ç™¼è¡Œç‰ˆä¸­çš„ä¸€å“¡ï¼Œå’Œ CentOSã€Ubuntu ä¸€æ¨£ï¼Œåªæ˜¯ä¸€å€‹ç™¼è¡Œç‰ˆçš„åå­—ï¼Œè™Ÿç¨±å°å·§å®‰å…¨ï¼Œæœ‰è‡ªå·±çš„åŒ…ç®¡ç†å·¥å…· apkï¼Œé–‹ç™¼è€…å¯ä»¥ä½¿ç”¨ apk åœ¨åŸºæ–¼ alpine çš„é¡åƒä¸­æ·»åŠ éœ€è¦çš„åŒ…æˆ–å·¥å…·ã€‚\nç›¸æ¯”æ–¼å…¶ä»– Docker é¡åƒï¼Œå®ƒçš„å®¹é‡éå¸¸å°ï¼Œåƒ…åƒ…åªæœ‰ 5 MB å·¦å³ï¼ˆå°æ¯” Ubuntu ç³»åˆ—é¡åƒæ¥è¿‘ 200 MBï¼‰\néŒ¯èª¤åŸå› \rç„¶è€Œå‹•æ…‹ç·¨è­¯å®Œæˆå¾Œçš„äºŒé€²åˆ¶æ–‡ä»¶ï¼Œæ”¾åœ¨åŒæ˜¯ä½¿ç”¨å‹•æ…‹åº«çš„ Alpine åŸºç¤é¡åƒä¸­é‹è¡Œæœƒå ±éŒ¯ï¼šstandard_init_linux.go:211: exec user process caused \u0026amp;quot;no such file or directory\u0026amp;quot;\nä½†æ˜¯æ”¾åœ¨ ubuntu åŸºç¤é¡åƒä¸­å¯ä»¥é‹è¡Œã€‚åŸå› æ˜¯å› ç‚ºå…©è€…ä½¿ç”¨çš„ C library ä¸ä¸€æ¨£ï¼Œåœ¨è£½ä½œ Alpine çš„æ™‚å€™ï¼Œæ˜¯åŸºæ–¼musl libc å’Œ busybox æ§‹å»ºçš„ï¼Œèˆ‡åŸºæ–¼æ¨™æº– C åŸ·è¡Œåº« GNU C library (glibc) ä¸Šç·¨è­¯å‡ºä¾†çš„æ‡‰ç”¨ç¨‹åºä¸å…¼å®¹ï¼Œå°è‡´å‹•æ…‹ä¾è³´çš„äºŒé€²åˆ¶æ–‡ä»¶åœ¨é‹è¡Œæ™‚æ‰¾ä¸åˆ°ä¾è³´ â€¦","date":"2021-09-07T22:05:00+00:00","updated":"2021-09-07T22:05:00+00:00"},{"objectID":"1630880220","permalink":"/post/kubernets-minikube/","title":"Minikube","content":"minikube æ˜¯ä¸€å€‹ç”± Google ç™¼å¸ƒçš„éƒ¨ç½²å–®ç¯€é»çš„ Kubernetes Cluster çš„å·¥å…·ï¼Œå¯ä»¥å®‰è£åœ¨æœ¬æ©Ÿä¸Šï¼Œæ”¯æ´ Windows èˆ‡ Mac Minikube åªæœ‰ä¸€å€‹ Node (ç¯€é»)ã€‚å°æ–¼æœ¬åœ°å¯¦é©—å¯ä»¥é¿å…ç¯€é»ä¸è¶³çš„å›°æ“¾ï¼›è®“é–‹ç™¼è€…å¯ä»¥åœ¨æœ¬æ©Ÿä¸Šè¼•æ˜“æ¶è¨­ä¸€å€‹ Kubernetes Clusterï¼Œå¿«é€Ÿä¸Šæ‰‹ Kubernetes çš„æŒ‡ä»¤èˆ‡ç’°å¢ƒã€‚\né‹ä½œåŸç†å°±æ˜¯æœƒåœ¨æœ¬æ©Ÿä¸Šå»ºç«‹ä¸€å€‹ virtual machineï¼Œä¸¦ä¸”åœ¨é€™ VM å»ºç«‹ä¸€å€‹ signle-node Kubernetes Clusterã€‚\nminikube é©åˆç”¨æ–¼é–‹ç™¼ç’°å¢ƒæ¸¬è©¦ï¼Œä¸æœƒæŠŠå®ƒç”¨åœ¨å¯¦éš›ç”Ÿç”¢ç’°å¢ƒä¸­ã€‚\nä¸‹è¼‰èˆ‡éƒ¨å±¬\rMinikube æ”¯æ´ Windowsã€MacOSã€Linuxï¼Œåœ¨é€™ä¸‰ç¨®å¹³å°çš„æœ¬æ©Ÿç«¯éƒ½å¯ä»¥å®‰è£ä¸¦åŸ·è¡Œ Minikube ã€‚å®‰è£åŠåŸ·è¡Œæ­¥é©Ÿï¼Œè«‹åƒè€ƒ\rå®˜ç¶²\rã€‚\næ•´é«”æ­¥é©Ÿå¦‚ä¸‹ï¼š\nå®‰è£Virtualization Softwareï¼Œå¦‚Â VirtualBox\rå®‰è£Â kubectl\rå¥—ä»¶ï¼Œç”¨ä»¥å’Œ K8S é›†ç¾¤äº¤äº’æºé€š å¾Â Github\rä¸‹è¼‰ Minikube å¥—ä»¶ å•Ÿå‹• minikube åŠ K8s é›†ç¾¤ ä½¿ç”¨ kubectl æ“ä½œé›†ç¾¤åŠæ‡‰ç”¨ å®˜ç¶²è·Ÿå…¶ä»–æ•™å­¸æ–‡å¯«å¾—å¾ˆè©³ç´°ï¼Œåœ¨é€™è£¡å°±ä¸ä¸€ä¸€åˆ—ç¤ºäº†ã€‚\nReference\rhttps://ithelp.ithome.com.tw/articles/10192490\r","date":"2021-09-05T22:17:00+00:00","updated":"2021-09-05T22:17:00+00:00"},{"objectID":"1630681980","permalink":"/post/data-nifi-consume-kafka-and-put-to-mongodb/nifi-consume-kafka/","title":"[nifi] Consume Kafka Topic and Put to MongoDB","content":"é€™å€‹ç¯„ä¾‹å°‡ç¤ºç¯„æ¶ˆè²»æŒ‡å®šçš„ kafka topicï¼Œä¸¦å¯«é€²æŒ‡å®šçš„ MongoDBã€‚\nkafka çš„è³‡æ–™æºç‚º JSON çµæ§‹çš„ stringï¼Œå¦‚ä¸‹ï¼š\n1\u0026#34;{\u0026#34;Time\u0026#34;:1630652601.119,\u0026#34;SMT_B_3_machine_name\u0026#34;:null,\u0026#34;SMT_B_3_SN\u0026#34;:null,\u0026#34;SMT_B_3_program_number\u0026#34;:null,\u0026#34;SMT_B_3_WO\u0026#34;:null,\u0026#34;SMT_B_3_whole_OK\u0026#34;:null,\u0026#34;SMT_B_3_whole_NG\u0026#34;:null,\u0026#34;SMT_B_3_whole_reOK\u0026#34;:null,\u0026#34;SMT_B_3_whole_yieldRate\u0026#34;:null,\u0026#34;SMT_B_3_board_OK\u0026#34;:null,\u0026#34;SMT_B_3_board_NG\u0026#34;:null,\u0026#34;SMT_B_3_board_reOK\u0026#34;:null,\u0026#34;SMT_B_3_board_yieldRate\u0026#34;:null,\u0026#34;SMT_B_3_component_OK\u0026#34;:null,\u0026#34;SMT_B_3_component_NG\u0026#34;:null,\u0026#34;SMT_B_3_component_reOK\u0026#34;:null,\u0026#34;SMT_B_3_component_yieldRate\u0026#34;:null,\u0026#34;SMT_B_3_tin_OK\u0026#34;:null,\u0026#34;SMT_B_3_tin_NG\u0026#34;:null,\u0026#34;SMT_B_3_tin_reOK\u0026#34;:null,\u0026#34;SMT_B_3_tin_yieldRate\u0026#34;:null}\u0026#34; 1. ConsumeKafka_2_6\r2. PutMongo\r3. å»ºç«‹é—œä¿‚\ra. ConsumeKafka â€”\u0026gt; PutMongo\rb. å»ºç«‹å®Œæˆå¾Œå¯ä»¥ç™¼ç¾æœ€å¾Œä¸€å€‹ PutMongo çš„ processor æœ‰å ±éŒ¯\rc. é€²å…¥ PutMongo processor çš„ SETTINGS å°‡ Automatically Terminate Relationships çš„é—œä¿‚æ‰“é–‹\rInfo\nAutomatically Terminate Relationships æŒ‡çš„æ˜¯æ•¸æ“šæµè·¯ç”±åˆ°é€™å€‹ Processor å¾Œï¼Œç‰¹å®šç‹€æ…‹ä¸‹æœƒè¢«åˆªé™¤ï¼Œä¸€èˆ¬åœ¨ Endpoint Processor é…ç½®ï¼Œå› ç‚ºæ•¸æ“šæµä¸éœ€è¦å†è¢«ç¹¼çºŒè·¯ç”±äº†ã€‚\n4. å•Ÿå‹•æµç¨‹\réƒ½å®Œæˆå¾Œå¯ä»¥çœ‹åˆ° flow çš„åŸä»¶éƒ½å·²ç¶“ Readyï¼Œå°‡ Processor ä¾æ¬¡å•Ÿå‹•ã€‚\nå•Ÿå‹•å¾Œå¯ä»¥çœ‹åˆ°æ•¸æ“šé–‹å§‹æ”¶é€ï¼Œ\nå¦å¤–é€šé NiFi Data Provenance å¯ä»¥çœ‹åˆ°æ•¸æ“šæµçš„ç‹€æ…‹\nReference\rhttps://anyisalin.github.io/2019/01/03/nifi-demo/\rhttps://cloud.tencent.com/developer/article/1416651\r","date":"2021-09-03T15:13:00+00:00","updated":"2021-09-03T15:13:00+00:00"},{"objectID":"1630444500","permalink":"/post/kubernets-scheduler-controller-manager-unhealthy/","title":"è§£æ±º scheduler and controller-manager unhealthy state","content":"Problem\råœ¨å˜—è©¦æ›´æ–° Kubernetes æ™‚ï¼Œä¸‹äº†ä¸‹é¢çš„ command å–å¾—ç›®å‰é›†ç¾¤çš„çµ„ä»¶ç‹€æ…‹ï¼š\n1$ kubectl get cs ç™¼ç¾ controller-mamager å’Œ scheduler æœ‰ unhealthy çš„ç‹€æ…‹ï¼š\n1NAME STATUS MESSAGE ERROR 2controller-manager Unhealthy Get http://127.0.0.1:10252/healthz: dial tcp 127.0.0.1:10252: connect: connection refused 3scheduler Unhealthy Get http://127.0.0.1:10251/healthz: dial tcp 127.0.0.1:10251: connect: connection refused 4etcd-0 Healthy {\u0026#34;health\u0026#34;:\u0026#34;true\u0026#34; Reason\ré€™å…©å€‹ pod çš„éå®‰å…¨ç«¯å£æ²’æœ‰é–‹å•Ÿï¼Œå¥åº·æª¢æŸ¥æ™‚å ±éŒ¯ï¼Œä½†æ˜¯ç”±æ–¼æœ¬èº«æœå‹™æ˜¯æ­£å¸¸çš„ï¼Œåªæ˜¯å¥åº·æª¢æŸ¥çš„ç«¯å£æ²’å•Ÿï¼Œæ‰€ä»¥ä¸å½±éŸ¿æ­£å¸¸ä½¿ç”¨ã€‚\nSolution\råœ¨æ‰€æœ‰ Master nodes ä¸Šä¿®æ”¹ä¸‹é¢æª”æ¡ˆ:\n1$ vim /etc/kubernetes/manifests/kube-scheduler.yaml 2$ vim /etc/kubernetes/manifests/kube-controller-manager.yaml åˆªæ‰æˆ–è¨»é‡‹æ‰ - --port=0 (spec-\u0026gt;containers-\u0026gt;command) é€™è¡Œ\n1$ sudo vi /etc/kubernetes/manifests/kube-controller-manager.yaml é‡å•Ÿ kubelet æœå‹™\n1$ sudo systemctl restart kubelet.service é€™æ™‚10251ï¼Œ10252ç«¯å£å°±é–‹å•Ÿäº†ï¼Œå¥åº·æª¢æŸ¥ç‹€æ…‹ä¹Ÿæ­£å¸¸äº†ã€‚\n1[root@master1 ~]# netstat -tulpn | grep \u0026#39;10251\\|10252\u0026#39; 2tcp6 0 0 :::10251 :::* LISTEN 11863/kube-schedule 3tcp6 0 0 :::10252 :::* LISTEN 11902/kube-controll Reference\rhttps://www.cnblogs.com/wuliping/p/13780147.html\r","date":"2021-08-31T21:15:00+00:00","updated":"2021-08-31T21:15:00+00:00"},{"objectID":"1630444140","permalink":"/post/devops-docker-build-network-error/docker-build-network-error/","title":"[Docker] docker build network error","content":"åœ¨ build docker image æ™‚ç™¼ç”Ÿ network error çš„éŒ¯èª¤\nDockerfile\r1FROM golang:1.15.3-alpine3.12 AS builder 2WORKDIR / 3COPY . . 4 5RUN apk update \u0026amp;\u0026amp; apk add --update git 6RUN CGO_ENABLED=0 go build -installsuffix cgo -o /it-preprocess-adapter ./cmd/it-preprocess-adapter/it-preprocess-adapter.go 7 8FROM alpine:3.12 9COPY --from=builder /it-preprocess-adapter /it-preprocess-adapter 10COPY ./configs /configs 11COPY ./settings /settings 12COPY ./build/docker/startup.sh /startup.sh 13 14RUN chmod 2777 -R /settings 15#USER 1001 16 17CMD [\u0026#34;sh\u0026#34;, \u0026#34;/startup.sh\u0026#34;] Docker build error\rSolution\ré‡å•Ÿ docker å°±è§£æ±ºäº†\n1systemctl restart docker Reference\rhttps://github.com/laradock/laradock/issues/2551\r","date":"2021-08-31T21:09:00+00:00","updated":"2021-08-31T21:09:00+00:00"},{"objectID":"1630273620","permalink":"/post/kubernets-nfs-client-provisioner-pending-in-creating-pvc/","title":"k8s v1.20 nfs-client-provisioner å‰µå»º pvc æ™‚åœåœ¨ Pending","content":"ä¸Šæ¬¡å°‡ K8s é›†ç¾¤å¾ 1.7 å‡ç´šåˆ° 1.20 ä¹‹å¾Œï¼Œåœ¨å‰µå»º pvc æ™‚ï¼Œç™¼ç¾ç‹€æ…‹æœƒä¸€ç›´åœç•™åœ¨ Pendingï¼Œè©³ç´°è³‡è¨Šå¦‚ä¸‹ï¼š\n1[root@master1 telegraf]# kubectl get pvc 2NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE 3test Pending nfs 5s 4[root@master1 telegraf]# kubectl describe pvc test 5Name: test 6Namespace: default 7StorageClass: nfs 8Status: Pending 9Volume: 10Labels: \u0026lt;none\u0026gt; 11Annotations: volume.beta.kubernetes.io/storage-provisioner: cluster.local/nfs-sc-0-nfs-client-provisioner 12Finalizers: [kubernetes.io/pvc-protection] 13Capacity: 14Access Modes: 15VolumeMode: Filesystem 16Used By: \u0026lt;none\u0026gt; 17Events: 18 Type Reason Age From Message 19 ---- ------ ---- ---- ------- 20 Normal ExternalProvisioning 10s (x5 over 50s) persistentvolume-controller waiting for a volume to be created, either by external provisioner \u0026#34;cluster.local/nfs-sc-0-nfs-client-provisioner\u0026#34; or manually created by system administrator æŸ¥äº†åŸå› å¯èƒ½æ˜¯å› ç‚º selfLink ç‚ºç©ºï¼Œç„¡æ³•å»ºç«‹åƒè€ƒã€‚ Kubernetes v1.20 é–‹å§‹ï¼Œæ ¹æ“š change log\rèªªæ˜ï¼Œé»˜èªåˆªé™¤äº† metadata.selfLink å­—æ®µï¼Œç„¶è€Œéƒ¨åˆ†æ‡‰ç”¨ä»ç„¶ä¾è³´æ–¼æ­¤åŠŸèƒ½ï¼Œä¾‹å¦‚ nfs-client-provisionerã€‚å¦‚æœä»ç„¶è¦ç¹¼çºŒä½¿ç”¨é€™äº›æ‡‰ç”¨ï¼Œéœ€è¦é‡æ–°å•Ÿç”¨selfLinkã€‚\nè§£æ±ºæ–¹å¼\rä¿®æ”¹ kube-apiserver æ–‡ä»¶\n1vim /etc/kubernetes/manifests/kube-apiserver.yaml åœ¨ command ä¸‹çš„åƒæ•¸åŠ ä¸Š --feature-gates=RemoveSelfLink=false\n1spec: 2 containers: 3 - command: 4 - kube-apiserver 5 - --advertise-address=10.1.5.141 6 - --allow-privileged=true 7 - --au... 8 . 9 . 10 . 11 **- --feature-gates=RemoveSelfLink=false** å„²å­˜ç·¨è¼¯å¾Œï¼Œkube-apiserver ä¾¿æœƒè‡ªå‹•é‡å•Ÿã€‚\n","date":"2021-08-29T21:47:00+00:00","updated":"2021-08-29T21:47:00+00:00"},{"objectID":"1630273200","permalink":"/post/devops-terraform-connection-refused-error/terraform-connection-refused-error/","title":"Terraform Connection to Kuberentes Refused Error","content":"å•é¡Œ\råœ¨ terrform apply çš„æ™‚å€™ä¸€ç›´å¡åœ¨ Error: Post \u0026quot;http://localhost/api/v1/namespaces\u0026quot;: dial tcp [::1]:80: connect: connection refused çš„éŒ¯èª¤\nåŸå› \rçœ‹èµ·ä¾†æ˜¯æ²’æœ‰æ­£ç¢ºçš„æŠ“åˆ° Provider è£¡é¢è¨­çš„ kube config file\nåŸæœ¬çš„è…³æœ¬å¦‚ä¸‹\n1// main.tf 2provider \u0026#34;helm\u0026#34; { 3 kubernetes { 4 config_path = \u0026#34;/root/.kube/config\u0026#34; 5 } 6} 1// kubernetes.tf 2provider \u0026#34;kubernetes\u0026#34; {} è§£æ³•\rä¿®æ”¹è…³æœ¬å¦‚ä¸‹\n1// main.tf 2provider \u0026#34;kubernetes\u0026#34; { 3 host = \u0026#34;https://10.1.5.140:8443\u0026#34; 4 5 client_certificate = file(\u0026#34;~/.kube/client.pem\u0026#34;) 6 client_key = file(\u0026#34;~/.kube/client-key.pem\u0026#34;) 7 cluster_ca_certificate = file(\u0026#34;~/.kube/ca.pem\u0026#34;) 8} 1// kubernetes.tf 2// åªèƒ½æœ‰ä¸€å€‹ providerï¼Œå¦å‰‡æœƒæœ‰ Error: Duplicate provider configuration çš„éŒ¯èª¤ é‡æ–°ä½ˆç½²å¾ŒéŒ¯èª¤ç¢¼å°±è«åå…¶å¦™è®Šäº†:\n1[root@master1 terraform]# terraform apply 2helm_release.metrics-server[0]: Refreshing state... [id=metrics-server] 3 4Error: Kubernetes cluster unreachable: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable ç…§æŒ‡ç¤ºåŠ ä¸Š ç’°å¢ƒè®Šæ•¸\n1export KUBE_CONFIG_PATH=/root/.kube/config å°±è«åå…¶å¦™æˆåŠŸäº† = =\nè£œå……:\rk8s provider èªªæ˜ https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs#credentials-config\rk8s cluster ca https://blog.csdn.net/ll837448792/article/details/103658502\ré…ç½® TLS é€£æ¥\ræŸ¥çœ‹ kubectl é…ç½®æ–‡ä»¶ï¼Œè£¡é¢è¨˜éŒ„äº†ä¸‰å€‹è­‰æ›¸å’Œ API server çš„åœ°å€ï¼š 1[root@testm ~]# cat .kube/config 2apiVersion: v1 3clusters: 4- cluster: 5 certificate-authority-data: LS0tLS1CR...... 6 server: https://10.1.5.145:8443 7 name: kubernetes 8contexts: 9- context: 10 cluster: kubernetes 11 user: kubernetes-admin 12 name: kubernetes-admin@kubernetes 13current-context: kubernetes-admin@kubernetes 14kind: Config 15preferences: {} 16users: 17- name: kubernetes-admin 18 user: 19 client-certificate-data: LS0tLS1CR...... 20 client-key-data: LS0tLS1CRUdJTiBSU0...... åŒ¯å‡ºé‡‘é‘°åŠè­‰æ›¸ 1[root@testm .kube]# export clientcert=$(grep client-cert ~/.kube/config | cut -d\u0026#34; \u0026#34; -f 6) 2[root@testm .kube]# echo $clientcert 3LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0=...... 4[root@testm .kube]# export clientkey=$(grep client-key-data ~/.kube/config | cut -d\u0026#34; \u0026#34; -f 6) 5[root@testm .kube]# echo $clientkey 6LS0tLS1CRUdJTiBSU0EgUFJJVkFURSB...... 7[root@testm .kube]# export ca=$(grep certificate-authority-data ~/.kube/config | cut -d\u0026#34; \u0026#34; -f 6) 8[root@testm .kube]# echo $ca 9LS0tLS1CRUdJTiBDRVJUSUZJQ0FU...... 10[root@testm .kube]# echo $clientcert | base64 -d \u0026gt; ./client.pem 11[root@testm .kube]# echo $clientkey | base64 -d \u0026gt; ./client-key.pem 12[root@testm .kube]# echo $ca | base64 -d \u0026gt; ./ca.pem å¾é…ç½®æ–‡ä»¶ä¸­è®€å–server åœ°å€ï¼š 1[root@testm ~]# kubectl config view | grep server 2 server: https://10.1.5.145:8443 ä½¿ç”¨ curl å’Œå‰›å‰›åŠ å¯†çš„å¯†é‘°æ–‡ä»¶ä¾†è¨ªå• API serverï¼š 1curl --cert ./client.pem --key ./client-key.pem --cacert ./ca.pem https://10.1.5.145:8443/api/v1/pods 2 3{ 4 \u0026#34;kind\u0026#34;: \u0026#34;PodList\u0026#34;, 5 \u0026#34;apiVersion\u0026#34;: \u0026#34;v1\u0026#34;, 6 \u0026#34;metadata\u0026#34;: { 7 \u0026#34;resourceVersion\u0026#34;: \u0026#34;387199\u0026#34; 8 }, 9 \u0026#34;items\u0026#34;: [ 10 { 11 \u0026#34;metadata\u0026#34;: { 12 \u0026#34;name\u0026#34;: \u0026#34;ingress-nginx-controller-5c5bf8c854-7pcf7\u0026#34;, 13 \u0026#34;generateName\u0026#34;: \u0026#34;ingress-nginx-controller-5c5bf8c854-\u0026#34;, 14 \u0026#34;namespace\u0026#34;: \u0026#34;ingress-nginx\u0026#34;, 15 \u0026#34;uid\u0026#34;: \u0026#34;f84b09e4-7d7d-40bf-ae66-f2eb72ab7a59\u0026#34;, 16 \u0026#34;resourceVersion\u0026#34;: \u0026#34;104900\u0026#34;, 17 \u0026#34;creationTimestamp\u0026#34;: \u0026#34;2022-02-09T05:42:28Z\u0026#34;, 18. 19. 20. ","date":"2021-08-29T21:40:00+00:00","updated":"2021-08-29T21:40:00+00:00"},{"objectID":"1629667740","permalink":"/post/k8s-upgrade/k8s-upgrade/","title":"Kubernetes å‡ç´šç´€éŒ„","content":"ç´€éŒ„åœ¨ç¾æœ‰ kubernetes 1.17 é›†ç¾¤å‡ç´šåˆ° 1.20 çš„éç¨‹ã€‚\nç’°å¢ƒèªªæ˜\ré›†ç¾¤é…ç½® ä¸»æ©Ÿå ç³»çµ± IP Address vip Server Load Balancer (SLB) 10.1.5.140 master1 CentOS 7.8 10.1.5.141 Worker1 CentOS 7.8 10.1.5.142 ç•¶å‰é‹è¡Œç‰ˆæœ¬ çµ„ä»¶ ç‰ˆæœ¬ kubeadm v1.17.13 kubelet v1.17.13 kubectl v1.17.13 Container Runtime - Docker v20.10.7 etcd V3.4.3-0 kube-apiserver v1.17.17 kube-controller-manager v1.17.17 kube-proxy v1.17.17 kube-scheduler v1.17.17 coredns v1.6.5 pause v3.1 æŸ¥çœ‹ç‰ˆæœ¬çš„å‘½ä»¤å¦‚ä¸‹\n1kubeadm version 2kubelet --version 3kubectl version 4kubectl get node master1 -o yaml Kubernetes Non-Active Branch History\rç›®å‰ä½¿ç”¨çš„ 1.17 ç‰ˆå·²åœ¨ 2021-01-13 EOLï¼Œfinal patch release åœ¨ 1.17.17ï¼Œè«‹åƒè€ƒå®˜æ–¹ repo\rèªªæ˜ã€‚\næº–å‚™å‡ç´š\rç‰ˆæœ¬å‡ç´šçš„å¿…è¦\rå°æ–¼ Kubernetes é›†ç¾¤çš„ä½¿ç”¨è€…ï¼š æ›´æ–°çš„ç‰ˆæœ¬èƒ½æœ‰æ›´æ–°çš„åŠŸèƒ½ã€æ›´åŠ å…¨é¢çš„å®‰å…¨è£œä¸ä»¥åŠè«¸å¤šçš„bugfixã€‚\nå°æ–¼ Kubernetes é›†ç¾¤çš„é‹ç¶­è€…ï¼š é€šéé›†ç¾¤å‡ç´šåŠŸèƒ½å¯ä»¥æ‹‰é½Šæ‰€ç®¡ç†çš„é›†ç¾¤ç‰ˆæœ¬ï¼Œæ¸›å°‘é›†ç¾¤ç‰ˆæœ¬çš„ç¢ç‰‡åŒ–ï¼Œå¾è€Œæ¸›å°‘ç®¡ç†æˆæœ¬å’Œç¶­è­·æˆæœ¬ã€‚\nå‡ç´šæ³¨æ„äº‹é …\rå‡ç´šåƒ…æ”¯æŒä¸€å€‹å°ç‰ˆæœ¬è™Ÿã€‚ä¹Ÿå°±æ˜¯èªªï¼Œåªèƒ½å¾ 1.7 å‡ç´šåˆ° 1.8 çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ–æ˜¯å¾ 1.17.13 å‡ç´šåˆ° 1.17.17ï¼Œè€Œä¸èƒ½å¾ 1.7 ç›´æ¥å‡ç´šåˆ° 1.9ã€‚ ä¸€æ¬¡æ›´æ–°ä¸€å€‹ç¯€é»ï¼Œç¢ºä¿ Kubernetes åŠŸèƒ½ä¸æœƒå› ç‚ºæ›´æ–°è€Œä¸­æ–·ã€‚ å‡ç´šå¾Œæ‰€æœ‰å®¹å™¨éƒ½æœƒè¢«é‡å•Ÿï¼Œé¿å…æœå‹™ä¸­æ–·ï¼Œéœ€ç¢ºä¿æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨é€²éšçš„ Kubernetes API å»ºç«‹ï¼Œå¦‚ Deploymentï¼Œæˆ–æ˜¯åˆ©ç”¨å‰¯æœ¬æ©Ÿåˆ¶ã€‚ kubeadm upgrade ä¸æœƒå½±éŸ¿å·¥ä½œè² è¼‰ï¼Œåªæœƒæ¶‰åŠKubernetes å…§éƒ¨çš„ â€¦","date":"2021-08-22T21:29:00+00:00","updated":"2021-08-22T21:29:00+00:00"},{"objectID":"1610726040","permalink":"/post/programming-python-system-performance-monitor/monitor-system-perf-by-python/","title":"[Python] ç³»çµ±æ•ˆèƒ½ç›£æ¸¬","content":"ç›£æ¸¬çš„æŒ‡æ¨™æœ‰ CPU ä½¿ç”¨ç‡\u0026amp;é »ç‡ã€å·²ä½¿ç”¨çš„è¨˜æ†¶é«”ã€ç£ç¢Ÿè®€å¯« bytes æ•¸ã€ç¶²è·¯æ”¶ç™¼ bytes æ•¸ã€‚æœƒå°‡æ¯ç§’è®€å–åˆ°çš„æ•¸å€¼å­˜ç‚º csv æª”ã€‚\nPrerequisite\rPython3.5+ psutil code\r1import psutil 2import time 3from collections import namedtuple 4 5################################################################################ 6class SystemMonitor(object): 7 running = True 8 CPU = namedtuple(\u0026#39;cpu\u0026#39;, [\u0026#39;percentage\u0026#39;, \u0026#39;freq\u0026#39;]) 9 NET = namedtuple(\u0026#39;net\u0026#39;, [\u0026#39;rx\u0026#39;, \u0026#39;tx\u0026#39;]) 10 DISK = namedtuple(\u0026#39;disk\u0026#39;, [\u0026#39;read\u0026#39;, \u0026#39;write\u0026#39;]) 11 SysMon = namedtuple(\u0026#39;sysmon\u0026#39;, [\u0026#39;timestamp\u0026#39;, \u0026#39;cpu\u0026#39;, \u0026#39;vm\u0026#39;, \u0026#39;disk\u0026#39;, \u0026#39;net\u0026#39;]) 12 13 def __init__(self, csvfile=\u0026#39;./sysmon.csv\u0026#39;, interval=1.0): 14 self.interval = interval 15 self.csvfile = csvfile 16 17 def run(self): 18 self.info() 19 with open(self.csvfile, \u0026#39;w\u0026#39;) as fp: 20 fp.write(\u0026#39;timestamp,percentage,freq,vm,disk_rd,disk_wr,net_rx,\u0026#39; 21 \u0026#39;net_tx\\n\u0026#39;) 22 23 while self.running: 24 time.sleep(self.interval) 25 info = self.info() 26 #print(info.timestamp) 27 info = [ 28 info.timestamp, 29 info.cpu.percentage, 30 info.cpu.freq, 31 info.vm, 32 info.disk.read, 33 info.disk.write, 34 info.net.rx, 35 info.net.tx, 36 ] 37 info = \u0026#39;,\u0026#39;.join([str(x) for x in info]) + \u0026#39;\\n\u0026#39; 38 with open(self.csvfile, \u0026#39;a+\u0026#39;) as fp: 39 fp.write(info) 40 41 def info(self): 42 ts = int(time.time()) 43 cpu = self.CPU(psutil.cpu_percent(), psutil.cpu_freq().current) 44 vm = psutil.virtual_memory().used 45 diskio = psutil.disk_io_counters() 46 netio = psutil.net_io_counters() 47 48 result = self.SysMon( 49 ts, cpu, vm, 50 self.DISK(diskio.read_bytes, diskio.write_bytes), 51 self.NET(netio.bytes_recv, netio.bytes_sent)) 52 return result 53 54################################################################################ 55if __name__ == \u0026#39;__main__\u0026#39;: 56 m = SystemMonitor() 57 m.run() ","date":"2021-01-15T15:54:00+00:00","updated":"2021-01-15T15:54:00+00:00"},{"objectID":"1610725860","permalink":"/post/programming-python-install-python39-on-centos7/install-python39-on-centos7/","title":"[Python] Install Python3.9 on CentOS7","content":"step1\rä¸‹è¼‰ä¾è³´å·¥å…·ä»¥åŠå®‰è£åŒ…\n1$ yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make libffi-devel wget 2$ wget https://www.python.org/ftp/python/3.9.1/Python-3.9.1.tgz 3$ tar zxvf Python-3.9.1.tgz step2\rç·¨è­¯ Python\n1$ cd Python-3.9.1 2# æª¢æ¸¬ä¸¦ç”¢ç”Ÿ Makefileï¼Œä¸”æŒ‡å®šå®‰è£ç›®éŒ„ 3$ ./configure prefix=/usr/local/python3 4# é–‹å§‹ç·¨è­¯ 5$ make \u0026amp;\u0026amp; make install step3\rå› ç‚ºæƒ³ç›´æ¥ç”¨ python command ä»£è¡¨ä½¿ç”¨ python3ï¼Œæ‰€ä»¥æ–°å¢åˆ¥å\n1$ vi ~/.bashrc 1alias python=\u0026#39;/usr/local/python3/bin/python3\u0026#39; 2alias pip=\u0026#39;/usr/local/python3/bin/pip3\u0026#39; 1$ source ~/.bashrc step4\rç¢ºèªå®‰è£æˆåŠŸ\n1$ python -V 2$ pip -V è£œå…… (virtualenv)\rå¦‚æœæƒ³ä¿ç•™ç³»çµ±é è¨­çš„ python 2.7ï¼Œå‰‡ä¸è¦æ–°å¢ä¸Šé¢ç¬¬ä¸‰æ­¥çš„åˆ¥åï¼Œç›¸åçš„åŠ ä¸Š python3 åŸ·è¡Œè·¯å¾‘çš„ç’°å¢ƒè®Šæ•¸ã€‚\n1$ vi ~/.bashrc 1export python3=\u0026#39;/usr/local/python3/bin\u0026#39; 1$ source ~/.bashrc ç‚ºäº†å€éš”å…©å€‹ python çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ virtualenv éš”é›¢ä¸åŒçš„é–‹ç™¼ç’°å¢ƒã€‚\n1$ pip3 install virtualenv 2$ python3 -m virtualenv project1 3$ cd project1 4$ source bin/activate 5$ python --version 6Python 3.9.1 Info\nç’°å¢ƒè®Šæ•¸è¨­å®šå°è£œå…… /etc/profile \u0026ndash;\u0026gt; å°æ‰€æœ‰ç”¨æˆ¶æ°¸ä¹…ç”Ÿæ•ˆ ~/.bashrc \u0026ndash;\u0026gt; å°å–®ä¸€ç”¨æˆ¶æ°¸ä¹…ç”Ÿæ•ˆï¼Œç•¶ä½ \u0026quot;å•Ÿå‹•\u0026quot; shell æ™‚åŸ·è¡Œ ~/.bash_profile \u0026ndash;\u0026gt; å°å–®ä¸€ç”¨æˆ¶æ°¸ä¹…ç”Ÿæ•ˆï¼Œç•¶ä½ \u0026quot;ç™»å…¥\u0026quot; shell æ™‚åŸ·è¡Œ export xxx = xxx \u0026ndash;\u0026gt;ç›´æ¥é‹è¡Œ export å‘½ä»¤å®šç¾©è®Šé‡ï¼Œåªå°ç•¶å‰ shell æœ‰æ•ˆï¼Œé—œé–‰shell çµ‚ç«¯å¾Œå¤±æ•ˆã€‚\nRefernce\rhttps://blog.jiebu-lang.com/centos-7-install-python-3-7/\rhttps://liqiang.io/post/install-python3-8-in-centos-973bdb81\rhttps://blog.csdn.net/qq_36758461/article/details/103841798\r","date":"2021-01-15T15:51:00+00:00","updated":"2021-01-15T15:51:00+00:00"},{"objectID":"1610115960","permalink":"/post/kubernets-configmap/","title":"ConfigMap å»ºç«‹åŠæ›è¼‰","content":"ConfigMap\rConfigMap ä»¥ key-vaule çš„æ–¹å¼ç”¨ä¾†æè¿°ç³»çµ±ç›¸é—œè¨­å®šï¼Œæ‰€æœ‰èˆ‡æ‡‰ç”¨ç¨‹å¼ç›¸é—œçš„éæ•æ„Ÿæ€§æœªåŠ å¯†çš„è³‡è¨Šå¯æ”¾åœ¨ ConfigMap å…§ã€‚è€Œå¦‚æœ‰æ•æ„Ÿæ€§è³‡æ–™ï¼Œå‰‡éœ€é€é Secretã€‚\nä¸»è¦ç›®çš„\rä¸»è¦ç›®çš„æ˜¯å°‡æ‡‰ç”¨ç¨‹å¼èˆ‡è¨­å®šè§£è€¦ï¼ŒConfigMap èˆ‡ Pod å°‡å€‹åˆ¥å–®ç¨å­˜åœ¨æ–¼ k8s å¢é›†ä¸­ï¼Œç•¶ Pod éœ€è¦ä½¿ç”¨ ConfigMap æ™‚æ‰éœ€è¦å°‡ ConfigMap æ›è¼‰åˆ° Pod å…§ä½¿ç”¨ã€‚è§£è€¦çš„å¥½è™•æœ‰ï¼š\nä¾¿æ–¼ç®¡ç† å½ˆæ€§é«˜ï¼Œå¯æ›è¼‰ä¸åŒçš„ ConfigMap åˆ° Pod å…§ä½¿ç”¨ï¼›æˆ–æ˜¯åŒä¸€å€‹ ConfigMap æ›è¼‰åˆ°å¤šå€‹ Podã€‚ ç”¨æ³•\rKubernetes çš„ ConfigMap é€é kubectl create æˆ– kubectl apply ä¾†å»ºç«‹ã€‚\n1$ kubectl create configmap [è³‡æºåå­—] [ä¾†æºåƒæ•¸] 2$ kubectl apply condfigmap.yaml ä½¿ç”¨ kubectl create å»ºç«‹\rä½¿ç”¨ kubectl create å¯ä»¥å¾æª”æ¡ˆè·¯å¾‘ã€æª”æ¡ˆæˆ–æ˜¯ literal value ä¾†å»ºç«‹ configMapã€‚\n\u0026ndash;from-file 1# å»ºç«‹åç‚º myConfã€è³‡æ–™ä¾†æºæ˜¯æŸè·¯å¾‘ä¸‹æ‰€æœ‰æª”æ¡ˆçš„ configMap 2$ kubectl create configmap myConf --from-file=/path/for/config/file/ 3 4# å»ºç«‹åç‚º myConfã€è³‡æ–™ä¾†æºæ˜¯ä¸€å€‹æª”æ¡ˆçš„ configMap 5$ kubectl create configmap myConf --from-file=/path/to/app.properties 6 7# å»ºç«‹åç‚º myConfã€è³‡æ–™ä¾†æºæ˜¯å¤šå€‹æª”æ¡ˆçš„ configMap 8$ kubectl create configmap myConf --from-file=/path/of/app1.properties --from-file=/path/of/app2.properties Note\nå¦‚æœæ˜¯ä¾†æºæ˜¯æª”æ¡ˆçš„è©±ï¼Œå‰‡ configMap ä¸­çš„ key å°±æœƒæ˜¯æª”åï¼Œvalue å‰‡æ˜¯æª”æ¡ˆå…§å®¹ã€‚\n\u0026ndash;from-literal 1# å»ºç«‹åç‚º myConfã€åŒ…å«æŒ‡å®šéµå€¼å°çš„ configMap 2$ kubectl create configmap myConf --from-literal=key1=config1 3 4$ kubectl create configmap myConf --from-literal=key1=config1 --from-literal=key2=config2 å…©å€‹å…±ç”¨ 1$ kubectl create configmap myConf --from-file=/path/of/config.conf \\ 2 --from-literal=key1=config1 \\ 3 --from-literal=key2=config2 \u0026ndash;from-env-file ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è¡¨ç¤ºçš„æª”æ¡ˆã€‚ Warning\nè«‹æ³¨æ„ï¼Œvalue å¦‚æœæœ‰ \u0026quot;\u0026quot; å‰‡æœƒè¦–ç‚ºæ˜¯å€¼çš„ä¸€éƒ¨ä»½ã€‚ä¸”å¦‚æœåœ¨åŒå€‹ create ä¸­ä½¿ç”¨å¤šå€‹ \u0026ndash;from-env-file å‰‡æŒ‡æœƒæ‡‰ç”¨æœ€å¾Œä¸€å€‹ã€‚\nä½¿ç”¨ kubectl apply yaml æª”æ¡ˆå»ºç«‹\ræº–å‚™ yaml æª”\n1--- 2apiVersion: v1 3kind: ConfigMap 4metadata: 5 name: myConf 6data: 7 key1: config1 8 key2: config2 9 app.properties: | 10 property.1 = value1 11 property.2 = value2 12 property.3 = value3 ä½ˆç½²\n1$ kubectl apply -f configmap.yaml æŸ¥çœ‹ ConfigMap\rå»ºç«‹å®Œæˆå¾Œå¯ä»¥ä½¿ç”¨ kubectl get æˆ–æ˜¯ kubectl describe çš„æ“·å– configMap çš„å…§å®¹ã€‚\n1$ kubectl get configmaps myConf -o yaml 1apiVersion: v1 2kind: ConfigMap 3metadata: 4 creationTimestamp: 2021-01-04T18:52:05Z 5 name: myConf 6 namespace: default 7 resourceVersion: \u0026#34;516\u0026#34; 8 uid: b4952dc3-d670-11e5-8cd0-68f728db1985 9data: 10 key1: config1 11 key2: config2 12 app.properties: | 13 property.1 = value1 14 property.2 = value2 15 property.3 = value3 å°‡ ConfigMap æ›è¼‰åˆ° pod ä½¿ç”¨\rç•¶æˆç’°å¢ƒè®Šæ•¸ä½¿ç”¨\rpod çš„ yaml æª”å¦‚ä¸‹\n1apiVersion: v1 2kind: Pod 3metadata: 4 name: testenv 5spec: 6 containers: 7 - name: test 8 image: tomcat:8 9 imagePullPolicy: IfNotPresent 10 command: [ \u0026#34;/bin/sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;echo $(KEY1_ENV)\u0026#34; ] 11 env: 12 - name: KEY1_ENV 13 valueFrom: 14 configMapKeyRef: 15 name: myConf 16 key: key1 å°‡ pod è·‘èµ·ä¾†å¾Œï¼ŒConfigMap myConf ä¸­çš„ key1 çš„ value å°±æœƒåšç‚ºç’°å¢ƒè®Šæ•¸ KEY1_ENV çš„å€¼ã€‚\næ›è¼‰æˆ volume\rpod çš„ yaml æª”å¦‚ä¸‹\n1apiVersion: v1 2kind: Pod 3metadata: 4 name: testvolume 5spec: 6 containers: 7 - name: test 8 image: tomcat: 8 9 imagePullPolicy: IfNotPresent 10 command: [ \u0026#34;/bin/sh\u0026#34;,\u0026#34;-c\u0026#34;,\u0026#34;cat /etc/config/keys\u0026#34; ] 11 volumeMounts: 12 - name: config-volume 13 mountPath: /etc/config 14 volumes: 15 - name: config-volume 16 configMap: 17 name: myConf Note\nä½¿ç”¨ volume å°‡ ConfigMap ä½œç‚ºæ–‡ä»¶æˆ–ç›®éŒ„ç›´æ¥æ›è¼‰ï¼ŒConfigMap ä¸­æ¯ä¸€å€‹ key-value éµå€¼å°éƒ½æœƒç”Ÿæˆä¸€å€‹æ–‡ä»¶ï¼Œkey ç‚ºæ–‡ä»¶åï¼Œvalue ç‚ºå…§å®¹ã€‚\nå¦ä¸€ç¨®æ–¹å¼ï¼Œåªæ›è¼‰æŸå€‹ keyï¼Œä¸¦æŒ‡å®šç›¸å°è·¯å¾‘ã€‚\n1apiVersion: v1 2kind: Pod 3metadata: 4 name: testvolume 5spec: 6 containers: 7 - name: test 8 image: tomcat:8 9 imagePullPolicy: IfNotPresent 10 volumeMounts: 11 - name: config-volume 12 mountPath: /etc/config 13 volumes: 14 - name: config-volume 15 configMap: 16 name: myConf 17 items: 18 - key: key1 19 path: /path/to/key1 # key1 æœƒæ”¾åœ¨ mountPath /etc/config/path/to ä¸‹ã€‚ 20 - key: app.properties 21 path: app.properties # å¦‚æœ path èˆ‡ key ç›¸åŒï¼Œå‰‡æœƒç›´æ¥æŠŠ app.properties æ–‡ä»¶æ”¾åœ¨ mountPath ä¸‹ã€‚ Reference\rhttps://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/\rhttps://www.cnblogs.com/pu20065226/p/10690628.html\r","date":"2021-01-08T14:26:00+00:00","updated":"2021-01-08T14:26:00+00:00"},{"objectID":"1610041080","permalink":"/post/kubernets-object/","title":"Kubernetes Object åŸºæœ¬å°è±¡ä»‹ç´¹","content":"K8s Obejcts\rå¸¸ç”¨çš„åŸºæœ¬ objects\rPod\nPod æœ‰å…©ç¨®é¡å‹ï¼šæ™®é€š Pod å’Œéœæ…‹ Pod (static pod)ã€‚éœæ…‹ Pod å³ä¸é€šé K8S èª¿åº¦å’Œå‰µå»ºï¼Œç›´æ¥åœ¨æŸå€‹å…·é«”çš„ Node æ©Ÿå™¨ä¸Šé€šéå…·é«”çš„æ–‡ä»¶ä¾†å•Ÿå‹•ã€‚æ™®é€š Pod å‰‡æ˜¯ç”± K8S å‰µå»ºã€èª¿åº¦ï¼ŒåŒæ™‚æ•¸æ“šå­˜æ”¾åœ¨ etcd ä¸­ã€‚ Service\nå¯ä»¥èªç‚ºæ˜¯ pod çš„åå‘ä»£ç†ï¼Œè² è²¬æ¥æ”¶å®¢æˆ¶ç«¯è«‹æ±‚ï¼ŒæŠŠè«‹æ±‚è½‰çµ¦ podã€‚å› ç‚ºæ¯å€‹ pod éƒ½æœ‰è‡ªå·±çš„å…§éƒ¨ ipï¼Œä½†æ˜¯ deployment çš„ pod çš„ ip æ˜¯æœ‰å¯èƒ½è®Šçš„ (pod æ›æ‰æˆ–è¤‡è£½)ï¼Œæ‰€ä»¥éœ€è¦ service ä¾†åšé¡ä¼¼ä¸­é–“è€…çš„æŠ½è±¡å­˜åœ¨ã€‚Service æŒ‘é¸ã€é—œè¯ Pod çš„æ–¹å¼ç‚ºåŸºæ–¼ Label Selector é€²è¡Œå®šç¾©ã€‚é€šé type åœ¨ ServiceSpecä¸­æŒ‡å®šå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å…¬é–‹æœå‹™ï¼š ClusterIP (default)ï¼šåªæœ‰å…§éƒ¨ IPï¼Œåªèƒ½å¾é›†ç¾¤å…§è¨ªå•æœå‹™ã€‚ NodePortï¼šå·¥ä½œæ–¼æ¯å€‹ç¯€é»çš„ä¸»æ©Ÿ IP ä¹‹ä¸Šï¼Œå¯ä»¥å¾é›†ç¾¤å¤–éƒ¨è¨ªå•æœå‹™ã€‚ClusterIP çš„è¶…é›†ã€‚ LoadBalancerï¼šåœ¨ç•¶å‰é›†ç¾¤ä¸­å‰µå»ºä¸€å€‹å¤–éƒ¨è² è¼‰å¹³è¡¡å™¨ï¼ŒæŠŠå¤–éƒ¨è«‹æ±‚è² è¼‰å‡è¡¡è‡³å¤šå€‹Node ä¸»æ©Ÿ IP çš„ NodePort ä¹‹ä¸Šï¼Œç‚ºè©²æœå‹™åˆ†é…ä¸€å€‹å›ºå®šçš„å¤–éƒ¨ IPã€‚NodePort çš„è¶…é›†ã€‚ ExternalName-externalNameï¼šé€šéåœ¨ Cluster çš„ DNS Server æ·»åŠ ä¸€ç­† CName Recordï¼Œä½¿ç”¨æŒ‡å®šåç¨±ï¼ˆåœ¨ yaml ä¸­è¨­å®šï¼‰å…¬é–‹æœå‹™ï¼Œä¸ä½¿ç”¨ä»£ç† (kube-proxy)ï¼Œè€Œæ˜¯é€é kube-dnsã€‚æ­¤é¡å‹åœ¨ kubernetes 1.7 ç‰ˆæœ¬æœ‰æä¾›ï¼Œä½†æ˜¯è¦ kube-dns version è¦åœ¨ 1.14.9 ä»¥ä¸Šï¼Œå¦å‰‡æœƒé‡åˆ° Resolve External Name issueã€‚ä¸»è¦æ˜¯ç‚ºäº†è®“ä¸åŒ namespace ä¸­çš„ Service å¯ä»¥åˆ©ç”¨ ExternalName è¨­å®šçš„å¤–éƒ¨åç¨±é€£åˆ°å…¶å®ƒçš„ namespace ä¸­çš„ Serviceã€‚ Label\næ¨™ç±¤ç”¨æ–¼å€åˆ†å°è±¡ï¼Œä½¿ç”¨æ¨™ç±¤å¼•ç”¨å°è±¡è€Œä¸å†æ˜¯ IPã€‚Label ä»¥éµå€¼å°çš„å½¢å¼å­˜åœ¨ï¼Œæ¯å€‹å°è±¡å¯ä»¥æœ‰å¤šå€‹æ¨™ç±¤ï¼Œé€šéæ¨™ç±¤å¯ä»¥é—œè¯å°è±¡ã€‚ Volume\nå…±äº« Pod ä¸­ä½¿ç”¨çš„æ•¸æ“šã€‚ Namespace\nå¯ä»¥æŠ½è±¡ç†è§£ç‚ºä¸€ç¾¤å°è±¡çš„é›†åˆã€‚ High-level â€¦","date":"2021-01-07T17:38:00+00:00","updated":"2021-01-07T17:38:00+00:00"},{"objectID":"1609349460","permalink":"/post/data-rabbitmq-installation-on-k8s/rabbitmq-on-k8s/","title":"[RabbitMQ] åœ¨ K8s cluster ä¸Šå®‰è£å¢é›†","content":"å…ˆæ±ºæ¢ä»¶\rkubernetes 1.17 ç‰ˆä»¥ä¸Š RabbitMQ image 3.8.8+ å®‰è£ operator\r1$ kubectl apply -f \u0026#34;https://github.com/rabbitmq/cluster-operator/releases/latest/download/cluster-operator.yml\u0026#34; 2namespace/rabbitmq-system created 3customresourcedefinition.apiextensions.k8s.io/rabbitmqclusters.rabbitmq.com created 4serviceaccount/rabbitmq-cluster-operator created 5role.rbac.authorization.k8s.io/rabbitmq-cluster-leader-election-role created 6clusterrole.rbac.authorization.k8s.io/rabbitmq-cluster-operator-role created 7rolebinding.rbac.authorization.k8s.io/rabbitmq-cluster-leader-election-rolebinding created 8clusterrolebinding.rbac.authorization.k8s.io/rabbitmq-cluster-operator-rolebinding created 9deployment.apps/rabbitmq-cluster-operator created ç¢ºèª CRD éƒ¨å±¬å®Œæˆ\n1$ kubectl get customresourcedefinitions.apiextensions.k8s.io | grep rabbitmq 2rabbitmqclusters.rabbitmq.com 2020-12-29T06:22:27Z å®‰è£ RabbitMQ Cluster\rRabbitMQ server é€é RabbitmqCluster è³‡æºä¾†å»ºç«‹ï¼Œæ•´å€‹é›†ç¾¤è³‡æº(å¦‚ pod, svc, statefulSet)éƒ½æœƒå»ºåœ¨åŒä¸€å€‹æŒ‡å®š namespace ä¸‹ã€‚\næº–å‚™ yaml æª”\ræº–å‚™ä¸€å€‹ yaml æª”ä¾†å®šç¾© RabbitmqCluster è³‡æºï¼š\n1$ mkdir rbmq \u0026amp;\u0026amp; cd rbmq \u0026amp;\u0026amp; touch rbmq.yaml 2$ vim rbmq.yaml å®šç¾©äº† cluster name ç‚º rbmqã€æŒ‡å®šæ”¾åœ¨ rabbitmq namespace ä¸‹ï¼Œè¤‡æœ¬æ•¸æŒ‡å®šç‚º 3ã€service é¡å‹ç‚º LoadBalancer (å‰ææ˜¯ k8s é›†ç¾¤æœ‰å»ºç½® LB å¥—ä»¶)ã€æŒ‡å®š storageClass ä»¥åŠç©ºé–“ã€‚\n1apiVersion: rabbitmq.com/v1beta1 2kind: RabbitmqCluster 3metadata: 4 name: rbmq 5 namespace: rabbitmq 6spec: 7 replicas: 3 8 service: 9 type: LoadBalancer 10 persistence: 11 storageClassName: standard 12 storage: 20Gi Warning\npersistence å¯ä»¥ä¸å¯«ï¼Œä½† k8s é›†ç¾¤å¿…é ˆäº‹å…ˆè¨­ç½® default çš„ StorageClassï¼Œè‹¥ç„¡å¡«å¯«å‰‡æœƒä½¿ç”¨ default storageClassã€‚å¦å‰‡é›†ç¾¤å°‡ä¸æœƒè¢« scheduled æˆåŠŸï¼Œå› ç‚º rabbitMQ éœ€è¦æœ‰ persistent volumeã€‚\np.s. ä½¿ç”¨ $ kubectl get sc å–å¾—ç›®å‰ k8s é›†ç¾¤çš„ StorageClass è³‡æº\né–‹å§‹å»ºç«‹\ræ‡‰ç”¨ä¸Šä¸€æ­¥é©Ÿå®šç¾©å¥½çš„ RabbitmqCluster è³‡æºï¼Œå¦‚æœä¸ä½¿ç”¨èˆ‡ operator ç›¸åŒçš„ namespace çš„è©±ï¼Œéœ€è¦å…ˆè‡ªå·±å‰µä¸€å€‹ã€‚\n1$ kubectl create ns rabbitmq 2$ kubectl apply -f rbmq.yaml é©—è­‰è³‡æºæ˜¯å¦éƒ½æœ‰å»ºç«‹æˆåŠŸ\n1$ kubectl get all -n rabbitmq åŠ å…¥ TLS\rå»ºç«‹ Secret\réœ€å…ˆæº–å‚™å¥½ä¸€çµ„å«æœ‰ key è·Ÿ cert çš„ pem æ ¼å¼çš„é‡‘é‘°ï¼Œå¦‚æœæ²’æœ‰å°±æŒ‰ç…§ä¸‹é¢æŒ‡ä»¤å‰µå»ºã€‚\n1$ openssl req -x509 -newkey rsa:2048 -sha256 -nodes -keyout key.pem -out cert.pem -days 3650 ä½¿ç”¨ç¾æœ‰çš„é‡‘é‘°åšæˆ secret\n1$ kubectl create secret -n rabbitmq tls rbmq-tls-secret --cert=/root/cert.pem --key=/root/key.pem ä¿®æ”¹é…ç½®\r1$ kubectl edit rabbitmqcluster rbmq åœ¨ spec.tls.secretName ä¸­åŠ ä¸Šå‰›å‰›çš„ secretã€‚\n1spec: 2 tls: 3 secretName: rbmq-tls-secret ä¿å­˜å¾Œé›¢é–‹å°±å¯ä»¥çœ‹åˆ°é›†ç¾¤ä¸Šå·²ç¶“é–‹å•Ÿäº† tlsã€‚\né€²å…¥ Rabbit Management\ré–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ LoadBalancer é…ç½®çš„ ip:15672 é€²å…¥ Rabbit Managementã€‚\nå–å¾—ä½¿ç”¨è€…å¸³å¯†\radmin user çš„å¸³å¯†å„²å­˜åœ¨ secret ä¸­ï¼Œè³‡æºåå­—ç‚º cluster name åŠ ä¸Š -default-userï¼Œå¸³å¯†çš†ä»¥ base44 ç·¨ç¢¼å„²å­˜ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å–å¾—å¸³è™Ÿä»¥åŠå¯†ç¢¼ï¼š\n1$ kubectl -n rabbitmq get secret rbmq-default-user -o jsonpath=\u0026#34;{.data.username}\u0026#34; | base64 --decode 2$ kubectl -n rabbitmq get secret rbmq-default-user -o jsonpath=\u0026#34;{.data.password}\u0026#34; | base64 --decode Reference\rhttps://www.rabbitmq.com/kubernetes/operator\r","date":"2020-12-30T17:31:00+00:00","updated":"2020-12-30T17:31:00+00:00"},{"objectID":"1608494820","permalink":"/post/database-mongodb-cannot-connect-with-replicaset/mongodb-replicaset-connection-failed/","title":"[MongoDB] ç„¡æ³•ä½¿ç”¨ replicaSet é€£ç·šå•é¡Œ","content":"å‰è¨€\rç”¨ docker è·‘ä¸‰å€‹ mongoDB çš„ containerï¼Œåšæˆ replica set clusterã€‚ä½†å»é‡åˆ°å¾å¤–é¢çš„ shell (è·‘åœ¨æœ¬æ©Ÿæˆ–å…¶ä»– server) åŠ ä¸Š replica set çš„åå­—æ™‚ç„¡æ³•é€£ç·šçš„å•é¡Œ (mongo --host myReplica/mongo1 å¤±æ•—)ã€‚è€Œä¸åŠ  replica set å»éƒ½èƒ½æˆåŠŸé€£ç·š (mongo --host mongo1:30001 æˆåŠŸ)ã€‚\nåŸå› \rå¤–éƒ¨é€£ç·šçš„ hostname è·Ÿ port èˆ‡ mongodb å…§éƒ¨çš„ replica set configuration ä¸åŒ\nè§£æ±ºè¾¦æ³•\råƒè€ƒ é€™ç¯‡ issue\rå¾Œç™¼ç¾æœ‰å…©ç¨®åšæ³•ï¼Œä¸€ç¨®æ˜¯åœ¨å»ºç«‹ container çš„æ™‚å€™ç‚ºæ¯å€‹è§’è‰²æŒ‡å®šç’°å¢ƒè®Šæ•¸ (å¦‚ MONGODB_REPLICA_SET_MODE=primary)ã€‚ä½†é€™å€‹åšæ³•ç¸½è¦ºå¾—å“ªè£¡æ€ªæ€ªçš„ï¼Œä¸å¤ªç¢ºå®šåœ¨ç’°å¢ƒè®Šæ•¸æŒ‡å®š primary æˆ– secondary å¾Œï¼Œç•¶ primary æ›æ‰æ™‚ç’°å¢ƒè®Šæ•¸å›ºå®šæœƒä¸æœƒé€ æˆä»€éº¼å½±éŸ¿ã€‚\næ‰€ä»¥æˆ‘å°±ç”¨ç¬¬äºŒç¨®æ–¹æ³•ï¼ŒæŠŠ container å…§çš„ mongod çš„ port èˆ‡å¤–é¢ export çš„ port è¨­æˆä¸€æ¨£çš„ã€‚ç„¶å¾Œé€£ç·šå‰åœ¨ /etc/hosts ä¸­è¨­å®šå°æ‡‰çš„ hostnameã€‚\n1docker run \\ 2-p 30001:30001 \\ 3--name mongo1 \\ 4--network mongo-cluster \\ 5mongo mongod --replSet myReplica --port 30001 é€™æ¨£å­ rs.conf().members çš„ ip \u0026amp; port æ‰å’Œå¤–é¢æœƒä¸€æ¨£ã€‚\n1[root@test ~]# mongo --host myReplica/mongo1:30001,mongo2:30002,mongo3:30003 2myReplica:PRIMARY\u0026gt; rs.conf().members 3[ 4 { 5 \u0026#34;_id\u0026#34; : 0, 6 \u0026#34;host\u0026#34; : \u0026#34;mongo1:30001\u0026#34;, 7 \u0026#34;arbiterOnly\u0026#34; : false, 8 \u0026#34;buildIndexes\u0026#34; : true, 9 \u0026#34;hidden\u0026#34; : false, 10 \u0026#34;priority\u0026#34; : 1, 11 \u0026#34;tags\u0026#34; : { 12 13 }, 14 \u0026#34;slaveDelay\u0026#34; : NumberLong(0), 15 \u0026#34;votes\u0026#34; : 1 16 }, 17 { 18 \u0026#34;_id\u0026#34; : 1, 19 \u0026#34;host\u0026#34; : \u0026#34;mongo2:30002\u0026#34;, 20 \u0026#34;arbiterOnly\u0026#34; : false, 21 \u0026#34;buildIndexes\u0026#34; : true, 22 \u0026#34;hidden\u0026#34; : false, 23 \u0026#34;priority\u0026#34; : 1, 24 \u0026#34;tags\u0026#34; : { 25 26 }, 27 \u0026#34;slaveDelay\u0026#34; : NumberLong(0), 28 \u0026#34;votes\u0026#34; : 1 29 }, 30 { 31 \u0026#34;_id\u0026#34; : 2, 32 \u0026#34;host\u0026#34; : \u0026#34;mongo3:30003\u0026#34;, 33 \u0026#34;arbiterOnly\u0026#34; : false, 34 \u0026#34;buildIndexes\u0026#34; : true, 35 \u0026#34;hidden\u0026#34; : false, 36 \u0026#34;priority\u0026#34; : 1, 37 \u0026#34;tags\u0026#34; : { 38 39 }, 40 \u0026#34;slaveDelay\u0026#34; : NumberLong(0), 41 \u0026#34;votes\u0026#34; : 1 42 } 43] Reference\ræ–‡ä¸­çš„ github issue é€£çµ https://github.com/bitnami/bitnami-docker-mongodb/issues/84\ré€™ç¯‡ä¹Ÿè§£é‡‹å¾—å¾ˆæ¸…æ¥šï¼Œå¯ä»¥åƒè€ƒåƒè€ƒ https://serverfault.com/questions/895355/docker-container-unable-to-connect-to-mongodb-replica-set\r","date":"2020-12-20T20:07:00+00:00","updated":"2020-12-20T20:07:00+00:00"},{"objectID":"1608494580","permalink":"/post/database-mongodb-install-shell-only/mongodb-install-shell/","title":"[MongoDB] Install MongoDB Shell","content":"Install Mongo Shell Only on Linux\rmongo shell å·²ç¶“åŒ…å«åœ¨ MongoDB æœå‹™å™¨ä¸­ã€‚å¦‚æœå·²ç¶“å®‰è£äº† DBï¼Œå‰‡ mongo shell å°‡å®‰è£åœ¨èˆ‡æœå‹™å™¨ binary æ–‡ä»¶ç›¸åŒçš„ä½ç½®ã€‚ ä½†å¦‚æœåªæƒ³å¾ MongoDB æœå‹™å™¨å¤–å–®ç¨ä¸‹è¼‰ mongo shellï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿå°‡ shell ä½œç‚ºç¨ç«‹ç¨‹åºå®‰è£ï¼š\nä¸‹è¼‰\ré€²å…¥ MongoDB Coummunity Download Center\rï¼Œä¾ç…§ä½œæ¥­ç³»çµ±ç‰ˆæœ¬é¸æ“‡ mongo shellï¼Œä¸¦æŠŠé€£çµè¤‡è£½èµ·ä¾†ã€‚\n1$ wget https://fastdl.mongodb.org/linux/mongodb-shell-linux-x86_64-rhel70-4.4.2.tgz 2$ tar tzxvf mongodb-shell-linux-x86_64-rhel70-4.4.2.tgz è¤‡è£½ mongo åŸ·è¡Œæª”åˆ°åŸ·è¡Œç›®éŒ„\r1$ cd mongodb-shell-linux-x86_64-rhel70-4.4.2/bin 2$ cp mongo /usr/local/bin 3$ mongo 4MongoDB shell version v4.4.2 5connecting to: mongodb://127.0.0.1:27017/?compressors=disabled\u0026amp;gssapiServiceName=mongodb 6Error: couldn\u0026#39;t connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 :: caused by :: Connection refused : 7connect@src/mongo/shell/mongo.js:374:17 8@(connect):2:6 9exception: connect failed 10exiting with code 1 å°±æˆåŠŸäº†ï¼ï¼ˆp.s. éŒ¯èª¤æ˜¯å› ç‚ºæœ¬æ©Ÿ 127.0.0.1:27017 æ²’è£ MongoDBï¼‰\nReference\rhttps://docs.mongodb.com/manual/mongo/\r","date":"2020-12-20T20:03:00+00:00","updated":"2020-12-20T20:03:00+00:00"},{"objectID":"1608070140","permalink":"/post/database-mongodb-install-monogodb-replicaset-with-docker/mongodb-install-db-replicaset-with-docker/","title":"[MongoDB] Install MongoDB Replica Set with Docker","content":"Replica Set Installation\rPre-requisties\rç¢ºèªæ˜¯å¦å®‰è£ Dockerï¼Œä¸¦ç¢ºèª docker daemon æ˜¯å¦æœ‰è·‘èµ·ä¾†\n1$ docker -v 2$ docker images ä¸‹è¼‰æœ€æ–°ç‰ˆçš„å®˜æ–¹ mongo image\n1$ docker pull mongo æ¶æ§‹\ré–‹å§‹å®‰è£\rè¨­ç½®ç¶²è·¯\r1[root@test ~]# docker network ls 2NETWORK ID NAME DRIVER SCOPE 3cd9c58204dfa bridge bridge local 43954d16a34fc host host local 5146f0c7f58e7 none null local æ–°å¢ç¶²è·¯\r1$ docker network create mongo-cluster è·‘ container\r1$ docker run -d --name mongo1 --network mongo-cluster -p 30001:30001 -v mongo1:/data/db mongo:latest mongod --replSet myReplica --port 30001 --dbpath /data/db 2$ docker run -d --name mongo2 --network mongo-cluster -p 30002:30002 -v mongo2:/data/db mongo:latest mongod --replSet myReplica --port 30002 --dbpath /data/db 3$ docker run -d --name mongo3 --network mongo-cluster -p 30003:30003 -v mongo3:/data/db mongo:latest mongod --replSet myReplica --port 30003 --dbpath /data/db é€²å…¥ container è¨­ç½® replication\r1$ docker exec -it mongo1 mongo --port 30001 1\u0026gt; rs.initiate({\u0026#34;_id\u0026#34;:\u0026#34;myReplica\u0026#34;,\u0026#34;members\u0026#34;:[{\u0026#34;_id\u0026#34;:0,\u0026#34;host\u0026#34;:\u0026#34;mongo1:30001\u0026#34;},{\u0026#34;_id\u0026#34;:1,\u0026#34;host\u0026#34;:\u0026#34;mongo2:30002\u0026#34;},{\u0026#34;_id\u0026#34;:2,\u0026#34;host\u0026#34;:\u0026#34;mongo3:30003\u0026#34;}]}) ç¬¬ä¸€å€‹åƒæ•¸çš„ _id å¿…é ˆèˆ‡è·‘ mongod çš„ \u0026ndash;replSet åƒæ•¸ç›¸åŒï¼Œç¬¬äºŒå€‹åƒæ•¸ members éœ€åˆ—å‡ºæ‰€æœ‰æ¬²åŠ å…¥ replica set çš„ nodeã€‚è€Œå› ç‚ºæ‰€æœ‰ container éƒ½åŠ åœ¨ mongo-cluster çš„ docker networkï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ container name è¾¨åˆ¥ã€‚\n1{ 2\u0026#34;ok\u0026#34; : 1, 3\u0026#34;$clusterTime\u0026#34; : { 4\u0026#34;clusterTime\u0026#34; : Timestamp(1608026586, 1), 5\u0026#34;signature\u0026#34; : { 6\u0026#34;hash\u0026#34; : BinData(0,\u0026#34;AAAAAAAAAAAAAAAAAAAAAAAAAAA=\u0026#34;), 7\u0026#34;keyId\u0026#34; : NumberLong(0) 8} 9}, 10\u0026#34;operationTime\u0026#34; : Timestamp(1608026586, 1) 11} 12myReplica:SECONDARY\u0026gt; 13myReplica:PRIMARY\u0026gt; æˆåŠŸåˆå§‹åŒ–ç¾¤é›†å¾Œï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ°å›å‚³çš„è¨Šæ¯é¡¯ç¤º ok = 1ã€‚ä¸¦ä¸” shell æœ€å‰é¢æœƒå…ˆè®Šæˆ myReplica:SECONDARY\u0026gt;ï¼Œå†æŒ‰ä¸€ä¸‹ enterï¼Œå°±èƒ½æˆåŠŸè®Šæˆ myReplica:PRIMARY\u0026gt;ã€‚å…ˆæ˜¯ SECONDARY çš„åŸå› æ˜¯å› ç‚ºé‚„æ²’é¸å‡º PRIMARYã€‚\né–‹å§‹å¯«è³‡æ–™\r1\u0026gt; use test 2\u0026gt; db.col1.insert({hello:\u0026#39;world\u0026#39;}) 3WriteResult({ \u0026#34;nInserted\u0026#34; : 1 }) 4\u0026gt; db.col1.find() 5{ \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;87362127767493de37ff95ed\u0026#34;), \u0026#34;hello\u0026#34; : \u0026#34;world\u0026#34; } å†è©¦è©¦çœ‹é€£åˆ°ç¬¬äºŒå° MongoDB æ‰¾è³‡æ–™å®¤ä¸æ˜¯å·²ç¶“å‚™ä»½æˆåŠŸäº†ã€‚åœ¨ä½¿ç”¨ Secondary è³‡æ–™åº«æœå°‹å‰ï¼Œéœ€è¦å…ˆä¸‹ db2.setSlaveOk () è®“ shell çŸ¥é“æˆ‘å€‘æœ‰æ„è¦ç”¨é primary è³‡æ–™åº«æŸ¥è©¢ã€‚\n1\u0026gt; db2 = (new Mongo(\u0026#39;mongo2:30002\u0026#39;)).getDB(\u0026#39;test\u0026#39;) 2test 3\u0026gt; db2.setSlaveOk() 4\u0026gt; db2.col1.find() 5{ \u0026#34;_id\u0026#34; : ObjectId(87362127767493de37ff95ed\u0026#34;), \u0026#34;hello\u0026#34; : \u0026#34;world\u0026#34; } Reference\rhttps://www.sohamkamani.com/blog/2016/06/30/docker-mongo-replica-set/\r","date":"2020-12-15T22:09:00+00:00","updated":"2020-12-15T22:09:00+00:00"},{"objectID":"1608069300","permalink":"/post/database-mongodb-intro-and-install-on-baremetal/mongodb-introduction-and-installation/","title":"[MongoDB] Introduction and Installation on Bare Metal","content":"æ–‡ä»¶å°å‘å¼(document-oriented)è³‡æ–™åº«ï¼Œå„²å­˜æ–‡ä»¶ï¼ˆdocumentï¼‰æˆ–ç‰©ä»¶ï¼ˆobjectï¼‰ï¼Œæ²’æœ‰ row çš„æ¦‚å¿µï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ documentã€‚\nFeatures\rschema-lessï¼šæ“æœ‰å½ˆæ€§çš„ schema æ˜“æ–¼æ©«å‘æ“´å±•ï¼Œdocument çš„æ•¸æ“šæ¨¡å‹èƒ½å¾ˆå®¹æ˜“åœ¨å¤šå°ä¼ºæœå™¨ä¹‹é–“é€²è¡Œæ•¸æ“šåˆ†å‰²ã€‚ æ€§èƒ½ï¼šMongoDB èƒ½é åˆ†é…ï¼Œä»¥åˆ©ç”¨é¡å¤–çš„ç©ºé–“æ›å–ç©©å®šï¼ŒåŒæ™‚ç›¡å¯èƒ½æŠŠå¤šçš„å…§å­˜ç”¨ä½œ cacheï¼Œè©¦åœ–ç‚ºæ¯æ¬¡æŸ¥è©¢è‡ªå‹•é¸æ“‡æ­£ç¢ºçš„ç´¢å¼•ã€‚æŸ¥è©¢(ä½¿ç”¨ç´¢å¼•)ã€æ’å…¥(è‡ªå‹•åˆ†ç‰‡)ç­‰æ“ä½œçš„é€Ÿåº¦å¾ˆå¿«ã€‚ Map/Reduce çš„èšåˆï¼ˆaggregationï¼‰åŠŸèƒ½ï¼šæ›´å¤šå¯èƒ½æ€§ï¼Œä¸”æä¾›æ–¹ä¾¿çš„è³‡æ–™åˆ†çµ„ã€è™•ç†èˆ‡äºŒæ¬¡åŠ å·¥ç­‰æ“ä½œ å‰¯æœ¬ï¼ˆReplicationï¼‰\u0026amp;amp; å®¹éŒ¯ç§»è½‰ï¼ˆfailoverï¼‰ï¼šæä¾›è³‡æ–™çš„é«˜å¯ç”¨æ€§ï¼ˆHA, High Availabilityï¼‰ ç¼ºé»\rä¸æ”¯æ´äº‹å‹™æ“ä½œ : æ‰€ä»¥é€šå¸¸ä¸é©åˆæ‡‰ç”¨åœ¨éŠ€è¡Œæˆ–æœƒè¨ˆé€™ç¨®ç³»çµ±ä¸Šï¼Œå› ç‚ºä¸åŒ…è­‰ä¸€è‡´æ€§ã€‚ å ç”¨æ¯”è¼ƒå¤šç©ºé–“ : ä¸»è¦æ˜¯æœ‰å…©å€‹åŸå› ï¼Œé¦–å…ˆæ˜¯å®ƒæœƒé åˆ†é…ç©ºé–“ï¼Œç‚ºäº†æé«˜æ•ˆèƒ½ï¼Œè€Œç¬¬äºŒå€‹åŸå› æ˜¯æ¬„ä½æ‰€å ç”¨çš„ç©ºé–“ã€‚\nå„²å­˜æ¶æ§‹\rdocument\rDocument æ˜¯ mongodb çš„æ ¸å¿ƒï¼Œå®ƒå°±æ˜¯ Key-Value çš„å°æ‡‰çµ„åˆã€‚è³‡æ–™çš„å„²å­˜æ¶æ§‹æ˜¯ä»¥é¡ä¼¼ JSON çš„è³‡æ–™çµæ§‹ BSON(Binary JSON) å„²å­˜ï¼Œæ¯ç­†è³‡æ–™çš„ key å’Œ value éƒ½æ˜¯å€åˆ†å¤§å°å¯«ã€‚\n1{ 2 _id: \u0026amp;#34;948794777\u0026amp;#34;, 3 name: \u0026amp;#34;Robby\u0026amp;#34;, 4 age: 30, 5 email: \u0026amp;#34;Robby\u0026amp;#34;, 6 skill: [ 7 \u0026amp;#39;javascript\u0026amp;#39;, 8 \u0026amp;#39;java\u0026amp;#39; 9 ] 10} _idï¼šé›–ç„¶ç¨±ç‚º NoSQLï¼Œä½†ç³»çµ±æœƒè‡ªå‹•å¹«ä½ ç”¢ç”Ÿ key å€åˆ†å¤§å°å¯«ï¼Œä¸”ä¸èƒ½ç›¸åŒ collection\rCollection æ˜¯ä¸€çµ„ Documentï¼Œå¦‚æœæŠŠå®ƒç”¨ä¾†èˆ‡é—œè¯å¼è³‡æ–™åº«æ¯”è¼ƒï¼Œä»–å°±æ˜¯ Table è£¡é¢å­˜æ”¾äº†å¾ˆå¤š Row (document)ã€‚Collection æ˜¯å‹•æ…‹çš„ï¼Œä¸€å€‹ collection è£¡çš„document å¯ä»¥æ˜¯å„ç¨®é¡å‹ã€‚å¦‚ä¸‹ï¼›\n1{ id : 1, name : \u0026amp;#34;mark\u0026amp;#34; } 2{ age : 100 } åœ¨ Ubuntu 18.04 ä¸Š â€¦","date":"2020-12-15T21:55:00+00:00","updated":"2020-12-15T21:55:00+00:00"},{"objectID":"1608069120","permalink":"/post/devops-install-docker-and-docker-compose-on-centos7/install-docker-and-docker-compose-on-centos7/","title":"[Docker] Install Docker \u0026 Docker Compose on CentOS7","content":"ç§»é™¤èˆŠç‰ˆ\r1$ sudo yum remove docker \\ 2 docker-client \\ 3 docker-client-latest \\ 4 docker-common \\ 5 docker-latest \\ 6 docker-latest-logrotate \\ 7 docker-logrotate \\ 8 docker-engine é€é repository å®‰è£ Docker\rè¨­å®š repo\r1$ sudo yum install -y yum-utils 2$ sudo yum-config-manager \\ 3 --add-repo \\ 4 https://download.docker.com/linux/centos/docker-ce.repo å®‰è£ Docker engine\rå®‰è£æœ€æ–°ç‰ˆ\n1$ sudo yum install docker-ce docker-ce-cli containerd.io ç¬¬ä¸€æ¬¡å®‰è£ Docker çš„æ™‚å€™ï¼ŒæœƒåŒ¯å…¥ GPG çš„é‡‘é‘°ï¼ŒDocker CE ç‰ˆçš„é‡‘é‘°æŒ‡ç´‹æ˜¯ 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35ï¼Œç¢ºèªç„¡èª¤å°±é¸æ“‡ y åŒ¯å…¥ã€‚\nå•Ÿå‹• Docker\r1$ sudo systemctl start docker æŸ¥çœ‹æ˜¯å¦æˆåŠŸè·‘èµ·ä¾†\n1[root@test ~]# docker version 2Client: Docker Engine - Community 3 Version: 20.10.0 4 API version: 1.41 5 Go version: go1.13.15 6 Git commit: 7287ab3 7 Built: Tue Dec 8 18:57:35 2020 8 OS/Arch: linux/amd64 9 Context: default 10 Experimental: true 11 12Server: Docker Engine - Community 13 Engine: 14 Version: 20.10.0 15 API version: 1.41 (minimum version 1.12) 16 Go version: go1.13.15 17 Git commit: eeddea2 18 Built: Tue Dec 8 18:56:55 2020 19 OS/Arch: linux/amd64 20 Experimental: false 21 containerd: 22 Version: 1.4.3 23 GitCommit: 269548fa27e0089a8b8278fc4fc781d7f65a939b 24 runc: 25 Version: 1.0.0-rc92 26 GitCommit: ff819c7e9184c13b7c2607fe6c30ae19403a7aff 27 docker-init: 28 Version: 0.19.0 29 GitCommit: de40ad0 ä»¥é root ä½¿ç”¨è€…åŸ·è¡Œ docker\rå¦‚æœæƒ³è¦ä½¿ç”¨ä¸€èˆ¬ä½¿ç”¨è€…å¸³è™Ÿä¾†åŸ·è¡Œ Dockerï¼Œè¦å…ˆå°‡è©²å¸³è™ŸåŠ å…¥ docker ç¾¤çµ„ï¼š\n1$ sudo usermod -aG docker \u0026lt;USERNAME\u0026gt; å®‰è£ docker compose\rä½¿ç”¨ curl\r1$ curl -L \u0026#34;https://github.com/docker/compose/releases/download/1.26.2/docker-compose-$(uname -s)-$(uname -m)\u0026#34; -o /usr/local/bin/docker-compose 2$ chmod +x /usr/local/bin/docker-compose 3$ docker-compose -v ä½¿ç”¨ pytion-pip\r1$ yum -y install -y epel-release # å®‰è£pipéœ€è¦å…ˆå®‰è£epel-releaseåŒ… 2$ yum install -y python-pip # å®‰è£pip 3$ pip install --upgrade pip # å‡ç´špip 4$ pip install docker-compose # å®‰è£docker-compose 5$ docker-compose -v # æŸ¥çœ‹docker-composeçš„ç‰ˆæœ¬ 6$ pip install --upgrade backports.ssl_match_hostname # å¦‚æœå®‰è£æ™‚å ±éŒ¯å‰‡ä¸‹ Reference\rhttps://docs.docker.com/engine/install/centos/\rhttps://www.itread01.com/content/1555398180.html\r","date":"2020-12-15T21:52:00+00:00","updated":"2020-12-15T21:52:00+00:00"},{"objectID":"1607362800","permalink":"/post/os-linux-raid-intro-hw-raid-and-sw-raid/linux-raid/","title":"[Linux] RAID ä»‹ç´¹åŠå¯¦ä½œ (HW RAID \u0026 SW RAID)","content":"RAIDï¼ˆRedundant Array of Independent Disks) ç£ç¢Ÿé™£åˆ—ï¼Œå¤šå€‹ç¡¬ç¢Ÿçµ„åˆæˆç‚ºä¸€å€‹é‚è¼¯ç£å€(ä½œæ¥­ç³»çµ±åªæœƒæŠŠå®ƒç•¶ä½œä¸€å€‹ç¡¬ç¢Ÿ)ã€‚\nRAID ä¸€èˆ¬åˆ†é¡æˆ Software RAID èˆ‡ Hardware RAIDã€‚\nHardware RAID\rHardware RAID ç”¨å°ˆå±¬ RAID é‹ç®—æ™¶ç‰‡ï¼Œæ™¶ç‰‡ä½æ–¼ä»‹é¢å¡æˆ–ç›´æ¥åµŒå…¥åœ¨ä¸»æ©Ÿæ¿ä¸Šã€‚ä½œæ¥­ç³»çµ±åªéœ€è¦é©…å‹• RAID æ™¶ç‰‡å³å¯é‹ä½œï¼ŒRAID ä»»å‹™åˆ†å·¥æ˜¯ç”± RAID æ™¶ç‰‡åšï¼Œè¼ƒä¸å½±éŸ¿CPUã€‚\nATA(SATA) RAID / BIOS RAID / Fake RAID\ré€™é¡å‹ RAID ä»‹æ–¼ Software RAID èˆ‡ Hardware RAID ä¹‹é–“ï¼Œç®—æ˜¯åŠå€‹ Hardware RAIDï¼Œé€šå¸¸ç”±ä¸»æ©Ÿæ¿æ™¶ç‰‡ä¾†ã€Œå¹«å¿™ã€RAID é‹ç®—ï¼Œå› æ­¤æœ‰ Fake RAIDï¼ˆå‡ RAIDï¼‰ä¹‹ç¨±ã€‚ è¦å•Ÿå‹•é€™å€‹ RAID åŠŸèƒ½ï¼Œè¦å…ˆåœ¨ BIOS ç•«é¢è¨­å®šä»¥å¾Œï¼Œå†ä½¿ä½œæ¥­ç³»çµ±èƒ½å¤ æ­£ç¢ºè¾¨è­˜è£ç½®å³å¯ã€‚å› ç‚ºé€™æ¬¾ RAID è¦åœ¨ BIOS å…§é–‹å•Ÿï¼Œæ‰€ä»¥äº¦æœ‰äººç¨±ä¹‹ç‚º BIOS RAIDã€‚\nSATA RAID è¨­å®š\rè‹¥ä¸ç¢ºå®šç³»çµ±æ˜¯å¦å…§å»º RAID cardï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ command ç¢ºèªï¼š\n1$ lspci -vv | grep -i raid 200:1f.2 RAID bus controller: Intel Corporation 631xESB/632xESB SATA RAID Controller (rev 09) æ­¥é©Ÿæ¦‚è¦½\råœ¨ BIOS ä¸­å•Ÿç”¨ RAIDã€‚ é€²å…¥ RAID configuration utilityã€‚ å‰µå»º RAIDã€‚ é€²å…¥ BIOS\ré€²å…¥ BIOS ï¼Œé€²å…¥ Advance \u0026amp;gt; SATA Configurationï¼Œå°‡ Configure SATA as å¾ AHCI æ›´æ”¹ç‚º RAIDã€‚å…¶ä¸­è¦ç¢ºèªç³»çµ±ç¢Ÿæ˜¯å¦å­˜åœ¨åœ¨ SATAï¼Œè¦ç¢ºä¿ SATA/sSATA RAID Boot Select çš„é¸é …ç‚ºç³»çµ±ç¢Ÿæ‰€åœ¨çš„åœ°æ–¹ï¼Œæˆ–æ˜¯ç›´æ¥é¸ Bothã€‚ ä¿å­˜è¨­ç½®ï¼Œä¸¦é›¢é–‹ BIOSã€‚\né€²å…¥ RAID Configuration Utility\rRAID configuration utility å°‡åœ¨ BIOS ç™¼å¸ƒä¹‹å‰å‡ºç¾ã€‚ç•«é¢æ‡‰è©²æœƒå…ˆå‡ºç¾ RAID Volumes ä»¥åŠ HDD çš„åˆ—è¡¨ã€‚åœ¨è©²æ­¥é©Ÿä¸­ï¼Œ â€¦","date":"2020-12-07T17:40:00+00:00","updated":"2020-12-07T17:40:00+00:00"},{"objectID":"1607361960","permalink":"/post/os-linux-lvm-extend-root-remove-pv/linux-lvm-extend-root-and-remove-pv/","title":"[Linux] LVM- æ“´å¤§æ ¹ç›®éŒ„ \u0026 ç§»é™¤ pv ç¢Ÿ","content":"å‰è¨€\rçµæœä¸Šæ¬¡å› ç‚º LVM åˆ†çš„æ ¹ç›®éŒ„ç©ºé–“ä¸å¤ ï¼Œä»—è‘—ç¡¬ç¢Ÿå¤šå°±ç›´æ¥ä¸ç®¡ç©ºé–“éå‰©çš„ /homeï¼Œç›´æ¥æ‰¾ä¸€é¡† sdc æ›åœ¨ç›¸åŒçš„æ ¹ç›®éŒ„ lv ä¸­ã€‚å¾Œä¾†ç³»çµ±æ‰“ç®—æ‹¿ä¸€äº›ç¡¬ç¢Ÿåš RAID5ï¼Œæ‰ç™¼ç¾æˆ‘çš„ç³»çµ±ç¢Ÿ(æ ¹ç›®éŒ„)ç”¨çš„æ˜¯ sda è·Ÿ sdcï¼Œè·³éäº† sdbï¼Œå¼·è¿«ç—‡é©…ä½¿ä¸‹æ±ºå®šæŠŠ sdc çš„ pv ç§»é™¤!!\nxfsdump\rXFS æ˜¯ CentOS 7 é è£çš„ OS çš„æª”æ¡ˆç³»çµ±ï¼Œåœ¨ LVM ä¸­ XFS åªèƒ½æ“´å¤§ä¸èƒ½ç¸®å°ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨ xfsdump å‚™ä»½è³‡æ–™ã€‚\nç›®å‰æ›è¼‰æƒ…æ³å¦‚ä¸‹ï¼Œé è¨ˆæŠŠæ ¹ç›®éŒ„æ¸›æ‰ 5.5Tï¼›\n1[root@pc100 /]# df -h 2Filesystem Size Used Avail Use% Mounted on 3devtmpfs 95G 0 95G 0% /dev 4tmpfs 95G 0 95G 0% /dev/shm 5tmpfs 95G 11M 95G 1% /run 6tmpfs 95G 0 95G 0% /sys/fs/cgroup 7/dev/mapper/centos-root 10T 53G 9.9T 1% / 8/dev/sda2 1014M 187M 828M 19% /boot 9/dev/sda1 200M 12M 189M 6% /boot/efi 10tmpfs 19G 0 19G 0% /run/user/0 11/dev/mapper/centos-home 1.0T 33M 1.0T 1% /home 12/dev/sdb1 5.5T 33M 5.5T 1% /data å®‰è£xfsdumpå·¥å…·\r1$ yum install xfsdump -y å‚™ä»½æ ¹ç›®éŒ„\rå°‡æ ¹ç›®éŒ„å‚™ä»½åˆ° /data ä¸‹ã€‚æ³¨æ„ï¼Œ/data éœ€èˆ‡æ ¹ç›®éŒ„åœ¨ä¸åŒç¡¬ç¢Ÿï¼Œå› ç‚ºæ ¹ç›®éŒ„éœ€é‡å»ºã€‚\n1[root@pc100 /]# xfsdump -f /data/root.dump / 2xfsdump: using file dump (drive_simple) strategy 3xfsdump: version 3.1.7 (dump format 3.0) - type ^C for status and control 4 5 ============================= dump label dialog â€¦","date":"2020-12-07T17:26:00+00:00","updated":"2020-12-07T17:26:00+00:00"},{"objectID":"1606498620","permalink":"/post/os-linux-lvm/linux-lvm/","title":"[Linux] LVM","content":"LVM (Logical Volume Manager) é‚è¼¯ç£ç¢Ÿç®¡ç†å™¨ï¼Œæ˜¯ Linux ç³»çµ± kernel æ‰€æä¾›çš„åŠŸèƒ½ï¼Œåœ¨ç¡¬ç¢Ÿçš„åˆ†å‰²å€ä¸Šå»ºç«‹é‚è¼¯å±¤ï¼Œå¯ä»¥å½ˆæ€§èª¿æ•´ç£ç¢Ÿã€åˆ†å‰²å€èˆ‡æª”æ¡ˆç³»çµ±çš„å¤§å°ã€‚\nLVM å±¤ç´š\rå°‡å¯¦é«”åˆ†å‰²å€è®Šæˆ Physical Volume (PV)ï¼Œç”± PV çµ„æˆè™›æ“¬ç¡¬ç¢Ÿ Virtual Group (VG)ï¼ŒVG å¯ä»¥åˆ†å‰²æˆæ•¸å€‹è™›æ“¬åˆ†å‰²å€ Logical Volume (LV)ï¼Œç„¶å¾Œåœ¨ LV ä¸Šå»ºç«‹æª”æ¡ˆç³»çµ±ï¼Œå¯ä»¥ç•¶æˆä¸€èˆ¬æª”æ¡ˆç³»çµ±ä½¿ç”¨ã€‚\nLVM å¯¦ä½œ\rå®‰è£ 1$ yum install -y lvm2 åˆ—å‡ºç£ç¢Ÿè³‡è¨Š 1$ fdisk -l åˆ†å‰²ç£ç¢Ÿ 1$ fdisk /dev/sdb é€²å…¥å°è©±æ¡†å¾Œï¼Œä¾æç¤ºä½œç›¸å°æ‡‰çš„é¸æ“‡ã€‚\nn # é–‹å§‹åˆ†å‰² æŒ‰ enter # default is p for primary æŒ‰ enter # é è¨­åˆ†ä¸€å€ æŒ‰ enter # é è¨­é–‹é ­å¯è¡Œçš„ç£å€ æŒ‰ enter # é è¨­çµå°¾å¯è¡Œçš„ç£å€ t # æ›´å‹•å‹æ…‹ è¼¸å…¥ LVM çš„ Hex Code 8e00 w # å¯«å…¥ç£å€è¨­å®šä¸¦é›¢é–‹ æ›´æ–° Linux Kernel åˆ†å‰²è¡¨è³‡è¨Š\n1$ partprobe å»ºç«‹ Pysical Volume (PV)\nä½¿ç”¨ pvcreate æ¨™è¨˜æŒ‡å®šç£ç¢Ÿåˆ†å€ç‚ºè¦ä½¿ç”¨çš„ LVM PVã€‚ 1$ pvcreate /dev/sdb1 2$ pvcreate /dev/sdb1 /dev/sdc1 # æˆ–å»ºç«‹å¤šå€‹ pv å»ºç«‹ Virtual Group (VG) 1$ vgcreate vgName /dev/sdb1 2 3# æˆ–å¤šå€‹ PV å»ºæˆä¸€å€‹ VG 4$ vgcreate vgName /dev/sdb1 /dev/sdc1 å»ºç«‹ Logical Volume (LV) -n (to set the LV name) -L (LV Size in bytes) the VG name for the LV 1$ lvcreate -n lvName -L 100M vgName æŸ¥è©¢å·²å»ºç«‹è™›æ“¬ç£å€\n1$ lvdisplay Info\nä¸åŒçš„å·¥å…·æœƒä½¿ç”¨ä¸åŒçš„ LV è·¯å¾‘ï¼Œå‚³çµ±åç¨± /dev/vgName/lvName æˆ– kernel device mapper åç¨± /dev/mapper/vgname-lvnameã€‚\næ ¼å¼åŒ–è™›æ“¬ç£å€\næ ¼å¼åŒ–ç‚º xfs æ–‡ä»¶ç³»çµ± 1$ mkfs.xfs /dev/vgName/lvName æ›è¼‰\nåœ¨ç›®éŒ„ä¸­å‰µå»ºæ–°çš„ LVï¼Œå†å°‡ç£å€æ›è¼‰ä¸Šå»ã€‚ 1$ mkdir data 2$ mount /dev/vgName/lvName /data ç¢ºèªä¸€ä¸‹\n1$ df -h æŠŠ mount point è¨˜éŒ„åˆ° fstab æª”æ¡ˆä¸‹\n1$ vi /etc/fstab 1/dev/vgName/lvName /data xfs defaults 0 0 21 æŠŠåŸæœ‰çš„ lvm ç›®éŒ„å¢å¤§\r1# æ“´å¤§ LV 2$ã€€lvextend -L +1T /dev/vgName/lvName 3# æ“´å¤§æª”æ¡ˆç³»çµ± 4$ resize2fs /dev/vgName/lvName Reference\rhttps://zh.wikipedia.org/wiki/%E9%82%8F%E8%BC%AF%E6%8D%B2%E8%BB%B8%E7%AE%A1%E7%90%86%E5%93%A1\rhttps://www.sysonion.de/centos-logical-volume-management-lvm/\rhttps://sc8log.blogspot.com/2017/03/linux-lvm-lvm.html\r","date":"2020-11-27T17:37:00+00:00","updated":"2020-11-27T17:37:00+00:00"},{"objectID":"1604833200","permalink":"/post/okinawa/","title":"å››å¤©ä¸‰å¤œæ²–ç¹©éŠè¨˜âœ¨","content":"é•·å¤§ä»¥å¾Œéƒ½æ²’æœ‰éçš„å…¨å®¶å‡ºåœ‹æ—…è¡Œï¼Œåœ¨é€™æ¬¡çµ‚æ–¼æˆè¡Œäº†ï¼å¾å…­æœˆæ±ºè­°ç©é–‹å§‹ï¼Œæˆ‘å°±æ“”ä»»å°éŠçš„è§’è‰²ï¼Œè‘—æ‰‹è¦åŠƒäº†æ•´å€‹æ—…ç¨‹ã€‚ä¾†ä¾†å›å›ä¿®æ”¹ä¸ä¸‹åæ¬¡ï¼Œç”šè‡³é€£å°æ‰‹å†Šéƒ½åšäº†ï¼Œé›–ç„¶æœ€å¾Œåªæœ‰è‡ªå·±åœ¨çœ‹ XD\né€™å¹¾å¤©å¤©æ°£éƒ½æ¥µå¥½ï¼Œç¬¬ä¸€å¤©æŠµé”çš„æ™‚å€™å¤šé›²ã€ç¬¬äºŒå¤©æ—©ä¸Šé£„é›¨å¤–å…¶é¤˜çš„éƒ½æ˜¯è±”é™½é«˜ç…§çš„è¶…ç´šå¥½å¤©æ°£ï¼ŒçœŸçš„å¾ˆå¹¸é‹ï¼Œå› ç‚ºé«˜ä¸­æœ‹å‹æ—©æˆ‘ä¸€å€‹ç¦®æ‹œå»å‰›å¥½é‡åˆ°æ¯å¤©éƒ½åœ¨ä¸‹é›¨çš„é¢±é¢¨(QQ)ï¼Œå‡ºç™¼å‰ä¸€å€‹ç¦®æ‹œæ¯å¤©éƒ½ä¸æ™‚çš„çœ‹å››äº”å€‹ä¸åŒçš„æ°£è±¡é å ±å‘¢ï¼Œè¬å¹¸è¬å¹¸ã€‚\nDAY1\rç¬¬ä¸€å¤©åæ—©ä¸Šå…­é»åŠçš„æ¨‚æ¡ƒèˆªç©ºï¼Œæˆ‘åå‡Œæ™¨çš„å®¢é‹åˆ°æ©Ÿå ´ï¼Œæœ¬ä¾†æ‰“ç®—åœ¨æ©Ÿå ´ç¡ä¸€ä¸‹çš„ï¼Œä½†å†·çˆ†ã€‚æ‹”æ˜¨æ™šå¾å¤§é™¸é£›åˆ°æ¡ƒåœ’ç­‰ï¼Œéº»è·ŸäºŒå§Šå‰‡å¾å¤§æ—é–‹è»ŠåŒ—ä¸Šé †é“è¼‰ï¼›å®Œå…¨æ²’ç¡ï¼ŒçœŸåç¬¦å…¶å¯¦çš„ç´…çœ¼ç­æ©Ÿä¸« ğŸ˜ª æœ€å–œæ­¡æº–å‚™å‡ºç™¼çš„æ™‚å€™ï¼Œèˆˆå¥®å¾—é›£ä»¥è¨€å–»ï¼Œç„¶å¾Œå°±è¼‰æ›è¡Œæç®±çš„æ™‚å€™æŠŠæ‰‹æ©Ÿå¿˜è¼‰å ±åˆ°æ«ƒå°äº†å“ˆå“ˆå“ˆè¶…ç´šçƒé¾ã€‚å¹¸å¥½åœ¨æ™‚é–“æœ‰é¤˜çš„èµ·é£›å‰ç™¼ç¾äº†ï¼Œæœ‰é©šç„¡éšªåœ°æ‹¿å›ä¾†ã€‚\næ—¥æœ¬æ¯”å°ç£å¿«ä¸€å€‹å°æ™‚ï¼Œæ‰€ä»¥ç•¶åœ°æ™‚é–“ä¹é»æŠµé”é‚£éœ¸æ©Ÿå ´ï¼ŒåŸæœ¬ä»¥ç‚ºå·²ç¶“åšå¥½è¬å…¨æº–å‚™äº†ï¼Œä½†æŠµé”æ™‚é‚„æ˜¯ç™¼ç¾å¿˜äº†æéŒ¢è²·å¥½æ™¯é»å¥—ç¥¨ï¼Œåœ¨æ©Ÿå ´è£œè²·ç¥¨æ™‚ï¼Œå§Šä»–å€‘å»è²·å¿…åƒçš„è±¬è‚‰è›‹é£¯ç³°ï¼Œåƒäº†æ˜å¤ªå­è·Ÿå±±è‹¦ç“œå£å‘³ï¼ŒçœŸçš„å°±å¦‚è©•åƒ¹èªªçš„å¥½åƒï¼Œå¤§å®¶éƒ½å¾ˆå–œæ­¡ï¼Œæ‹”é‚„èªªå›ç¨‹å¯ä»¥å†ä¾†è²· ğŸ˜ ç§Ÿè»Š\råƒå®Œå¾Œå» ORIX æ¥é§çš„åœ°é»åå»ç‡Ÿæ¥­è™•å–è»Šï¼ˆæå‰åœ¨ TABIRAI æ—¥æ–‡ç¶²é å®šçš„ï¼Œé‚„æ¯”è¼ƒåˆ’ç®—å‘¢ ğŸ‘ï¼‰ç§Ÿçš„è»Šæ˜¯ NISSAN çš„äº”äººåº§ä¼‘æ—…è»Šï¼Œæ¯”å®¶è£¡çš„ outlander å°ä¸€é»ï¼Œä½†åœ¨æ²–ç¹©ä¾†èªªå¯æ˜¯è¶…ç´šå¤§è»Šå•Šï¼æ”¾çœ¼æœ›å»å¹¾ä¹ä¸ƒæˆçš„è»Šéƒ½æ˜¯æ­£æ–¹å½¢å±è‚¡çš„å°è»Šã€‚å‡ºç™¼å¾Œå…ˆå»éš”å£çš„ OTS è²·ä¾¿å®œçš„ç¬¬å››å¤©çš„ç‰æ³‰æ´é–€ç¥¨å¾Œå°±æ­£å¼å‡ºç™¼äº†ã€‚æ²’é–‹éå³é§•çš„æ‹”é¦–æ¬¡ä¸Šè·¯ä¹Ÿæ˜¯æ‰‹å¿™è…³äº‚çš„ï¼Œåˆ‡æ–¹å‘ç‡ˆéƒ½æœƒä¸å°å¿ƒé–‹åˆ°é›¨åˆ· ğŸ˜‚ è€Œä¸”åœè»Šçš„æ™‚å€™å‰å…©å¤©ä¹Ÿæ˜¯å¾ˆä¸ç¿’æ…£(ä½†å¾Œé¢æ„ˆåœæ„ˆé †)ï¼Œç„¶å¾Œå›ºå®šå‰¯é§•é§›å°éŠçš„æˆ‘åˆ°ç¬¬å››å¤©ä¹Ÿéƒ½é‚„æ˜¯å¿ƒé©šè†½è·³çš„ï¼Œæ€•ç¿’æ…£å·¦åå› æ­¤æ“¦æ’åˆ°è·¯é‚Šé“è·¯(é›–ç„¶é‚„æ˜¯æœ‰æ“¦åˆ°è·¯é‚Šçš„ä¸‰è§’éŒè·Ÿä¸å°å¿ƒé–‹ä¸Šè·¯é‚Šçš„åï¼Œä½†å¹¸è™§éƒ½æ²’æœ‰åˆ®å‚·ï¼Œå¯å–œå¯è³€å¯æ­Œå¯æ³£ ğŸ¤“) å¤å®‡åˆ©å³¶\rå¤å®‡åˆ©å³¶åœ¨åŒ—é‚Šï¼Œé€™å››å¤©è¨ˆç•«ç”±åŒ—æ…¢æ…¢ç©å›ä¾†ã€‚æ‰€ä»¥å»çš„è»Šç¨‹å¤§æ¦‚æœ‰ä¸€å€‹åŠå°æ™‚ï¼Œé€™ä¹Ÿæ˜¯å”¯ä¸€é–‹é«˜é€Ÿå…¬è·¯çš„è·¯ç¨‹ï¼Œä¸­é–“æœ‰è·¯éåˆ°ä¸€å€‹å¤§å‹ä¼‘æ¯ç«™ä¼‘æ¯ï¼Œçœ‹å¾—åˆ°ä¸€é»é»æµ·æ™¯ï¼Œæ²–ç¹©çœŸçš„æ²’æœ‰ä¸€è™•ä¸ç¾çš„ ğŸ¥º å› ç‚ºæ¯”è¼ƒååƒ»ï¼Œæ‰€ä»¥èšŠèŸ²ç‰¹åˆ¥å¤šï¼Œä½†ä»¤äººæ„å¤–çš„æ˜¯å…¬å»éå¸¸ä¹¾æ·¨ï¼Œä¹Ÿçµ‚æ–¼é«”æœƒåˆ°æ—¥æœ¬æ•´æ½”çš„å…¬å…±å ´æ‰€ã€‚å¾ŒåŠç¨‹æ›æˆ‘é–‹è»Šï¼Œä¸éå·¦å³ç›¸åçœŸçš„è¶…é›£é©æ‡‰çš„å•Šå•Šå•Šï¼Œæˆ°æˆ°å…¢å…¢åœ°é–‹çš„åŠå°æ™‚å¾Œå°±åˆ°äº†å—è©°å±•æœ›æ‰€ã€‚\né€™é‚Šæ˜¯å°åœè»Šå ´ï¼Œå¾é€™å¯ä»¥çœ‹åˆ° â€¦","date":"2020-11-08T19:00:00+08:00","updated":"2020-11-08T19:00:00+08:00"},{"objectID":"1604419200","permalink":"/post/programming-node-red-simulate-product-line/production-line-simulation-by-nodered/","title":"[Node-RED] Production Line Simulation","content":"Production Line (gateway1)\råˆå§‹æµç¨‹\ré¦–å…ˆç¬¬ä¸€å€‹ inject flow (inject once at start) æœƒå»ä¸‹ http request å»è·Ÿäº‹å…ˆå¯«å¥½çš„ NodeJS express http server (\råƒè€ƒé€™ç¯‡\r)ç´¢å–äº‹å…ˆæ”¾åœ¨ MySQL çš„è¨‚å–®è³‡æ–™ (ç›®å‰åƒ…è¨­è¨ˆç‚ºä¸€ç­†)ï¼Œfunction node æœƒæ”¾æ‰€æœ‰æœƒä½¿ç”¨åˆ°çš„ global è®Šæ•¸ã€‚\n1global.set(\u0026amp;#34;wo\u0026amp;#34;,msg.payload[0].wo); 2global.set(\u0026amp;#34;totalPcs\u0026amp;#34;,msg.payload[0].qty); 3node.warn(global.get(\u0026amp;#39;wo\u0026amp;#39;)); 4node.warn(global.get(\u0026amp;#39;totalPcs\u0026amp;#39;)); 5global.set(\u0026amp;#39;startTime\u0026amp;#39;,1603670400); 6 7global.set(\u0026amp;#39;m1Status\u0026amp;#39;,\u0026amp;#39;Running\u0026amp;#39;); 8global.set(\u0026amp;#34;m1DonePcs\u0026amp;#34;,0); 9// node.warn(global.get(\u0026amp;#39;m1DonePcs\u0026amp;#39;)); 10 11global.set(\u0026amp;#39;m2Status\u0026amp;#39;,\u0026amp;#39;Stop\u0026amp;#39;); 12global.set(\u0026amp;#34;m2DonePcs\u0026amp;#34;,0); 13 14global.set(\u0026amp;#39;m3Status\u0026amp;#39;,\u0026amp;#39;Stop\u0026amp;#39;); 15global.set(\u0026amp;#34;m3DonePcs\u0026amp;#34;,0); 16 17global.set(\u0026amp;#34;ng\u0026amp;#34;,0); 18global.set(\u0026amp;#34;ok\u0026amp;#34;,0); 19 20return msg; é€ç‰‡æµç¨‹\ræ¥ä¸‹ä¾†çš„ START!! inject flow æœƒç”¨ link node å½¢æˆä¸€å€‹å¤§è¿´åœˆï¼Œå»å¾ªè¿´ç”¢ç·šã€‚é€²å…¥æ¯ä¸€å°æ©Ÿå™¨å‰æœƒæœ‰ä¸€å€‹ switch node åˆ¤æ–·ç›®å‰æ©Ÿå™¨é‹è¡Œç‹€æ…‹æ˜¯ Running é‚„æ˜¯ Idleï¼Œåœ¨ Running æ¢ä»¶ä¸‹ï¼Œæ¨¡æ“¬æ©Ÿå™¨è£½ä½œä¸€ç‰‡çš„æ™‚é–“ Producing... å¾Œï¼Œå°‡æ¯ä¸€å°çš„å®Œæˆç‰‡æ•¸åŠ ä¸€ï¼Œå†å°‡æ©Ÿå™¨ç‹€æ…‹è¨­ç‚ºé–’ç½®ã€‚æ¥è‘—å†ç”¨ link â€¦","date":"2020-11-03T16:00:00+00:00","updated":"2020-11-03T16:00:00+00:00"},{"objectID":"1603273126","permalink":"/post/programming-overlap-border/css-overlapping-repeat-border/","title":"[CSS] å°‡é‡è¤‡é‚Šæ¡†é‡ç–Š","content":"ç•¶å…©å€‹ inline-block å…ƒç´ æˆ–æ˜¯ å…·æœ‰ float å±¬æ€§çš„å…ƒç´ æ”¾åœ¨åŒä¸€è¡Œæ™‚ï¼Œå·¦é‚Šå…ƒç´ çš„å³é‚Šé‚Šæ¡†èˆ‡å³é‚Šå…ƒç´ çš„å·¦é‚Šé‚Šæ¡†æœƒè²¼åœ¨ä¸€èµ·ï¼Œå°è‡´åŸæœ¬æƒ³è¨­è¨ˆæˆ 4px çš„é‚Šæ¡†è®Šæˆ 8pxï¼Œå¦‚ä¸‹ç¯„ä¾‹ï¼›\n1\t\u0026lt;style\u0026gt; 2\t.outter{ 3\theight: 200px; 4\twidth: 180px; 5\tbackground: white; 6\tmargin: 20px auto; 7\tborder: 1px black solid; 8\t} 9 10\t.inner{ 11\twidth: 60px; 12\theight: 60px; 13\tfloat: left; 14\tlist-style: none; 15\tborder: 4px black solid; 16\t} 17\t\u0026lt;/style\u0026gt; 18\t\u0026lt;body\u0026gt; 19\t\u0026lt;div class=\u0026#34;outter\u0026#34;\u0026gt; 20\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 21\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 22\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 23\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 24\t\u0026lt;/div\u0026gt; 25\t\u0026lt;/body\u0026gt; è§£æ±ºæ–¹æ³•\rè¨­å®š margin å±¬æ€§ç‚ºé‚Šæ¡†å€¼çš„ç›¸åæ•¸ï¼Œå°±å¯ä»¥æŠŠé‡ç–Šçš„éƒ¨åˆ†é‚Šæ¡†éš±è—èµ·ä¾†ï¼ˆè¢«è¦†è“‹ï¼‰ï¼Œè®“é‚Šæ¡†ä»¥å–®ç·šçš„å½¢å¼é¡¯ç¤ºï¼Œæ¯”å¦‚é‡è¤‡çš„åœ°æ–¹æ˜¯å³é‚Šè·Ÿä¸‹é‚Šï¼Œé‚£å°±æŠŠ margin-right \u0026amp; margin-bottom ä½ç§» -4pxã€‚ã€‚\n1\t\u0026lt;style\u0026gt; 2\t.outter{ 3\theight: 200px; 4\twidth: 180px; 5\tbackground: white; 6\tmargin: 20px auto; 7\tborder: 1px black solid; 8\t} 9 10\t.inner{ 11\twidth: 60px; 12\theight: 60px; 13\tfloat: left; 14\tlist-style: none; 15\tborder: 4px black solid; 16\t/* é‚Šæ¡†è™•ç† */ 17\tmargin: 0px -4px -4px 0px; 18\t} 19\t\u0026lt;/style\u0026gt; 20\t\u0026lt;body\u0026gt; 21\t\u0026lt;div class=\u0026#34;outter\u0026#34;\u0026gt; 22\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 23\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 24\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 25\t\u0026lt;div class=\u0026#34;inner\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 26\t\u0026lt;/div\u0026gt; 27\t\u0026lt;/body\u0026gt; ","date":"2020-10-21T09:38:46+00:00","updated":"2020-10-21T09:38:46+00:00"},{"objectID":"1603100326","permalink":"/post/programming-css-align-and-middle/css-virtical-and-center-alignment/","title":"[CSS] å‚ç›´ç½®ä¸­å•é¡Œ","content":"ä¸€èˆ¬åœ¨ç›’å…§æ–‡å­—æƒ³é”æˆå‚ç›´ç½®ä¸­çš„æ•ˆæœæˆ‘å€‘ä½¿ç”¨ line-height å°‡é«˜åº¦è¨­ç½®èˆ‡çˆ¶å…ƒç´ ä¸€æ¨£å³å¯\nhello 1\u0026lt;div style=\u0026#34;width:50px; height:50px; background: lightpink; line-height: 50px; text-align:center;\u0026#34;\u0026gt;hello\u0026lt;/div\u0026gt; ä½†å¦‚æœé‡åˆ°å¤šè¡Œæ–‡å­—ã€åœ–ç‰‡æˆ–å…¶ä»–å…ƒç´ ï¼Œæˆ‘å€‘å°±éœ€è¦ä½¿ç”¨ padding æˆ–æ˜¯ margin ä¾†èª¿æ•´ï¼›\n1\u0026lt;!-- margin --\u0026gt; 2\u0026lt;div style=\u0026#34;width:100px; height:100px; background: lightpink;overflow:hidden;\u0026#34;\u0026gt; 3 \u0026lt;div style=\u0026#34;width:40px; height:40px; background: lightblue; margin: 30px;\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 4\u0026lt;/div\u0026gt; 5\u0026lt;!-- padding --\u0026gt; 6\u0026lt;div style=\u0026#34;width:40px; height:40px; background: lightpink;padding:30px;\u0026#34;\u0026gt; 7 \u0026lt;div style=\u0026#34;width:40px; height:40px; background: lightblue;\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; 8\u0026lt;/div\u0026gt; ä¸éæ­¤æ™‚æœƒé‡åˆ°çš„å•é¡Œæ˜¯ \u0026mdash; ç•¶é é¢ä¸­çš„çˆ¶ç´šå…ƒç´ æ”¹è®Šé«˜åº¦æ™‚ï¼Œå…¶å…ˆå‰è¨­çš„å­å…ƒç´ å‚ç›´ç½®ä¸­çš„æ•ˆæœå°±å¿…é ˆé‡è¨­ã€‚\nè§£æ±ºæ–¹å¼ - ä½¿ç”¨ vertical-align\ré¦–å…ˆ vertical-align çš„ä½¿ç”¨æ¦‚å¿µæ˜¯é‡å°å…©å€‹æ“æœ‰ inline æˆ–æ˜¯ inline-block çš„å…ƒç´ ä¿æŒå‚ç›´ç½®ä¸­ï¼Œèˆ‰ä¾‹å¦‚ä¸‹:\n1\u0026lt;img src=\u0026#34;image.jpg\u0026#34; style=\u0026#34;height:150px; vertical-align:middle;\u0026#34;\u0026gt;\u0026lt;span style=\u0026#34;vertical-align:middle;\u0026#34;\u0026gt;I\u0026#39;m a fun guy.\u0026lt;/span\u0026gt; æˆ‘å€‘æœƒåˆ©ç”¨é€™å€‹æ¦‚å¿µä¾†è§£æ±ºä¸Šé¢å•é¡Œ\nåœ¨æ¬²å‚ç›´ç½®ä¸­çš„å­å…ƒç´ æ—æˆ‘å€‘è¦å»ºä¸€å€‹æ²’æœ‰å¯¬åº¦ã€é«˜åº¦èˆ‡çˆ¶å…ƒç´ åŒç­‰çš„æ¨™ç±¤ï¼Œå°±èƒ½ä»¥æ­¤ç‚ºå°é½ŠåŸºæº–åœ¨çˆ¶å…ƒç´ ä¸­å‚ç›´ç½®ä¸­äº†ã€‚\n1\u0026lt;head\u0026gt; 2 \u0026lt;style\u0026gt; 3 div{ 4 width:400px; 5 height:300px; 6 background:lightyellow; 7 text-align:center; 8 } 9 div span{ 10 display:inline-block; 11 vertical-align:middle; 12 height:100%; 13 } 14 div img{ 15 vertical-align:middle; 16 height:100px; 17 } 18\u0026lt;/style\u0026gt; 19\u0026lt;/head\u0026gt; 20\u0026lt;body\u0026gt; 21 \u0026lt;div\u0026gt; 22\t\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 23\t\u0026lt;img src=\u0026#34;image.jpg\u0026#34;\u0026gt; 24\u0026lt;/div\u0026gt; 25\u0026lt;/body\u0026gt; å¸¸è¦‹ç¯„ä¾‹\ræ’åˆ—å¼å•†å“é é¢ä¸­çš„å•†å“åœ–ç‰‡ä¸è¦‹å¾—ä¸€è‡´ï¼Œæ­¤æ™‚é€™å€‹æ–¹æ³•å°±æ´¾ä¸Šç”¨å ´äº†ï¼Œç¯„ä¾‹ä»¥åŠä»£ç¢¼å¦‚ä¸‹ï¼›\n1\u0026lt;!DOCTYPE HTML\u0026gt; 2\u0026lt;html\u0026gt; 3 \u0026lt;head\u0026gt; 4 \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; 5 \u0026lt;meta name=\u0026#34;description\u0026#34; content=\u0026#34;test\u0026#34;\u0026gt; 6 \u0026lt;title\u0026gt;test\u0026lt;/title\u0026gt; 7 \u0026lt;style\u0026gt; 8 *{ 9 margin: 0px; 10 padding: 0px; 11 } 12 13 .box{ 14 width: 608px; 15 height: 506px; 16 margin: 10px auto; 17 } 18 19 .box dl{ 20 float: left; 21 border: 2px grey dotted; 22 width: 200px; 23 height: 250px; 24 margin: 0px -2px -2px 0; 25 } 26 27 .box dl dt{ 28 height: 180px; 29 text-align: center; 30 } 31 32 .box dl dt span{ 33 height: 100%; 34 display: inline-block; 35 vertical-align: middle; 36 } 37 38 .box dl dt a{ 39 display: inline-block; 40 vertical-align: middle; 41 } 42 .box dl dd{ 43 text-align: center; 44 } 45 46 .item{ 47 font-size: 18px; 48 } 49 50 .price{ 51 font-size: 16px; 52 color: darkred; 53 font-family: Arial, Helvetica, sans-serif; 54 margin-top: 10px; 55 } 56 57 \u0026lt;/style\u0026gt; 58 \u0026lt;/head\u0026gt; 59 \u0026lt;body\u0026gt; 60 \u0026lt;div class=\u0026#34;box\u0026#34;\u0026gt; 61 \u0026lt;dl\u0026gt; 62 \u0026lt;dt\u0026gt; 63 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 64 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread1.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 65 \u0026lt;/dt\u0026gt; 66 \u0026lt;dd\u0026gt; 67 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;æº«èéºµåŒ…\u0026lt;/div\u0026gt; 68 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 50\u0026lt;/div\u0026gt; 69 \u0026lt;/dd\u0026gt; 70 \u0026lt;/dl\u0026gt; 71 \u0026lt;dl\u0026gt; 72 \u0026lt;dt\u0026gt; 73 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 74 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread2.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 75 \u0026lt;/dt\u0026gt; 76 \u0026lt;dd\u0026gt; 77 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;æ³•åœ‹é¦™é Œ\u0026lt;/div\u0026gt; 78 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 55\u0026lt;/div\u0026gt; 79 \u0026lt;/dd\u0026gt; 80 \u0026lt;/dl\u0026gt; 81 \u0026lt;dl\u0026gt; 82 \u0026lt;dt\u0026gt; 83 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 84 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread3.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 85 \u0026lt;/dt\u0026gt; 86 \u0026lt;dd\u0026gt; 87 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;å¤§è è˜¿\u0026lt;/div\u0026gt; 88 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 45\u0026lt;/div\u0026gt; 89 \u0026lt;/dd\u0026gt; 90 \u0026lt;/dl\u0026gt; 91 \u0026lt;dl\u0026gt; 92 \u0026lt;dt\u0026gt; 93 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 94 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread4.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 95 \u0026lt;/dt\u0026gt; 96 \u0026lt;dd\u0026gt; 97 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;å·§å…‹ç²’åœˆ\u0026lt;/div\u0026gt; 98 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 45\u0026lt;/div\u0026gt; 99 \u0026lt;/dd\u0026gt; 100 \u0026lt;/dl\u0026gt; 101 \u0026lt;dl\u0026gt; 102 \u0026lt;dt\u0026gt; 103 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 104 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread5.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 105 \u0026lt;/dt\u0026gt; 106 \u0026lt;dd\u0026gt; 107 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;èŠ±ç”Ÿä»€éº¼äº‹\u0026lt;/div\u0026gt; 108 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 40\u0026lt;/div\u0026gt; 109 \u0026lt;/dd\u0026gt; 110 \u0026lt;/dl\u0026gt; 111 \u0026lt;dl\u0026gt; 112 \u0026lt;dt\u0026gt; 113 \u0026lt;span\u0026gt;\u0026lt;/span\u0026gt; 114 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;img src=\u0026#34;bread6.PNG\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; 115 \u0026lt;/dt\u0026gt; 116 \u0026lt;dd\u0026gt; 117 \u0026lt;div class=\u0026#34;item\u0026#34;\u0026gt;æ¡‚åœ“ä¸‰å…„å¼Ÿ\u0026lt;/div\u0026gt; 118 \u0026lt;div class=\u0026#34;price\u0026#34;\u0026gt;NTD$ 55\u0026lt;/div\u0026gt; 119 \u0026lt;/dd\u0026gt; 120 \u0026lt;/dl\u0026gt; 121 \u0026lt;/div\u0026gt; 122 \u0026lt;/body\u0026gt; 123\u0026lt;/html\u0026gt; ","date":"2020-10-19T09:38:46+00:00","updated":"2020-10-19T09:38:46+00:00"},{"objectID":"1602864660","permalink":"/post/programming-css-nav-practice/css-display-font-when-hover/","title":"[CSS] ç§»å…¥è½‰æ›æ–‡å­—å…§å®¹","content":"ç§»å…¥è½‰æ›å…¶å¯¦å¾ˆç°¡å–®ï¼Œä¸éœ€è¦ç®—ä»€éº¼æ­£è² ä½ç§»ï¼Œåªè¦åˆ©ç”¨ display: none å±¬æ€§å°±å¯ä»¥è¼•é¬†é”æˆã€‚å…ˆä¾†çœ‹å®Œæˆçš„ç¯„ä¾‹ï¼š\nHomeé¦–é  Abouté—œæ–¼ Servicesæœå‹™ Clientså®¢æˆ¶ Contactè¯çµ¡ ä»£ç¢¼å¦‚ä¸‹ï¼š\n1\u0026lt;!DOCTYPE HTML\u0026gt; 2\u0026lt;html\u0026gt; 3 \u0026lt;head\u0026gt; 4 \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;/\u0026gt; 5 \u0026lt;style\u0026gt; 6 .nav2{ 7 width: 916px; 8 height: 20px; 9 margin: 0px auto; 10 border-bottom: 8px red solid; 11 padding-left: 10px; 12 } 13 14 .nav2 a{ 15 height: 20px; 16 width: 80px; 17 float: left; 18 margin-right: 1px; 19 text-decoration: none; 20 text-align: center; 21 background: rgb(223,223,223); 22 23 } 24 .nav2 a .en{ 25 display: block; 26 color: black; 27 font-size: 10px; 28 line-height: 20px; 29 } 30 31 .nav2 a .cn{ 32 display: none; 33 color: black; 34 font-size: 10px; 35 line-height: 20px; 36 } 37 .nav2 a:hover{ 38 background: red; 39 } 40\t\u0026lt;!-- åœ¨æ¸¸æ¨™ç§»å…¥æ™‚ .en çš„æ¨£å¼ --\u0026gt; 41 .nav2 a:hover .en{ 42 display: none; 43 color: white; 44 } 45\t\u0026lt;!-- åœ¨æ¸¸æ¨™ç§»å…¥æ™‚ .cn çš„æ¨£å¼ --\u0026gt; 46 .nav2 a:hover .cn{ 47 display: block; 48 color:white; 49 } 50 \u0026lt;/style\u0026gt; 51 \u0026lt;/head\u0026gt; 52 \u0026lt;body\u0026gt; 53 \u0026lt;div class=\u0026#34;nav2\u0026#34;\u0026gt; 54 \u0026lt;!-- åˆ©ç”¨å…©å€‹æ¨™ç±¤è½‰æ›ä¸åŒæ–‡å­— --\u0026gt; 55 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;en\u0026#34;\u0026gt;Home\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;cn\u0026#34;\u0026gt;é¦–é \u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt; 56 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;en\u0026#34;\u0026gt;About\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;cn\u0026#34;\u0026gt;é—œæ–¼\u0026lt;/a\u0026gt; 57 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;en\u0026#34;\u0026gt;Services\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;cn\u0026#34;\u0026gt;æœå‹™\u0026lt;/a\u0026gt; 58 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;en\u0026#34;\u0026gt;Clients\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;cn\u0026#34;\u0026gt;å®¢æˆ¶\u0026lt;/a\u0026gt; 59 \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;en\u0026#34;\u0026gt;Contact\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;cn\u0026#34;\u0026gt;è¯çµ¡\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt; 60 \u0026lt;/div\u0026gt; 61 \u0026lt;/body\u0026gt; 62\u0026lt;html\u0026gt; ","date":"2020-10-16T16:11:00+00:00","updated":"2020-10-16T16:11:00+00:00"},{"objectID":"1602784080","permalink":"/post/programming-css-overflow-usecase/css-overflow/","title":"[CSS] overflow æ‡‰ç”¨","content":"Margin é‡ç–Š\rç‹€æ³ä¸€\r1\u0026amp;lt;head\u0026amp;gt; 2\t\u0026amp;lt;style\u0026amp;gt; 3\t.box1{ 4\twidth: 100px; 5\theight: 100px; 6\tmargin: 30px; 7\tbackground: pink; 8\t} 9\t.box2{ 10\twidth: 100px; 11\theight: 100px; 12\tmargin: 50px; 13\tbackground: lightblue; 14\t} 15\t\u0026amp;lt;/style\u0026amp;gt; 16\u0026amp;lt;/head\u0026amp;gt; 17\u0026amp;lt;body\u0026amp;gt; 18\t\u0026amp;lt;div class=\u0026amp;#34;box1\u0026amp;#34;\u0026amp;gt;\u0026amp;lt;/div\u0026amp;gt; 19\t\u0026amp;lt;div sclass=\u0026amp;#34;box2\u0026amp;#34;\u0026amp;gt;\u0026amp;lt;/div\u0026amp;gt; 20\u0026amp;lt;/body\u0026amp;gt; å¯ä»¥ç™¼ç¾åˆ°å…©å€‹ div é›–ç„¶éƒ½æœ‰è¨­ marginï¼Œä½†å…©è€…é–“çš„é–“è·åƒ…æœ‰ 50pxï¼Œæ˜¯å› ç‚ºç•¶ä¸Šä¸‹éƒ½æœ‰ margin æ™‚ï¼Œæœƒå–æœ€å¤§çš„é‚£å€‹å€¼ã€‚\nç‹€æ³äºŒ\r1 2\u0026amp;lt;head\u0026amp;gt; 3\t\u0026amp;lt;style\u0026amp;gt; 4\t.box1{ 5\twidth: 100px; 6\theight: 100px; 7\tbackground: pink; 8\t} 9\t.box2{ 10\twidth: 50px; 11\theight: 50px; 12\tmargin: 20px; 13\tbackground: lightblue; 14\t} 15\t\u0026amp;lt;/style\u0026amp;gt; 16\u0026amp;lt;/head\u0026amp;gt; 17\u0026amp;lt;body\u0026amp;gt; 18\t\u0026amp;lt;div class=\u0026amp;#34;box1\u0026amp;#34;\u0026amp;gt;\u0026amp;lt;/div\u0026amp;gt; 19\t\u0026amp;lt;div sclass=\u0026amp;#34;box2\u0026amp;#34;\u0026amp;gt;\u0026amp;lt;/div\u0026amp;gt; 20\u0026amp;lt;/div\u0026amp;gt; 21\u0026amp;lt;/body\u0026amp;gt; å¯ä»¥ç™¼ç¾åœ¨å­æ¨™ç±¤ä¸­åŠ ä¸Š marginï¼Œæœƒé€£å¸¶çˆ¶æ¨™ç±¤å—å½±éŸ¿ã€‚è§£æ±ºæ–¹å¼æ˜¯åœ¨çˆ¶æ¨™ç±¤åŠ ä¸Š overflow: hidden; çš„å±¬æ€§ã€‚ ç•¶è¦é¡¯ç¤ºçš„åˆ—è¡¨ä¸æƒ³è¶…å‡ºæ—¢å®šç¯„åœæ™‚(æ–°èã€æ¶ˆæ¯åˆ—è¡¨)\rä¸€èˆ¬ä»€éº¼æ¨£å¼éƒ½æ²’æŒ‡å®šçš„ç‹€æ³ä¸‹ï¼š\n1\u0026amp;lt;head\u0026amp;gt; 2\t\u0026amp;lt;style\u0026amp;gt; 3\tul{ 4\twidth: 200px; 5\theight: 100px; 6 â€¦","date":"2020-10-15T17:48:00+00:00","updated":"2020-10-15T17:48:00+00:00"},{"objectID":"1602756884","permalink":"/post/os-linux-disk-format/linux-disk-format-and-mount/","title":"[Linux] åˆ†å‰² \u0026 æ ¼å¼åŒ– \u0026 æ›è¼‰ç¡¬ç¢Ÿ","content":"æ–°ç¡¬ç¢Ÿæ”¾å…¥æ©Ÿå™¨å¾Œè¦åšä¸‰ä»¶äº‹æƒ…ï¼Œåˆ†å‰²ã€æ ¼å¼åŒ–ã€æ›è¼‰ï¼Œæ‰å¯ä»¥é–‹å§‹å„²å­˜è³‡æ–™ï¼›\næŸ¥çœ‹ç¡¬ç¢Ÿç‹€æ…‹\ræŸ¥çœ‹ç›®å‰é›»è…¦ä¸­çš„ç¡¬ç¢Ÿ\n1$ root@srv1:/# ls /dev/sd* 2/dev/sda /dev/sda1 /dev/sda2 /dev/sdb /dev/sdc åˆ—å‡ºç›®å‰ç³»çµ±ç¡¬ç¢Ÿæ›è¼‰ç‹€æ…‹\n1$ df -h 1root@srv1:/# df -h 2Filesystem Size Used Avail Use% Mounted on 3udev 32G 0 32G 0% /dev 4tmpfs 6.3G 2.2M 6.3G 1% /run 5/dev/sda2 458G 36G 399G 9% / 6tmpfs 32G 0 32G 0% /dev/shm 7tmpfs 5.0M 0 5.0M 0% /run/lock 8tmpfs 32G 0 32G 0% /sys/fs/cgroup 9tmpfs 6.3G 0 6.3G 0% /run/user/1000 ç¡¬ç¢Ÿåˆ†å‰²é¡å‹\rç¡¬ç¢Ÿåˆ†å‰²æœ‰å…©ç¨®æ¨¡å¼ï¼š\nå‚³çµ± BIOS/MBR æ–°å‹ UEFI/GPT (ç›®å‰æœ‰åœ–å½¢ä»‹é¢çš„ BIOS çš†å±¬ä¹‹) BIOS/MBR\rä¸»é–‹æ©Ÿç´€éŒ„ï¼ˆMaster Boot Recordï¼ŒMBRï¼‰æ˜¯é›»è…¦é–‹æ©Ÿå¾Œå­˜å–ç¡¬ç¢Ÿæ™‚é¦–å…ˆæœƒè®€å–çš„ç¬¬ä¸€å€‹ç£å€ã€‚ é–‹æ©Ÿéç¨‹æ˜¯ BIOS â†’ MBR â†’ å•Ÿå‹• OSã€‚\nUEFI/GPT\rçµ±ä¸€å¯å»¶ä¼¸éŸŒé«”ä»‹é¢ï¼ˆUnified Extensible Firmware Interfaceï¼ŒUEFIï¼‰ï¼Œå‚³çµ± BIOS çš„æ”¹è‰¯ï¼ŒGPTï¼ˆGUID Partition Tableï¼‰å°±æ˜¯å–ä»£ MBR çš„æ–°çš„ç£ç¢Ÿåˆ†å‰²è¡¨ã€‚ é–‹æ©Ÿéç¨‹æ˜¯ UEFI â†’ GPT â†’ å•Ÿå‹• OSã€‚\né€²å…¥æ­£é¡Œ\råˆ†å‰²\rå°æ–¼ 2TB ç¡¬ç¢Ÿç”¨ MBR\rä½¿ç”¨ fdisk åˆ†å‰²ï¼Œå¾Œé¢æ¥è¦åˆ†å‰²çš„ç¡¬ç¢Ÿã€‚é€²å…¥å¾Œä¸‹ m åˆ—å‡ºæŒ‡ä»¤ç°¡ä»‹ï¼›\n1root@srv1:/# fdisk /dev/sdb 2 3Welcome to fdisk (util-linux 2.34). 4Changes will remain in memory only, until you decide to write them. 5Be careful before using the write command. 6 7Device does not contain a â€¦","date":"2020-10-15T10:14:44+00:00","updated":"2020-10-15T10:14:44+00:00"},{"objectID":"1602642240","permalink":"/post/programming-css-practice/first-css-practice/","title":"åˆ‡ç‰ˆç´€éŒ„","content":"å…ˆæ”¾ä¸€ä¸‹ 87 åˆ†åƒçš„æ¯”è¼ƒåœ–ï¼Œå·¦é‚Šæ˜¯è‡ªå·±åˆ‡çš„ï¼Œå³é‚Šæ˜¯é¡Œç›®ã€‚\nç¶œå’Œè½è¬›è§£å½±ç‰‡ï¼ŒæŠŠä¸€äº›å¯æ”¹é€²çš„å°åœ°æ–¹åŠ ä¸Šå‚™è¨»ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 \u0026amp;lt;!DOCTYPE HTML\u0026amp;gt; \u0026amp;lt;html\u0026amp;gt; \u0026amp;lt;head\u0026amp;gt; \u0026amp;lt;meta charset=\u0026amp;#34;utf-8\u0026amp;#34;\u0026amp;gt; \u0026amp;lt;meta name=\u0026amp;#34;description\u0026amp;#34; content=\u0026amp;#34;gotoway\u0026amp;#34;\u0026amp;gt; \u0026amp;lt;title\u0026amp;gt;Gotoway\u0026amp;lt;/title\u0026amp;gt; \u0026amp;lt;link rel=\u0026amp;#34;stylesheet\u0026amp;#34; href=\u0026amp;#34;./css/style.css\u0026amp;#34;\u0026amp;gt; \u0026amp;lt;/head\u0026amp;gt; \u0026amp;lt;body\u0026amp;gt; \u0026amp;lt;div id=\u0026amp;#34;top\u0026amp;#34;\u0026amp;gt; \u0026amp;lt;img src=\u0026amp;#34;./img/logo.png\u0026amp;#34;\u0026amp;gt; \u0026amp;lt;!-- é€šå¸¸ logo è¦åŠ ä¸Šè¶…é€£çµ --\u0026amp;gt; \u0026amp;lt;ul\u0026amp;gt; \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;a href=\u0026amp;#34;#\u0026amp;#34;\u0026amp;gt;æ¡ˆä¾‹ä½œå“\u0026amp;lt;/a\u0026amp;gt;\u0026amp;lt;/li\u0026amp;gt; \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;a href=\u0026amp;#34;#\u0026amp;#34;\u0026amp;gt;ç¶²ç«™å»ºè¨­\u0026amp;lt;/a\u0026amp;gt;\u0026amp;lt;/li\u0026amp;gt; \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;a href=\u0026amp;#34;#\u0026amp;#34;\u0026amp;gt;æ•´åˆç‡ŸéŠ·\u0026amp;lt;/a\u0026amp;gt;\u0026amp;lt;/li\u0026amp;gt; \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;a href=\u0026amp;#34;#\u0026amp;#34;\u0026amp;gt;æ–°èè³‡ â€¦","date":"2020-10-14T10:24:00+08:00","updated":"2020-10-14T10:24:00+08:00"},{"objectID":"1602534960","permalink":"/post/programming-vue-admin-template1/vue-admin-template/","title":"[Vue] è§£æ vue-admin-template","content":"å°ˆæ¡ˆçµæ§‹(src)\r1user@pc10:~/vue-admin-template/src$ tree -L 1 2â”œâ”€â”€ api # æ‰€æœ‰è«‹æ±‚ï¼Œå°å¾Œç«¯çš„è«‹æ±‚çš†å¯«åœ¨é€™è£¡ 3â”œâ”€â”€ App.vue # å…¥å£é é¢ 4â”œâ”€â”€ assets # åœ–ç‰‡ç­‰è³‡æº 5â”œâ”€â”€ components # å…¨å±€å…¬å…±çµ„ä»¶ï¼Œéå…¬å…±çµ„ä»¶åœ¨å„è‡ªçš„ view ä¸­ç¶­è­· 6â”œâ”€â”€ icons 7â”œâ”€â”€ layout # å…¨å±€ layout 8â”œâ”€â”€ main.js # ç¨‹å¼å…¥å£ 9â”œâ”€â”€ permission.js # æ¬Šé™ç®¡ç† 10â”œâ”€â”€ router # è·¯ç”±ï¼ŒæŠŠé é¢æ”¾é€²å°èˆªæ¬„ 11â”œâ”€â”€ settings.js 12â”œâ”€â”€ store # å…¨å±€ store ç®¡ç†ï¼ŒVuex å€‰åº«ï¼Œç”¨æ–¼å„²å­˜ç‹€æ…‹ 13â”œâ”€â”€ styles # å…¨å±€æ¨£å¼ 14â”œâ”€â”€ utils # å…¨å±€å…¬å…±æ–¹æ³•ï¼Œéå…¬å…±åœ¨å„è‡ªçš„ view ä¸­ç¶­è­· 15â””â”€â”€ views # æ‰€æœ‰é é¢ï¼Œè‡ªæ·»åŠ çš„é é¢æ”¾é€™è£¡ main.js\r1import Vue from \u0026amp;#39;vue\u0026amp;#39; 2 3import \u0026amp;#39;normalize.css/normalize.css\u0026amp;#39; // A modern alternative to CSS resets 4 5import ElementUI from \u0026amp;#39;element-ui\u0026amp;#39; 6import \u0026amp;#39;element-ui/lib/theme-chalk/index.css\u0026amp;#39; 7import locale from \u0026amp;#39;element-ui/lib/locale/lang/en\u0026amp;#39; // lang i18n 8 9import \u0026amp;#39;@/styles/index.scss\u0026amp;#39; // global css 10 11// In Vue Webpack template, Webpack is configured to replace @/ with src pathï¼Œ@ æ˜¯webpackä¸­å®šç¾©çš„åˆ¥åï¼Œä»£æ›¿ resolve(\u0026amp;#39;src\u0026amp;#39;) æŒ‡å‘çš„è·¯å¾‘ 12 13import App from \u0026amp;#39;./App\u0026amp;#39; 14import store from \u0026amp;#39;./store\u0026amp;#39; 15import router â€¦","date":"2020-10-12T20:36:00+00:00","updated":"2020-10-12T20:36:00+00:00"},{"objectID":"1601997060","permalink":"/post/programmimg-frontend-dom/html-dom/","title":"[Frontend] DOM","content":"DOM (Document Object Model) å®šç¾©äº†æ¨™æº– APIï¼Œä½¿ JavaScript å¯ä»¥æ§åˆ¶ç€è¦½å™¨çš„è¡Œç‚ºèˆ‡ç¶²é çš„å…§å®¹ã€‚\nDOM å°‡ä¸€ä»½ HTML æ–‡ä»¶çœ‹ä½œæ˜¯ä¸€å€‹æ¨¹ç‹€çµæ§‹çš„ç‰©ä»¶ï¼Œè£¡é¢çš„æ¨™ç±¤çš†ç‚ºç¯€é» (node)ï¼Œå¯ä»¥æ”¹è®Šå…¶çµæ§‹ã€æ¨£å¼ (CSS) æˆ–å…§å®¹ç­‰ï¼š\nç¯€é»é¡å‹\rDOM ç‰©ä»¶æ¨¡å‹æŠŠ HTML çš„å…ƒç´  (element) ç•¶ä½œæ˜¯ JavaScript ç‰©ä»¶ (object) ä¾†æ“ä½œï¼Œå¸¸è¦‹çš„ç¯€é»é¡å‹\u0026mdash;\ndocumentï¼šDOM tree çš„æ ¹ç¯€é»ï¼Œæ‰€ä»¥ç•¶è¦å­˜å– HTML æ™‚ï¼Œéƒ½å¾ document ç‰©ä»¶é–‹å§‹ã€‚ element event window åƒè€ƒ: https://pydoing.blogspot.com/2011/08/javascript-htmldom-overview.html\rDOM API çš„ä½¿ç”¨ç¯„ä¾‹\r1// å–å¾—é é¢ä¸Šæ‰€æœ‰çš„ \u0026lt;p\u0026gt; å…ƒç´  2var paragraphs = document.getElementsByTagName(\u0026#39;p\u0026#39;); 3 4// å°‡æ‰€æœ‰çš„ \u0026lt;p\u0026gt; å…ƒç´ çš„æ–‡å­—é¡è‰²éƒ½æ”¹æˆç¶ è‰² 5for (var i=0; i\u0026lt;paragraphs.length; ++i) { 6 paragraphs[i].style.color = \u0026#39;green\u0026#39;; 7} Reference\rhttps://zh.wikipedia.org/wiki/%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B\rhttps://www.fooish.com/javascript/dom/\r","date":"2020-10-06T15:11:00+00:00","updated":"2020-10-06T15:11:00+00:00"},{"objectID":"1601996880","permalink":"/post/data-realtime-streamming-batch/realtime-streaming-and-batch/","title":"Real-time \u0026 Streaming \u0026 Batch ","content":"real-time æŒ‡çš„æ˜¯è³‡æ–™çš„åæ‡‰æ™‚é–“ å¦‚æœä¸€å€‹ç³»çµ±ç‚ºå¯¦æ™‚ç³»çµ±ï¼Œè¡¨ç¤ºè©²ç³»çµ±èƒ½åœ¨æ¥µçŸ­çš„æ™‚é–“å…§åæ‡‰\nstreaming æŒ‡çš„æ˜¯é‡å°è³‡æ–™æ¡å–çš„å‹•ä½œ\nhttps://sqlstream.com/real-time-vs-streaming-a-short-explanation/\rhttp://zicesun.com/2019/03/22/201903272000-Batch-Processing-vs-Stream-Processing/\r**å¾…æ¯”è¼ƒ streaming \u0026amp; batch**\n**å¾…æ¯”è¼ƒ kafka stream \u0026amp; spark streaming**\n","date":"2020-10-06T15:08:00+00:00","updated":"2020-10-06T15:08:00+00:00"},{"objectID":"1601996340","permalink":"/post/programming-vue-intro/vue-introduction/","title":"[Vue] å®‰è£åŠåŸºæœ¬çµ„æˆç°¡ä»‹","content":"install nodejs and npm\rå®‰è£æœ€æ–°ç‰ˆ Nodejs ä»¥åŠ npm\n1$ sudo apt update 2$ sudo apt install -y nodejs 3$ sudo apt install -y npm 4$ sudo npm install npm@latest -g 5$ sudo npm cache clean -f 6$ sudo npm install n -g 7$ sudo n latest stable 8$ sudo npm -v 9$ sudo node -v install vue\r1$ sudo npm install -g @vue/cli 2$ sudo chown -R 1000:1000 \u0026amp;#34;/home/user/.npm\u0026amp;#34; 3# let npm install without sudo 4$ sudo chown -R $USER:$(id -gn $USER) /home/user/.config 5# npm update check without sudo new a vue project\r1$ vue create . # åœ¨ç•¶å‰ç›®éŒ„ä¸‹å»ºç«‹ 2# OR 3$ vue create myproject # æˆ–æ˜¯æŒ‡å®šæ–°çš„è³‡æ–™å¤¾ é¸æ“‡è¦é å®‰è£çš„å¥—ä»¶ã€‚å¯ä»¥å…ˆé¸é è¨­ï¼Œå¾ŒçºŒé‚„æƒ³æ–°å¢å…¶ä»–çš„å·¥å…·ï¼Œå¯ä»¥å†ä½¿ç”¨ npm æˆ–æ˜¯ yarn å®‰è£å³å¯ã€‚\n1ue CLI v4.5.6 2? Please pick a preset: (Use arrow keys) 3â¯ Default ([Vue 2] babel, eslint) 4 Default (Vue 3 Preview) ([Vue 3] babel, eslint) 5 Manually select features æŒ‰ä¸‹ Enter ä¹‹å¾Œå°±æœƒé–‹å§‹å°ˆæ¡ˆå»ºç«‹ï¼Œæ¥è‘—ç­‰å®ƒå®Œæˆã€‚\nå¯ä»¥çœ‹åˆ°æœ€ä¸‹æ–¹æç¤ºï¼Œé€²å…¥å°ˆæ¡ˆç›®éŒ„å¾Œä¸‹ npm run serve çš„å‘½ä»¤å°±å¯ä»¥é–‹å§‹é–‹ç™¼ã€‚\n1ğŸ‰ Successfully created project myproject. 2ğŸ‘‰ Get started with the following commands: 3 4 $ cd myproject 5 $ npm run serve npm run serve\r â€¦","date":"2020-10-06T14:59:00+00:00","updated":"2020-10-06T14:59:00+00:00"},{"objectID":"1601907300","permalink":"/post/programming-openapi-intro/openapi-introduction/","title":"[API] OpenAPI \u0026 Swagger ç°¡ä»‹","content":"OpenAPI\rOpenAPIÂ æ˜¯ä¸€å¥—Â APIÂ è¦ç¯„ï¼ˆOpenAPIÂ SpecificationÂ ï¼ŒOASï¼‰ï¼Œç”¨æ–¼å®šç¾©Â RESTfulÂ APIã€‚APIÂ è¦ç¯„ä½¿ç”¨Â YAMLÂ æˆ–Â JSONÂ ç·¨å¯«ï¼Œå°æ–¼äººé¡å’Œæ©Ÿå™¨ä¾†èªªçš†æ˜“æ–¼é–±è®€ã€‚\nOpenAPI ç°¡å–®ä¾†èªªå°±æ˜¯Â APIï¼Œä¸€èˆ¬æ˜¯æŒ‡ä¸€é–‹å§‹æ˜¯å°é–‰çš„ç³»çµ±ï¼Œæ¯”å¦‚æœ€é–‹å§‹çš„Â Twitterã€GoogleÂ æˆ–è€…Â Facebookã€‚çªç„¶æœ‰ä¸€å¤©ï¼Œä»–å€‘é–‹æ”¾äº†ï¼å…¬ä½ˆäº†å¯¦ç¾æŸäº›åŠŸèƒ½çš„Â APIï¼Œä¾†ç²å¾—ä»–å€‘å…§éƒ¨çš„æ•¸æ“šã€åŸ·è¡Œç‰¹å®šæ“ä½œã€‚é€™å€‹æ™‚å€™ï¼Œé€™æ¨£çš„Â APIï¼ŒÂ æˆ‘å€‘å°±å¯ç¨±ç‚ºÂ \u0026ldquo;Open\u0026rdquo;Â APIã€‚\nSwagger\rSwaggerÂ æ˜¯ä¸€å¥—ä»¥Â OpenAPIÂ è¦ç¯„æ§‹å»ºçš„é–‹æºå·¥å…·ï¼Œå¯ä»¥å¹«åŠ©ä½ è¨­è¨ˆã€æ§‹å»ºã€è¨˜éŒ„å’Œä½¿ç”¨Â RESTÂ APIã€‚ä¸»è¦çš„Â SwaggerÂ å·¥å…·åŒ…æ‹¬ï¼š\n-Â SwaggerÂ Editorï¼šåŸºæ–¼ç€è¦½å™¨çš„ç·¨è¼¯å™¨ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­ç·¨å¯«Â OpenAPIÂ è¦ç¯„ã€‚\n-Â SwaggerÂ UIï¼šå°‡Â OpenAPIÂ è¦ç¯„å‘ˆç¾ç‚ºäº¤äº’å¼çš„Â APIÂ æ–‡æª”ï¼Œä½¿å¾—ç”¨æˆ¶å¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨ä¸­èª¿ç”¨Â APIã€‚\n-Â SwaggerÂ Codegenï¼šä¸€å€‹é–‹æºçš„ä»£ç¢¼ç”¢ç”Ÿå™¨ï¼Œæ ¹æ“šå®šç¾©å¥½çš„ RESTfulÂ API æ–‡ä»¶ç”¢ç”Ÿ serverÂ stubs åŠclientÂ SDKsã€‚\nç‚ºä»€éº¼è¦ä½¿ç”¨Â OpenÂ API\ræ¨™æº–åŒ–\réµå¾ªÂ OASÂ è¦ç¯„çš„Â RESTfulÂ APIÂ å®šç¾©ï¼Œå¯ä½¿Â APIÂ äº’é€šä»‹é¢ä¸å—ç¨‹å¼èªè¨€é™å®šã€‚ä¸”çµ±ä¸€æ¡ç”¨Â APIÂ é€²è¡Œè·¨ç³»çµ±å‘¼å«ï¼Œä½¿å¾—å…§éƒ¨ç³»çµ±çš„ä»‹æ¥æ¨™æº–ä¸€è‡´ï¼Œå³ä¾¿æœªä¾†å¾—æ›æ‰æŸä¸€å¥—ç³»çµ±ï¼ŒAPIÂ ä¸²æ¥ä»ä¿æŒä¸€è‡´ï¼Œå…¶ä»–ç³»çµ±ä¸ç”¨ç‰¹åˆ¥ä¿®æ”¹å¯«æ³•å°±èƒ½ç¹¼çºŒå‘¼å«ã€‚\nç¯€çœé–‹ç™¼æ™‚é–“åŠæˆæœ¬\rä½¿ç”¨è¦ç¯„å¥½çš„æ¡†æ¶ä¾†è¨­è¨ˆÂ APIã€‚å†é–‹ç™¼è€…ä¸éœ€è¦å¾é ­äº†è§£Â APIÂ å°±èƒ½é–‹å§‹ä¸²æ¥ï¼Œå¯ä»¥åŠ å¿«é–‹ç™¼æ™‚é–“ã€‚\nReference\rhttps://kknews.cc/code/nrgp5aq.html\rhttps://www.ithome.com.tw/news/133682\rhttps://www.zhihu.com/question/20225153\r","date":"2020-10-05T14:15:00+00:00","updated":"2020-10-05T14:15:00+00:00"},{"objectID":"1601475960","permalink":"/post/programming-python-paramiko/python-paramiko/","title":"[Python] Paramiko","content":"ç°¡ä»‹\rparamikoÂ æ˜¯ä¸€å€‹ä½¿ç”¨Â SSH2Â é ç«¯æ§åˆ¶çš„æ¨¡çµ„ï¼Œå¯ä»¥å°é ç«¯æœå‹™å™¨é€²è¡Œå‘½ä»¤æˆ–æ–‡ä»¶æ“ä½œã€‚æœ‰å…©å€‹æ ¸å¿ƒçµ„ä»¶ï¼š\nSSHClientï¼šå®ƒçš„ä½œç”¨é¡ä¼¼æ–¼Â LinuxÂ çš„Â SSHÂ å‘½ä»¤ï¼Œæ˜¯å°Â SSHÂ æœƒè©±Â (Session)\t*Â çš„ä¸€å€‹é¡çš„å°è£ï¼Œé€™å€‹é¡å°è£äº†å‚³è¼¸(Transport)\t*ã€é€šé“(Channel)*Â åŠÂ SFTPClientÂ å»ºç«‹çš„æ–¹æ³•Â (open_sftp)ã€‚ SFTPClientï¼šå®ƒçš„ä½œç”¨é¡ä¼¼Â LinuxÂ çš„Â SFTPÂ å‘½ä»¤ï¼Œæ˜¯å°Â SFTPÂ å®¢æˆ¶ç«¯çš„ä¸€å€‹é¡çš„å°è£ã€‚ä¸»è¦æ˜¯å¯¦ç¾å°é ç«¯æ–‡ä»¶çš„æ“ä½œï¼Œä¸Šå‚³ã€ä¸‹è¼‰ã€ä¿®æ”¹æ–‡ä»¶æ¬Šé™ç­‰æ“ä½œã€‚ *Â Transportï¼šæ˜¯ä¸€ç¨®åŠ å¯†çš„æœƒè©±Â (session)ï¼Œä½¿ç”¨æ™‚æœƒåŒæ­¥å‰µå»ºä¸€å€‹åŠ å¯†çš„Â Channelï¼ˆå³ç‚ºä¸€å€‹Â socketï¼‰ã€‚ *Â Sessionï¼šclientÂ å’ŒÂ serverÂ ä¿æŒé€£æ¥çš„å°è±¡ã€‚ SSHClient()ï¼šé ç«¯Â SSHÂ ç™»å…¥\r1importÂ paramiko 2Â #Â newÂ aÂ SSHClientÂ instant 3Â clientÂ =Â paramiko.SSHClient() 4Â 5Â #Â ä½¿ç”¨è‡ªå‹•æ·»åŠ ç­–ç•¥ï¼Œä¿å­˜ä¼ºæœå™¨çš„Â hostnameÂ å’Œé‡‘é‘°è³‡è¨Š 6Â client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) 7Â 8Â #Â connectÂ theÂ serverÂ throughÂ sshÂ usingÂ passwordÂ toÂ login 9Â client.connect(hostname=\u0026#39;10.1.5.1\u0026#39;,Â port=22,Â username=\u0026#39;root\u0026#39;,Â password=\u0026#39;0000\u0026#39;) 10Â #Â æˆ–æ˜¯ä½¿ç”¨é‡‘é‘°ç™»å…¥ 11Â #Â privateÂ =Â paramiko.RSAKey.from_private_key_file(\u0026#39;/home/root/.ssh/id_rsa\u0026#39;) 12Â #Â client.connect(hostname=\u0026#39;10.1.5.1\u0026#39;,port=22,username=\u0026#39;root\u0026#39;,pkey=private) exec_command()Â ä»¥åŠÂ invoke_shell()Â çš„ç”¨æ³•èˆ‡å·®åˆ¥\rexec_command()Â å‡½æ•¸ä½¿ç”¨Â SSHÂ execÂ é€šé“ï¼Œæœƒåœ¨åŸ·è¡Œå‘½ä»¤å¾Œé—œé–‰é€šé“ï¼Œä¸åŒé€šé“é–“ä¸ä¿è­‰ä¿ç•™äº’ç›¸ç‹€æ…‹(ä¾‹å¦‚å·¥ä½œç›®éŒ„æˆ–æ˜¯è®Šæ•¸)ã€‚ invoke_shell()Â å‡½æ•¸ä½¿ç”¨Â SSHÂ shellÂ é€šé“ï¼Œæœƒå¯¦ç¾äº¤äº’å¼Â shellÂ æœƒè©±ï¼Œåœ¨Â streamÂ é—œé–‰å‰æœƒåœ¨åŒä¸€å€‹é€šé“ä¸­åŸ·è¡Œå‘½ä»¤ã€‚ exec_command()\r13Â #Â openÂ aÂ channelÂ andÂ executeÂ theÂ command 14Â stdin,Â stdout,Â stderrÂ =Â client.exec_command(\u0026#39;dfÂ -h\u0026#39;)Â 15Â #Â stdoutÂ ç‚ºæ­£ç¢ºè¼¸å‡ºï¼ŒstderrÂ ç‚ºéŒ¯èª¤è¼¸å‡ºï¼ŒåŒæ™‚åªæœ‰ä¸€å€‹è®Šé‡æœ‰å€¼ 16Â 17Â #Â printÂ outÂ theÂ result 18Â print(stdout.read().decode(\u0026#39;utf-8\u0026#39;)) 19Â 20Â #Â closeÂ SSHClient 21Â client.close() invoke_shell()\r13Â command=\u0026#39;dhÂ -h\u0026#39; 14Â chan=ssh.invoke_shell() 15Â chan.send(command+\u0026#39;\\n\u0026#39;) 16Â #Â \\nÂ æ˜¯åŸ·è¡Œå‘½ä»¤çš„æ„æ€ï¼Œæ²’æœ‰Â \\nÂ ä¸æœƒåŸ·è¡Œ 17Â time.sleep(1)Â #Â ç­‰å¾…åŸ·è¡Œ 18Â res=chan.recv(1024)Â #Â æ¥å—è¿”å›è¨Šæ¯ 19Â chan.close() SSHClientÂ å°è£…Â Transport\r1importÂ paramiko 2Â 3Â #Â createÂ aÂ channel 4Â transportÂ =Â paramiko.Transport((\u0026#39;hostname\u0026#39;,Â 22)) 5Â transport.connect(username=\u0026#39;root\u0026#39;,Â password=\u0026#39;0000\u0026#39;) 6Â 7Â sshÂ =Â paramiko.SSHClient() 8Â ssh._transportÂ =Â transport 9Â 10Â stdin,Â stdout,Â stderrÂ =Â ssh.exec_command(\u0026#39;dfÂ -h\u0026#39;) 11Â print(stdout.read().decode(\u0026#39;utf-8\u0026#39;)) 12Â 13Â transport.close() Reference\rhttps://stackoverflow.com/questions/6770206/what-is-the-difference-between-the-shell-channel-and-the-exec-channel-in-jsc\rhttps://www.cnblogs.com/xiao-apple36/p/9144092.html\r","date":"2020-09-30T14:26:00+00:00","updated":"2020-09-30T14:26:00+00:00"},{"objectID":"1600267740","permalink":"/post/programming-css-margin-border-padding/css-margin-border-padding/","title":"[CSS] Margin \u0026 Border \u0026 Padding æ¯”è¼ƒ","content":"æ¯”è¼ƒ\rpadding border margin å…§é‚Šè· é‚Šè· å¤–é‚Šè· padding\rç”¨æ–¼èª¿æ•´å…ƒç´ é‚Šç•Œèˆ‡å…§å®¹çš„é–“è·ã€‚\nå–®ç¨æŒ‡å®šå¯«æ³•\rpadding-top: 30px; padding-right: 30px; padding-bottom: 30px; padding-left: 30px; åˆä½µå¯«æ³•\rpadding: 30px; \u0026ndash;\u0026gt; ä¸Šä¸‹å·¦å³çš†ç‚º 30px padding: 30px 50px \u0026ndash;\u0026gt; ä¸Šä¸‹ 30px, å·¦å³ 50px padding: 30px 20px 10px \u0026ndash;\u0026gt; ä¸Š 30px, å·¦å³ 20px , ä¸‹ 10px padding: 10px 20px 30px 40px \u0026ndash;\u0026gt; åˆ†åˆ¥å°æ‡‰ç‚ºä¸Šå³ä¸‹å·¦ margin\rç”¨æ–¼èª¿æ•´å…ƒç´ ä¹‹é–“çš„é‚Šç•Œé–“è·ã€‚ å±¬æ€§è¨­å®šåŒ padding æœ‰ä¸Šå³ä¸‹å·¦çš„å–®ç¨å±¬æ€§å€¼ï¼Œæˆ–æ˜¯åˆä½µç°¡å¯«å¯«æ³•ã€‚\nborder\rborder æ˜¯å…ƒç´ æœ€å¤–å±¤çš„é‚Šç•Œã€‚\nå–®ç¨æŒ‡å®šæ¨£å¼å¯«æ³•\rborder-width: 5px 5px 5px 5px; \u0026ndash;\u0026gt; ä¸Šå³ä¸‹å·¦ border-style: solid|dashed|double|dotted|hidden; border-color: black; border-top: 5px; border-right: 5px; border-bottom: 5px; border-left: 5px; åˆä½µå¯«æ³•\rborder: 5px red solid; \u0026ndash;\u0026gt; é‚Šæ¡†ç²—ç´° 5px, é¡è‰² red, æ¨£å¼ solid; ","date":"2020-09-16T14:49:00+00:00","updated":"2020-09-16T14:49:00+00:00"},{"objectID":"1599843660","permalink":"/post/programming-css-float/css-float/","title":"[CSS] float","content":"HTML Normal Flow / inline \u0026amp;amp; block\rä¸€èˆ¬ HTML çš„ normal flow ç‚ºç”±å·¦è‡³å³åŠç”±ä¸Šè‡³ä¸‹æ’åˆ—ï¼Œä¸€èˆ¬å–æ±ºæ–¼å…ƒç´ çš„ display å±¬æ€§æ˜¯ inline æˆ–æ˜¯ block\nblock å…ƒç´ ï¼šå€å¡Šå…ƒç´ ï¼Œåœ¨æ–‡æª”ä¸­è‡ªå·±ä½”ä¸€è¡Œã€‚å¦‚ \u0026amp;lt;div\u0026amp;gt;ã€\u0026amp;lt;p\u0026amp;gt;ã€\u0026amp;lt;ol\u0026amp;gt;\u0026amp;lt;ul\u0026amp;gt;\u0026amp;lt;li\u0026amp;gt;ã€\u0026amp;lt;dl\u0026amp;gt;\u0026amp;lt;dt\u0026amp;gt;\u0026amp;lt;dd\u0026amp;gt;ã€\u0026amp;lt;table\u0026amp;gt;\u0026amp;lt;tr\u0026amp;gt;\u0026amp;lt;td\u0026amp;gt;ã€\u0026amp;lt;form\u0026amp;gt;ã€‚ inline å…ƒç´ ï¼šè¡Œå…§å…ƒç´ æˆ–å…§è¯å…ƒç´ ï¼Œå¯ä»¥åœ¨ä¸€è¡Œé¡¯ç¤ºã€‚å¦‚ \u0026amp;lt;span\u0026amp;gt;ã€\u0026amp;lt;a\u0026amp;gt;ã€\u0026amp;lt;i\u0026amp;gt;ã€\u0026amp;lt;b\u0026amp;gt;ã€‚ inline-block å…ƒç´ ï¼›è¡Œå…§å¡Šå…ƒç´ ã€‚å¦‚ \u0026amp;lt;img\u0026amp;gt;ã€ \u0026amp;lt;input\u0026amp;gt;ã€‚ Float æµ®å‹•\rå› ç‚º HTML flow çš„ç‰¹æ€§å››å€‹å…ƒç´ æœƒç”±ä¸Šè‡³ä¸‹æ’åº\n1\u0026amp;lt;div class=\u0026amp;#34;box\u0026amp;#34;\u0026amp;gt;1\u0026amp;lt;/div\u0026amp;gt; 2\u0026amp;lt;div class=\u0026amp;#34;box\u0026amp;#34;\u0026amp;gt;2\u0026amp;lt;/div\u0026amp;gt; 3\u0026amp;lt;div class=\u0026amp;#34;box\u0026amp;#34;\u0026amp;gt;3\u0026amp;lt;/div\u0026amp;gt; 4\u0026amp;lt;div class=\u0026amp;#34;box\u0026amp;#34;\u0026amp;gt;4\u0026amp;lt;/div\u0026amp;gt; 5\u0026amp;lt;div class=\u0026amp;#34;box\u0026amp;#34;\u0026amp;gt;5\u0026amp;lt;/div\u0026amp;gt; 1.box{ 2 width: 50px; 3 height: 50px; 4 background-color: orange; 5 border: 1px solid; 6 margin: 10px; 7} 1 2 3 4 5 æ­¤æ™‚å¦‚æœæƒ³è¦å°‡ div box ç”±å·¦è‡³å³æ’åºï¼Œå‰‡å¯ä»¥ä½¿ç”¨ float å±¬æ€§ã€‚\n1.box{ 2 width: 50px; 3 height: 50px; 4 background-color: orange; 5 border: 1px solid; 6 margin: 10px; 7 float: left 8} 1 2 3 4 5 Float æ‡‰ç”¨æƒ…æ™¯\rç‚ºäº†å¯¦ç¾æ–‡å­—ç’°ç¹æ•ˆæœ ç‚ºäº†è¨­è¨ˆ DIV å€å¡Šæ°´å¹³æ’åˆ— ( â€¦","date":"2020-09-11T17:01:00+00:00","updated":"2020-09-11T17:01:00+00:00"},{"objectID":"1599220800","permalink":"/post/data-kafka-ssl-encryption/kafka-ssl-encryption/","title":"[Kafka] server - client \u0026 client - server SSL åŠ å¯†","content":"Kafka ç›®å‰æ”¯æŒ SSLã€SASL/Kerberosã€SASL/PLAIN ä¸‰ç¨®èªè­‰æ©Ÿåˆ¶ï¼Œé€™ç¯‡æ–‡ç« å°‡ç´€éŒ„å¦‚ä½•åœ¨ Kafka broker èˆ‡ clinet ç«¯å»ºç«‹ TLS/SSL é€£ç·šã€‚\nå¦å¤–é—œæ–¼ SASL é€£ç·šæ©Ÿåˆ¶ï¼Œå¯ä»¥åƒè€ƒ å®˜ç¶²æ–‡ä»¶\ræˆ–æ˜¯ ä¸­æ–‡ç‰ˆæ–‡ä»¶\rã€‚\næ­¥é©Ÿå¦‚ä¸‹ï¼š\nç”Ÿæˆå¯†é‘°/ è­‰æ›¸/ CA\råœ¨å„å€‹å¯¦ä¾‹ä¸­ç”Ÿæˆ keystore\réœ€è¦åœ¨é›†ç¾¤ä¸­çš„æ¯å°æ©Ÿå™¨ä¸Šå–®ç¨ç”Ÿæˆï¼Œkeystore åŒ…å«äº†å…©å€‹æ±è¥¿ï¼š\nå«æœ‰å…¬é‘°(Public Key)/ç§é‘°(Private Key) çš„ Key pair åªåŒ…å«å…¬é‘°çš„æœªç°½åè­‰æ›¸(Unsigned Certificate) 1$ keytool -keystore broker1.keystore.jks \\ 2 -alias broker1 -validity 3650 -genkey -keyalg RSA ç”¢ç”Ÿéç¨‹ä¸­éœ€è¼¸å…¥ keystore çš„å¯†ç¢¼ä»¥åŠè­‰æ›¸çš„ Distinguished Name (DName)ã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ Common Name(CN)ï¼Œéœ€ç‚ºæ©Ÿå™¨çš„ hostnameï¼›å¦‚æœä¸»æ©Ÿç¶å®šäº†åŸŸåï¼Œå‰‡è¼¸å…¥å®Œæ•´åŒ…å«åŸŸåçš„ FQDNã€‚\nåœ¨å…¶ä»– broker ä»¥åŠ clinet ç«¯é‡è¤‡ä»¥ä¸Šå‹•ä½œã€‚\nInfo\nè­‰æ›¸ç›¸ç•¶æ–¼ä¸€å€‹ IDï¼Œä¾†è¡¨æ˜è‡ªå·±æ˜¯èª°ï¼ˆå€åˆ†ä¸åŒçš„æœå‹™å™¨ï¼‰ã€‚æ­¤æ™‚ï¼Œé€™å€‹è­‰æ›¸é‚„æ²’æœ‰è¢«ä»»ä½• CAï¼ˆCertificate Authorityï¼Œè­‰æ›¸é ’ç™¼æ©Ÿæ§‹ï¼‰æ‰€èªè­‰ï¼ˆé€²è¡Œç°½åï¼‰ã€‚è­‰æ›¸å¯ä»¥é€šéä¸‹é¢å…©ç¨®æ–¹å¼ç°½åï¼š\nå…ˆè‡ªå·±ç”Ÿæˆä¸€å€‹è­‰æ›¸ï¼Œå†è®“ CA ç°½åã€‚(æ­¤ç¯‡å°‡æ¡ç”¨çš„æ–¹æ³•) ç›´æ¥å¾ CA ç”³è«‹ä¸€å€‹ã€‚ åœ¨ä»»ä¸€å°æ©Ÿå™¨ä¸­ç”¢ç”Ÿ CA\ré€šå¸¸æƒ…æ³ä¸‹ï¼Œè­‰æ›¸æ˜¯è¦å‘ CA ç”³è«‹çš„ï¼Œä½†æ˜¯å¦‚æœåƒèˆ‡è€…åƒ…æ˜¯è‡ªå®¶å®¢æˆ¶ç«¯ï¼Œè€Œéé¢å‘ç¶²éš›ç¶²è·¯ä¸Šçš„å®¢æˆ¶ç«¯ï¼ˆä¾‹å¦‚ç€è¦½å™¨ï¼‰ï¼Œé‚£éº¼å¯ä»¥è‡ªå·±ç”Ÿæˆä¸€å€‹ CAï¼Œç„¶å¾Œè®“é€™å€‹ CA å»ç°½ç½²å…¶ä»–è­‰æ›¸ã€‚\n1$ openssl req -new -x509 -keyout ca-key -out ca-cert -days 3650 ç”¢ç”Ÿéç¨‹ä¸­éœ€è¼¸å…¥ PEM å¯†ç¢¼ï¼Œä»¥åŠè­‰æ›¸ç›¸é—œè³‡è¨Šã€‚è€Œå¾Œæœƒç”¢ç”Ÿ CA å¯†é‘° ca-key ä»¥åŠå…¬é‘° ca-certã€‚\nç”Ÿæˆ truststore\rtruststore åŒ…å«äº†æ‰€æœ‰å¯ä»¥ä¿¡è³´çš„ CAã€‚ä»¥ä¸‹é¢è…³æœ¬å‰µå»º truststoreï¼Œä¸¦å°‡ä¸Šä¸€æ­¥é©Ÿç”Ÿæˆçš„ ca-cert åŒ¯å…¥ã€‚\n1keytool -keystore â€¦","date":"2020-09-04T12:00:00+00:00","updated":"2020-09-04T12:00:00+00:00"},{"objectID":"1598782200","permalink":"/post/data-zookeeper-encryption3/zookeeper-encryption-3/","title":"[Zookeeper] Encryption - node-node \u0026 client-node","content":"Node-Node Encryption\rç¯€é»åˆ°ç¯€é»åŠ å¯†ä½¿ç”¨ SSL ä¿è­· ZooKeeper server é–“çš„å…§éƒ¨é€£æ¥ï¼ŒåŠ å¯†å®Œå…¨åœ¨ ZooKeeper ç¯€é»ä¹‹é–“å®Œæˆã€‚é»˜èªæƒ…æ³ä¸‹ï¼ŒQuorom TLS æ˜¯ç¦ç”¨çš„ï¼Œå¿…é ˆé€šéç·¨è¼¯æ‰€æœ‰ server ä¸­çš„ zoo.cfg æ–‡ä»¶ä¾†å•Ÿç”¨ï¼š\n1# zoo.cfg 2sslQuorum=true 3serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory 4ssl.quorum.keyStore.location=\u0026lt;path to keystore\u0026gt; 5ssl.quorum.keyStore.password=\u0026lt;password\u0026gt; 6ssl.quorum.trustStore.location=\u0026lt;path to truststore\u0026gt; 7ssl.quorum.trustStore.password=\u0026lt;password\u0026gt; æ¥è‘—é‡æ–°å•Ÿç”¨ zookeeper é›†ç¾¤ï¼ŒæŸ¥çœ‹ Zookeeper server log å‡ºç¾ä»¥ä¸‹è¨Šæ¯ï¼Œä¾¿å¯ä»¥ä½¿ç”¨ ssl åœ¨ server é–“é€šè¨Šã€‚\n1info [main:QuorumPeer@1789] - Using TLS encrypted quorum communication info [main:QuorumPeer@1797] - Port unification disabled ... info [QuorumPeerListener:QuorumCnxManager$Listener@877] - Creating TLS-only quorum server socket Client-Node Encryption\ré‡å° server ç«¯ï¼Œç·¨è¼¯ zkServer.sh æª”æ¡ˆï¼ŒåŠ å…¥ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ 1export SERVER_JVMFLAGS=\u0026#34; 2-Dzookeeper.serverCnxnFactory=org.apache.zookeeper.server.NettyServerCnxnFactory 3-Dzookeeper.ssl.keyStore.location=\u0026lt;path to keystore\u0026gt; 4-Dzookeeper.ssl.keyStore.password=\u0026lt;password\u0026gt; 5-Dzookeeper.ssl.trustStore.location=\u0026lt;path to truststore\u0026gt; 6-Dzookeeper.ssl.trustStore.password=\u0026lt;password\u0026gt;\u0026#34; ç·¨è¼¯ zoo.cfg æª”æ¡ˆï¼ŒåŠ å…¥ secureClientPort 1... 2secureClientPort=2281 é‡å° client ç«¯ï¼Œä»¥ zkCli ç‚ºä¾‹ï¼Œç·¨è¼¯ zkCli.sh åŠ å…¥ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ 1export CLIENT_JVMFLAGS=\u0026#34; 2-Dzookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty 3-Dzookeeper.client.secure=true 4-Dzookeeper.ssl.keyStore.location=\u0026lt;path to keystore\u0026gt; 5-Dzookeeper.ssl.keyStore.password=\u0026lt;password\u0026gt; 6-Dzookeeper.ssl.trustStore.location=\u0026lt;path to truststore\u0026gt; 7-Dzookeeper.ssl.trustStore.password=\u0026lt;password\u0026gt;\u0026#34; é‡å•Ÿ Zookeeperï¼Œä¸¦é€é secure client port ä½¿ç”¨ zkCli é€£é€² Zookeeper serverã€‚ 1$ /opt/zookeeper/bin/zkServer.sh restart /opt/zookeeper/conf/zoo.cfg 2$ /opt/zookeeper/binzkServer -server 10.1.5.31:2281 è£œå……ï¼šå¦‚ä½•ä½¿ç”¨ ssl åœ¨ zkCLi ä¸­ä½¿ç”¨ dynamic reconfig çš„åŠŸèƒ½\råœ¨é€™ç¯‡\ræ–‡ç« \rä¸­æœ‰æåˆ° reconfig å­˜å–çš„ znode éœ€è¦æœ‰ ACL è®€å¯«çš„æ¬Šé™æˆ–æ˜¯ super user çš„èº«åˆ†ã€‚ é€é ssl ä½¿ç”¨ zkCLi åŠ å¯†é€£ç·šç™»å…¥æ™‚ï¼Œéœ€è¦ä½¿ç”¨ X509AuthenticationProvider.superUser åƒæ•¸ï¼Œå€¼è¨­ç‚º X500 principal nameï¼Œå°‡ x509 é‡‘é‘°ä½¿ç”¨è€…åŠ å…¥ super userã€‚\n1# zoo.cfg 2-Dzookeeper.X509AuthenticationProvider.superUser=CN=pc31 Reference\rhttps://zookeeper.apache.org/doc/r3.6.1/zookeeperAdmin.html#Quorum+TLS\rhttps://cwiki.apache.org/confluence/display/ZOOKEEPER/ZooKeeper+SSL+User+Guide\r","date":"2020-08-30T10:10:00+00:00","updated":"2020-08-30T10:10:00+00:00"},{"objectID":"1598780820","permalink":"/post/data-zookeeper-encryption2/zookeeper-encryption-2/","title":"[Zookeeper] Encryption - ç”¢ç”Ÿ CA-signed é‡‘é‘°","content":"ç”¢ç”Ÿ CA åŠ ç°½é‡‘é‘°\rç”¢ç”Ÿ CA é‡‘é‘°æ†‘è­‰ åœ¨éš¨æ„ä¸€å°æ©Ÿå™¨ä¸Šç”¢ç”Ÿ CA æ†‘è­‰ï¼Œç”¨æ–¼ç‚ºå…¶ä»–é‡‘é‘°åŠ ç°½ã€‚ 1$ openssl req -new -x509 \\ 2 -keyout test.ca.key \\ 3 -out test.ca.crt \\ 4 -days \u0026lt;days\u0026gt; \\ 5 -passout pass:\u0026lt;password\u0026gt; \\ 6 -subj \u0026#34;/C=TW/ST=NewTaipei/L=NewTaipei/O=ORG/OU=test/CN=localhost\u0026#34; æœƒç”¢ç”ŸåŠ å¯†çš„ RSA å¯†é‘° test.ca.key ä»¥åŠåŠ å¯†çš„å…¬é–‹ CA æ†‘è­‰ test.ca.crt\nç”¢ç”Ÿ keypair åœ¨æ¯ä¸€å°è¦åŠ å…¥ SSL çš„æ©Ÿå™¨ä¸Šä½¿ç”¨ Java keytool å·¥å…·ç”¢ç”Ÿå±¬æ–¼è‡ªå·±çš„ keypairã€‚ 1$ keytool -genkeypair \\ 2 -alias $(hostname -f) \\ 3 -keyalg RSA -keysize 2048 \\ 4 -dname \u0026#34;CN=$(hostname -f)\u0026#34; \\ 5 -validity \u0026lt;days\u0026gt; \\ 6 -keypass \u0026lt;password\u0026gt; \\ 7 -keystore keystore.jks \\ 8 -storepass \u0026lt;same password\u0026gt; \\ 9 -storetype JKS å°‡ç¬¬ä¸€æ­¥é©Ÿç”¢ç”Ÿçš„ CA æ†‘è­‰åŠ åˆ°å€‹åˆ¥æ©Ÿå™¨ä¸Šçš„ truststore 1$ keytool -importcert \\ 2 -keystore truststore.jks \\ 3 -file test.ca.crt \\ 4 -alias CARoot \\ 5 -keypass \u0026lt;password\u0026gt; \\ 6 -storepass \u0026lt;password\u0026gt; \\ 7 -noprompt å¾ç¬¬äºŒæ­¥é©Ÿç”¢ç”Ÿçš„ keypair keystore.jks ä¸­åŒ¯å‡º public certificate 1$ keytool -certreq \\ 2 -keystore keystore.jks \\ 3 -file $(hostname).crt \\ 4 -alias $(hostname) \\ 5 --keypass \u0026lt;password\u0026gt; \\ 6 --storepass \u0026lt;password\u0026gt; ä½¿ç”¨ CA ç°½ç½²ç¬¬å››æ­¥é©Ÿç”¢ç”Ÿçš„æ†‘è­‰ 1$ openssl x509 -req \\ 2 -CA test.ca.crt \\ 3 -CAkey test.ca.key \\ 4 -in $(hostname).crt \\ 5 -out $(hostname).signed.crt \\ 6 -days \u0026lt;days\u0026gt; \\ 7 -CAcreateserial \\ 8 -passin pass:\u0026lt;password\u0026gt; å®Œæˆå¾Œæœƒçœ‹åˆ°ä»¥ä¸‹è¨Šæ¯ï¼š\n1Signature ok 2subject=CN = \u0026lt;hostname\u0026gt; 3Getting CA Private Key å°‡ç¬¬äº”æ­¥ç”¢ç”Ÿçš„ signed certificate åŒ¯å…¥åˆ°è‡ªå·±çš„ keystore ä¸­ 1$ keytool -importcert \\ 2 -keystore keystore.jks \\ 3 -file $(hostname).signed.crt \\ 4 -alias $(hostname) \\ 5 -keypass \u0026lt;password\u0026gt; \\ 6 -storepass \u0026lt;password\u0026gt; \\ 7 -noprompt å°‡ç¬¬äº”æ­¥ç”¢ç”Ÿçš„ signed certificate åŒ¯å…¥åˆ°å…¶ä»–æ©Ÿå™¨çš„ truststore ä¸­ï¼Œä¾¿å¯ä»¥ä½¿ç”¨ TLS èˆ‡å…¶ä»–æ©Ÿå™¨é€£æ¥ã€‚ 1$ keytool -importcert \\ 2 -keystore truststore.jks \\ 3 -file $(hostname).signed.crt \\ 4 -alias CARoot \\ 5 -keypass \u0026lt;password\u0026gt; \\ 6 -storepass \u0026lt;password\u0026gt; \\ 7 -noprompt Reference\rhttps://wenku.baidu.com/view/2f1a69078e9951e79b8927df.html\r","date":"2020-08-30T09:47:00+00:00","updated":"2020-08-30T09:47:00+00:00"},{"objectID":"1598780280","permalink":"/post/data-zookeeper-encryption1/zookeeper-encryption-1/","title":"[Zookeeper] Encryption - ç”¢ç”Ÿ self-signed é‡‘é‘°","content":"Netty æ˜¯ä¸€å€‹åŸºæ–¼ NIO çš„ client/server é€šä¿¡æ¡†æ¶ï¼Œå®ƒé€šéç›´æ¥ä½¿ç”¨ NIO ç°¡åŒ–äº† Java æ‡‰ç”¨ç¨‹åºçš„ network level é€šä¿¡çš„è¤‡é›œåº¦ã€‚ æ­¤å¤–ï¼ŒNetty æ¡†æ¶å…§ç½®äº†å°åŠ å¯†ï¼ˆSSLï¼‰å’Œèº«ä»½é©—è­‰ï¼ˆCAï¼‰çš„æ”¯æŒã€‚ é€™äº›æ˜¯å¯é¸åŠŸèƒ½ï¼Œå¯ä»¥å–®ç¨æ‰“é–‹æˆ–é—œé–‰ã€‚\nZookeeper 3.5 ç‰ˆé–‹å§‹ï¼Œé€šéå°‡ç’°å¢ƒè®Šæ•¸çš„è¨­å®šå…è¨± ZooKeeper server ä½¿ç”¨ Netty ä»£æ›¿ NIOï¼ˆé»˜èªé …ï¼‰ã€‚\næ¥ä¸‹ä¾†å°‡ç”¨å¹¾ç¯‡æ–‡ç« è¨˜éŒ„å¦‚ä½•åŠ å¯† Zookeeper é€šè¨Šã€‚\nç”¢ç”Ÿé‡‘é‘°\ræ¯å€‹ server å¿…é ˆå…·æœ‰åŒ…å«é‡‘é‘°è­‰æ›¸ï¼ˆprivate key + public certificateï¼‰çš„é‡‘é‘°åº« (keystore)ã€‚ é‡‘é‘°è­‰æ›¸å¯ä»¥æ˜¯ self-signed çš„ï¼Œä¹Ÿå¯ä»¥ç”±è­‰æ›¸é ’ç™¼æ©Ÿæ§‹ï¼ˆCAï¼‰ç°½åã€‚\nç”¢ç”Ÿ self-signed é‡‘é‘°\ré€²å…¥ Zookeeper server æ‰€åœ¨æ©Ÿå™¨ ä½¿ç”¨ Java keytool å·¥å…·ç”¢ç”Ÿ keypair 1$ keytool -genkeypair -alias $(hostname -f) \\ 2 -keyalg RSA -keysize 2048 \\ 3 -dname \u0026#34;CN=$(hostname -f)\u0026#34; 4 -validity \u0026lt;days\u0026gt; \\ 5 -keypass \u0026lt;password\u0026gt; \\ 6 -keystore keystore.jks \\ 7 -storepass \u0026lt;same password\u0026gt; \\ 8 -storetype JKS hostname -f é¡¯ç¤ºä¸»æ©Ÿçš„ FQDN (fully qualified domain name) å®Œå…¨é™å®šåŸŸåã€‚ åˆ¥åï¼ˆ-aliasï¼‰å’Œå°ˆæœ‰åç¨±ï¼ˆ-dnameï¼‰å¿…é ˆèˆ‡èˆ‡ä¹‹é—œè¯çš„ server hostname åŒ¹é…ï¼Œå¦å‰‡ä¸»æ©Ÿåé©—è­‰æœƒå¤±æ•—ã€‚ å¾ keystore ä¸­å°å‡ºè­‰æ›¸ 1$ keytool -exportcert -alias $(hostname -f) \\ 2 -keystore keystore.jks \\ 3 -file $(hostname -f).cer -rfc åœ¨ Zookeeper quorum é‡è¤‡ä»¥ä¸Šå‹•ä½œã€‚ å°‡è­‰æ›¸æ”¾å…¥ truststore ä¸­\rç‚ºäº†ä½¿ server é–“å½¼æ­¤ä¿¡ä»»ï¼Œå®ƒå€‘å¿…é ˆåœ¨è‡ªå·±çš„ä¿¡ä»»åº«(truststore)ä¸­å…·æœ‰å…¶ä»– server çš„è­‰æ›¸ã€‚ Truststore å¯ç”¨æ–¼client-to-node åŠ å¯†ä»¥åŠ node-to-node çš„åŠ å¯†ã€‚\nä½¿ç”¨ Java keytool å·¥å…·å°‡æ‰€æœ‰ Zookeeper å¯¦ä¾‹çš„ certificate å°å…¥è‡³ truststore ä¸­ 1$ keytool -importcert -alias [host1..3] 2 -file [host1..3].cer \\ 3 -keystore truststore.jks \\ 4 -storepass \u0026lt;password\u0026gt; aliasï¼šåˆ¥åå¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚å¯ä»¥èˆ‡ keystore ä½¿ç”¨ç›¸åŒåˆ¥åï¼Œä¹Ÿå¯æ˜¯è«¸å¦‚ self ä¹‹é¡çš„æè¿°æ€§æ¨™ç±¤ã€‚ fileï¼šæŒ‡å‡ºæ„ˆå°å…¥çš„å…¬é–‹è­‰æ›¸ å‡ºç¾æç¤ºæ™‚ï¼Œè¼¸å…¥ y å°‡è­‰æ›¸æ·»åŠ åˆ°ä¿¡ä»»åº«ä¸­ï¼š 1Trust this certificate? [no]: y 2Certificate was added to keystore é‡è¤‡ä»¥ä¸Šå‹•ä½œï¼Œç‚ºåœ¨ quorum çš„ Zookeeper å»ºç«‹ truststoreã€‚ Reference\rhttps://zookeeper.apache.org/doc/r3.6.1/zookeeperAdmin.html#Quorum+TLS\r","date":"2020-08-30T09:38:00+00:00","updated":"2020-08-30T09:38:00+00:00"},{"objectID":"1598278200","permalink":"/post/data-kafka-topic-rebalancing/kafka-add-broker-and-balance-topic/","title":"[Kafka] æ–°å¢ broker ç¯€é»ä¸¦å¹³è¡¡ topic","content":"åœ¨ Kafka é›†ç¾¤ä¸­å¢åŠ  broker éå¸¸æ–¹ä¾¿ï¼Œåªéœ€ç‚ºå…¶åˆ†é…å”¯ä¸€çš„ broker IDï¼ŒæŒ‡å®šé›†ç¾¤ä½¿ç”¨çš„ zookeeper connect ä½å€ï¼Œç„¶å¾Œåœ¨æ–°æœå‹™å™¨ä¸Šå•Ÿå‹• Kafkaã€‚ä½†æ˜¯ï¼ŒèˆŠæœ‰çš„ Topic ä¸æœƒå°‡ Partition å‡å‹»åˆ†é…åˆ°æ–°çš„ç¯€é»ä¸Šï¼Œé€²è€Œé€ æˆæ•¸æ“šä¸å¹³è¡¡ã€‚ å› æ­¤éœ€è¦å°‡ä¸€äº›ç¾æœ‰æ•¸æ“šé·ç§»åˆ°é€™äº›æ–°æ©Ÿå™¨ä¸Šé€²è¡Œ rebalancingã€‚\nKafka æä¾›äº† kafka-reassign-partitions.sh å·¥å…·ä¾†é€²è¡Œæ‰‹å‹•å¹³å‡åˆ†é…ï¼š\n1This tool helps to moves topic partitions between replicas. 2Option Description 3------ ----------- 4--bootstrap-server \u0026amp;lt;String: Server(s) the server(s) to use for 5 to use for bootstrapping\u0026amp;gt; bootstrapping. REQUIRED if an 6 absolute path of the log directory 7 is specified for any replica in the 8 reassignment json file 9--broker-list \u0026amp;lt;String: brokerlist\u0026amp;gt; The list of brokers to which the 10 partitions need to be reassigned in 11 the form \u0026amp;#34;0,1,2\u0026amp;#34;. This is required 12 if --topics-to-move-json-file is 13 used to generate reassignment 14 configuration 15--command-config \u0026amp;lt;String: Admin client Property file containing configs to be 16 property file\u0026amp;gt; passed to Admin Client. 17--disable-rack-aware Disable rack aware replica assignment â€¦","date":"2020-08-24T14:10:00+00:00","updated":"2020-08-24T14:10:00+00:00"},{"objectID":"1597762440","permalink":"/post/devops-copy-docker-image-to-different-host/copy-docker-image-to-other-host/","title":"[Docker] åœ¨ä¸åŒé›»è…¦ä¸­å‚³ Docker image","content":"é€šå¸¸ docker image éƒ½æœƒæ”¾åœ¨å…¬é–‹çš„ repository DockerHub æˆ–æ˜¯ç§æœ‰çš„ docker registry ä¸Šä¾›ä½¿ç”¨è€… pullï¼Œä½†å¦‚æœæ²’æœ‰æ‰“ç®—å…¬é–‹åˆ°ç¶²è·¯ä¸Šæˆ–æ˜¯ç„¡æ¶è¨­ repo çš„éœ€æ±‚ï¼Œåˆè¦åœ¨åˆ¥å°é›»è…¦ä¸Šä½¿ç”¨ build å¥½çš„ docker image æ™‚ï¼Œå°±éœ€è¦ä½¿ç”¨å‚™ä»½çš„æ–¹å¼å‚³é imageã€‚\nå„²å­˜ä¸¦å£“ç¸® image\r1$ docker save -o filename.tar dockerImage o: outputï¼Œè¼¸å‡ºæª”æ¡ˆ å‚³åˆ°åˆ¥å°é›»è…¦ä¸Š\r1$ pscp -scp filename.tar \u0026lt;username\u0026gt;@\u0026lt;ip\u0026gt;:\u0026lt;path\u0026gt; scpï¼šuse scp (secure copy) protocol åœ¨ç›®çš„åœ°å°‡æª”æ¡ˆ load åˆ° docker ä¸­\r1$ docker load -i filename.tar i: importï¼Œè¼¸å…¥æª”æ¡ˆ Reference\rhttps://stackoverflow.com/questions/23935141/how-to-copy-docker-images-from-one-host-to-another-without-using-a-repository\r","date":"2020-08-18T14:54:00+00:00","updated":"2020-08-18T14:54:00+00:00"},{"objectID":"1597762080","permalink":"/post/devops-install-docker-and-docker-compose-on-ubuntu/install-docker-and-docker-compose-on-ubuntu18/","title":"[Docker] Install Docker \u0026 Docker Compose on Ubuntu 18.04","content":"å®˜æ–¹ Ubuntu repository ä¸­æä¾›çš„ Docker å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ ç‚ºç¢ºä¿ç²å¾—æœ€æ–°ç‰ˆæœ¬ï¼Œæœ¬ç¯‡å°‡å¾å®˜æ–¹ Docker å­˜å„²åº«å®‰è£ã€‚ ç‚ºæ­¤ï¼Œæˆ‘å€‘å°‡æ·»åŠ ä¸€å€‹æ–°çš„ package sourceï¼Œå¾ Docker ä¸­æ·»åŠ  GPG å¯†é‘°ä»¥ç¢ºä¿ä¸‹è¼‰æœ‰æ•ˆï¼Œç„¶å¾Œå®‰è£è©²ç¨‹åºåŒ…ã€‚\nå®‰è£ Docker\ræ›´æ–° package ä¸¦åŒ¯å…¥ docker repo\rå…ˆæ›´æ–°ç¾æœ‰çš„ packages\n1$ sudo apt update å®‰è£éœ€è¦ç”¨åˆ°çš„å¥—ä»¶\n1$ sudo apt install apt-transport-https ca-certificates curl software-properties-common å°‡å®˜æ–¹ docker repo çš„ gpg å¯†é‘°åŒ¯å…¥\n1$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - å°‡ docker ç©©å®šç‰ˆ repo åŠ åˆ° apt source\n1$ sudo add-apt-repository \u0026#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\u0026#34; å†æ¬¡æ›´æ–° packages\n1$ sudo apt update å®‰è£æœ€æ–°ç‰ˆæˆ–æ˜¯æŒ‡å®šç‰ˆæœ¬\rå®‰è£æœ€æ–°ç‰ˆ 1$ sudo apt-get install docker-ce docker-ce-cli containerd.io å®‰è£æŒ‡å®šç‰ˆæœ¬ a. åˆ—å‡º repo ä¸­æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬ 1$ apt-cache madison docker-ce 2docker-ce | 5:19.03.13~1.2.beta2-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/test amd64 Packages 3 docker-ce | 5:19.03.12~3-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/test amd64 Packages 4 docker-ce | 5:19.03.11~3-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/test amd64 Packages 5...... 1$ apt-cache madison docker-ce-cli 2docker-ce-cli | 5:19.03.13~1.2.beta2-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/test amd64 Packages 3docker-ce-cli | 5:19.03.12~3-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/test amd64 Packages 4...... b. é¸æ“‡æŒ‡å®šç‰ˆæœ¬å®‰è£ï¼Œä¾‹å¦‚ 5:19.03.12~3-0~ubuntu-bionic\n1$ sudo apt-get install docker-ce=\u0026lt;VERSION_STRING\u0026gt; docker-ce-cli=\u0026lt;VERSION_STRING\u0026gt; containerd.io å®Œæˆå®‰è£\rå®‰è£æˆåŠŸå¾Œ daemon æœƒè‡ªå‹•å•Ÿç”¨ï¼Œä¸¦ä¸”æœƒåŠ åˆ°é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•çš„ç¨‹åºä¸­ã€‚å¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤ç¢ºèªå®‰è£ä»¥åŠç¨‹åºç‹€æ…‹ï¼š ç¢ºèªç‰ˆæœ¬è³‡è¨Š\n1$ docker version ç¢ºèªç‹€æ…‹\n1$ sudo systemctl status docker å°‡ç•¶ä¸‹ä½¿ç”¨è€…åŠ å…¥ docker group\ré»˜èªæƒ…æ³ä¸‹ï¼Œåªèƒ½ä»¥ root æˆ–ç”± docker group ä¸­çš„ç”¨æˆ¶åŸ·è¡Œ docker å‘½ä»¤ã€‚å¦å‰‡æœƒå¾—åˆ°ä¸‹åˆ—è­¦ç¤ºï¼š\n1docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?. 2See \u0026#39;docker run --help\u0026#39;. å¦‚æœè¦é¿å…åœ¨æ¯æ¬¡é‹è¡Œ docker å‘½ä»¤æ™‚éƒ½åŠ  sudoï¼Œè«‹å°‡ç”¨æˆ¶æ·»åŠ åˆ° docker groupï¼š\n1$ sudo usermod -aG docker ${USER} 2$ su - ${USER} ç¢ºèªç”¨æˆ¶ç›®å‰æ‰€å±¬çš„ group\n1$ id -nG ä¸Šé¢æ¼”ç¤ºäº†å¦‚ä½•æ‰‹å‹•å®‰è£ dockerï¼Œæœ‰é»éº»ç…©ï¼Œæ‰€ä»¥å®˜æ–¹æä¾›äº†\rè…³æœ¬\rå¯ä»¥ä¸€éµå®‰è£ã€‚\nä½¿ç”¨å®˜æ–¹å®‰è£…è…³æœ¬è‡ªå‹•å®‰è£\r1curl -fsSL https://get.docker.com | sudo sh å®Œæˆï¼è¶…ç°¡æ½”ã€‚\nå®‰è£ docker-compose\rä¸‹è¼‰æœ€æ–°ç‰ˆ\r1$ sudo curl -L \u0026#34;https://github.com/docker/compose/releases/download/1.26.2/docker-compose-$(uname -s)-$(uname -m)\u0026#34; -o /usr/local/bin/docker-compose è‹¥è¦å®‰è£å…¶ä»–ç‰ˆæœ¬ï¼Œè«‹å°‡ URL ä¸­çš„ 1.26.2 å–ä»£æˆå…¶ä»–\rç‰ˆæœ¬\rã€‚\næŠŠ docker-compose åŠ å…¥åŸ·è¡Œæª”\r1$ sudo chmod +x /usr/local/bin/docker-compose æ¸¬è©¦å®‰è£\r1$ docker-compose --version 2docker-compose version 1.26.2, build 1110ad01 reference\rhttps://docs.docker.com/engine/install/ubuntu/\rhttps://docs.docker.com/compose/install/\rhttps://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04\r","date":"2020-08-18T14:48:00+00:00","updated":"2020-08-18T14:48:00+00:00"},{"objectID":"1597403700","permalink":"/post/devops-truncate-docker-log/docker-truncate-docker-log/","title":"[Docker] é™åˆ¶ log å¤§å°ä»¥é¿å…ç¡¬ç¢Ÿçˆ†æ‰","content":"é»˜èªæƒ…æ³ä¸‹ï¼ŒDocker æœƒæŠ“æ‰€æœ‰ container çš„æ¨™æº–è¼¸å‡ºå’Œæ¨™æº–éŒ¯èª¤ (stdout \u0026amp; stderr)ï¼Œä¸¦å°‡å…¶å¯«å…¥ /var/lib/docker/containers/[container-id]/[container-id]-json.log çš„ json æ–‡ä»¶ä¸­ã€‚\nç•¶ container é‹ä½œæ™‚é–“æ„ˆé•·ï¼ŒLog æª”æ¡ˆæœƒéš¨ä¹‹è®Šå¤§ï¼Œé€²è€Œå°è‡´æ©Ÿå™¨ç¡¬ç¢Ÿç©ºé–“è¢« Log ä½”æ“šã€‚å› æ­¤éœ€é™åˆ¶ Log çš„æª”æ¡ˆå¤§å°ï¼Œä»¥é¿å…ç¡¬ç¢Ÿè¢«å¡çˆ†ã€‚ä¾‹å¦‚ä»¥ä¸‹é€™å€‹ log å°±ä½”äº† 1G å¤šçš„ç£ç¢Ÿç©ºé–“ï¼š\næ‰‹å‹•æ¸…é™¤æ—¥èªŒ\rå¯ä»¥ä½¿ç”¨ä¸‹åˆ—å¹¾ç¨®æ–¹æ³•æ¸…é™¤è©² log æª”æ¡ˆå…§å®¹ï¼š\nredirection operator\r1$ \u0026gt; \u0026lt;log file\u0026gt; \u0026gt; é‡æ–°å°å‘é‹ç®—å­ï¼Œå› æª”æ¡ˆå·²ç¶“å­˜åœ¨ï¼Œæ‰€ä»¥é‡æ–°å°å‘å¾Œæœƒæ¸…ç©ºåŸæœ‰çš„å…§å®¹ã€‚ truncate\r1$ truncate --size 0 \u0026lt;log file\u0026gt; truncate : å°‡æ–‡ä»¶ç¸®å°æˆ–æ”¾å¤§åˆ°æŒ‡å®šå¤§å°çš„å‘½ä»¤ã€‚\n\u0026ndash;size : æŒ‡å®šå¤§å°çš„åƒæ•¸ã€‚\n/dev/null\r1$ cat /dev/null \u0026gt; \u0026lt;log file\u0026gt; /dev/nullï¼šæ˜¯åœ¨é¡ Unix æ“ä½œç³»çµ±ä¸Šç¨±ç‚ºç©ºè¨­å‚™çš„ç‰¹æ®Šè¨­å‚™ï¼Œç•¶å¾ä¸­è®€å–æ•¸æ“šæ™‚ä¸æœƒæœ‰ä»»ä½•æ•¸æ“šï¼Œåœ¨å¯«å…¥æ™‚ä¹Ÿä¸å­˜å„²ä»»ä½•æ•¸æ“šã€‚ ä¸Šåœ–ä½¿ç”¨ç¬¬ä¸€ç¨®æ¸…é™¤æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ° 1G çš„ç©ºé–“è¢«é‡‹æ”¾ï¼\nä½†æ¯æ¬¡éƒ½æ‰‹å‹•æ¸…é™¤æ˜¯ä»¶å¾ˆéº»ç…©çš„äº‹ï¼Œå¯ä»¥è€ƒæ…®ä½¿ç”¨ cronjob è¨­å®šæ’ç¨‹ï¼Œæˆ–æ˜¯ç›´æ¥è¨­å®š docker log çš„å®¹é‡ä¸Šé™ã€‚\nè¨­å®šè‡ªå‹•æ—¥èªŒæ»¾å‹•\rdocker é»˜èªçš„æ—¥èªŒé©…å‹•ç¨‹å¼è¨­å®šå¯ä»¥åœ¨ /etc/docker/daemon.json ä¸­å®šç¾©ï¼Œè‹¥ç„¡æ­¤æ–‡ä»¶ï¼Œå‰‡éœ€é¡å¤–æ–°å¢ï¼Œè¨­å®šå€¼å¯åƒè€ƒä¸‹åˆ—å…§å®¹ï¼š\n1{ 2 \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;, 3 \u0026#34;log-opts\u0026#34;: { 4 \u0026#34;max-size\u0026#34;: \u0026#34;50m\u0026#34;, 5 \u0026#34;max-file\u0026#34;: \u0026#34;3\u0026#34; 6 } 7} é¸é … æè¿° max-size æ»¾å‹•å‰æ—¥èªŒçš„æœ€å¤§å¤§å°ã€‚ä¸€å€‹æ­£æ•´æ•¸åŠ ä¸Šä¸€å€‹ä»£è¡¨æ¸¬é‡å–®ä½ï¼ˆkï¼Œm æˆ– gï¼‰çš„ä¿®é£¾ç¬¦ã€‚é»˜èªç‚º -1ï¼ˆä»£è¡¨ç„¡é™åˆ¶ï¼‰ max-file å¯ä»¥å­˜åœ¨çš„æœ€å¤§æ—¥èªŒæ–‡ä»¶æ•¸é‡ã€‚å¦‚æœæ»¾å‹•æ—¥èªŒæœƒå‰µå»ºå¤šä½™æ–‡ä»¶ï¼Œå‰‡æœƒåˆªé™¤æœ€èˆŠçš„æ–‡ä»¶ã€‚åªæœ‰åœ¨è¨­ç½®äº† max-size æ™‚æ‰æœ‰æ•ˆã€‚ä¸€å€‹æ­£æ•´æ•¸ã€‚é»˜èªç‚º 1ã€‚ åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ä¾†é‡æ–°åŠ è¼‰ docker daemonã€‚æ–°çš„é…ç½®å°‡åœ¨é‡æ–°å•Ÿå‹•å¾Œé©ç”¨æ–¼æ‰€æœ‰æ–°å»ºç«‹çš„å®¹å™¨ï¼Œç¾æœ‰å®¹å™¨å³ä½¿é‡å•Ÿ Docker ä¹Ÿä¸æœƒä½¿ç”¨æ–°çš„æ—¥èªŒè¨˜éŒ„é…ç½®ã€‚\n1$ systemctl daemon-reload 2 3$ systemctl restart docker å€‹åˆ¥ç‚ºå–®ä¸€å®¹å™¨è¨­ç½®æ—¥èªŒæ»¾å‹•\rè‹¥ä¸æƒ³å…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨å€‹åˆ¥å®¹å™¨å•Ÿå‹•æ™‚ï¼Œåœ¨ command ä¸­åŠ å…¥åƒæ•¸æ”¹å‹•ã€‚\ndocker run\r1$ docker run \\ 2 --log-driver json-file \\ 3 --log-opt max-size=10m \\ 4 --log-opt max-file=10 5 ubuntu:18.04 docker-compose\r1version: \u0026#39;3.2\u0026#39; 2services: 3 nginx: 4 image: \u0026#39;nginx:latest\u0026#39; 5 ports: 6 - \u0026#39;80:80\u0026#39; 7 logging: 8 driver: \u0026#34;json-file\u0026#34; 9 options: 10 max-size: \u0026#34;1k\u0026#34; 11 max-file: \u0026#34;3\u0026#34; Reference\rhttps://www.rdaemon.com/truncate-files-using-command-line-tools\rhttps://blog.csdn.net/kikajack/article/details/79575659\rhttps://blog.boatswain.io/zh/post/docker-container-log-rotation/\r","date":"2020-08-14T11:15:00+00:00","updated":"2020-08-14T11:15:00+00:00"},{"objectID":"1597270200","permalink":"/post/data-zookeeper-dynamic-configuration/zookeeper-dynamic-configuration/","title":"[Zookeeper] Dynamic Configuration","content":"Zookeeper åœ¨ 3.5.0 ç‰ˆç™¼è¡Œå¾Œï¼Œæ”¯æŒå‹•æ…‹æ–°å¢ç¯€é»ï¼Œä¸éœ€å°‡æ•´å€‹é›†ç¾¤é‡å•Ÿã€‚é€™ç¯‡æ–‡ç« ä¸»è¦ç´€éŒ„ dymamic configuration å¦‚ä½•å¯¦ä½œã€‚\nç’°å¢ƒæº–å‚™\ræº–å‚™ä¸‰å° VMï¼Œ\rå®‰è£ Zookeeper\r10.1.5.31 10.1.5.32 10.1.5.33 é…ç½® zoo.cfg\ré…ç½®ä¸‰å° Zookeeper çš„é…ç½®æª”ï¼Œæ–°å¢åƒæ•¸èªªæ˜å¦‚ä¸‹ï¼š\n1dataDir=/var/lib/zookeeper 2syncLimit=5 3tickTime=2000 4initLimit=10 5maxClientCnxns=100 6standaloneEnabled=false 7reconfigEnabled=true 84lw.commands.whitelist=* 9dynamicConfigFile=/opt/zookeeper/conf/zoo.cfg.dynamic standaloneEnabled\nåœ¨ 3.5.0 ç‰ˆä¹‹å‰ï¼Œå¯ä»¥åœ¨ç¨ç«‹æ¨¡å¼æˆ–åˆ†ä½ˆå¼æ¨¡å¼ä¸‹é‹è¡Œ ZooKeeperã€‚ä¸¦ä¸”ç„¡æ³•åœ¨é‹è¡Œæ™‚åœ¨å®ƒå€‘ä¹‹é–“é€²è¡Œåˆ‡æ›ã€‚ é»˜èªæƒ…æ³ä¸‹ standaloneEnabled è¨­ç½®ç‚º trueã€‚ä½¿ç”¨é»˜èªå€¼çš„è©±ï¼Œå‰‡ç•¶ä»¥å–®å€‹æœå‹™å™¨å•Ÿå‹•æ™‚ï¼Œä¸å…è¨±é›†åˆå¢é•·ï¼›è€Œå¦‚æœæ˜¯ä»¥å¢é›†æ–¹å¼å•Ÿå‹•ï¼Œå‰‡ä¸å…è¨±æ¸›å°‘å°æ–¼ç­‰æ–¼å…©å€‹åƒèˆ‡è€…ã€‚ç”±æ–¼é‹è¡Œåˆ†ä½ˆå¼æ¨¡å¼å¯ä»¥æä¾›æ›´å¤§çš„éˆæ´»æ€§ï¼Œå› æ­¤å»ºè­°å°‡æ¨™èªŒè¨­ç½®ç‚º falseã€‚\nreconfigEnabled\nå¾ 3.5.0 ç‰ˆé–‹å§‹åˆ° 3.5.3 ä¹‹å‰ï¼Œå‹•æ…‹é‡æ–°é…ç½®åŠŸèƒ½çš†ç„¡æ³•ç¦ç”¨ï¼Œæ¶‰åŠå®‰å…¨å•é¡Œï¼Œæƒ¡æ„è¡Œç‚ºè€…å¯ä»¥å° ZooKeeper é›†åˆçš„é…ç½®é€²è¡Œä»»æ„æ›´æ”¹ï¼Œæˆ–æ˜¯å°‡å—æ„ŸæŸ“çš„æœå‹™å™¨æ·»åŠ åˆ°é›†åˆä¸­ã€‚ 3.5.3 æ–°å¢äº†é€™å€‹åƒæ•¸ï¼Œä¸¦åŠ å…¥ä¸€äº›å®‰å…¨æ©Ÿåˆ¶ï¼ˆè«‹è¦‹ä¸‹æ–¹èªªæ˜ï¼‰ï¼Œè®“ä½¿ç”¨è€…è‡ªè¡Œæ±ºå®šæ˜¯å¦å•Ÿç”¨ã€‚reconfigEnabled è¨­ç‚º false å¯ä»¥å®Œå…¨ç¦ç”¨é‡æ–°é…ç½®åŠŸèƒ½ï¼Œé»˜èªæƒ…æ³ä¸‹ï¼Œç„¡è«–æ˜¯å¦ä½¿ç”¨èº«ä»½é©—è­‰é€šé reconfig API é‡æ–°é…ç½®ç¾¤é›†çš„ä»»ä½•å˜—è©¦éƒ½å°‡å¤±æ•—ï¼Œé™¤é reconfigEnabled è¨­ç½®ç‚º true ã€‚\ndynamicConfigFile\nå¾ 3.5.0 ç‰ˆé–‹å§‹ï¼Œzookeeper å€åˆ†å‹•æ…‹é…ç½®åƒæ•¸å’Œéœæ…‹é…ç½®åƒæ•¸ï¼Œéœæ…‹é…ç½®åƒæ•¸åœ¨ servie å•Ÿå‹•æ™‚å¾é…ç½®æ–‡ä»¶ zoo.cfg ä¸­è®€å–ï¼Œä¸¦ä¸”åœ¨åŸ·è¡ŒæœŸé–“ä¸æœƒæ›´æ”¹ã€‚å‹•æ…‹é…ç½®åƒæ•¸å‰‡å¯ä»¥å¯«å…¥ dynamicConfigFile â€¦","date":"2020-08-12T22:10:00+00:00","updated":"2020-08-12T22:10:00+00:00"},{"objectID":"1597265100","permalink":"/post/data-zookeeper-acl/zookeeper-acl/","title":"[Zookeeper] ACL","content":"ACL(Access Control List)\rZookeeper å° znode æ“ä½œæ¡ç”¨ ACL é€²è¡Œäº†å­˜å–æ¬Šé™æ§åˆ¶ï¼Œé¡ä¼¼æ–¼UNIX/Linuxçš„æ–‡ä»¶æ¬Šé™æ©Ÿåˆ¶ã€‚ä½¿ç”¨ scheme:id:perm ä¾†æ¨™è­˜ï¼Œä¸»è¦æ¶µè“‹ 3 å€‹æ–¹é¢ï¼š\næ¬Šé™æ¨¡å¼ï¼ˆSchemeï¼‰ï¼šæˆæ¬Šçš„ç­–ç•¥ æˆæ¬Šå°è±¡ï¼ˆIDï¼‰ï¼šæˆæ¬Šçš„å°è±¡ æ¬Šé™ï¼ˆPermissionï¼‰ï¼šæˆäºˆçš„æ¬Šé™\nå…¶ç‰¹æ€§å¦‚ä¸‹ï¼š ZooKeeper çš„æ¬Šé™æ§åˆ¶æ˜¯åŸºæ–¼æ¯å€‹ znode ç¯€é»çš„ï¼Œéœ€è¦å°æ¯å€‹ç¯€é»è¨­ç½®æ¬Šé™ æ¯å€‹ znode æ”¯æŒè¨­ç½®å¤šç¨®æ¬Šé™æ§åˆ¶æ–¹æ¡ˆå’Œå¤šå€‹æ¬Šé™ å­ç¯€é»ä¸æœƒç¹¼æ‰¿çˆ¶ç¯€é»çš„æ¬Šé™ï¼Œå®¢æˆ¶ç«¯ç„¡æ¬Šè¨ªå•æŸç¯€é»ï¼Œä½†å¯èƒ½å¯ä»¥è¨ªå•å®ƒçš„å­ç¯€é» Scheme:id\rZK æ”¯æŒ pluggable authentication schemesï¼Œå¯ä»¥é€šéæ“´å……å¥—ä»¶schemeï¼Œä¾†æ“´å…… ACL çš„æ©Ÿåˆ¶ã€‚\nBuilt-in ACL Schemes\rZKæœ‰ä»¥ä¸‹çš„å†…ç½®schemesï¼š\nworldï¼šé»˜èªæ–¹å¼ï¼Œåƒ…å°æ‡‰ä¸€å€‹ id anyoneï¼Œç‚ºæ‰€æœ‰ç”¨æˆ¶ç«¯é–‹ç™¼æ¬Šé™ã€‚ authï¼šä»£è¡¨å·²ç¶“èªè­‰é€šéçš„ç”¨æˆ¶ (cliä¸­å¯ä»¥é€šé addauth digest user:pwd ä¾†æ·»åŠ ç•¶å‰ä¸Šä¸‹æ–‡ä¸­çš„æˆæ¬Šç”¨æˆ¶ï¼›æˆ–æ˜¯é€šé kerberos ä¾†é€²è¡Œ authencation) digestï¼šå³ç”¨æˆ¶å:å¯†ç¢¼é€™ç¨®æ–¹å¼èªè­‰ã€‚ç”¨ username:BASE64(SHA1(password))Â å­—ç¬¦ä¸²ä½œç‚º ACL IDã€‚æ„æ€æ˜¯èªè­‰æ˜¯é€šéæ˜æ–‡ç™¼é€ username:passwordÂ ä¾†é€²è¡Œçš„ï¼Œç•¶ç”¨åœ¨ ACL æ™‚ï¼Œè¡¨é”å¼ç‚º username:BASE64(SHA1(password))ã€‚ ipï¼šä½¿ç”¨å®¢æˆ¶ç«¯çš„ä¸»æ©Ÿ IP ä½œç‚º ACL ID ã€‚å¯ä»¥ä½¿ç”¨ä¸€å€‹ç¶²æ®µï¼Œå¦‚ 10.15.0.0/16ã€‚ superï¼šåœ¨é€™ç¨® scheme æƒ…æ³ä¸‹ï¼Œå°æ‡‰çš„ id æ“æœ‰è¶…ç´šè¨±å¯æ¬Šï¼Œå¯ä»¥åšä»»ä½•äº‹æƒ… (cdrwa)ã€‚ saslï¼šè¨­ç½®ç‚ºç”¨æˆ¶çš„ uidï¼Œé€šé sasl Authentication ç”¨æˆ¶çš„ idï¼Œåœ¨ 3.4.4 ç‰ˆæœ¬å¾Œ sasl æ˜¯é€šé Kerberos å¯¦ç¾ï¼ˆå³åªæœ‰é€šé Kerberos èªè­‰çš„ç”¨æˆ¶æ‰å¯ä»¥è¨ªå•æ¬Šé™çš„ znodeï¼‰ï¼Œä½¿ç”¨ sasl:uid:cdwra å­—ç¬¦ä¸²ä½œç‚ºç¯€é» ACL çš„ idï¼ˆå¦‚ï¼šsasl:user:cdwraï¼‰ã€‚ Permission\r5ç¨®æ¬Šé™ç°¡å¯«ç‚º crwda\nCREATEÂ c å¯ â€¦","date":"2020-08-12T20:45:00+00:00","updated":"2020-08-12T20:45:00+00:00"},{"objectID":"1597242720","permalink":"/post/data-hadoop-intro/hadoop-introduction/","title":"[Hadoop] HDFSã€MapReduceã€Yarn ä»‹ç´¹","content":"Hadoop æ˜¯ä¸€å€‹èƒ½å¤ å„²å­˜ä¸¦ç®¡ç†å¤§é‡è³‡æ–™çš„åˆ†æ•£å¼å¤§æ•¸æ“šè™•ç†å¹³è‡ºï¼Œå…¶åŒ…å«ä¸‰å¤§æ¨¡çµ„ï¼š\nHDFS MapReduce Yarn HDFS\rHDFSç‚º Hadoop Distributed File System çš„ç¸®å¯«ï¼Œåˆ†æ•£å¼æª”æ¡ˆç³»çµ±ã€‚ç”± NameNode èˆ‡ DataNode çµ„æˆã€‚\nNameNode \u0026amp;amp; DataNode\rNameNodeï¼šå„²å­˜æª”æ¡ˆçš„ block æ¸…å–®ï¼Œç¨±ä¹‹ç‚º metadataã€‚ DataNodeï¼šè² è²¬å„²å­˜å¯¦é«”æª”æ¡ˆçš„ blockã€‚\nHDFS Architecture\rå„²å­˜æª”æ¡ˆåˆ° HDFS å‰ï¼Œæª”æ¡ˆæœƒè¢«åˆ‡æˆæ•¸ç­‰åˆ†å°å€å¡Š (block)ï¼Œä¸¦ä¸”æœƒå°‡åŒä¸€å€‹ block è¤‡è£½æˆæ•¸ç­‰åˆ†(replication, é è¨­å€¼æ˜¯ 3 ä»½) å†åˆ†æ•£å„²å­˜åˆ°å„å€‹ DataNodeï¼Œä¸”ç›¸åŒçš„ block ä¸æœƒåŒæ™‚å­˜åœ¨æ–¼åŒä¸€å€‹ DataNode ä¸Šã€‚ åŒæ™‚ç”± NameNode ç®¡ç†è¨˜è¼‰ block çš„å„²å­˜ä½ç½®ï¼Œç•¶æŸå€‹ Hadoop client éœ€è¦è®€å–é€™å€‹æª”æ¡ˆæ™‚ï¼Œæœƒå…ˆè·Ÿ NameNode ç™¼å‡ºè«‹æ±‚ï¼ŒNameNode æœƒæ ¹æ“šé€™ä»½æ¸…å–®å›è¦†æª”æ¡ˆçš„ block ä½æ–¼å“ªå¹¾å° DataNodeï¼ŒHadoop client å†æ ¹æ“šé€™ä»½æ¸…å–®å°‡å„å€‹ block è®€å–å‡ºä¾†ï¼Œé‚„åŸæˆä¸€å€‹å®Œæ•´å€‹æª”æ¡ˆã€‚\nç‰¹æ€§\ræ“´å……æ€§ï¼šHadoop å¯ä»¥é€šéå¢åŠ ç¯€é»è¼•æ˜“çš„æ“´å±•å„²å­˜èƒ½åŠ›æˆ–è™•ç†æ•ˆèƒ½ã€‚ å¯é æ€§ï¼šç”± block çš„è¤‡æœ¬æ©Ÿåˆ¶é”æˆï¼Œç•¶ä¸€å€‹ Data Node å¤±æ•ˆã€æ¯€æé€ æˆè³‡æ–™éºå¤±ï¼Œå¯ä»¥å¾å…¶ä»–å° Data Node å¯ä»¥å–å¾—è©²æª”æ¡ˆçš„è¤‡æœ¬è³‡æ–™ã€‚\nMapReduce\rMapReduceæ˜¯ä¸€ç¨®ç¨‹å¼æ¨¡å‹ï¼Œç”¨æ–¼å¤§æ•¸æ“šçš„ä¸¦è¡Œé‹ç®—ã€‚ HDFS è™•ç†å¥½çš„æª”æ¡ˆè³‡æ–™ï¼Œæ­é… Map \u0026amp;amp; Reduce å‡½æ•¸ï¼Œå°‡è³‡æ–™ç‰‡æ®µå‚³é€åˆ°è¨ˆç®—ç¯€é»ï¼ˆMappingï¼‰ï¼Œç”±å„å€‹ç¯€é»è¨ˆç®—è™•ç†ä¹‹å¾Œå†åšæ•´åˆï¼ˆReducimgï¼‰ï¼Œé”åˆ°åˆ†æ•£å¼è¨ˆç®—ã€‚\næ¨¡å‹æµç¨‹\rforkï¼šå°‡è¦åŸ·è¡Œçš„ MapReduce ç¨‹å¼è¤‡è£½åˆ° Master èˆ‡æ¯ä¸€å€‹ Worker æ©Ÿå™¨ä¸­ã€‚Master èˆ‡ Worker åœ¨Hadoop ä¸­å³ç‚º JobTracker(NameNode) èˆ‡ TaskTracker(DataNode)ã€‚ assign mapï¼šMaster æ±ºå®š Map ç¨‹å¼èˆ‡ Reduce ç¨‹å¼ï¼Œåˆ†åˆ¥ç”±å“ªäº› Worker æ©Ÿå™¨åŸ·è¡Œã€‚ readï¼šå°‡æ‰€æœ‰çš„è³‡æ–™å€å¡Šï¼Œ â€¦","date":"2020-08-12T14:32:00+00:00","updated":"2020-08-12T14:32:00+00:00"},{"objectID":"1597152655","permalink":"/post/blog-build-hugo-blog/build-hugo-with-netlify/","title":"æ¶ Hugo ç¶²ç«™ä¸¦éƒ¨ç½²åˆ° Netlify","content":"å‰è¨€\rç¬¬ä¸€å€‹ blog æ˜¯ç”¨åŠŸèƒ½å¼·å¤§çš„ Hexo + Github Pages åšå‡ºä¾†çš„ï¼ŒHexo åŸºæ–¼ Node.jsï¼Œæœ‰åŠŸèƒ½é½Šå…¨çš„ä¸»é¡Œå¦‚ NexTã€å’Œè±å¯Œçš„å¤–æ›ï¼Œåƒ…éœ€åœ¨é…ç½®æª”ä¿®æ”¹åƒæ•¸å°±å¯ä»¥é”åˆ°é«˜å®¢è£½åŒ–çš„éœ€æ±‚ï¼Œé€£éƒ¨ç½²åˆ°ç¶²é ä¸Šéƒ½åƒ…éœ€è¦å¹¾å€‹åŒ…è£å¥½çš„ commandï¼Œéå¸¸å®¹æ˜“ä¸Šæ‰‹ã€‚\nä¸ééš¨è‘—æ–‡ç« å¢åŠ ï¼Œèƒ½ç™¼ç¾åœ¨ç”Ÿæˆéœæ…‹ç¶²é çš„é€Ÿåº¦è®Šæ…¢äº†å¾ˆå¤šï¼\nHugo ç”± Golang ç·¨å¯«ï¼Œæ¨™æ¦œç‚ºä¸–ç•Œä¸Šæœ€å¿«çš„éœæ…‹ç¶²ç«™å»ºæ§‹æ¡†æ¶ã€‚ç¼ºé»æ˜¯æ²’æœ‰é è¨­çš„ä¸»é¡Œæ¨£å¼ï¼Œç¾æˆçš„æ¨£æ¿é¸æ“‡ä¹Ÿæ²’æœ‰ Hexo é‚£éº¼å¤šï¼Œé…ç½®æª”å¹¾ä¹æ˜¯å¾é ­ç·¨å¯«ï¼Œå‚³çµ±å–®ç´”éƒ¨ç½²åœ¨ github pages çš„æ–¹å¼ä¹Ÿæ˜¯ä¸é‚£éº¼ç°¡æ˜“ã€‚\nNote\næ–°æ‰‹é©åˆ Hexo é…ç½®ç°¡å–®ï¼Œè€Œè¦æ±‚é€Ÿåº¦çš„äººå‰‡é¸æ“‡ Hugoã€‚\næ¯”è¼ƒä¸‹ä¾†æ±ºå®šä½¿ç”¨ Hugoã€‚åŸæœ¬æ‡‰è©²æ˜¯è¦æŠŠ Hexo éƒ¨è½æ ¼æ¬ç§»åˆ° Hugoï¼Œä½†ç™¼ç¾å…©è€…å€‹ markdown æ ¼å¼æœ‰äº›å·®ç•°ã€‚å› ç‚ºæ‡¶å¾—ç ”ç©¶æ›´å¤šç”¨æ³•ï¼Œé€™é‚Šç´¢æ€§ç´€éŒ„ä¸€äº›ç”Ÿæ´»å§ã€‚\nç’°å¢ƒå»ºç½®\rå®‰è£ Go\råˆ° golang\rä¸‹è¼‰ä½œæ¥­ç³»çµ±å°æ‡‰çš„ç¨‹å¼ã€‚\nä¸‹è¼‰ Hugo\råˆ° é€™è£¡\rä¸‹è¼‰ä½œæ¥­ç³»çµ±å°æ‡‰çš„ç¨‹å¼ã€‚ä¸‹è¼‰å¾Œåšä»¥ä¸‹è¨­å®šï¼š\né›»è…¦æœ¬æ©Ÿæ–°å¢è³‡æ–™å¤¾ c:/Hugo åœ¨è©²è³‡æ–™å¤¾å…§æ–°å¢ bin, Sites å…©è³‡æ–™å¤¾ã€‚ å°‡å®˜ç¶²ä¸‹è¼‰çš„ hugo è§£å£“ç¸®å¾Œæ”¾å…¥ c:/Hugo/bin è³‡æ–™å¤¾å…§ã€‚ è¨­ç½®ç’°å¢ƒè®Šæ•¸ï¼Œåœ¨ PATH åƒæ•¸åŠ å…¥ C:\\Hugo\\bin é‡é–‹æ©Ÿ ç¢ºèª Hugo å®‰è£æˆåŠŸï¼Œé–‹å•Ÿ cmd è¼¸å…¥ hugo versionï¼Œè‹¥å‡ºç¾ä¸‹é¢è¨Šæ¯å‰‡ä»£è¡¨å®‰è£æˆåŠŸã€‚ å»ºç«‹ç¶²ç«™\ré–‹å•Ÿ cmdï¼Œåˆ‡æ›åˆ°å‰›å‰›å»ºç«‹çš„ç›®éŒ„ c:\\Hugo\\Sitesï¼Œå»ºç«‹ä¸€å€‹åç¨±ç‚º [example]çš„æ¸¬è©¦ç¶²ç«™ï¼Œè¼¸å…¥ï¼š\n1hugo new site example å¦‚æœå‡ºç¾ Configurations! å­—æ¨£ï¼Œè¡¨ç¤ºå·²ç¶“ç”Ÿæˆç›¸é—œè³‡æ–™å¤¾èˆ‡æª”æ¡ˆæ–¼ c:\\Hugo\\sites\\example ä¸‹ã€‚\nå¥—ç”¨ä¸»é¡Œ\rç”¨ git submodule æŠŠå–œæ­¡çš„ä¸»é¡Œä¸‹è¼‰ä¸‹ä¾†\n1$ cd example 2$ git submodule add https://github.com/varkai/hugo-theme-zozoã€€theme/ å› ç‚º theme æœ¬èº«å°±ç‚ºä¸€å€‹ repoï¼Œè€Œè‡ªå·±æœ¬èº«ä¹Ÿæœƒæ˜¯ä¸€å€‹ repoï¼Œæ­¤æ™‚å¦‚æœè¦åœ¨ repo è£¡é¢ä½¿ç”¨åˆ°å…¶ä»– repo çš„è©±å°±å¿…é ˆä½¿ç”¨ git submoduleï¼ â€¦","date":"2020-08-11T21:30:55+08:00","updated":"2020-08-11T21:30:55+08:00"},{"objectID":"1597146660","permalink":"/post/database-mysql-ndb-cluster8-on-ubuntu/mysql-ndb-cluster/","title":"[MySQL] åœ¨ Ubuntu18.04 å»ºç«‹ MySQL NDB Cluster 8.0","content":"MySQL NDB Cluster\rMySQL cluster å°‡æ¨™æº–çš„ MySQL server èˆ‡å…§å­˜ä¸­å¢é›†å¼å„²å­˜å¼•æ“ NDB é›†æˆèµ·ä¾†ï¼Œå…è¨±åœ¨å¤šå€‹ç„¡å…±äº«çš„ç³»çµ±ä¸­éƒ¨ç½²ã€Œå…§å­˜ä¸­ã€è³‡æ–™åº«çš„å¢é›†ã€‚\nå¢é›†é€šå¸¸æœƒæœ‰å¤šå°æ©Ÿå™¨ï¼Œæ¯å°é‹è¡Œä¸åŒç¨‹åºï¼ŒåŒ…æ‹¬ MySQL Serverã€NDB å¢é›†çš„æ•¸æ“šç¯€é»ã€ç®¡ç†ä¼ºæœå™¨ï¼Œä»¥åŠå¯èƒ½å°ˆé–€çš„æ•¸æ“šè¨ªå•ç¨‹å¼ï¼Œå¦‚ä¸‹åœ–ï¼š\næ¶æ§‹ä¸­çš„ä¸‰å€‹è§’è‰²\rç®¡ç†ç¯€é» Management Node\nç”¨æ–¼ç®¡ç†å¢é›†å…§çš„å…¶ä»–ç¯€é»ï¼Œå¦‚æä¾›é…ç½®æ•¸æ“šã€å•Ÿå‹•ä¸¦åœæ­¢ç¯€é»ã€é‹è¡Œå‚™ä»½ç­‰ã€‚ç”±æ–¼é€™é¡ç¯€é»è² è²¬ç®¡ç†å…¶ä»–ç¯€é»çš„é…ç½®ï¼Œæ‡‰åœ¨å•Ÿå‹•å…¶ä»–ç¯€é»ä¹‹å‰é¦–å…ˆå•Ÿå‹•é€™é¡ç¯€é»ã€‚\næ•¸æ“šç¯€é» Data Node\nç”¨æ–¼ä¿å­˜å¢é›†çš„æ•¸æ“šï¼Œè³‡æ–™å¯«åœ¨ RAM æˆ– Diskã€‚ç•¶ç¯€é»æœ‰ 2 å€‹ä»¥ä¸Šæ™‚å°±èƒ½å¯¦ç¾é›†ç¾¤çš„é«˜å¯ç”¨ä¿è­‰ï¼Œä¸éç¯€é»å¢åŠ ï¼Œé›†ç¾¤çš„è™•ç†é€Ÿåº¦æœƒè®Šæ…¢ã€‚\nSQL ç¯€é» (API)\nç”¨ä¾†è¨ªå•å¢é›†æ•¸æ“šï¼Œè² è²¬ SQL çš„ Table schemaï¼Œæä¾›å°å¤–æ‡‰ç”¨æœå‹™ã€‚å¢åŠ  API ç¯€é»æœƒæé«˜æ•´å€‹é›†ç¾¤çš„ä¸¦ç™¼è¨ªå•é€Ÿåº¦å’Œæ•´é«”çš„ååé‡ï¼Œè©²ç¯€é»å¯ä»¥éƒ¨ç½²åœ¨ Web æ‡‰ç”¨ä¼ºæœå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨å°ˆç”¨çš„ä¼ºæœå™¨ä¸Šã€‚\nç’°å¢ƒæº–å‚™\ræ­å»º MySQL Cluster è‡³å°‘è¦ä¸€å€‹ç®¡ç†ç¯€é»ä¾†ç®¡ç†ï¼Œä¸€å€‹ SQL ç¯€é»ä¾†å¯¦ç¾ MySQL server åŠŸèƒ½å’Œå…©å€‹è³‡æ–™ç¯€é»å¯¦ç¾ NDB Cluster çš„åŠŸèƒ½ã€‚æ­¤ç¯‡æ–‡ç« å°‡æ¸¬è©¦ä½¿ç”¨é›™ SQLç¯€é»ä¾†æ­å»ºæ¸¬è©¦ç’°å¢ƒï¼š\n1a) Management Node 10.1.5.31 2b) Data Node 10.1.5.32 3c) Data Node 10.1.5.33 4d) SQL Node 10.1.5.32 5e) SQL Node 10.1.5.33 ä»¥ä¸Šæ©Ÿå™¨ä½¿ç”¨ Ubuntu 18.04 ä½œæ¥­ç³»çµ±ã€‚\nManagement Node\rä¸‹è¼‰ä¸¦å®‰è£\r1$ cd ~ 2$ wget https://dev.mysql.com/get/Downloads/MySQL-Cluster-8.0/mysql-cluster-community-management-server_8.0.21-1ubuntu18.04_amd64.deb 3$ sudo dpkg -i mysql-cluster-community-management-server_8.0.21-1ubuntu18.04_amd64.deb â€¦","date":"2020-08-11T11:51:00+00:00","updated":"2020-08-11T11:51:00+00:00"},{"objectID":"1596649560","permalink":"/post/devops-git-multi-account/git-multi-account-on-same-pc/","title":"[Git] åœ¨åŒä¸€å°é›»è…¦ä¸­è¨­ç½®å¤šå€‹ Git å¸³è™Ÿ","content":"ç‚ºæ¯å€‹å¸³è™Ÿç”¢ç”Ÿ ssh key\r1$ ssh-keygen -t rsa -C \u0026#34;userName@address\u0026#34; ç”¢ç”Ÿå®Œç•¢å¾Œï¼Œå°‡å…¬é‘°æ”¾åˆ°å°æ‡‰å¸³è™Ÿçš„ github ä¸­\rå°‡æ–°é‡‘é‘°æ–°å¢åˆ° SSH agent ä¸­\rå› ç‚ºä½œæ¥­ç³»çµ±é è¨­åªè®€å–ç§é‘° id_rsaï¼Œç‚ºäº†è®“ SSH è­˜åˆ¥æ–°çš„ç§é‘°ï¼Œéœ€å°‡å…¶æ–°å¢åˆ° SSH agentä¸­ï¼š\n1$ ssh-add ~/.ssh/é‡‘é‘°åç¨± å¦‚æœå‡ºç¾ Could not open a connection to your authentication agent çš„éŒ¯èª¤ï¼Œå°±è©¦è‘—ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\n1$ ssh-agent bash 2$ ssh-add ~/.ssh/é‡‘é‘°åç¨± Warning\né‡å•Ÿé›»è…¦å¾Œéƒ½éœ€è¦é‡æ–° ssh-addã€‚å› ç‚ºé€™å€‹å‘½ä»¤ä¸æœƒæ°¸ä¹…æ€§çš„è¨˜ä½ç§é‘°ã€‚ä½¿ç”¨ ssh-add æœƒæŠŠæŒ‡å®šçš„ç§é‘°æ–°å¢åˆ° ssh-agent æ‰€ç®¡ç†çš„ä¸€å€‹ session ç•¶ä¸­ã€‚è€Œ ssh-agent æ˜¯ä¸€å€‹ç”¨æ–¼å„²å­˜ç§é‘°çš„è‡¨æ™‚æ€§çš„ session æœå‹™ï¼Œä¹Ÿå°±æ˜¯èªªç•¶ä½ é‡å•Ÿä¹‹å¾Œï¼Œssh-agent æœå‹™ä¾¿æœƒé‡ç½®ï¼Œsession æœƒè©±ä¹Ÿæœƒå¤±æ•ˆã€‚\nè§£æ±ºæ¯æ¬¡é‡å•Ÿéƒ½è¦ ssh-add çš„å•é¡Œ\råœ¨ git å®‰è£ç›®éŒ„ä¸‹çš„ etc/bash.bashrc æ–‡ä»¶ä¸­æœ«åŠ å…¥\n1eval \u0026#34;$(ssh-agent -s)\u0026#34; 2ssh-add ~/.ssh/é‡‘é‘°åç¨± é…ç½®å¤šå€‹ ssh-key\rä¿®æ”¹ ~/.ssh/config æ–‡ä»¶\n1#default github 2Host github.com 3HostName github.com 4IdentityFile ~/.ssh/id_rsa 5 6Host github_second 7HostName github.com 8IdentityFile ~/.ssh/id_rsa_second å…¶ä¸­ Host ç‚º HostName çš„åˆ¥åã€‚\næ¸¬è©¦é€£ç·š\r1$ ssh -T git@[Host] å‡ºç¾\n1Hi xxx! Youâ€™ve successfully authenticated, but GitHub does not provide shell access. ä»£è¡¨é€£ç·šæˆåŠŸ\nåœ¨å°ˆæ¡ˆä¸‹è¨­é…ç½®ä½¿ç”¨è€…\rå…ˆå–æ¶ˆ global\n1$ git config --global --unset user.name 2$ git config --global --unset user.email è¨­ç½® repo è‡ªå·±çš„ user \u0026amp; email\n1$ git config user.email \u0026#34;xxxx@xx.com\u0026#34; 2$ git config user.name \u0026#34;xxxx\u0026#34; clone é ç«¯è³‡æ–™\n1$ git clone git@[Host]:UserName/repositoryName git push\n1$ git remote add origin git@[Host]:UserName/repositoryName.git 2$ git add -am \u0026#34;commit msg\u0026#34; 3$ git push origin master Reference\r[1] https://segmentfault.com/q/1010000000835302\r[2] https://blog.csdn.net/EsonJohn/article/details/79134665\r\\\n[3] http://blog.lessfun.com/blog/2014/06/11/two-github-account-in-one-client/\r","date":"2020-08-05T17:46:00+00:00","updated":"2020-08-05T17:46:00+00:00"},{"objectID":"1596207000","permalink":"/post/data-zookeeper-endofstreamexception-error/zookeeper-endofstreamexception/","title":"[Zookeeper] fsync \u0026 EndOfStreamException å°è‡´ zookeeper shutdown","content":"å•é¡Œ\rZookeeper åŠ Kafka åœ¨åƒæ•¸ä¿æŒé è¨­çš„ç‹€æ³ä¸‹ï¼Œåšå£“åŠ›æ¸¬è©¦æ™‚ Zookeeper æœƒç™¼ç”Ÿä»¥ä¸‹éŒ¯èª¤è¨Šæ¯ï¼š\nfsync-ing the write ahead log in SyncThread 12020-07-24 08:24:15,665 [myid:1] - WARN [SyncThred:2:FileTxnLog@408] - fsync-ing the write ahead log in SyncThread:3 took 8154ms which will adversely effect operation latency.File size is 67108880 bytes. See the ZooKeeper troubleshooting guide EndOfStreamException: Unable to read additional data from client, it probably closed the socket 12020-07-24 08:26:38,929 [myid:1] - WARN [NIOWorkerThread-2:NIOServerCnxn@364] - Unexpected exception 2EndOfStreamException: Unable to read additional data from client, it probably closed the socket: address = /10.1.5.33:51856, session = 0x200150baa0a0004 3org.apache.zookeeper.server.NIOServerCnxn.handleFailedRead(NIOServerCnxn.java:163) 4org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:326) 5org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522) 6org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154) 7java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 8java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 9 at java.lang.Thread.run(Thread.java:748) 102020-07-24 08:26:48,440 [myid:1] - info [NIOWorkerThread-3:Learner@137] - Revalidating client: 0x200150baa0a0004 å‡ºç¾å¾Œé€šå¸¸æœƒä¼´éš¨ Zookeeper é›†ç¾¤ shutdownï¼Œé›–ç„¶éä¸€æ®µæ™‚é–“å¾Œå³ç¾¤æœƒè‡ªå‹•å›å¾©ï¼Œä½†æ˜¯æ•´é«”æ€§èƒ½æœƒå¤§å¹…ä¸‹é™ã€‚\né…ç½®\rå…ˆèªªæ˜ä¸€ä¸‹æ©Ÿå™¨ç’°å¢ƒåŠå£“åŠ›æ¸¬è©¦æ¢ä»¶ï¼š\nç’°å¢ƒ\rCPU 24 cores RAM 256 GB ç¶²å¡ 10 GB å…±ä¸‰å° server å„è·‘ä¸€å€‹ Zookeeper ä»¥åŠä¸€å€‹ kafka containerã€‚\næ¸¬è©¦\ræ¨¡æ“¬ 10 å€‹ clientï¼Œæ¯å€‹ clinet ä¸Ÿ 5000 è¬ç­†è¨Šæ¯ï¼Œæ¯ç­†è¨Šæ¯å¤§å°ç‚º 1Kï¼ŒKafka topic çš„åˆ†å€æ•¸åŠå‰¯æœ¬æ•¸éƒ½è¨­ç‚º 3ã€‚\nè§£æ±ºæ–¹æ³•\rsession timeout å•é¡Œçš„åŸå› åœ¨æ–¼ï¼Œé…ç½®çš„è¶…æ™‚æ™‚é–“å¤ªçŸ­ï¼ŒZookeeper æ²’æœ‰è®€å®Œ Consumer (é€™è£¡æŒ‡ Kafka) çš„æ•¸æ“šï¼Œé€£æ¥å°±è¢« Consumeræ–·é–‹äº†ã€‚ æ‰€ä»¥åœ¨ Kafka çš„ server.properties æ–‡ä»¶ä¸­å°‡é‡å° Zookeeper çš„è¶…æ™‚é€£æ¥å±¬æ€§çš„å€¼èª¿å¤§ä¸€é»ï¼Œä¾‹å¦‚ : 1# server.properties 2zookeeper.session.timeout.ms=500000 fysnc ç™¼ç”ŸåŸå› æ˜¯å› ç‚º ZooKeeper å°‡æ•¸æ“š write ahead log(WAL) å¯«å…¥ç£ç¢Ÿçš„é€Ÿåº¦éæ…¢ï¼Œå°è‡´ ZooKeeper ç¯€é»é–“ heartbeat (follower éœ€èˆ‡åŒæ­¥ leader) è¶…æ™‚ã€‚ æ ¹æœ¬è§£æ±ºçš„æ–¹å¼æ˜¯æ›è¼‰æ–°çš„ç¡¬ç¢Ÿåˆ° Zookeeper ç¯€é»æ©Ÿå™¨ä¸Šï¼Œä¸¦å»ºè­°å°‡æ‡‰ç”¨å¦‚ Kafka èˆ‡ Zookeeper çš„æ©Ÿå™¨åˆ†é–‹ï¼Œæé«˜ç£ç¢Ÿ IO æ€§èƒ½ã€‚ æŠ˜è¡·è™•ç†æ–¹å¼å‰‡æ˜¯æé«˜ Zookeeper/config/zoo.cfg ä¸­tickTime ä»¥åŠ fsync.warningthresholdms åƒæ•¸ã€‚ 1# zoo.cfg 2tickTime=4000 3fsync.warningthresholdms=10000 è£œå……\rZookeeper å„²å­˜æ©Ÿåˆ¶ ZooKeeper ä¸»è¦æ˜¯åœ¨è¨˜æ†¶é«”ä¸­ç¶­è­·æ•¸æ“šï¼Œä½†æ¯å€‹æ”¹è®Šéƒ½æœƒè¢«å¯«å…¥ä¸€å€‹åœ¨å­˜å„²ä»‹è³ªä¸Šçš„æŒä¹… WALï¼ˆWrite Ahead Logï¼‰ã€‚ç•¶ä¸€å€‹æœå‹™æ•…éšœæ™‚ï¼Œå®ƒèƒ½å¤ é€šéå›æ”¾ WAL æ¢å¾©ä¹‹å‰çš„ç‹€æ…‹ã€‚ç‚ºäº†é˜²æ­¢ WAL ç„¡é™åˆ¶çš„å¢é•·ï¼ŒZooKeeper æœå‹™æœƒå®šæœŸçš„å°‡è¨˜æ†¶é«”ç‹€æ…‹å¿«ç…§ä¿å­˜åˆ°å­˜å„²ä»‹è³ªã€‚é€™äº›å¿«ç…§èƒ½å¤ ç›´æ¥åŠ è¼‰åˆ°å…§å­˜ä¸­ï¼Œæ‰€æœ‰åœ¨é€™å€‹å¿«ç…§ä¹‹å‰çš„ WAL æ¢ç›®éƒ½å¯ä»¥è¢«å®‰å…¨çš„ä¸Ÿæ£„ã€‚ fsync.warningthresholdms åƒæ•¸ ç”¨æ–¼é…ç½® Zookeeper é€²è¡Œ WAL fsync æ“ä½œæ™‚æ¶ˆè€—æ™‚é–“çš„å ±è­¦é–¾å€¼ã€‚ä¸€æ—¦ fsync æ“ä½œæ¶ˆè€—çš„æ™‚é–“å¤§æ–¼è©²åƒæ•¸æŒ‡å®šçš„å€¼ï¼Œå°±åœ¨æ—¥èªŒä¸­æ‰“å°å‡ºå ±è­¦æ—¥èªŒã€‚ Reference\r[1] https://zookeeper.apache.org/doc/r3.4.10/zookeeperAdmin.html\r[2] https://blog.csdn.net/levy_cui/article/details/52242715?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.channel_param\u0026depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.channel_param\r[3] https://v1-16.docs.kubernetes.io/zh/docs/tutorials/stateful-application/zookeeper/\r","date":"2020-07-31T14:50:00+00:00","updated":"2020-07-31T14:50:00+00:00"},{"objectID":"1595585465","permalink":"/post/programming-css-transition/css-transition-and-hover/","title":"[CSS] transition + :hover åšä¸€å€‹æœ‰è³ªæ„Ÿçš„ button","content":"transition\råŠ ä¸Šæ¼¸è®Šæ•ˆæœï¼Œå¯ä»¥æ”¾æ…¢æŸä¸€å€‹å…ƒç´ è½‰æ›æ•ˆæœçš„æ™‚é–“ï¼Œå¢åŠ è³ªæ„Ÿã€‚èªæ³•å¦‚ä¸‹ï¼š transition: [property] [duration] [timing-function] [delay];\npropertyï¼šæŒ‡å®š css å±¬æ€§çš„åç¨±ï¼Œall ä»£è¡¨å…¨éƒ¨ï¼Œä¸¦éæ‰€æœ‰çš„ css å±¬æ€§éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¯å‹•ç•«å±¬æ€§\ræ¸…å–®\rã€‚\ndurationï¼štransition æ•ˆæœçš„æŒçºŒæ™‚é–“ã€‚\ntiming-functionï¼šæŒ‡å®šæ•ˆæœçš„è½‰é€Ÿæ›²ç·šï¼Œå¯ä½¿ç”¨æ•¸å€¼å¦‚ä¸‹ï¼š\nease linear ease-in ease-out ease-in-out step-start step-end steps() cubic-bezier() å¯ä»¥é€éé–‹ç™¼äººå“¡å·¥å…·æŸ¥çœ‹ä¸¦æ‹–æ›³æ›²ç·š delayï¼šå®šç¾©å¤šä¹…ä¹‹å¾Œé–‹å§‹ç™¼ç”Ÿ transitionã€‚\nä»¥ä¸‹æ˜¯æ²’æœ‰åŠ ä¸Š transition çš„ç•«é¢\n1#box1 { 2 background: lightgrey; 3 width: 200px; 4 height: 100px; 5} 6#box1:hover { 7 background: darkcyan; 8 color: white 9} box1 æ¥è‘—ä¾†çœ‹åŠ ä¸Š transition çš„è®ŠåŒ–ï¼š transition: all 1s; ç¬¬ä¸€å€‹å±¬æ€§å€¼ all ä»£è¡¨å°æ‰€æœ‰å±¬æ€§ä½œç”¨ï¼Œç¬¬äºŒå€‹å€¼ä»£è¡¨æ¬²è½‰æ›çš„ç§’æ•¸ã€‚\n1#box1 { 2 background: lightgrey; 3 width: 200px; 4 height: 100px; 5 transition: all 1s; 6} 7#box1:hover { 8 background: darkcyan; 9 color: white 10} box1 åšä¸€å€‹æœ‰è³ªæ„Ÿçš„ button\r1\u0026lt;head\u0026gt; 2 \u0026lt;style\u0026gt; 3 #box1 { 4 width: 200px; 5 height: 100px; 6 text-align: center; 7 line-height: 100px; 8 border-radius: 30px; 9 transition: all 0.5s; 10 color: black; 11 border: 3px solid darkcyan; 12 } 13 #box1:hover { 14 background: darkcyan; 15 color: white; 16 cursor: point; 17 } 18 \u0026lt;/style\u0026gt; 19\u0026lt;/head\u0026gt; 20\u0026lt;body\u0026gt; 21 \u0026lt;div id=\u0026#34;box1\u0026#34;\u0026gt; 22 box1 23 \u0026lt;/div\u0026gt; 24\u0026lt;/body\u0026gt; box1 Reference\r[1] https://lidemy.com/courses/390445\r[2] https://eyesofkids.gitbooks.io/css3/content/contents/transitions.html\r[3] https://developer.mozilla.org/en-US/docs/Web/CSS/transition-timing-function\r","date":"2020-07-24T10:11:05+00:00","updated":"2020-07-24T10:11:05+00:00"},{"objectID":"1595366400","permalink":"/post/network-http-content-type/http-contenttype/","title":"[HTTP] content-type","content":"å®šç¾©\rç¶²éš›ç¶²è·¯åª’é«”é¡å‹ï¼ˆInternet media typeï¼Œä¹Ÿç¨±ç‚º MIME é¡å‹ï¼ˆMIME typeï¼‰æˆ–å…§å®¹é¡å‹ï¼ˆcontent typeï¼‰ï¼‰æ˜¯çµ¦ç¶²éš›ç¶²è·¯ä¸Šå‚³è¼¸çš„å…§å®¹è³¦äºˆçš„åˆ†é¡é¡å‹ã€‚HTTP é€é content-type çš„header ä¾†è¡¨ç¤º request æˆ– response message çš„ body æ˜¯ç”¨ä½•ç¨®æ–¹å¼ç·¨ç¢¼ï¼Œä¼ºæœå™¨æœƒæ ¹æ“šç·¨ç¢¼é¡å‹ä½¿ç”¨ç‰¹å®šçš„è§£ææ–¹å¼ï¼Œç²å–æ•¸æ“šæµä¸­çš„æ•¸æ“šã€‚\nå…¶æ ¼å¼ç‚º\n1é¡å‹å/å­é¡å‹å; å¯é¸å‚æ•° æ¯”å¦‚\n1text/html; charset = UTF-8 å¸¸è¦‹é¡å‹\rapplication/x-www-form-urlencoded\ræœ€å¸¸è¦‹çš„POSTæäº¤æ•¸æ“šæ–¹å¼ï¼Œæ•¸æ“šä»¥éµå€¼ key1=val1\u0026amp;key2=val2 çš„æ–¹å¼ç·¨ç¢¼ï¼ˆurlencodedï¼‰ï¼Œç·¨ç¢¼ä¸»è¦ç”¨ä¾†è½‰æ›æ˜“æ··æ·†çš„å­—ä¸²å¦‚ \u0026amp;ã€=ã€‚ ç€è¦½å™¨åŸç”Ÿè¡¨å–® \u0026lt;form\u0026gt; é»˜èªçš„æäº¤æ–¹å¼ï¼ˆæ²’æœ‰ç‰¹åˆ¥è¨­ enctype å±¬æ€§çš„è©±ï¼‰ã€‚ jquery é»˜èª post è«‹æ±‚æäº¤çš„æ–¹å¼ã€‚ multipart/form-data\rä¸æœƒå°å­—å…ƒç·¨ç¢¼ï¼Œåœ¨ä½¿ç”¨åŒ…å«æª”æ¡ˆä¸Šå‚³æ§åˆ¶å…ƒä»¶çš„è¡¨å–®æ™‚ï¼Œå‰‡å¿…é ˆä½¿ç”¨è©²å€¼\u0026lt;form enctype=\u0026quot;multipart/form-data\u0026quot;\u0026gt;ã€‚\næœƒç”Ÿæˆä¸€å€‹è¤‡é›œçš„ boundary å­—ä¸²ä¾†åˆ†å‰²ä¸åŒçš„å­—æ®µã€‚\n1POST http://www.example.com HTTP/1.1 2Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA 3------WebKitFormBoundaryrGKCBY7qhFd3TrwA 4Content-Disposition: form-data; name=\u0026#34;text\u0026#34; 5title 6------WebKitFormBoundaryrGKCBY7qhFd3TrwA 7Content-Disposition: form-data; name=\u0026#34;file\u0026#34;; filename=\u0026#34;chrome.png\u0026#34; 8Content-Type: image/png 9PNG ... content of chrome.png ... 10------WebKitFormBoundaryrGKCBY7qhFd3TrwA-- Body ä¸­æŒ‰ç…§å­—æ®µå€‹æ•¸å¯åˆ†ç‚ºå¤šå€‹ç›¸åŒçµæ§‹çš„éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯ä»¥ --boundary é–‹å§‹ï¼Œæ¥è‘—å…§å®¹æè¿°ä¿¡æ¯ï¼Œæ›è¡Œï¼Œæœ€å¾Œæ˜¯å­—æ®µå…·é«”å…§å®¹ï¼ˆæ–‡æœ¬æˆ–äºŒé€²åˆ¶ï¼‰ã€‚Body æœ€å¾Œä»¥ --boundary-- æ¨™ç¤ºçµæŸã€‚\ntext/plain\ræ•¸æ“šä»¥ç´”æ–‡æœ¬å½¢å¼(text/json/xml/html)é€²è¡Œç·¨ç¢¼ï¼Œå…¶ä¸­ä¸å«ä»»ä½•æ§åˆ¶é …æˆ–æ ¼å¼å­—ç¬¦ã€‚\nWarning\nä»¥ä¸Šä¸‰ç¨® content typeï¼Œæ˜¯ HTML5 è¦ç¯„ä¸­ form çš„ enctype çš„å¯èƒ½å€¼ã€‚\napplication/json\rç”¨ json ä¾†å‚³éåƒæ•¸è³‡æ–™ï¼Œå¯ä»¥æ–¹ä¾¿çš„æäº¤è¤‡é›œçš„çµæ§‹åŒ–æ•¸æ“šï¼Œç‰¹åˆ¥é©åˆ RESTful çš„æ¥å£ã€‚\nWarning\napplication/json å·²ç¶“è¢« W3C éºæ£„ï¼Œå»ºè­°ä¸è¦åœ¨\u0026lt;form enctype=\u0026quot;...\u0026quot;\u0026gt;ä¸­ä½¿ç”¨ï¼Œå³ä½¿ç”¨äº†å¦‚æœç€è¦½å™¨ä¸æ”¯æŒï¼Œä¹Ÿæœƒæ›¿æ›æˆ application/x-www-form-urlencodedã€‚ åŒç†ï¼Œå…¶ä½™çš„ MIME é¡å‹ï¼Œä¹Ÿä¸æ”¯æŒï¼Œå‡æœƒæ›¿æ›æˆé»˜èªç·¨ç¢¼ application/x-www-form-urlencodedã€‚\nReference\r[1]https://imququ.com/post/four-ways-to-post-data-in-http.html [2] https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B\r[3] https://www.itread01.com/content/1516643918.html\r","date":"2020-07-21T21:20:00+00:00","updated":"2020-07-21T21:20:00+00:00"},{"objectID":"1595285220","permalink":"/post/programming-css-font-style/css-font/","title":"[CSS] æ–‡å­—æ¨£å¼ \u0026 æ–‡å­—æ–·è¡Œ","content":"æ–‡å­—ç›¸é—œçš„ CSS å±¬æ€§\rcolor\ræ–‡å­—é¡è‰²ï¼Œå€¼å¯ä»¥æ˜¯é¡è‰²æ•˜è¿°å¦‚ redã€\rè‰²ç¢¼è¡¨\r#FF0000ï¼Œæˆ–æ˜¯ rgb(255,0 , 0)ã€‚å¦å¤– rgba(255, 0, 0, 0.5) çš„ a è¡¨ç¤ºé€æ˜åº¦ï¼Œå€¼å¾é›¶åˆ°ä¸€ã€‚\nfont-size\ræ–‡å­—å¤§å°ã€‚\nfont-weight\rå­—çš„ç²—ç´°ï¼Œå€¼æœ‰ normal, bold, lighter, bolder æˆ–æ˜¯ 100 ~ 900 çš„æ•´ç™¾æ•¸å€¼ã€‚å¸¸è¦‹çš„å­—é‡æ•¸å€¼å¤§è‡´å°æ‡‰çš„å­—é‡æè¿°è©èªï¼š\n1100 - Thin 2200 - Extra Light (Ultra Light) 3300 - Light 4400 - Regular (Normalã€Bookã€Roman) 5500 - Medium 6600 - Semi Bold (Demi Bold) 7700 - Bold 8800 - Extra Bold (Ultra Bold) 9900 - Black (Heavy) font-family\rå­—é«”ã€‚å¯ä»¥æ¥å¤šå€‹å­—é«”ï¼Œå¦‚æœå­—é«”åç¨±ä¸­æœ‰ç©ºç™½ï¼Œå°±å¿…é ˆç”¨ \u0026#39;\u0026#39; æˆ– \u0026amp;quot;\u0026amp;quot; æ‹¬èµ·ä¾†ã€‚ æœ‰å…©ç¨®é¡å‹çš„å­—é«”ç³»åˆ—åç¨±ï¼š\nfamily-nameï¼šæŒ‡å®šå­—é«”ï¼Œå¦‚ timesã€courierã€arialã€‚ generic-familyï¼šé€šç”¨å­—é«”ï¼Œå¦‚ serifã€sans-serifã€cursiveã€fantasyã€monospaceã€‚\nç•¶ç€è¦½å™¨è¼‰å…¥ç¶²é æ¨£å¼æ™‚ï¼Œæœƒå¾ font-family çš„ç¬¬ä¸€å€‹å­—é«”é–‹å§‹åˆ¤æ–·ï¼Œå¦‚æœæ²’æœ‰å°æ‡‰çš„å­—é«”ï¼Œå°±æœƒæ¡ç”¨ä¸‹ä¸€ç¨®å­—é«”ï¼Œå¦‚æœåˆ°æœ€å¾Œéƒ½æ²’æœ‰å¯ç”¨çš„å­—é«”ï¼Œå°±æ¡ç”¨é›»è…¦é è¨­å­—é«”ï¼Œä¸€èˆ¬ä¾†èªªå®šç¾©font-familyæ™‚ï¼Œæœƒå°‡æ³›ç”¨å­—æ”¾åœ¨æœ€å¾Œæ–¹ï¼Œæ­¤æ™‚å°±å¯ä»¥é€é generic-family ä¾†æŒ‡å®šå“ªç¨®é è¨­å­—é«”ã€‚ letter-spacing\rå­—çš„é–“è·ã€‚å€¼å¯ä»¥æ˜¯ normal(æŒ‰ç…§ç•¶å‰å­—é«”çš„æ­£å¸¸é–“è·ç¢ºå®š)ã€3pxã€0.3emã€‚\nline-height\rè¡Œè·ï¼Œå…©è¡Œæ–‡å­—ä¸­é–“çš„é«˜åº¦ã€‚å€¼å¯ä»¥æ˜¯ normal(æŒ‰ç…§ç•¶å‰å­—é«”çš„æ­£å¸¸è¡Œè·ç¢ºå®š)ã€3pxã€0.3emã€‚\ntext-align\ræ°´å¹³å°é½Šï¼Œå¸¸è¦‹å±¬æ€§æœ‰ï¼š\ntext-align:left; å‘å·¦å°é½Š text-align:right; å‘å³å°é½Š text-align:center; ç½®ä¸­ text-align:justify; ä½¿å·¦å³å°é½Šæœ¬æ–‡ï¼Œ â€¦","date":"2020-07-20T22:47:00+00:00","updated":"2020-07-20T22:47:00+00:00"},{"objectID":"1595264820","permalink":"/post/programming-css-padding-margin/css-padding-margin/","title":"[CSS] padding \u0026 margin","content":"Padding\rè¨­å®šå®šç¾©å…ƒç´ é‚Šæ¡†èˆ‡å…ƒç´ å…§å®¹é–“çš„è·é›¢ã€‚\n1/* style.css */ 2#box1 { 3 background: palegreen; 4 width: 100px; 5 height: 100px; 6 padding: 30px;ã€€/* æˆ–å¡«ç™¾åˆ†æ¯” */ 7} å¯ä»¥ç™¼ç¾ box1 å…ƒç´ çš„å­—è·é›¢é‚Šæ¡†æœ‰ 30px çš„é‚Šè·\nå…¶ä»–å¯«æ³•\r1padding: 30px; padding å››å€‹é‚Šéƒ½æ˜¯ 30pxã€‚ 1padding: 25px 50px 75px 100px; ä¸Šå¡«å……ç‚º25px å³å¡«å……ç‚º50px ä¸‹å¡«å……ç‚º75px å·¦å¡«å……ç‚º100px 1padding:25px 50px 75px; ä¸Šå¡«å……ç‚º25px å·¦å³å¡«å……ç‚º50px ä¸‹å¡«å……ç‚º75px 1padding:25px 50px; ä¸Šä¸‹å¡«å……ç‚º25px å·¦å³å¡«å……ç‚º50px å¦å¤–æœ‰é‡å°å››å€‹é‚Šçš„ç¨ç«‹å¯«æ³•ï¼š\npadding-topï¼šä¸Šæ–¹çš„å…§è· padding-rightï¼šå³æ–¹çš„å…§è· padding-bottomï¼šä¸‹æ–¹çš„å…§è· padding-leftï¼šå·¦æ–¹çš„å…§è· å››å€‹å±¬æ€§å¯ä»¥å–®ç¨ä½¿ç”¨ä¹Ÿå¯ä»¥æ··æ­ä½¿ç”¨ã€‚ Margin\rè¨­å®šå…ƒç´ é‚Šæ¡†èˆ‡å¤–é¢çš„è·é›¢ã€‚\n1/* style.css */ 2#box2 { 3 background: cadetblue; 4 width: 100px; 5 height: 100px; 6 margin: 20px;ã€€/* æˆ–å¡« auto è‡ªå‹•èª¿æ•´ æˆ– ç™¾åˆ†æ¯” */ 7} å…¶ä»–å¯«æ³•\rmargin çš„å…¶ä»–å¯«æ³•èˆ‡ padding å®Œå…¨ç›¸åŒã€‚\nmargin-topï¼šè¨­ç½®å…ƒç´ çš„ä¸Šå¤–é‚Šè·ã€‚ margin-rightï¼šè¨­ç½®å…ƒç´ çš„å³å¤–é‚Šè·ã€‚ margin-leftï¼šè¨­ç½®å…ƒç´ çš„å·¦å¤–é‚Šè·ã€‚ margin-bottomï¼šè¨­ç½®å…ƒç´ çš„ä¸‹å¤–é‚Šè·ã€‚ é‡å°å–®ä¸€çš„ margin å±¬æ€§ä¹Ÿå¯ä»¥è¨­ ä¸€å€‹åˆ°å››å€‹ çš„å€¼ã€‚ ç€è¦½å™¨è‡ªå‹•å»ºçš„ margin\rç€è¦½å™¨æœƒè‡ªå‹•å¹«æˆ‘å€‘å…§å»º body çš„ marginï¼Œå¦‚ä¸‹åœ–æ‰€æ¨™ç¤º\næ­¤æ™‚åªè¦åœ¨ css ä¸­åŠ å…¥ body çš„ selectorï¼Œä¸¦æŠŠ margin è¨­æˆé›¶å°±å¯ä»¥æŠŠé‚Šæ¡†æ¶ˆé™¤äº†ã€‚\n1/* style.css */ 2body { 3 margin: 0px; 4} ","date":"2020-07-20T17:07:00+00:00","updated":"2020-07-20T17:07:00+00:00"},{"objectID":"1595264700","permalink":"/post/programming-css-border/css-border-outline/","title":"[CSS] border \u0026 outline","content":"border\r1\u0026lt;div id=\u0026#34;box1\u0026#34;\u0026gt;box1\u0026lt;/div\u0026gt; 1#box1 { 2 background: yellow; 3 border: 20px solid green; 4 /* æ¡†é™å¤§å° æ¨£å¼ é¡è‰²*/ 5 height: 30px 6} é‚Šæ¡†æ˜¯å¾€å¤–é¢é•·çš„ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ èƒ½ç™¼ç¾åˆ°æ•´å€‹é¸å–çš„åœ°æ–¹é«˜åº¦ç¸½å…±æ˜¯ 70px\nbroder-style\rborder style å¯ä»¥ç‚ºå¤–æ¡†é™åŠ ä¸Šä¸åŒæ¨£å¼ï¼Œä»¥ä¸‹ç¤ºç¯„ä½¿ç”¨é–‹ç™¼äººå“¡å·¥å…·ä¸Šé¢æ”¹æ¨£å¼ã€‚\nborder-radius\rå¯ä»¥ç‚ºå¤–æ¡†çš„è§’åŠ ä¸Šå¼§åº¦ã€‚\nç”¨ border ç•«åœ“å½¢\rå¯ä»¥åœ¨æ²’æœ‰è¨­ border åƒæ•¸ä¸‹ç›´æ¥ä½¿ç”¨ border-radiusï¼Œå°‡å€¼è¨­æˆ 50px æˆ–æ˜¯ 50%ï¼Œå³å¯ç•«ä¸€å€‹åœ“å½¢ã€‚\nç”¨ border ç•«ä¸‰è§’å½¢\r1/* style.css */ 2#box1 { 3 background: yellow; 4 width: 100px; 5 height: 100px; 6 border-top: 30px solid salmon; 7 border-bottom: 30px solid turquoise; 8 border-right: 30px solid peachpuff; 9 border-left: 30px solid pink; 10} å¯ä»¥å–®ç¨ç‚ºå››å€‹é‚Šè¨­å®š borderï¼Œæ¯å€‹é‚Šæœƒè®Šæˆæ¢¯å½¢ï¼›\nç•¶ä¸­é–“çš„å…ƒç´ é•·å¯¬éƒ½è¨­ 0px æ™‚ï¼Œå››å€‹é‚Šæœƒè®Šæˆä¸‰è§’å½¢ï¼›\næŠŠé™¤äº†è¦ç•™ä½çš„ä¸‰è§’å½¢ä»¥å¤–çš„é‚Šä»¥åŠå…ƒç´ æœ¬èº«é¡è‰²éƒ½è¨­ç‚º transparent é€æ˜ï¼›\nèª¿æ•´å„é‚Šçš„å¤§å°å¯ä»¥å¾—é“ä¸åŒé•·é‚Šçš„ä¸‰è§’å½¢ã€‚\nOutline\rOutline è·Ÿ Border éƒ½æ˜¯é‚Šæ¡†ï¼Œä¸ä¸€æ¨£çš„æ˜¯ Outline æ˜¯å¤–æ¡†ï¼Œä¸æœƒæ”¹è®Šå…ƒä»¶çš„ä½ç½®ï¼Œè€Œ border æœƒã€‚\nInfo\nä¸éå¯¦éš›ä¸Šæ¯”è¼ƒå¸¸ç”¨ border!\n","date":"2020-07-20T17:05:00+00:00","updated":"2020-07-20T17:05:00+00:00"},{"objectID":"1595264400","permalink":"/post/programming-css-background/css-background/","title":"[CSS] background","content":"background\ræŒ‡å®šé¡è‰² 1\u0026lt;!--html--\u0026gt; 2\u0026lt;div id=\u0026#34;box1\u0026#34;\u0026gt;box1\u0026lt;/div\u0026gt; 3\u0026lt;div id=\u0026#34;box2\u0026#34;\u0026gt;box2\u0026lt;/div\u0026gt; 4\u0026lt;div id=\u0026#34;box3\u0026#34;\u0026gt;box3\u0026lt;/div\u0026gt; 5\u0026lt;div id=\u0026#34;box4\u0026#34;\u0026gt;box4\u0026lt;/div\u0026gt; 1/* style.css */ 2#box1 { 3 background: yellow; 4} 5#box2 { 6 background: #2ab4b4; 7} 8#box3 { 9 background: rgb(117, 107, 255); 10} 11 12#box4 { 13 background: rgba(117, 107, 255, 0.3); /* a æŒ‡é€æ˜åº¦ï¼Œå€¼å¾ 0 åˆ° 1*/ 14} æŒ‡å®šèƒŒæ™¯åœ–ç‰‡ 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;) 4} background-repeat\rèƒŒæ™¯å¹³èˆ–æ–¹å¼ï¼Œé»˜èªç‚º repeatï¼Œå¯ä»¥æ¥å—çš„å±¬æ€§å€¼æœ‰no-repeat/ repeat-x/ repeat-yï¼Œå…¶ä¸­ repeat-x ç‚ºæ°´å¹³æ–¹å‘é‡è¤‡ï¼Œrepeat-y å‰‡ç‚ºå‚ç›´æ–¹å‘é‡è¤‡ã€‚\nbackground-position\rå¯èƒ½çš„å±¬æ€§å€¼æœ‰ center center / top center / bottom centerï¼Œç¬¬ä¸€å€‹å€¼ç‚ºæ°´å¹³æ–¹å‘ã€ç¬¬äºŒå€‹å€¼ç‚ºå‚ç›´æ–¹å‘ã€‚\ncenter center æŒ‡å®šåœ–ç‰‡ç½®ä¸­ã€‚ 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;); 4 background-repeat: no-repeat; 5 background-position: center center; 6 height: 500px; 7} top center æŒ‡å®šåœ–ç‰‡é ä¸Šç½®ä¸­å°é½Š 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;); 4 background-repeat: no-repeat; 5 background-position: top center; 6 height: 500px; 7} bottom center æŒ‡å®šåœ–ç‰‡é ä¸‹ç½®ä¸­å°é½Š 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;); 4 background-repeat: no-repeat; 5 background-position: bottom center; 6 height: 500px; 7} ç°¡å¯«\rbackgound-repeat ä»¥åŠ backgound-position å¯ä»¥ç›´æ¥è¡¨ç¤ºåœ¨ background å±¬æ€§ä¸­ï¼Œä¾‹å¦‚ï¼š\n1background: url(\u0026#34;./lemon.jpg\u0026#34;) no-repeat center center; é€™ä¸‰å€‹å±¬æ€§å€¼æ²’æœ‰ç‰¹æ€§é †åºï¼Œä¹Ÿå¯ä»¥å°‡ no-repeat å¯«åœ¨ url(\u0026quot;./lemon.jpg\u0026quot;) å‰ã€‚\nbackground-size\rç”¨ pixel è¡¨ç¤º 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;) no-repeat center center; 4 background-size: 300px 100px 5 height: 500px; 6} 7#box2 { 8 background: #2ab4b4; 9} ç”¨ç™¾åˆ†æ¯”è¡¨ç¤º 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;) no-repeat center center; 4 background-size: 50% 80% 5 height: 500px; 6} 7#box2 { 8 background: #2ab4b4; 9} contain\nç¸®æ”¾åœ–ç‰‡ä»¥å®Œå…¨è£å…¥èƒŒæ™¯ï¼ŒèƒŒæ™¯å€å¯èƒ½æœƒç•™ç™½ã€‚ 1/* style.css */ 2#box1 { 3 background: url(\u0026#34;./lemon.jpg\u0026#34;) no-repeat center center; 4 background-size: contain; 5 height: 200px; 6} 7#box2 { 8 background: #2ab4b4; 9} cover\nç¸®æ”¾åœ–ç‰‡ä»¥å®Œå…¨è¦†è“‹èƒŒæ™¯å€ï¼Œåœ–ç‰‡å¯èƒ½éƒ¨åˆ†æœƒè¢«è£åˆ‡ã€‚ ","date":"2020-07-20T17:00:00+00:00","updated":"2020-07-20T17:00:00+00:00"},{"objectID":"1595263680","permalink":"/post/programming-pfx-convert/ssl-pfx-to-pem/","title":"[SSL] PFX è½‰ PEM, CRT, KEY \u0026 s_client, s_server æ¸¬è©¦","content":"æ†‘è­‰ç™¼è¡Œæ©Ÿæ§‹(CA)ç™¼å‡ºçš„ PFX æ†‘è­‰æ–‡ä»¶ï¼Œé€šå¸¸å°‡æ ¹æ†‘è­‰/ä¸­ç¹¼æ†‘è­‰ã€ç¶²ç«™æ†‘è­‰(certificate)å’Œç¶²ç«™é‡‘é‘°(ç¶²ç«™ç§é‘°)é›†åˆåœ¨ä¸€èµ·ã€‚\npfx è½‰ pem (CA)\r1$ openssl pkcs12 -in keyname.pfx -out keyname.pem -nodes pfx è½‰ crt (cert)\r1$ openssl pkcs12 -in keyname.pfx -nokeys -clcerts -nodes -out keyname.crt pfx è½‰ key\r1$ openssl pkcs12 -in keyname.pfx -nocerts -nodes -out keyname.key ä»¥ä¸Šä¸‰å€‹æ­¥é©Ÿçš†é ˆå†è¼¸å…¥ç•¶æ™‚åŒ¯å‡º pfx è¨­å®šçš„å¯†ç¢¼ã€‚\n-in filenameï¼šæŒ‡å®šç§é‘°å’Œè­‰æ›¸è®€å–çš„æ–‡ä»¶ï¼Œé»˜èªç‚ºæ¨™æº–è¼¸å…¥ã€‚ -out filenameï¼šæŒ‡å®šè¼¸å‡ºçš„æ–‡ä»¶ï¼Œé»˜èªç‚ºæ¨™æº–è¼¸å‡ºã€‚ -clcertsï¼šåƒ…åƒ…è¼¸å‡ºå®¢æˆ¶ç«¯è­‰æ›¸ï¼Œä¸è¼¸å‡ºCAè­‰æ›¸ã€‚ -cacertsï¼šåƒ…åƒ…è¼¸å‡ºCAè­‰æ›¸ï¼Œä¸è¼¸å‡ºå®¢æˆ¶ç«¯è­‰æ›¸ã€‚ -nocertsï¼šä¸è¼¸å‡ºä»»ä½•è­‰æ›¸ã€‚ -nokeysï¼šä¸è¼¸å‡ºä»»ä½•ç§é‘°ä¿¡æ¯å€¼ã€‚ -nodesï¼šå°ç§é‘°ä¸åŠ å¯†ã€‚ æŸ¥çœ‹æ†‘è­‰ / é‡‘é‘°å…§å®¹\ræŸ¥çœ‹æ†‘è­‰ pem\r1$ openssl x509 -in keyname.pem -text -noout æŸ¥çœ‹è­‰æ›¸ cert\r1$ openssl x509 -noout -text -in keyname.crt æŸ¥çœ‹é‡‘é‘° key\r1$ openssl rsa -noout -text -in keyname.key æ¸¬è©¦å·¥å…·\rOpensslæä¾›äº†ç°¡å–®çš„ client å’Œ server å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ¨¡æ“¬ SSL é€£æ¥ï¼Œä»¥æ¸¬è©¦è¨ºæ–·ã€‚\ns_client\rä»¥ ssl å”è­°é€£æ¥åˆ°é ç¨‹ä¼ºæœå™¨ï¼Œ\n1$ openssl s_client -connect [host]:443 -connect host:portï¼šæŒ‡å®šé ç¨‹æœå‹™å™¨çš„åœ°å€å’Œç«¯å£ï¼Œé»˜èªå€¼ç‚º localhost:443 -CAfile filenameï¼šæŒ‡å®šç”¨æ–¼é©—è­‰æœå‹™å™¨è­‰æ›¸çš„æ ¹è­‰æ›¸ -cert filenameï¼šè‹¥æœå‹™å™¨ç«¯éœ€è¦é©—è­‰å®¢æˆ¶ç«¯çš„èº«ä»½ï¼Œé€šé -cert æŒ‡å®šå®¢æˆ¶ç«¯çš„è­‰æ›¸æ–‡ä»¶ -key filenameï¼šæŒ‡å®šç§é‘°æ–‡ä»¶ -stateï¼šæ‰“å°å‡º SSL æœƒè©±çš„ç‹€æ…‹ s_server\ræ¨¡æ“¬ HTTPS æœå‹™ï¼Œå¯ä»¥è¿”å› Openssl ç›¸é—œè¨Šæ¯\n1$ openssl s_server -accept 443 -cert myserver.crt -key myserver.key -www -acceptï¼šç”¨æ¥æŒ‡å®šç›£è½çš„ port -certï¼šç”¨æ¥æŒ‡å®šæä¾›æœå‹™çš„è­‰æ›¸ -keyï¼šç”¨æ¥æŒ‡å®šæä¾›æœå‹™çš„ key Source\ropenssl æŸ¥çœ‹è¯ä¹¦\rpfxåˆ†è§£æˆpem\r","date":"2020-07-20T16:48:00+00:00","updated":"2020-07-20T16:48:00+00:00"},{"objectID":"1594853100","permalink":"/post/programming-css-selector/css-introduction-selector/","title":"[CSS] ç°¡ä»‹- Selector \u0026 Selector Specificity","content":"CSS\rCascading Style Sheets éšå±¤å¼æ¨£å¼è¡¨ï¼Œæ˜¯ä¸€ç¨®ç”¨ä¾†ç‚ºçµæ§‹åŒ–æ–‡ä»¶ï¼ˆå¦‚HTMLæ–‡ä»¶æˆ–XMLæ‡‰ç”¨ï¼‰æ·»åŠ æ¨£å¼ï¼ˆå­—å‹ã€é–“è·å’Œé¡è‰²ç­‰ï¼‰çš„èªè¨€ã€‚\nå¹¾ç¨®åŠ å…¥ CSS çš„æ–¹å¼\rinline style å¯«åœ¨ HTML æ¨™ç±¤ä¸­ (inline style) ä¾‹å¦‚ï¼š ä½†æ¯”è¼ƒä¸å»ºè­°ï¼Œå› ç‚ºæœƒè·Ÿ HTML æ··åœ¨ä¸€èµ·ï¼Œä¸ä¾¿ä¿®æ”¹åŠç¶­è­·ã€‚\n\u0026amp;lt;style\u0026amp;gt; åœ¨ \u0026amp;lt;head\u0026amp;gt; æ¨™ç±¤å€å¡Šä¸­åŠ ä¸Š \u0026amp;lt;style\u0026amp;gt; æ¨™ç±¤ 1\u0026amp;lt;head\u0026amp;gt; 2 \u0026amp;lt;style\u0026amp;gt; 3 div { 4 background : red; 5 } 6 \u0026amp;lt;/style\u0026amp;gt; 7\u0026amp;lt;/head\u0026amp;gt; å…¶ä¸­ div æ˜¯ selectorï¼Œbackground: red å‰‡æ˜¯ property åŠ valueã€‚\nä½†ä»ç„¶ä¸å»ºè­°ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ç‚ºç•¶ html æ¨™ç±¤ä¸€å¤šï¼Œstyle å€å¡Šä¸­å°±è¦æœ‰è¨±å¤š selectorï¼Œä¹Ÿæ˜¯ä¸ä¾¿æ–¼ä¿®æ”¹åŠç¶­è­·ã€‚\n\u0026amp;lt;link\u0026amp;gt; å°‡ CSS ç¨ç«‹æ–¼å–®ç¨çš„æª”æ¡ˆä¸­ï¼Œå†å¾ HTML ä¸­ä½¿ç”¨ \u0026amp;lt;link\u0026amp;gt; æŒ‡å®š css æª”é€²ä¾†ã€‚ 1\u0026amp;lt;head\u0026amp;gt; 2 \u0026amp;lt;link rel=\u0026amp;#34;stylesheet\u0026amp;#34; href=\u0026amp;#34;./style.css\u0026amp;#34; /\u0026amp;gt; 3\u0026amp;lt;/head\u0026amp;gt; 1/* style.css */ 2div { 3 background : grey; 4} @import @import èªæ³•æœ‰å…©ç¨®ï¼š 1\u0026amp;lt;style\u0026amp;gt; 2 @import \u0026amp;#34;style.css\u0026amp;#34;; 3 @import url(\u0026amp;#34;style.css\u0026amp;#34;); 4\u0026amp;lt;/style\u0026amp;gt; @import æ˜¯ CSS ä¸­çš„ä¸€å€‹ @ è¦å‰‡ï¼Œå¿…é ˆå…ˆæ–¼æ‰€æœ‰å…¶ä»–é¡å‹çš„è¦å‰‡ (@charset è¦å‰‡é™¤å¤–)ï¼Œé ˆå¯«åœ¨ \u0026amp;lt;style\u0026amp;gt; æ¨™ç±¤è£¡ã€‚\néæ¨¡å¡ŠåŒ–é–‹ç™¼æ™‚ç›¡é‡ä¸è¦ç”¨ @import ä½¿ç”¨ @import æœƒå…ˆå°å…¥ html å¾Œæ‰æœƒåŠ è¼‰ CSS æ–‡ä»¶ã€‚\néæ¨¡çµ„åŒ–é–‹ç™¼\næ­£å¸¸é–‹ç™¼æ™‚ï¼Œæ‰€æœ‰çš„ CSS æ–‡ä»¶éƒ½éœ€è¦å¼•å…¥ã€‚å¦‚æœåœ¨æŸå€‹ CSS æ–‡ä»¶ä¸­ä½¿ç”¨äº† @importï¼Œç€è¦½å™¨è¦å…ˆä¸‹è¼‰ä½¿ç”¨äº† @import çš„ CSSï¼Œè§£æå®Œå¾Œç™¼ç¾æœ‰å¦å¤–çš„ CSS æ–‡ä»¶éœ€è¦ä¸‹è¼‰ï¼Œ â€¦","date":"2020-07-15T22:45:00+00:00","updated":"2020-07-15T22:45:00+00:00"},{"objectID":"1594594260","permalink":"/post/programming-html-seo/html-seo/","title":"[HTML] è¨­ç½® html æ¨™ç±¤é”æˆ SEO","content":"SEO\rSearch Engine Optimization æœå°‹å¼•æ“å„ªåŒ–ï¼Œæ˜¯ä¸€ç¨®é€éäº†è§£æœå°‹å¼•æ“çš„é‹ä½œè¦å‰‡ä¾†èª¿æ•´ç¶²ç«™ï¼Œä»¥åŠæé«˜ç›®çš„ç¶²ç«™åœ¨æœ‰é—œæœå°‹å¼•æ“å…§æ’åçš„æ–¹å¼ã€‚\nSEO å„ªåŒ–çš„æ˜¯æŒ‡ä¸é ˆä»˜è²»çš„åŸç”Ÿæµé‡ã€‚\nä»¥ä¸‹æä¾›å¹¾ç¨®ç°¡å–®çš„æ–¹å¼ä¾†é”æˆ\n\u0026amp;lt;meta\u0026amp;gt; tag\rHTML meta æ¨™ç±¤å¯ä»¥ç”¨ä¾†æä¾›ç¶²é å…§å®¹çš„è³‡è¨Šçµ¦ç€è¦½å™¨æˆ–æ˜¯æœå°‹å¼•æ“ã€‚\n\u0026amp;lt;title\u0026amp;gt;é é¢æ¨™é¡Œ\u0026amp;lt;/title\u0026amp;gt;ï¼šé é¢æ¨™é¡Œæ˜¯çˆ¬èŸ²ç¬¬ä¸€å€‹æª¢ç´¢åˆ°çš„è¦ç´ ã€‚ \u0026amp;lt;meta name=\u0026amp;quot;description\u0026amp;quot; content=\u0026amp;quot;ç¶²é èªªæ˜\u0026amp;quot; /\u0026amp;gt;ï¼šæ˜¯åœ¨æœå°‹çµæœé ä¸­å‘ˆç¾çš„ç¶²é èªªæ˜ã€‚ é‡å°ä¸åŒç¤¾ç¾¤ç¶²ç«™çš„ meta tagï¼Œ\nfacebook\nä¾‹å¦‚ä¸‹é¢é€™å››è¡Œæ˜¯å¯«çµ¦ facebook çœ‹çš„ï¼Œåˆ†äº«åˆ° facebook ä¸Šæœƒå‘ˆç¾æŒ‡å®šç•«é¢ï¼š 1\u0026amp;lt;meta property=\u0026amp;#34;og:title\u0026amp;#34; content=\u0026amp;#34;ç¶²ç«™åç¨±æˆ–æ¨™é¡Œ\u0026amp;#34; \u0026amp;gt; 2\u0026amp;lt;meta property=\u0026amp;#34;og:url\u0026amp;#34; content=\u0026amp;#34;ç¶²å€\u0026amp;#34;\u0026amp;gt; 3\u0026amp;lt;meta property=\u0026amp;#34;og:image\u0026amp;#34; content=\u0026amp;#34;è¦é¡¯ç¤ºçš„ç¸®åœ–ç¶²å€\u0026amp;#34;\u0026amp;gt; 4\u0026amp;lt;meta property=\u0026amp;#34;og:description\u0026amp;#34; content=\u0026amp;#34;ç¶²é æè¿°\u0026amp;#34; \u0026amp;gt; app link\nåœ¨æ‰‹æ©Ÿç€è¦½ç¶²é æ™‚ï¼Œæœƒè‡ªå‹•åµæ¸¬æ˜¯å¦æœ‰å®‰è£ appï¼Œä»¥ä¸‹ä»¥ iOS èˆ‰ä¾‹ï¼šã€€1\u0026amp;lt;!-- ç•¶ä½¿ç”¨è€…æœªå®‰è£ Appï¼Œæœƒè·³å‡ºçš„å»ºè­°ä¸‹è¼‰æ–‡å­— --\u0026amp;gt; 2\u0026amp;lt;meta property=\u0026amp;#34;al:ios:app_name\u0026amp;#34; content=\u0026amp;#34;TripAdvisor\u0026amp;#34;\u0026amp;gt; 3\u0026amp;lt;!-- é€™å¯ä»¥è®“ä½¿ç”¨è€…åœ¨æœªå®‰è£ App æ™‚ï¼Œé€£çµè‡³å®‰è£ä½ç½® --\u0026amp;gt; 4\u0026amp;lt;meta property=\u0026amp;#34;al:ios:app_store_id\u0026amp;#34; content=\u0026amp;#34;284876795\u0026amp;#34;\u0026amp;gt; JSON-ld\rJavaScript Object Notation for Linked Dataï¼ŒJSON æ ¼å¼çš„çµ â€¦","date":"2020-07-12T22:51:00+00:00","updated":"2020-07-12T22:51:00+00:00"},{"objectID":"1594589160","permalink":"/post/programmimg-html-basic/html-introduction/","title":"[HTML] ä»‹ç´¹ \u0026 åŸºç¤æ¨™ç±¤","content":"ç¶²é æ˜¯ä»€éº¼\rç¶²é èƒŒå¾Œå°±æ˜¯ä¸€å€‹æœ‰çµæ§‹çš„ç´”æ–‡å­—æª” htmlï¼Œé ç€è¦½å™¨æ¸²æŸ“æˆæˆ‘å€‘ç¾åœ¨çœ‹åˆ°çš„ç•«é¢ã€‚\nHTML\rå…¨åæ˜¯ HyperText Markup Language è¶…æ–‡æœ¬æ¨™è¨˜èªè¨€ï¼Œæ˜¯ä¸€ç¨®ç”¨æ–¼å»ºç«‹ç¶²é çš„æ¨™æº–æ¨™è¨˜èªè¨€ï¼Œæ˜¯ç”±ä¸€å †æˆå°çš„æ¨™ç±¤çµ„åˆè€Œæˆçš„ã€‚\nåŸºæœ¬æ¶æ§‹\r1\u0026amp;lt;!DOCTYPE HTML\u0026amp;gt; 2\u0026amp;lt;html\u0026amp;gt; 3 \u0026amp;lt;head\u0026amp;gt; 4 \u0026amp;lt;/head\u0026amp;gt; 5 \u0026amp;lt;body\u0026amp;gt; 6 \u0026amp;lt;/body\u0026amp;gt; 7\u0026amp;lt;/html\u0026amp;gt; æ’°å¯«è¦å‰‡\rHTMLæ–‡ä»¶è£¡çš„æ¨™ç±¤éœ€æˆå°ï¼Œä»¥\u0026amp;lt;æ¨™ç±¤åç¨±\u0026amp;gt;ç‚ºé–‹é ­ï¼›\u0026amp;lt;/æ¨™ç±¤åç¨±\u0026amp;gt;ç‚ºçµå°¾ã€‚ å¦‚æœæ¨™ç±¤æ²’æœ‰å€¼è¦åŒ…è£¹çš„è©±ï¼Œå‰‡å¯ä»¥ç›´æ¥ä½¿ç”¨ \u0026amp;lt;æ¨™ç±¤åç¨± /\u0026amp;gt; è¦–ç‚ºä¸€çµ„æ¨™ç±¤ã€‚ æ¨™ç±¤å…§å¯æ“å±¬æ€§ï¼Œ\u0026amp;lt;æ¨™ç±¤åç¨± å±¬æ€§åç¨±=\u0026amp;quot;å±¬æ€§å€¼\u0026amp;quot;\u0026amp;gt;æ¨™ç±¤å…§å®¹\u0026amp;lt;?æ¨™ç±¤åç¨±\u0026amp;gt;ï¼Œå±¬æ€§å¯æœ‰é›¶å€‹æˆ–å¤šå€‹ï¼Œä»¥ç©ºæ ¼åˆ†é–‹ã€‚ è¨»è§£æ–‡å­—ä½¿ç”¨ \u0026amp;lt;!--è¨»è§£--\u0026amp;gt;ã€‚ HTMLæ¨™ç±¤ä¸åˆ†å¤§å°å¯«ã€‚ \u0026amp;lt;!DOCTYPE HTML\u0026amp;gt;\rå‘ŠçŸ¥ç€è¦½å™¨è¦ä½¿ç”¨æœ€æ–°ç‰ˆçš„ HTML 5 èªæ³•è§£è®€æ–‡ä»¶ï¼Œè¦å®šå¿…é ˆæ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œå¦å‰‡ç€è¦½å™¨æœƒèªä¸å¾—ã€‚\n\u0026amp;lt;html\u0026amp;gt;\u0026amp;lt;/html\u0026amp;gt;\rç”¨ä¾†åŒ…è£¹æ•´å€‹ html å…§å«çš„ç¨‹å¼ç¢¼ï¼Œä»£è¡¨ç¶²é çš„é–‹å§‹å’ŒçµæŸã€‚\n\u0026amp;lt;head\u0026amp;gt;\u0026amp;lt;/head\u0026amp;gt;\rç”¨ä¾†æ”¾ç¶²é çš„æè¿°ã€‚ä¸»è¦ç”¨ä¾†å‘Šè¨´æœå°‹å¼•æ“é€™å€‹ç¶²é æœ‰ä»€éº¼æ¨£çš„å…§å®¹ã€æ§åˆ¶ç¶²é èˆ‡å¤–éƒ¨ç¨‹å¼ç¢¼çš„é€£çµ (script)ã€å®šç¾©ç¶²é ä½¿ç”¨çš„æ¨£å¼ç­‰ç­‰ (css)ã€‚å¸¸ç”¨çš„æ¨™ç±¤æœ‰ï¼š\n\u0026amp;lt;title\u0026amp;gt;: ç¶²é æ¨™é¡Œ \u0026amp;lt;meta\u0026amp;gt; : æä¾›æœå°‹å¼•æ“é—œæ–¼ç¶²é å…§å®¹çš„ç°¡ä»‹ \u0026amp;lt;link\u0026amp;gt; : ç¶²é å…§èˆ‡å¤–éƒ¨è³‡æºçš„é—œé€£ \u0026amp;lt;base\u0026amp;gt; : è¨­å®šç¶²é å…§ URL çš„é è¨­ç›®æ¨™ \u0026amp;lt;style\u0026amp;gt; : å°å…¥ç¶²é æ¨£å¼ï¼Œå¦‚ CSS \u0026amp;lt;script\u0026amp;gt; : å°å…¥ javascript ç¨‹å¼ç¢¼ 1\u0026amp;lt;head\u0026amp;gt; 2 \u0026amp;lt;meta charset=\u0026amp;#34;utf-8\u0026amp;#34;\u0026amp;gt; 3 \u0026amp;lt;meta name=\u0026amp;#34;keywords\u0026amp;#34; content=\u0026amp;#34;ç¶²é é—œéµå­—\u0026amp;#34;\u0026amp;gt; 4 \u0026amp;lt;meta â€¦","date":"2020-07-12T21:26:00+00:00","updated":"2020-07-12T21:26:00+00:00"},{"objectID":"1593730800","permalink":"/post/programming-api-curl/api-curl/","title":"[API] curl ä½¿ç”¨æŒ‡å—","content":"curl\rcurl å¯ä»¥ç”¨ä¾†è«‹æ±‚ Web æœå‹™å™¨ã€æ”¯æŒæ–‡ä»¶çš„ä¸Šå‚³å’Œä¸‹è¼‰ã€‚å®ƒçš„åå­—å°±æ˜¯ client + URL çš„æ„æ€ã€‚\nåŸºæœ¬æŒ‡ä»¤æ ¼å¼\r1$ curl [options] [URL] HTTP request\r1-X/--request [GET|POST|PUT|DELETE|â€¦]\tä½¿ç”¨æŒ‡å®šçš„ http method ç™¼å‡º http request 2 3-H/--header\tè¨­å®šrequest è£¡çš„ header 4 5-i/--include\té¡¯ç¤ºresponse çš„ header 6 7-d/--data\tè¨­å®š http parameters 8 9-v/--verbose\tè¼¸å‡ºæ¯”è¼ƒå¤šçš„è¨Šæ¯ 10 11-u/--user\tä½¿ç”¨è€…å¸³è™Ÿã€å¯†ç¢¼ 12 13-b/--cookie\tcookie GET\r1$ curl https://github.com/ulahsieh ä¸å¸¶æœ‰ä»»ä½•åƒæ•¸æ™‚ï¼Œcurl å°±æ˜¯ç™¼å‡º GET è«‹æ±‚ï¼Œå¯ä»¥æ–¹ä¾¿ä½ æ¸¬è©¦ http server æ˜¯å¦é‹ä½œæ­£å¸¸ã€‚\nPOST\rHttp åƒæ•¸å¯ä»¥ç›´æ¥åŠ åœ¨ url çš„ query stringï¼Œä¹Ÿå¯ä»¥ç”¨ -d å¸¶å…¥åƒæ•¸é–“ç”¨ \u0026amp; ä¸²æ¥ï¼Œæˆ–ä½¿ç”¨å¤šå€‹ -d\n1curl -X POST -d \u0026#34;param1=value1\u0026amp;param2=value2\u0026#34; æª”æ¡ˆä¸Šå‚³ 1$ curl -X POST -F \u0026#39;file=@./upload.txt\u0026#39; http://www.example.com/upload.php -F æ˜¯ä½¿ç”¨http query parameterçš„æ–¹å¼ï¼ŒæŒ‡å®šæª”æ¡ˆä½ç½®çš„åƒæ•¸è¦åŠ ä¸Š @\nèªè­‰\rè¨±å¤šæœå‹™ï¼Œéœ€å…ˆé€²è¡Œç™»å…¥æˆ–èªè­‰å¾Œï¼Œæ‰èƒ½å­˜å–å…¶ API æœå‹™ã€‚å¯ä»¥é€é cookieã€session æˆ–åœ¨ header åŠ å…¥ session keyã€èªè­‰çš„ token ä¾†é©—è­‰ã€‚\nSession\nå¦‚æœæ˜¯ç”¨ session è¨˜éŒ„ä½¿ç”¨è€…ç™»å…¥è³‡è¨Šï¼Œserver æœƒå‚³ä¸€å€‹ session id çµ¦å‰ç«¯ï¼Œå‰ç«¯éœ€è¦åœ¨æ¯æ¬¡è·Ÿå¾Œç«¯çš„ requests header ä¸­ç½®å…¥æ­¤session idï¼Œå¾Œç«¯ä¾¿æœƒä»¥æ­¤ session id è­˜åˆ¥å‰ç«¯ã€‚ 1curl --request GET \u0026#39;http://www.example.com/api/users\u0026#39; --header \u0026#39;sessionid:xxxxxxx\u0026#39; Cookie\nåœ¨èªè­‰å¾Œï¼Œå¾Œç«¯æœƒå›å‚³ä¸€å€‹ cookieï¼ŒæŠŠè©² cookie å­˜æˆæª”æ¡ˆï¼Œç•¶è¦å­˜å–éœ€è¦ä»»å‹™çš„ url æ™‚ï¼Œå†ç”¨ -b cookie_file çš„æ–¹å¼åœ¨ request ä¸­æ¤å…¥ cookie å³å¯æ­£å¸¸ä½¿ç”¨ã€‚ 1# å°‡cookieå­˜æª” 2curl -i -X POST -d username=ula -d password=1234 -c ~/cookie.txt http://www.example.com/auth 3# è¼‰å…¥cookieåˆ°requestä¸­\t4curl -i --header \u0026#34;Accept:application/json\u0026#34; -X GET -b ~/cookie.txt http://www.example.com/users/1 å…¶ä»–å¸¸ç”¨åˆ°çš„åƒæ•¸\r1--user-agent \u0026lt;string\u0026gt;\tè¨­ç½®ç”¨æˆ¶ä»£ç†ç™¼é€çµ¦æœå‹™å™¨ 2 3--header \u0026lt;line\u0026gt;\tè‡ªå®šç¾©é ­ä¿¡æ¯å‚³éçµ¦æœå‹™å™¨ 4 5-I\tåªé¡¯ç¤º response header 6 7-u/--user \u0026lt;user[:password]\u0026gt;\tè¨­ç½®æœå‹™å™¨çš„ç”¨æˆ¶å’Œå¯†ç¢¼ 8 9-x \u0026lt;IP\u0026gt;\tè¡¨ç¤ºä½¿ç”¨é€™å€‹ä»£ç†IPå»è«‹æ±‚å…¶ä»–çš„ç¶²é  10 11-s\téœé»˜æ¨¡å¼ï¼Œä¸é¡¯ç¤ºè¿”å›çš„ä¸€å¤§å †é é¢å…§å®¹ 12 13-o \u0026lt;æª”æ¡ˆåç¨±\u0026gt;\tå–å¾—ç¶²é å…§å®¹ï¼Œè¼¸å‡ºè‡³æª”æ¡ˆ 14 15-L\tè¡¨ç¤ºå¦‚æœåœ¨response headerä¸­å¦‚æœæœ‰ location çš„è©±å°±ç›´æ¥è½‰å‘åˆ° locationçš„åœ°å€ (redirectåœ°å€) æ†‘è­‰éŒ¯èª¤çš„å•é¡Œ\rå¦‚æœæœ‰é‡åˆ°ä»¥ä¸‹éŒ¯èª¤ï¼Œä»£è¡¨ curl ä¸èªå¾— CA æ†‘è­‰ï¼š è¦é¿å…é€™å€‹æƒ…æ³çš„è©±ï¼Œéœ€è¦åœ¨ curl æŒ‡ä»¤å¾Œé¢åŠ ä¸Š -k æˆ– â€“insecure åƒæ•¸ï¼Œé€™æ¨£ curl ä¾¿ä¸æœƒæª¢æŸ¥ SSL çš„æœ‰æ•ˆæ€§ï¼Œä¾‹å¦‚ï¼š\n$ curl -k https://github.com/ulahsieh $ curl --insecure https://github.com/ulahsieh\nReference\rtesting-rest-with-curl-command\r","date":"2020-07-02T23:00:00+00:00","updated":"2020-07-02T23:00:00+00:00"},{"objectID":"1593724200","permalink":"/post/programming-api/api-data-transform/","title":"[API] ç°¡ä»‹åŠå¯¦ä½œ \u0026 è³‡æ–™äº¤æ›æ ¼å¼ - XML, JSON, SOAP","content":"API\rApplication Programming Interface æ‡‰ç”¨ç¨‹å¼ä»‹é¢ï¼Œå…¶ä¸­ã€ä»‹é¢ã€å°±æ˜¯æºé€šçš„ç®¡é“ï¼Œæ¯”å¦‚èªª USB éš¨èº«ç¢Ÿçš„ä»‹é¢å°±æ˜¯ USBï¼æ‰€æœ‰é›»è…¦ä»¥åŠ USB éš¨èº«ç¡¬ç¢Ÿçš„å» å•†åªè¦æŒ‰ç…§ USB çš„è¦å‰‡è£½é€ å°±èƒ½ä½¿ç”¨æ­¤ä»‹é¢å»æºé€šã€‚\næä¾› API \u0026amp;amp; ä½¿ç”¨ API\ræ¯”å¦‚é›»è…¦ä½¿ç”¨è€…èªªæƒ³çŸ¥é“ç¶²è·¯ç‹€æ³ï¼Œä½œæ¥­ç³»çµ±åº•å±¤è®Šæä¾›äº† API è®“æˆ‘å€‘ä½¿ç”¨ã€‚åˆæ¯”å¦‚èªªæƒ³è¦æ›´æ”¹æŸå€‹ç¶²ç«™çš„æœƒå“¡è³‡æ–™ï¼Œé‚£é€™å€‹ç¶²ç«™å°±æä¾›äº† API è®“æˆ‘å€‘èƒ½åœ¨ç¶²ç«™ä¸Šä¿®æ”¹è³‡æ–™åº«çš„æœƒå“¡è³‡æ–™ã€‚æˆ–æ˜¯è¦åœ¨ç¶²é ä¸ŠåŠ å…¥ google map çš„åŠŸèƒ½ï¼Œå°±éœ€ä½¿ç”¨ google map æä¾›çš„ APIã€‚\næ‰€ä»¥ API å¯ä»¥æƒ³æˆæ˜¯æŸç¨®åŠŸèƒ½ï¼Œç”¨ä»¥æºé€šå…©å€‹ä¸åŒçš„æ±è¥¿ç”¨çš„ã€‚\rWebAPI\ræŒ‡ HTTP APIï¼Œé€é HTTP å”å®šçš„ APIã€‚é€šå¸¸é€é HTTP method å»å‘¼å« API é€²è€Œäº¤æ›è³‡æ–™ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸Ÿ requestï¼Œç„¶å¾Œæ‹¿åˆ° response çš„è³‡æ–™ã€‚\nSDK\rSoftware Development Kit è»Ÿé«”é–‹ç™¼å¥—ä»¶ï¼Œæ˜¯ç”¨ä¾†é–‹ç™¼ç‰¹å®šæ‡‰ç”¨ç¨‹å¼çš„å·¥å…·çµ„ï¼Œé€šå¸¸æ˜¯å» å•†é‡å°æŸä¸€å¹³è‡ºã€ç³»çµ±ã€æˆ–ç¡¬é«”æ‰€é‡‹å‡ºï¼Œç”¨ä»¥é–‹ç™¼æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·çµ„ï¼Œåœ¨é€™å€‹å·¥å…·åŒ…è£¡é¢ï¼Œå¯èƒ½åŒ…å«äº†å„å¼å„æ¨£çš„é–‹ç™¼å·¥å…·ï¼Œæ¨¡æ“¬å™¨æˆ– API ç­‰ã€‚\napi ä¸²æ¥å¯¦ä½œ\rå°‡ä½¿ç”¨ reqres\rç¶²ç«™ç•¶ä½œä¼ºæœå™¨ï¼Œä¸‹ API å»å–å¾—è©²ç¶²ç«™çš„è³‡æ–™ã€‚å¦å¤–ä½¿ç”¨ request node module å¯¦ä½œã€‚\nç™¼ request åˆ°ç¶²å€ï¼Œä¸¦å°å‡º body 1const request = require(\u0026amp;#39;request\u0026amp;#39;); 2request( 3 \u0026amp;#39;https://reqres.in/api/users?page=2\u0026amp;#39;, 4 function(error, response, body) { 5 if (error) { 6 return console.log(\u0026amp;#39;request failed\u0026amp;#39;, err); 7 } 8 console.log(body) 9 } 10); å°å‡ºæ‰€æœ‰ user list\nç™¼ request åˆ°ç¶²å€ï¼Œä¸¦å°å‡ºå–®ä¸€ä½¿ç”¨è€…è³‡æ–™ 1const request = require(\u0026amp;#39;request\u0026amp;#39;); 2request( 3 â€¦","date":"2020-07-02T21:10:00+00:00","updated":"2020-07-02T21:10:00+00:00"},{"objectID":"1593625260","permalink":"/post/programming-install-java11-on-win10/install-java10-on-win11/","title":"[Java] Install Java on Win11","content":"é¸æ“‡ Java ç‰ˆæœ¬\rJava æ›´æ–°é€Ÿåº¦ä¹‹å¿«ï¼Œæˆªè‡³ä»Šå¤©å·²ç¶“å‡ºåˆ° Java 14 äº†ï¼æœ¬ä¾†æ˜¯æƒ³éš¨æ³¢é€æµçš„è£ Java 8 ä½†åƒè€ƒäº†é€™ç¯‡\ræ–‡ç« \rå¾Œï¼Œé‚„æ˜¯æ±ºå®šè£ 11ã€‚\nJDK å¯ä»¥å¾ AdoptOpenJDK\rä¸‹è¼‰ï¼ŒAdoptOpenJDK æ˜¯ Java ä½¿ç”¨è€…ç¤¾ç¾¤å»ºç«‹çš„ï¼Œè‡´åŠ›æ–¼å€¡å° OpenJDKï¼Œä¸Šé¢æ”¯æ´çš„ä½œæ¥­ç³»çµ±ä»¥åŠå°æ‡‰çš„ JDK ç‰ˆæœ¬ (8~11) æœ€é½Šå…¨ã€‚\nå®‰è£\råœ¨ç¶²ç«™ä¸Šä¸‹è¼‰ .msi æª”å¾ŒåŸ·è¡Œï¼Œåœ¨å®¢è£½å®‰è£é é¢ä¸€ä½µæŠŠç¬¬ä¸‰å€‹é¸é … Set JAVA_HOME variable è¨­èµ·ä¾†ã€‚\nè¨­å®š PATH ç³»çµ±è®Šæ•¸\rè¨­å®š path ç’°å¢ƒè®Šæ•¸çš„ç›®çš„æ˜¯ç‚ºäº†è¦ä¸Šä½œæ¥­ç³»çµ±æ‰¾åˆ° Java åœ¨å“ªã€‚ ç·¨è¼¯ç³»çµ±è®Šæ•¸æ¬„ä½ä¸­çš„ Pathï¼Œä¸¦åŠ å…¥ %JAVA_HOME% çš„é¸é …ï¼Œç„¶å¾ŒæŠŠå®ƒç§»åˆ°æœ€å‰é¢ã€‚ç•¶é›»è…¦ä¸­å®‰è£å…©å€‹ä»¥ä¸Šçš„ä¸åŒç‰ˆæœ¬çš„ Javaï¼Œå‰‡ç’°å¢ƒè®Šæ•¸æ”¾åœ¨å‰é¢çš„æœƒå…ˆè¢«åŸ·è¡Œã€‚\nç¢ºèªå®‰è£\ré–‹å•Ÿ CMD ä¸¦ä¸‹ä¸‹æ–¹å…©å€‹æŒ‡ä»¤ï¼Œç¢ºèªå®‰è£æ˜¯å¦æˆåŠŸã€‚\n1$ java -version 2$ javac -version Hello World!\r1//Hello.java 2public class Hello { 3 public static void main(String []args) { 4 System.out.println(\u0026#34;Hello World!\u0026#34;) 5 } 6} Note\né—œæ–¼ç¨‹å¼å…§éƒ¨è©³ç´°çš„è§£èªªï¼Œä¹‹å¾Œçš„æ–‡ç« æœƒè¨˜éŒ„ã€‚ (ä¸éæœ¬ä¾†å› ç‚ºæ•¸æ“šä¸­å°çš„å°ˆæ¡ˆè¦ç”¨ Map Reduce æ‰€ä»¥å­¸çš„ï¼Œä½†å› ç‚ºå·¥ä½œåˆæœ‰å°è®Šå‹•ï¼Œæ‰€ä»¥ä¸çŸ¥é“ä½•å¹´ä½•æœˆæ‰å¯ä»¥å†ç¹¼çºŒçœ‹ Javaï¼Œå…ˆæš«ç·©äº† ğŸ˜ )\nç·¨è­¯æª”æ¡ˆ\rä½¿ç”¨ javac å…¬ç”¨ç¨‹å¼ä¾†ç·¨è­¯æª”æ¡ˆã€‚\n1$ javac Hello.java å®Œæˆå¾Œåœ¨ç›®éŒ„ä¸‹å°±æœƒå‡ºç¾ä¸€å€‹ Hello.class çš„ java ä½å…ƒç¢¼ (bytecode)ã€‚\nåŸ·è¡Œ\r1$ java Hello ä½¿ç”¨ java å·¥å…·ç¨‹å¼åŸ·è¡Œï¼Œä¸é ˆå¸¶é™„æª”åï¼ŒJava æœƒæ ¹æ“šé¡åˆ¥åç¨±è‡ªå‹•è¼‰å…¥ .class æª”æ¡ˆã€‚ ","date":"2020-07-01T17:41:00+00:00","updated":"2020-07-01T17:41:00+00:00"},{"objectID":"1593621660","permalink":"/post/programming-java-jvm/java-jvm-structure/","title":"[Java] JVM æ¶æ§‹","content":"å‰ä¸€ç¯‡ä»‹ç´¹åˆ° Java ç¨‹å¼ç¶“éç·¨è­¯å¾Œæœƒç”¢ç”Ÿ .class æª” (bytecode)ï¼Œåªèƒ½é‹è¡Œåœ¨ JVM ä¸Šï¼Œè€Œ JVM åœ¨é‹ç®—æ™‚ï¼Œå¦‚åŒé›»è…¦éœ€è¦è¨˜æ†¶é«”å„²å­˜é‹ç®—æ‰€éœ€çš„å„ç¨®è³‡æ–™åŠæŒ‡ä»¤ï¼Œé€™ç¯‡æ–‡ç« å°‡ç´€éŒ„ JVM çš„æ¶æ§‹ã€‚\nJVM Structure\r[1]\nä¸Šåœ–ç‚º JVM åŸ·è¡Œä¸€å€‹ Java ç¨‹å¼çš„éç¨‹ï¼š\nClass Loader\rç”¨æ–¼å°‡ç·¨è­¯å¥½çš„ .class æ–‡ä»¶ ï¼ Java Bytecode åŠ è¼‰åˆ° Runtime Data Areasã€‚\nExecution Engine\rç”¨æ–¼åŸ·è¡Œ Java Bytecode æˆ–æ˜¯ native method\r.\nJava Bytecode æ˜¯ä»¥äººé¡ä»ç„¶å¯ä»¥ç†è§£çš„èªè¨€è€Œä¸æ˜¯æ©Ÿå™¨èªè¨€ç·¨å¯«çš„ã€‚å› æ­¤ï¼ŒExecution Engine é€éä»¥ä¸‹å…©ç¨®æ–¹å¼å°‡å­—ç¯€ç¢¼è½‰ç‚º JVM ä¸­çš„æ©Ÿå™¨èªè¨€ã€‚\nInterpreter JIT (Just-In-Time) Compiler ä»€éº¼æ™‚å€™ç”¨ Interpreter ä»€éº¼æ™‚å€™ç”¨ Compiler?\nThe application code is initially interpreted, but the JVM monitors which part of bytecode are frequently executed and translates them to machine code for direct execution on the hardware. For bytecode which is executed only a few times, interpret it will saves the compilation time and reduces the initial latency; For frequently executed bytecode, JIT compilation will be used after an initial phase of slow interpretation. By interpreting the initial code, execution statistics can be collected before compilation, which helps to perform better optimization.[3] â€¦","date":"2020-07-01T16:41:00+00:00","updated":"2020-07-01T16:41:00+00:00"},{"objectID":"1593621480","permalink":"/post/programming-java-jdk-jre/java-jdk-jre-jvm-intro/","title":"[Java] What are JDK, JRE, JDM ?","content":"æ¯”è¼ƒ\rJDKï¼ˆJava Development Kitï¼ŒJavaé–‹ç™¼å·¥å…·åŒ…ï¼‰\næ˜¯ç”¨ä¾†ç·¨è­¯ã€èª¿è©¦ Java ç¨‹åºçš„é–‹ç™¼å·¥å…·åŒ…ã€‚çµ„æˆåŒ…å« Javaå·¥å…·ï¼ˆjavac/java/jdbç­‰ï¼‰å’Œ Java åŸºç¤çš„é¡åº«ã€‚\nJREï¼ˆJava Runtime Environmentï¼Œ Javaé‹è¡Œç’°å¢ƒï¼‰\næ‰€æœ‰çš„ java ç¨‹åºéƒ½è¦åœ¨ JRE ä¸‹æ‰èƒ½å¤ é‹è¡Œã€‚çµ„æˆåŒ…å« JVM å’Œ Java æ ¸å¿ƒé¡åº«å’Œæ”¯æŒæ–‡ä»¶ã€‚\nJVMï¼ˆJava Virtual Machineï¼Œ Javaè™›æ“¬æ©Ÿï¼‰\næ˜¯JREçš„ä¸€éƒ¨åˆ†ï¼Œè™›æ“¬æ©Ÿä»£è¡¨é€šéåœ¨å¯¦é«”è¨ˆç®—æ©Ÿä¸Šæ¨¡æ“¬è¨ˆç®—æ©ŸåŠŸèƒ½ï¼ŒJVM æœ‰è‡ªå·±çš„ç¡¬é«”æ¶æ§‹ä»¥åŠæŒ‡ä»¤ç³»çµ±ï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯è§£é‡‹ï¼ˆç·¨è­¯ï¼‰è‡ªå·±çš„æŒ‡ä»¤é›†ï¼ˆå³å­—ç¯€ç¢¼ï¼‰ä¸¦æ˜ å°„åˆ°æœ¬åœ°çš„CPUæŒ‡ä»¤é›†å’ŒOSçš„ç³»çµ±èª¿ç”¨ï¼Œä¸åŒçš„æ“ä½œç³»çµ±æœƒæœ‰ä¸åŒçš„JVMæ˜ å°„è¦å‰‡ï¼Œå¯¦ç¾ Java çš„è·¨å¹³å°ç‰¹æ€§ã€‚ çµ„æˆåŒ…å«å­—ç¯€ç¢¼æŒ‡ä»¤é›†ã€å¯„å­˜å™¨ã€æ£§ã€åƒåœ¾å›æ”¶å †å’Œå­˜å„²æ–¹æ³•åŸŸ\u0026hellip;ç­‰ã€‚\n[1]\nå°çµ\rä½¿ç”¨ JDK é–‹ç™¼ JAVA ç¨‹åºï¼Œå†é€šé JDK ä¸­çš„ç·¨è­¯ç¨‹åºï¼ˆjavacï¼‰å°‡ Java ç¨‹åºç·¨è­¯æˆ Java Byte Codeï¼ˆå­—ç¯€ç¢¼ï¼‰ï¼Œåœ¨ JRE ä¸Šé‹è¡Œé€™äº›å­—ç¯€ç¢¼ï¼ŒJVM æœƒè§£æä¸¦æ˜ å°„åˆ°çœŸå¯¦æ“ä½œç³»çµ±çš„ CPU æŒ‡ä»¤é›†å’Œ OS çš„ç³»çµ±èª¿ç”¨ã€‚ [2]\n[3]\nJavaÂ SEã€JavaÂ MEã€JavaÂ EE\réš¨è‘—Â JavaÂ çš„æ‡‰ç”¨é ˜åŸŸæ“´å±•ï¼Œè€Œç™¼å±•å‡ºçš„ä¸åŒçš„æ‡‰ç”¨é–‹ç™¼å¹³å°ã€‚ -Â JavaÂ SEï¼šJavaÂ Platform,Â StandardÂ Editionï¼ŒJavaÂ å„æ‡‰ç”¨å¹³è‡ºçš„åŸºç¤ï¼Œå¯ä»¥åˆ†ä½œå››å€‹ä¸»è¦çš„éƒ¨ä»½ï¼šJVMã€JREã€JDKèˆ‡Javaèªè¨€ã€‚ -Â JavaÂ EEï¼šJavaÂ Platformï¼ŒEnterpriseÂ Editionï¼Œæ˜¯åœ¨Â JavaÂ SEÂ çš„åŸºç¤ä¸Šæ§‹å»ºçš„ï¼Œæä¾›Â WebÂ æœå‹™ã€å…ƒä»¶æ¨¡å‹ã€ç®¡ç†å’Œé€šè¨ŠÂ APIï¼Œ -Â JavaÂ MEï¼šJavaÂ Platformï¼ŒMicroÂ Editionï¼Œæ˜¯Â JavaÂ å¹³è‡ºç‰ˆæœ¬ä¸­æœ€å°çš„ä¸€å€‹ï¼Œç›®çš„æ˜¯ä½œç‚ºå°å‹æ•¸ä½è¨­å‚™ä¸Šé–‹ç™¼åŠéƒ¨ç½²æ‡‰ç”¨ç¨‹å¼çš„å¹³è‡ºï¼Œåƒæ˜¯æ¶ˆè²»æ€§é›»å­ç”¢å“æˆ–åµŒå…¥å¼ç³»çµ±ç­‰ã€‚\nå°çµ\rJavaÂ SEÂ æ˜¯åšé›»è…¦ä¸ŠåŸ·è¡Œçš„è»Ÿé«”ã€‚ JavaÂ EEÂ æ˜¯ç”¨ä¾†åšç¶²ç«™çš„-ï¼ˆæˆ‘å€‘å¸¸è¦‹çš„JSPæŠ€è¡“ï¼‰ JavaÂ MEÂ æ˜¯åšæ‰‹æ©Ÿè»Ÿé«”çš„ã€‚\nsource\r[1]Â difference-between-jdk-jre-and-jvm\r[2]Â https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/654140/ [3]\rc-and-java-virtual-machine-code-execution\r[4]Â https://www.ithome.com.tw/article/124269 ","date":"2020-07-01T16:38:00+00:00","updated":"2020-07-01T16:38:00+00:00"},{"objectID":"1593570240","permalink":"/post/netwrok-http/tcpip-http/","title":"[TCP/IP] æ‡‰ç”¨å±¤ - HTTP","content":"HTTP\rHyperText Transfer Protocol è¶…æ–‡æœ¬å‚³è¼¸å”å®šï¼Œæ˜¯ç¶²é çš„åŸºç¤é€šè¨Šå”å®šï¼ŒåŸºæ–¼ client-server æ¶æ§‹ä¾† request-reponseï¼Œç”¨ä¾†åœ¨ client ä»¥åŠ server é–“å‚³éè¶…åª’é«”æ–‡ä»¶(å¦‚ HTML) ã€‚\né‹ä½œæ¨¡å‹\rclient å‚³ http request åˆ° server server å›å‚³ http response (html) [1]\nHTTP Client å¯¦ç¾ç¨‹å¼æœ‰ç€è¦½å™¨ã€å‘½ä»¤åˆ—å·¥å…· \u0026hellip; ç­‰ HTTP Server å¯¦ç¾ç¨‹å¼æœ‰ httpdã€nginxã€apache \u0026hellip; ç­‰ https çš„ s ä»£è¡¨ secureï¼Œæ˜¯ä¸€å€‹æ¯” http æ›´å®‰å…¨çš„é€£ç·šæ–¹å¼ Http Method\rMETHOD å®‰å…¨æ€§ å‹•ä½œ èªæ„ GET O è®€å– è«‹æ±‚æ‰€éœ€è¦çš„è³‡æºã€‚ POST O æ–°å¢ åœ¨è«‹æ±‚ä¸­æ”œå¸¶ request bodyï¼Œä¸¦åŸ·è¡Œç‰¹å®šè³‡æºçš„è™•ç†ã€‚ HEAD X è®€å– server åƒ…å›æ‡‰ç‹€æ…‹ä»¥åŠ headerã€‚ PUT x å®Œæ•´æ›´æ–° è«‹æ±‚æ›´æ–°ä¸€ç­†è³‡æºçš„æ‰€æœ‰å…§å®¹ï¼Œå¿…é ˆæ˜¯å­˜åœ¨çš„è³‡æºï¼Œè³‡æºå‚³éå¿…é ˆå®Œæ•´ï¼Œå¦å‰‡ç‚ºç©ºã€‚ PATCH X éƒ¨åˆ†æ›´æ–° è«‹æ±‚æ›´æ–°ä¸€ç­†è³‡æºçš„éƒ¨åˆ†å…§å®¹ï¼Œå¿…é ˆæ˜¯å­˜åœ¨çš„è³‡æºã€‚ DELETE x åˆªé™¤ è«‹æ±‚ç§»é™¤è³‡æºã€‚ [2] Http ç‹€æ…‹ç¢¼\rç‹€æ…‹ç¢¼é€šå¸¸éƒ½ä»¥é–‹é ­çš„æ•¸å­—åšå€åˆ†ï¼Œä¾‹å¦‚ 2 é–‹é ­çš„ç‹€æ…‹ç¢¼éƒ½æ˜¯ä»£è¡¨æˆåŠŸã€‚\n1xx informationa - åƒè€ƒè³‡è¨Š 2xx Successful - æˆåŠŸ 3xx Redirection - é‡æ–°å°å‘ 4xx Client Error - ç”¨æˆ¶ç«¯éŒ¯èª¤ 5xx Server Error - ä¼ºæœå™¨éŒ¯èª¤ è©³ç´°ä»£ç¢¼å¯åƒè€ƒ wiki\rã€‚ è‡ªå·±çš„ request è‡ªå·±ç™¼ - å¯¦ä½œ http client\rå‰é¢æœ‰æåˆ°å¯¦ç¾ http client æœ‰ç€è¦½å™¨é‚„æœ‰å…¶ä»–è«¸å¦‚ CLIã€çˆ¬èŸ² \u0026hellip; çš„ç¨‹å¼ã€‚é€™é‚Šæˆ‘å€‘ä¾†å¯¦ä½œä¸€å€‹ä½¿ç”¨ request\rnode module çš„ http clientã€‚\n$ npm install request åœ¨ index.js æª”æ¡ˆä¸­è²¼ä¸Š $ node index.jsï¼Œå°±å¯ä»¥æ”¶åˆ° server çš„å›è¦† æ¶ä¸€å€‹ç°¡æ˜“ http server\rä½¿ç”¨ Node.js çš„å…§å»ºæ¨¡çµ„ httpï¼Œ\n1var http = require(\u0026#39;http\u0026#39;) 2var server = http.createServer(handelRequest) 3function handelRequest(req, res) { 4 if(req.url === \u0026#39;/\u0026#39;){ //æ ¹æ“š request çš„è³‡æº 5 res.write(\u0026#39;welcome!\u0026#39;) //çµ¦ ç›¸å°æ‡‰çš„ response 6 res.end() 7 return 8 } 9 if(req.url === \u0026#39;/hello\u0026#39;) { 10 res.write(\u0026#39;hello\u0026#39;) 11 res.end() 12 return 13 } 14 if(req.url === \u0026#39;/redirect\u0026#39;) { 15 res.writeHead(302, { //å¦‚æœ url æ˜¯ /redirect çš„è©±å‰‡è½‰å€åˆ° /hello 16 \u0026#39;Location\u0026#39; : \u0026#39;/hello\u0026#39; 17 }) 18 res.end() 19 return 20 } 21 res.writeHead(404) 22 res.end() 23} 24server.listen(5000) //port $ node index.js åŸ·è¡Œå¾Œï¼Œé–‹å•Ÿç€è¦½å™¨è¼¸å…¥ 127.0.0.1:5000ï¼Œä¾¿å¯ä»¥çœ‹åˆ° response çš„çµæœã€‚\nç¬¬ 14 è¡Œï¼Œå¦‚æœç¶²å€çµå°¾æ˜¯ /redirect çš„è©±ï¼Œè½‰åˆ°å…¶ä»–ä½å€ã€‚\nç¬¬ 21 è¡Œï¼Œä»£è¡¨å¦‚æœå¸¶éŒ¯èª¤çš„ url çš„è©±ï¼Œå›å¾© 404 status codeã€‚\nReference\r[1]https://techthatmatter.com/best-fastest-bsnl-dns-servers/\n[2]https://hackmd.io/@monkenWu/Sk9Q5VoV4/https%3A%2F%2Fhackmd.io%2F%40gen6UjQISdy0QDN62cYPYQ%2FH1yxwXyNN?type=book\n","date":"2020-07-01T10:24:00+08:00","updated":"2020-07-01T10:24:00+08:00"},{"objectID":"1593559800","permalink":"/post/network-tcp-udp/tcp-upd/","title":"[TCP/IP] å‚³è¼¸å±¤ - TCP , UDP","content":"å‚³è¼¸å±¤ Transport Layer\rPort\ré€£æ¥åŸ /ç«¯å£ã€‚æœ‰äº†ç¶²éš›ç¶²è·¯å±¤çš„ IP ä½å€ä¹‹å¾Œï¼Œå°±å¯ä»¥æŠŠæª”æ¡ˆå‚³è¼¸åˆ°ç›®æ¨™é›»è…¦ä¸Šï¼Œä½†æ˜¯ä¸€å°é›»è…¦ä¸Šå¯èƒ½æœ‰è¨±å¤šä¸åŒçš„æ‡‰ç”¨ç¨‹å¼ï¼Œæ²’è¾¦æ³•çŸ¥é“é€™å€‹æª”æ¡ˆè¦ç”±é›»è…¦ä¸Šçš„å“ªä¸€å€‹æ‡‰ç”¨ç¨‹å¼è™•ç†ï¼Œå› æ­¤å‡ºç¾äº† portã€‚ä½¿ç”¨ port å°±å¯ä»¥å€åˆ¥é€™äº›æœå‹™ï¼Œå¦‚æœæœ‰æœå‹™çš„ç¨‹å¼åœ¨ç›£è½é€™å€‹åŸ è™Ÿçš„è©±ï¼Œå°±æœƒæ”¶åˆ° requestã€‚\nå¸¸ç”¨çš„ port æœ‰ï¼š http 80, https 443, ftp 21ã€‚\nTCP\rTransmission Control Protocol å‚³è¼¸æ§åˆ¶å”å®šï¼ŒTCP ç‚ºå¯é çš„å‚³è¼¸å”å®šï¼Œé€šè¨Šå‰é ˆå…ˆå»ºç«‹ã€Œé€£ç·šã€ï¼Œé€£ç·šå®Œæˆå¾Œé€²è¡Œã€Œé€šè¨Šã€ï¼Œé€šè¨Šå®Œç•¢å¾Œã€Œä¸­æ–·é€£ç·šã€ï¼Œæ‡‰ç”¨å¦‚ http, ftpã€‚\nå»ºç«‹é€£ç·š - ä¸‰æ¬¡äº¤æ¡\rClient å‚³é€å»ºç«‹é€£ç·šè¨Šæ¯çµ¦ Serverï¼Œè£¡é¢æœ‰å€‹åŒ…å€‹æ•¸å­— x (ä¾‹å¦‚ 1000)ã€‚ Server æ”¶åˆ°å¾Œï¼Œå°‡é€™å€‹ x è¨˜éŒ„ä¸‹ä¾†ï¼Œç„¶å¾Œå›ç™¼å€‹è¨Šæ¯ y (ä¾‹å¦‚ 8000) ä»¥åŠack(x+1)ï¼Œ x + 1 çš„ç›®çš„æ˜¯å› ç‚ºé€™æ¨£æ‰èƒ½è­‰æ˜æ˜¯ Serveræ˜¯æ”¶åˆ° Client çš„è¨Šæ¯) Client æ”¶åˆ°å¾Œï¼Œä¹Ÿå›æ‡‰å€‹ ack(y+1)ï¼ˆåŒç†é€™æ¨£æ‰èƒ½è­‰æ˜æ˜¯ Server å¯«çš„ï¼‰ ç¶“éä»¥ä¸Šä¸‰æ¬¡äº¤æ¡ï¼Œé€£ç·šå»ºç«‹ã€‚ å‚³é€è¨Šæ¯\rClient ç™¼é€è³‡æ–™é•·åº¦ç‚º 20 byte çš„è³‡æ–™çµ¦ Server Server æ”¶åˆ°å¾Œå› ack ç‚º x + 20 çš„è¨Šæ¯çµ¦ Client Client å†æ¬¡ç™¼é€è³‡æ–™é•·åº¦ç‚º 20 byte çš„è³‡æ–™çµ¦ Server éä¸€æ®µæ™‚é–“ timeout å¾Œï¼ŒClient å†ç™¼é€ä¸€æ¬¡ Server æ”¶åˆ°å¾Œå› ack ç‚º x + 20 çš„è¨Šæ¯çµ¦ Client çµæŸé€£ç·š - å››æ¬¡æ®æ‰‹\rClient ç™¼é€ä¸€å€‹æ–·ç·šè¨Šæ¯Finish \u0026amp; x çµ¦ Server Server æ”¶åˆ°å¾Œå›ç™¼ x + 1 è¨Šæ¯çµ¦ Client æ¥ä¸‹ä¾† Server æ¥çºŒç™¼é€ä¸€å€‹æ–·ç·šè¨Šæ¯ Finish \u0026amp; y çµ¦ A Client æ”¶åˆ°å¾Œå†å›ç™¼ä¸€å€‹ y + 1 è¨Šæ¯çµ¦ Server (Server å°±æ­£å¼æ–·ç·š) Client æ­£å¼æ–·ç·šï¼Œè³‡æºé‡‹æ”¾ UDP\rUser Datagram Protocolï¼Œä½¿ç”¨è€…è³‡æ–™å…ƒå”å®šï¼ŒUDP ç‚ºä¸å¯é çš„å‚³è¼¸å”å®šï¼Œä½¿ç”¨åœ¨è¦æ±‚é€Ÿåº¦çš„æ‡‰ç”¨ä¸Šï¼Œä¸åœ¨ä¹æ˜¯å¦é€é”ï¼Œå¯¦ä¾‹å¦‚è¦–è¨Šï¼Œæ‰äº†ä¸€å…©å€‹ç•«é¢ä¸å½±éŸ¿åŠŸèƒ½ã€‚\nReference\rhttps://ithelp.ithome.com.tw/articles/10205476\r","date":"2020-06-30T23:30:00+00:00","updated":"2020-06-30T23:30:00+00:00"},{"objectID":"1593559200","permalink":"/post/network-ip/tcpip-ip/","title":"[TCP/IP] ç¶²è·¯å±¤ - IP","content":"ç¶²è·¯å±¤ Network Layer\rIP\rInternet Protocolï¼Œç¶²çµ¡ä¸Šæ¯ä¸€å€‹ç¯€é»éƒ½æœ‰ä¸€å€‹ç¨ç«‹çš„ IP Addressï¼Œç•¶è£ç½®é€£æ¥ç¶²è·¯æ™‚æœƒè¢«åˆ†é… IPï¼Œç”¨ä»¥æ¨™è­˜ã€‚é€šé IP ä½å€ï¼Œè£ç½®é–“å¯ä»¥äº’ç›¸çŸ¥é“å°æ–¹ä¸¦é€šè¨Šã€‚\næœ‰ IPv4 åŠ IPv6 å…©å€‹ç‰ˆæœ¬ï¼ŒIPv6 æ˜¯ç‚ºäº†è¦è§£æ±º IPv4 ä¸è¶³çš„å•é¡Œã€‚\nå›ºå®š IPã€€v.s. æµ®å‹• IP\rå›ºå®š IP æŒ‡ä½¿ç”¨çš„ IP éƒ½æ˜¯åŒä¸€å€‹ï¼Œä¸æœƒå› ç‚ºæ–·ç·šå†é‡æ–°é€£ç·šè€Œæ”¹è®Šï¼Œé©åˆçµ¦ç·šä¸Šæœå‹™çš„ä¼ºæœå™¨ä½¿ç”¨ï¼ä¾¿æ–¼æä¾›ä¸€äº›å›ºå®šé€£ç·šçš„æœå‹™(Web Server, Domain Name Server, Mail Server\u0026hellip;)ï¼›\næµ®å‹• IP æŒ‡æ¯æ¬¡é€£æ¥æ™‚ IP éƒ½æœƒä¸åŒï¼Œé€šå¸¸çµ¦å° IP ä½å€ä¸è¦æ±‚çš„ä¸€èˆ¬ç”¨æˆ¶ä½¿ç”¨ã€‚ä¸”å› ç‚º IP æ¯æ¬¡è®Šå‹•ï¼Œæ¯”è¼ƒä¸å®¹æ˜“è¢«é§­å®¢é–å®šï¼Œç›¸è¼ƒæ–¼å›ºå®š IP å®‰å…¨ã€‚\nå¯¦é«” IP v.s. è™›æ“¬ IP\rå¯¦é«” IP åˆç¨± Public IPï¼ŒæŒ‡çš„æ˜¯å¯ä»¥åœ¨ç¶²è·¯ä¸Šæºé€šçš„ IPã€‚åœ¨ç¶²è·¯çš„ä¸–ç•Œè£¡ï¼Œç”¨å¯¦é«”IP è¾¨è­˜æ¯ä¸€éƒ¨é›»è…¦çš„ä½ç½®ã€‚ è™›æ“¬ IP åˆç¨± Private IPï¼Œè¢«è¨­è¨ˆç”¨ä¾†è§£æ±ºå¯¦é«” IP ä¸è¶³çš„å•é¡Œã€‚é€é IP åˆ†äº«å™¨ï¼Œè®“å¤šå°é›»è…¦å„è‡ªæ“æœ‰è™›æ“¬ IPï¼Œä¸¦å°å¤–å…±ç”¨ä¸€å€‹å¯¦é«” IPã€‚ é ç•™çš„ä¸‰å€‹è™›æ“¬ IP ç¶²æ®µï¼š\nA Classï¼š10.0.0.0 - 10.255.255.255 B Classï¼š172.16.0.0 - 172.31.255.255 C Classï¼š192.168.0.0 - 192.168.255.255 [all]\nNAT\ræ“æœ‰ç§æœ‰ IP çš„å…§éƒ¨ä½¿ç”¨è€…åˆ°è¦åˆ°ç¶²éš›ç¶²è·¯éœ€ç¶“éç¶²è·¯ä½å€è½‰æ›(Network address translation, NAT)çš„æ©Ÿåˆ¶ï¼Œé€™å€‹æ©Ÿåˆ¶æœƒæŠŠç¶²è·¯å°åŒ…å…§å®¹çš„è™›æ“¬IPè®ŠæˆçœŸå¯¦IPã€‚\n[1]\nDNS\rDomain Name Serverï¼Œè™•ç† Domain Name èˆ‡å¯¦éš› IP çš„è½‰æ›ã€‚\n[2]\nReference\r[1]\rconfiguring-a-nat-device-when-external-users-want-to-access-an-internal-server\r[2]\rbest-fastest-bsnl-dns-servers/\r[all] è¨˜æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy NET101 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºä»¥åŠéƒ¨åˆ†å…§å®¹å–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-30T23:20:00+00:00","updated":"2020-06-30T23:20:00+00:00"},{"objectID":"1593558240","permalink":"/post/network-tcpip/tcpip-4layer/","title":"[TCP/IP] ç¶²è·¯åŸºç¤æ¦‚å¿µ- å‚³ç´™æ¢ã€TCP/IP å››å±¤æ¦‚è¿°","content":"ç¶²è·¯\rç¶²è·¯çš„ç›®çš„å°±æ˜¯ç‚ºäº†æºé€šï¼Œå¯ä»¥æŠŠæ•´å€‹ç¶²è·¯é‹ä½œæƒ³åƒæˆå‚³ç´™æ¢ã€‚\nä¸€é–‹å§‹å–®ç´”çš„å‚³ç´™æ¢\råªéœ€ï¼š\nå¯«æ˜ä¾†æº (client IP) å¯«æ˜ç›®çš„åœ° (server IP) ç¶“éä¸‰æ¬¡å‰ç½®ä½œæ¥­ (ç™¼é€ç«¯ç™¼è¨Šæ¯ã€æ¥æ”¶ç«¯æ¥è¨Šæ¯ä¸¦å›å¾©ã€ç™¼é€ç«¯æ”¶åˆ°è¨Šæ¯)ï¼Œç¢ºä¿é›™æ–¹éƒ½èƒ½æ”¶ç™¼ã€‚(TCP ä¸‰æ¬¡äº¤æ¡) æŠŠå‹•ä½œæ¨™æº–åŒ–\ræ¨™æº–åŒ–å…§å®¹æ ¼å¼ï¼Œåˆ†ç‚º header \u0026amp; body headerï¼šæ“´å……æ€§å¼·ï¼Œæ”¾é¡å¤–è³‡è¨Šã€‚ bodyï¼šæ”¾ä¸»è¦çš„è¨Šæ¯ã€‚ ç”¨ç‹€æ…‹ç¢¼æ¨™æº–åŒ– server å›æ‡‰çµæœ (200, 301, 404, 502\u0026hellip;) ç”¨å‹•è©æ¨™æº–åŒ– client è¦æ±‚çš„å‹•ä½œ (GET, POST, PUT, DELETE\u0026hellip;) é€²å…¥è¦æ¨¡åŒ–\ræ„ˆä¾†æ„ˆå¤šçš„æœå‹™ä¸‹ï¼Œä½¿ç”¨ port å°‡ä¸åŒæœå‹™æ¨™ç¤ºé–‹ä¾†\nä¸€å€‹ port è² è²¬ä¸€å€‹æœå‹™ (http:80, ftp:21\u0026hellip;) ä¸åŒæœå‹™æœ‰ä¸åŒè¨Šæ¯æ ¼å¼ (æ¯”å¦‚ GET ä¸é ˆå¸¶ bodyï¼ŒPOST è¦å¸¶ request body) æœ‰äº›ä¸éœ€è¦ä½¿ç”¨è€…å›å‚³è¨Šæ¯çš„æœå‹™ï¼Œæ„å³ä¸éœ€è¦ç¶“éä¸‰æ¬¡ç¢ºèª (UDP) protocol\rå”å®šå°±æ˜¯ä¸€å€‹æ¨™æº–ï¼Œç‚ºäº†è¦è®“å½¼æ­¤èƒ½å¤ æºé€šè€Œå»ºç«‹çš„ä¸€å€‹è¦ç¯„ï¼Œæœ‰äº†æ¨™æº–å°±å¯ä»¥è¦æ¨¡åŒ–è®“å®ƒè®Šæˆåœ¨ä¸åŒä½œæ¥­ç³»çµ±ã€ç’°å¢ƒä¸‹çš„ä¸€å€‹å…±åŒçš„æº–å‰‡ã€‚\nTCP/IP\rç¶²è·¯çš„å±¤ç´šï¼Œç†è«–ä¸Šæœ‰æ¨™æº–çš„ OSI ä¸ƒå±¤ã€‚ä½†å¯¦éš›ä¸Šç¶²è·¯çš„å¯¦ä½œï¼Œé€šå¸¸éƒ½ä»¥ TCP/IP å››å±¤æ¨¡å‹ç‚ºä¸»æµï¼Œæ¯ä¸€å±¤éƒ½è² è²¬ä¸åŒçš„äº‹æƒ…ã€æœ‰ä¸åŒçš„é€šè¨Šå”å®šã€‚\n[1]\nä¸Šå±¤çš„å”å®šéƒ½æ˜¯å»ºç«‹åœ¨ä¸‹å±¤ä¹‹ä¸Šçš„ï¼Œèˆ‰ä¾‹ http å»ºç«‹åœ¨ TCP ä¹‹ä¸Šï¼ŒTCP åˆå»ºç«‹åœ¨ IP ä¹‹ä¸Š\u0026hellip;ä»¥æ­¤é¡æ¨ã€‚\nTCP/ IP - éˆçµå±¤ Link Layer\rä½æ–¼æ•´å€‹ç¶²è·¯æ¶æ§‹çš„æœ€åº•å±¤ï¼Œè² è²¬åˆ¶å®šè³‡æ–™å‚³è¼¸çš„ã€Œå¯¦é«”ã€è¦æ ¼ã€‚æ‰€è¬‚ã€Œå¯¦é«”ã€ï¼Œå°±æ˜¯æˆ‘å€‘çœ¼ç›çœ‹çš„åˆ°ï¼Œæ‰‹å¯ä»¥æ‘¸åˆ°çš„éƒ¨åˆ†ã€‚ä»¥ä¹™å¤ªç¶²è·¯ä¾†èªªï¼Œå‡¡æ˜¯æ¥é ­è¦æ ¼ã€å‚³è¼¸ç·šæç¨®é¡ã€MAC å¯¦é«”ä½å€ï¼Œéƒ½æ˜¯éˆçµå±¤è² è²¬çš„å…§å®¹ã€‚\nInfo\nå‰©ä¸‹çš„ä¸‰å±¤ï¼Œç¶²è·¯å±¤ã€å‚³è¼¸å±¤ã€ä»¥åŠæ‡‰ç”¨å±¤å°‡åˆ†ç‚ºå¾Œé¢ä¸‰ç¯‡æ–‡ç« ç´€éŒ„ã€‚\nsource\r[1]http://linux.vbird.org/linux_server/0110network_basic.php\n[all] è¨˜æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy NET101 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºä»¥åŠéƒ¨åˆ†å…§å®¹å–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-30T23:04:00+00:00","updated":"2020-06-30T23:04:00+00:00"},{"objectID":"1593265140","permalink":"/post/programming-js-es6-and-babel/js-es6-and-babel/","title":"[Javascript] ES6 æ–°èªæ³• \u0026 babel è½‰è­¯å™¨ç°¡ä»‹","content":"ECMAScript\rECMAScript\ræ˜¯ä¸€å€‹é–‹ç™¼æ¨™æº–(è¦ç¯„)ï¼Œè€Œ Javascript å°±æ˜¯æ ¹æ“šæ­¤æ¨™æº–ä¾†å¯¦ä½œã€‚ ES6 æŒ‡çš„æ˜¯ ECMAScript ç¬¬å…­ç‰ˆï¼Œæ–¼ 2015 å¹´ç™¼å¸ƒï¼Œæ‰€ä»¥åˆç¨± ES2015ã€‚ES6 åŒ…å«äº†è¨±å¤šæ–°çš„èªæ³•ï¼Œå°‡æ–¼ä¸‹é¢ç”¨ Javascript ä»‹ç´¹ã€‚\næ–°çš„è®Šæ•¸å®£å‘Šæ–¹å¼\rconstï¼šç”¨æ–¼å®£å‘Šä¸æœƒè®Šçš„å¸¸æ•¸ã€‚ ä½†å¦‚æœä»Šå¤©å®£å‘Šçš„å¸¸æ•¸æ˜¯ç‰©ä»¶çš„è©±ï¼Œå› ç‚ºç‰©ä»¶çš„åº•å±¤å­˜çš„æ˜¯ä½å€ï¼Œæ‰€ä»¥å³ä½¿å®£å‘Šçš„æ–¹å¼ç‚º const ä½†ç‰©ä»¶å…§çš„å±¬æ€§å€¼æ˜¯å¯ä»¥æ”¹è®Šçš„ã€‚ letï¼šä½¿ç”¨ let å®£å‘Šçš„è®Šæ•¸çš„ç”Ÿå­˜ç¯„åœ (scope) åƒ…é™æ–¼è®Šæ•¸æ‰€åœ¨çš„ block ä¸­ã€‚ 1function test() { 2 if (10 \u0026amp;gt; 5) { 3 var a = 10 4 let b = 20 5 console.log(b) 6 } 7 consle.log(a) 8} b çš„ç”Ÿå­˜ç¯„åœåƒ…é™æ–¼ if å€å¡Šä¸­ï¼›è€Œ a çš„ç”Ÿå­˜ç¯„åœå‰‡æ˜¯æ•´å€‹ functionã€‚\nInfo\nä½œç”¨åŸŸæ„ˆå°æ„ˆå¥½ï¼Œæ‰ä¸æœƒå¹²æ“¾åˆ°å…¶ä»–äººï¼Œæ‰€ä»¥æ¯”è¼ƒå»ºè­°ä½¿ç”¨ letã€‚\næ›´æ–¹ä¾¿çš„ä¸²æ¥å­—ä¸² - Template Literals\rå­—ä¸²ä¸²æ¥ä½¿ç”¨ ` ` å–ä»£åŸå…ˆä½¿ç”¨çš„å–®å¼•è™Ÿ \u0026#39; \u0026#39; æˆ–æ˜¯é›™å¼•è™Ÿ \u0026amp;quot; \u0026amp;quot;ã€‚\n1//ä»¥å‰ 2var name = \u0026amp;#39;jack\u0026amp;#39; 3var str = \u0026amp;#39;hello\u0026amp;#39; + name + \u0026amp;#39;, it is\u0026amp;#39; + new Date() + \u0026amp;#39;now!\u0026amp;#39; 4var str1 = \u0026amp;#39;hello\\nworld\\nhello\\nJavascript\u0026amp;#39; 5 6//ES6 7var newStr = `hello ${name.toUpperCase()}, it is ${new Date()} now!` 8var newStr1 = `hello 9world, 10hello 11Javascript!` ä»¥å‰åœ¨ä½¿ç”¨å–®é›™å¼•è™Ÿä¸²æ¥å­—ä¸²çš„æ™‚å€™ï¼Œå¦‚æœé‡åˆ°æ›è¡Œæˆ–æ˜¯è¦è·Ÿå­—ä¸²ç›¸æ¥çš„ç‹€æ³æ™‚éœ€è¦ä½¿ç”¨åŠ è™Ÿä¸²ï¼Œå¾ˆéº»ç…©ï¼\nç¾åœ¨ ES6 æä¾›åå¼•è™Ÿä¾†ä¸²æ¥ï¼Œç•¶é‡åˆ°è®Šæ•¸çš„æ™‚å€™åªéœ€è¦åœ¨åå¼•è™Ÿå…§ä½¿ç”¨ ${è®Šæ•¸} æˆ– ${javascript code} åŒ…èµ·ä¾†ï¼Œå°±å¯ä»¥ä¸å¿…å†æ‰“ä¸€å¤§å †åŠ è™Ÿè·Ÿå¼•è™Ÿäº†ã€‚\nè§£æ§‹ Destructuring\ré™£åˆ—æˆ–ç‰©ä»¶çš„å…ƒç´ å¯ä»¥ä½¿ç”¨ â€¦","date":"2020-06-27T13:39:00+00:00","updated":"2020-06-27T13:39:00+00:00"},{"objectID":"1593123060","permalink":"/post/programming-node-jest-ut/node-unit-test-jest/","title":"[Node.js] å–®å…ƒæ¸¬è©¦ \u0026 Jest ç°¡ä»‹","content":"å–®å…ƒæ¸¬è©¦\rå–®å…ƒæ¸¬è©¦ï¼ˆUnit Testingï¼‰ï¼Œæ˜¯é‡å°å°ˆæ¡ˆä¸­æ¯ä¸€å€‹å–®ä¸€åŠŸèƒ½åšæ¸¬è©¦ã€‚ä¸€èˆ¬å°ˆæ¡ˆè£¡çš„æœ€å°å–®ä½æ˜¯ä¸€å€‹ functionï¼Œè€Œé€šå¸¸æˆ‘å€‘åœ¨å¯«å®Œç¨‹å¼å¾Œéƒ½æ˜¯ç”¨ console.log ä¾†ç¢ºèªå‘¼å«çš„çµæœï¼š\n1//index.js 2function repeat(str, n){ 3 var result = \u0026#39;\u0026#39; 4 for(var i = 0; i \u0026lt; n; i++){ 5 result += str 6 } 7 return result 8} 9 10console.log(repeat(\u0026#39;a\u0026#39;,5) === \u0026#39;aaaaa\u0026#39;) //è¼¸å‡º true Jest\rJest æ˜¯ä¸€å¥—ç¾æˆæ¸¬è©¦çš„æ¡†æ¶\n$ npm install jest --save-dev ä¸‹è¼‰ å°‡è¦æ¸¬è©¦çš„ç¨‹å¼ export æˆ module 1//index.js 2//ä¸ŠåŠéƒ¨ä¸è®Šï¼Œåˆªæ‰åŸå…ˆçš„æ¸¬è©¦ç”¨çš„ console.log é€™è¡Œï¼ŒåŠ ä¸Šï¼š 3exports.repeat = repeat æ–°å¢ jest æ¸¬è©¦æª”æ¡ˆï¼Œ ä½¿ç”¨\u0026lt;NAME\u0026gt;.test.js ç•¶ä½œæ¸¬è©¦æª”æª”å 1// index.test.js 2var repeat = require(\u0026#39;./index.js\u0026#39;) 3test(\u0026#39;repeat(\u0026#39;a\u0026#39;,5)æ‡‰è©²è¦ç­‰æ–¼\u0026#39;aaaaa\u0026#39;\u0026#39;, () =\u0026gt; { 4 expect(repeat(\u0026#39;a\u0026#39;, 5).toBe(\u0026#39;aaaaa\u0026#39;)); 5}); å…¶ä¸­ () =\u0026gt;{} æ˜¯ function(){} çš„ç¸®å¯« 4. åœ¨ package.json çš„ script ä¸­åŠ ä¸Š jest\n1\u0026#34;script\u0026#34;:{ 2 \u0026#34;test\u0026#34; : \u0026#34;jest\u0026#34; 3} ä¸‹ $ npm run test å°±æœƒè‡ªå‹•å»æ‰¾é™„æª”åç‚º .test.js çš„æª”æ¡ˆä¸¦è·‘æ¸¬è©¦\næˆ–æ˜¯åªæ˜¯æƒ³æ¸¬è©¦å–®ä¸€çš„æª”æ¡ˆï¼Œå‰‡åœ¨ script ä¸­æŒ‡æ˜æª”æ¡ˆå³å¯\n1\u0026#34;script\u0026#34;:{ 2 \u0026#34;test\u0026#34; : \u0026#34;jest repeat.test.js\u0026#34; 3} åŠ ä¸Š describe æ­¸ç´ç›¸åŒæ€§è³ªçš„æ¸¬è©¦\rè£œå……\rå¦‚æœç›´æ¥åœ¨ terminal ä¸‹ jest index.test.js æŒ‡ä»¤çš„è©±ï¼Œæœƒå‡ºç¾ command not found çš„éŒ¯èª¤è¨Šæ¯ã€‚å› ç‚º jest åªå®‰è£åœ¨å°ˆæ¡ˆåº•ä¸‹ï¼Œè€Œä¸‹åœ¨ terminal æ˜¯å»ä½ çš„ç³»çµ±æ‰¾ï¼Œæ‰€ä»¥æœƒæœ‰éŒ¯èª¤ã€‚ ä½¿ç”¨ package.json çš„ script ä¾†ä¸‹æŒ‡ä»¤å¤–é‚„å¯ä»¥ä½¿ç”¨ npx ä¾†é”æˆç›´æ¥åœ¨ terminal ä¸‹ jest çš„åŠŸèƒ½ï¼Œ$ npx jest repeat.test.jsã€‚\nTDD, æ¸¬è©¦é©…å‹•é–‹ç™¼\rTest-driven Developmentï¼Œä¸€ç¨®é–‹ç™¼æ–¹æ³•ï¼Œæœƒå…ˆå¯«å‡ºæ¸¬è©¦ç¨‹å¼ï¼Œåœ¨ä¾é æœŸçš„æ¸¬è©¦çµæœå»é–‹ç™¼ç¨‹å¼ã€‚\nSource\r[All] æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy JS102 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºä»¥åŠéƒ¨åˆ†å…§å®¹å–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-25T22:11:00+00:00","updated":"2020-06-25T22:11:00+00:00"},{"objectID":"1593122580","permalink":"/post/programming-node-basic/node-module-require-and-exports/","title":"[Node.js] moduleã€require \u0026 exports","content":"Module/Package/Liberary\rç•¶ç¨‹å¼è£¡é¢æœ‰å¾ˆå¤šå€‹åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®ƒæ‹†é–‹æˆä¸€å€‹ä¸€å€‹çš„æ¨¡çµ„ï¼Œä¹‹å¾Œæ‰æ–¹ä¾¿ç¶­è­·ï¼Œå› ç‚ºå½¼æ­¤çš„ç›¸ä¾æ€§è¢«ç¨ç«‹é–‹ä¾†äº†ï¼Œè€Œä¸”åŒä¸€å€‹åŠŸèƒ½ä¸ç”¨ä¸€ç›´é‡å¯«ï¼Œåªè¦æŠŠ module åŒ¯å…¥å°±å¥½ã€‚\nå¦å¤–é‚„å¯ä»¥åœ¨ç¨‹å¼ä¸­ä½¿ç”¨åˆ¥äººå¯«å¥½çš„ moduleï¼Œä»¥æ¸›å°‘é–‹ç™¼æ™‚é–“ã€‚\nåœ¨ç¨‹å¼è£¡ä½¿ç”¨ node module - require\rrequire ä¸­ç›´æ¥å¯«è¦å¼•å…¥çš„ module åç¨±ï¼Œç„¶å¾Œå–ä¸€å€‹è®Šæ•¸çµ¦å®ƒã€‚\n1var os = require(\u0026#39;os\u0026#39;) 2var http = require(\u0026#39;http\u0026#39;) å¦‚æœæ˜¯è‡ªå·±å¯«çš„éå®˜æ–¹ moduleï¼Œåœ¨ require æ™‚æ²’æœ‰åŠ è·¯å¾‘çš„è©±æœƒå…ˆå¾æœ¬èº«æª”æ¡ˆçš„åŒè·¯å¾‘ä¸‹æ‰¾ (./)ï¼Œæ²’æœ‰æ‰¾åˆ°çš„è©±æœƒå» node-module è³‡æ–™å¤¾è£¡æ‰¾ã€‚\næŠŠ module å€Ÿçµ¦åˆ¥äººç”¨ - exports\r1// app.js 2function double(n){ 3 return n*2 4} 5 6module.exports = double åœ¨å…¶ä»–ç¨‹å¼å‘¼å«æ™‚ï¼Œå°±æ˜¯ module.exports è¼¸å‡ºçš„æ±è¥¿ï¼Œæ„å³ module.exports ä¸Ÿä»€éº¼ï¼Œrequire æ™‚çš„è®Šæ•¸å°±æœƒæ˜¯ä»€éº¼æ±è¥¿ã€‚\n1// index.js 2var double = require(\u0026#39;./app.js\u0026#39;) 3console.log(double(3)) //è¼¸å‡º 6 å…¶ä¸­ï¼š\nrequire çš„æª”æ¡ˆè¦æŒ‡åè·¯å¾‘ å¯çœç•¥å‰¯æª”å(ä¸€èˆ¬éƒ½æ˜¯ä¸æ‰“å±…å¤š) ä½†åœ¨å¤§éƒ¨åˆ†çš„å ´åˆä¸‹æˆ‘å€‘ä¸æœƒåªè¼¸å‡ºä¸€å€‹æ±è¥¿(function , variable\u0026hellip;)ï¼Œæ‰€ä»¥ç”¨ä»¥ä¸‹å…©ç¨®æ–¹å¼\nmodule.exports={ç‰©ä»¶}\r1module.exports={ 2 double: double 3 triple: function(n){ 4 return n*3 5 } 6} åœ¨ require ç«¯å°±å¯ä»¥ï¼š\n1var app = require(\u0026#39;./app\u0026#39;) 2console.log(app.double(2)) 3console.log(app.triple(3)) exports.\u0026lt;è¼¸å‡ºçš„æ±è¥¿\u0026gt;\r1exports.double = double 2exports.triple= function(n) { 3 return n*3 4} åœ¨ require ç«¯å°±å¯ä»¥ï¼š\n1var app = require(\u0026#39;./app\u0026#39;) 2console.log(app.double(2)) 3console.log(app.triple(3)) Info\nä½¿ç”¨ export. è¼¸å‡ºçš„æ±è¥¿ï¼Œéƒ½æœƒæ˜¯ç‰©ä»¶ï¼ è€Œä½¿ç”¨ module.export è¼¸å‡ºå¯ä»¥æ˜¯æ•¸å€¼ã€é™£åˆ—ã€å‡½å¼ã€æˆ–ç‰©ä»¶ã€‚\nSource\r[All] æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy JS102 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºå–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-25T22:03:00+00:00","updated":"2020-06-25T22:03:00+00:00"},{"objectID":"1593103440","permalink":"/post/programming-node-npm/node-npm-intro/","title":"[Node.js] npm ç°¡ä»‹","content":"npm\rNode Package Managerï¼Œpackage å°±æ˜¯åˆ¥äººå¯«å¥½çš„å¥—ä»¶ï¼Œnpm å°±æ˜¯å¹«ä½ ç®¡ç† Node.js å¥—ä»¶çš„ç®¡ç†ç³»çµ±ã€‚è£å®Œ Node.js å°±æœƒè‡ªå‹•æŠŠ npm è£å¥½ï¼Œä¸‹ npm -v å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬ã€‚\nnpm init\rç¬¬ä¸€æ¬¡ä½¿ç”¨ npm å¥—ä»¶çš„è©±ä¸‹ npm init åˆå§‹åŒ–ï¼Œå¡«å¯«å°ˆæ¡ˆç›¸é—œè³‡è¨Šå¾Œï¼Œå°±æœƒè‡ªå‹•ç”¢ç”Ÿ package.json çš„æª”æ¡ˆã€‚\npackage.json\rå¦‚æœåœ¨ç¨‹å¼ä¸­ä½¿ç”¨å¾ˆå¤šå¥—ä»¶ï¼Œå°ˆæ¡ˆå°±æœƒè®Šå¾—éå¸¸çš„å¤§ï¼Œåœ¨æ¬é·æˆ–æ˜¯æƒ³ git push åˆ†äº«çš„è©±æœƒè®Šå¾—å¾ˆéº»ç…©ã€‚æ­¤æ™‚åªéœ€è¦ä¸€å€‹ç”¨ä¾†ç´€éŒ„å°ˆæ¡ˆä¸­ä½¿ç”¨çš„å¥—ä»¶åˆ—è¡¨ä»¥å…¶ç‰ˆæœ¬ï¼Œå°±èƒ½è§£æ±ºã€‚ ç•¶åˆ¥äººæ‹¿åˆ°ä½ çš„å°ˆæ¡ˆçš„æ™‚å€™ï¼Œåªè¦ä¸‹ $ npm install å°±æœƒè‡ªå‹•å®‰è£å®Œæ‰€æœ‰æ‰€éœ€å¥—ä»¶äº†ï¼\ndependenciesï¼šç´€éŒ„å°ˆæ¡ˆä½¿ç”¨äº†å“ªäº›å¥—ä»¶ã€‚ devDependenciesï¼šç´€éŒ„é–‹ç™¼ä¸­ç”¨çš„å¥—ä»¶ã€‚ scriptï¼š å¯ä»¥åœ¨ä¸‹å„ç¨® npmã€€æŒ‡ä»¤æ™‚ä¾ç…§ script åšä¸€äº›äº‹æƒ…ã€‚ä¾‹å¦‚èªªä¸€å€‹ç¨‹å¼çš„é€²å…¥é»é™¤äº†å¯ä»¥åœ¨å°ˆæ¡ˆæè¿°çš„æ™‚å€™ç‰¹åˆ¥æŒ‡å‡º mainï¼å¦å¤–å°±æ˜¯åœ¨ script å¯«è‡ªå‹•åŸ·è¡Œå…¥å£ç¨‹å¼çš„è…³æœ¬ã€‚ ä¹‹å¾Œåªè¦ä¸‹ $ npm run start å°±èƒ½è·‘èµ·ç¨‹å¼äº†ï¼Œnpm run start ç®—æ˜¯ç´„å®šä¿—æˆçš„å…¥å£ç¨‹å¼æŒ‡ä»¤ã€‚\nnpm install\ræ¥è‘—åªè¦åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹ï¼Œä¸‹ npm install \u0026lt;moduleName\u0026gt; å®‰è£å¥—ä»¶ã€‚è£å®Œå¾Œç›®éŒ„ä¸‹æœƒå¤šäº†ä¸€å€‹ package-lock.json \u0026amp; node_modules/ã€‚\npackage-lock.json è£¡è¨˜éŒ„äº†å®‰è£çš„å¥—ä»¶ä¸­å„è‡ªåˆä¾è³´äº†å“ªäº›å¥—ä»¶ã€‚ node_modules/ å°±æ˜¯å­˜æ”¾å„å¥—ä»¶ç¨‹å¼ç¢¼çš„è³‡æ–™å¤¾ï¼Œé€šå¸¸æœƒå¾ˆå¤§ã€ä¸æœƒè¢«æ¨åˆ° git serverï¼Œè¦ git pull ä¸‹ä¾†ä½¿ç”¨çš„äººåªéœ€ç”¨ package.json é€é npm install ä¾†å®‰è£æŒ‡å®šå¥—ä»¶ã€‚ p.s. å¦‚æœæ˜¯åœ¨å­è³‡æ–™å¤¾ä¸‹ npm installï¼Œå‰‡æœƒå»è¨˜éŒ„åœ¨ä¸Šä¸€å±¤å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ package.json ä¸­ï¼Œå¦‚æœå …æŒè¦æŠŠ package è£åœ¨å­ç›®éŒ„ä¸‹çš„è©±ï¼Œå°±åœ¨å­ç›®éŒ„ä¸‹ä¸‹ npm init å³å¯ã€‚ \u0026ndash;save è‡ªå‹•å¹«ä½ åŠ é€² package.json\ré–‹ç™¼çš„é€”ä¸­åªè¦éš¨æ™‚æœ‰æ–°çš„å¥—ä»¶æƒ³å®‰è£çš„è©±ï¼Œä¸éœ€è¦æ‰‹å‹•å»æ›´æ”¹ package.json çš„æª”æ¡ˆï¼Œåªéœ€è¦åœ¨ npm install çš„æ™‚å€™åŠ ä¸Š --save çš„åƒæ•¸å³å¯ã€‚\n1$ npm install http-server --save 2$ npm install left-pad --save-dev //è‡ªå‹•è¨˜éŒ„åœ¨ devDependencies å€åŸŸï¼åƒ…ä¾›é–‹ç™¼æ™‚ç”¨åˆ°çš„ module Warning\nç¾åœ¨æ–°ç‰ˆçš„ npm ä¸ç”¨åŠ  \u0026ndash;save åƒæ•¸ä¹Ÿæœƒè‡ªå‹• save åˆ° package.json äº†ã€‚\nyarnï¼šé™¤äº† npm çš„å¦ä¸€ç¨®é¸æ“‡\ryarn æ¯” npm é‚„å¿«ï¼Œæ˜¯ä¸€å€‹æ–°å‡ºä¾†ã€ç”± facebook é–‹ç™¼çš„é–‹æºå¥—ä»¶ç®¡ç†ã€‚\nè£å®Œ yarn å¾Œï¼Œä¸‹ $ yarn -v å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬ã€‚ $ yarn init åˆå§‹åŒ–å°ˆæ¡ˆ ä½¿ç”¨ $ yarn add \u0026lt;module name\u0026gt; å®‰è£å¥—ä»¶ï¼Œä¸”æœƒè‡ªå‹•åœ¨ package.json æª”æ¡ˆä¸­æ›´æ–° ç›´æ¥ä¸‹ $ yarn å°±èƒ½æ ¹æ“š package.json è£å®Œæ‰€éœ€å¥—ä»¶ Source\r[All] æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy JS102 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºå–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-25T16:44:00+00:00","updated":"2020-06-25T16:44:00+00:00"},{"objectID":"1592693760","permalink":"/post/programmimg-node-eslint-husky/eslint-husky/","title":"[Node.js] eslint \u0026 husky ç°¡ä»‹","content":"eslint (npm module)\reslint ç­‰æ–¼ es + lintï¼Œç”¨ä¾†æª¢æŸ¥ Javascript coding style çš„å·¥å…·ã€‚\nes = ECMAScript, Javascript çš„æ¨™æº– lint = ä¸€å€‹èªæ³•æª¢æŸ¥çš„å·¥å…· husky (npm module)\rhusky è®“æˆ‘å€‘èƒ½åœ¨ package.json é…ç½® git hook è…³æœ¬ã€‚\nä½¿ç”¨ npm install å®Œæˆå¥—ä»¶å®‰è£ eslint + huskyå¾Œï¼Œå°±æœƒåœ¨æ¯æ¬¡ commit å‰è‡ªå‹•æª¢æŸ¥ç¨‹å¼ç¢¼æ˜¯å¦ç¬¦åˆè¦ç¯„ï¼Œç¬¦åˆæ‰èƒ½æäº¤æˆåŠŸã€‚é€šå¸¸ç”¨åœ¨åœ˜éšŠé–‹ç™¼æ™‚ï¼Œå¯ä»¥çµ±ä¸€ç¨‹å¼ç¢¼é¢¨æ ¼ã€‚\nä¸ç¬¦åˆè¦ç¯„æ™‚æœƒåœ¨ console å°å‡ºéŒ¯èª¤è¨Šæ¯ï¼Œ\nå‰é¢çš„æ•¸å­—ä»£è¡¨ç¬¬å¹¾è¡Œï¼šå¾Œé¢çš„æ•¸å­—ä»£è¡¨è©²è¡Œçš„å¹¾å€‹å­—ç™¼ç”ŸéŒ¯èª¤ã€‚ é€šå¸¸éƒ½å¾å¾Œé¢é–‹å§‹ä¿®ï¼Œå› ç‚ºæœ‰äº›éŒ¯èª¤æ˜¯è¦åŠ ç©ºè¡Œï¼Œå¾å‰é¢æ”¹çš„è©±æœƒå°è‡´å¾Œé¢çš„è¡Œè™Ÿæœƒäº‚æ‰ã€‚å¦‚æœçœŸçš„äº‚æ‰çš„è©±ï¼Œé‚£åªè¦åœ¨é‡æ–°ä¸‹ git commit ä¸€æ¬¡ï¼Œè®“ eslint é‡æ–°æª¢æŸ¥ã€‚\nå¦‚æœæƒ³è®“ eslint å¿½ç•¥æŸäº›æª¢æŸ¥çš„è©±ï¼Œä¾‹å¦‚è¦å¿½ç•¥å¯ä»¥å®£å‘Šæ²’æœ‰è¢«ä½¿ç”¨çš„è®Šæ•¸ï¼Œåªè¦åœ¨æœ€å‰é¢åŠ ä¸Šè¨»è§£ï¼š // eslint-disable no-unused-vars\nSource\r[All] æ­¤ç¯‡ç‚ºè§€çœ‹ Lidemy MTR04 çš„ç­†è¨˜ï¼Œåœ–ç‰‡ä¾†æºå–è‡ªä¸Šèª²å½±ç‰‡\n","date":"2020-06-20T22:56:00+00:00","updated":"2020-06-20T22:56:00+00:00"},{"objectID":"1592602920","permalink":"/post/programming-lidimy-alg101-note/lidimy-alg101-note/","title":"æ–°æ‰‹åˆ·é¡Œå‰æ‡‰è©²çŸ¥é“çš„äº‹","content":"é€™ç¯‡æ–‡ç« æ˜¯ Lidemy Mentor Program ç¬¬äºŒå‘¨è§€çœ‹ ALG101 å…ˆåˆ¥æ€¥è‘—å¯« Leetcode çš„ç­†è¨˜ã€‚\næ–°æ‰‹å¯«é¡Œç›®æ€éº¼é–‹å§‹\rå…ˆæƒ³è§£æ³• åœ¨æŠŠè§£æ³•è½‰æˆç¨‹å¼ç¢¼ è€Œä¸æ˜¯è‘—æ€¥çš„ç›´æ¥é‚Šå¯«ç¨‹å¼ç¢¼é‚Šè§£ï¼Œè¦å…ˆæœ‰ä¸€å€‹æ¶æ§‹ä¹‹å¾Œå†å»æƒ³æ€éº¼è½‰æ›æˆ codeã€‚ èˆ‰ä¾‹ï¼šå°å‡º 1~100 çš„å¥‡æ•¸\næƒ³è§£æ³• å°å‡ºä¸€åˆ°ä¸€ç™¾ å°çš„æ™‚å€™åˆ¤æ–·æ˜¯ä¸æ˜¯å¥‡æ•¸ æŠŠè§£æ³•æ›æˆç¨‹å¼ç¢¼ åˆ©ç”¨è™›æ“¬ç¢¼ psedu codeä¾†è¡¨ç¤ºç¨‹å¼ç¢¼\nWarning\nç¸®æ’çš„é‡è¦æ€§ï¼ç¸®ç‰Œç­‰æ–¼ä¸€å€‹å€å¡Šï¼Œä¾‹å¦‚ if-end if ä»£è¡¨ä¸€å€‹å€å¡Šï¼Œå¤§å¤§çš„å¢åŠ ç¨‹å¼å¯è®€æ€§ã€‚\néœ€è¦ç·´ç¿’ç•¶çœ‹åˆ°ç¨‹å¼ç¢¼æ™‚ï¼Œè…¦ä¸­è¦èƒ½çŸ¥é“ç¨‹å¼çš„æµç¨‹ã€‚ å¯ä»¥æƒ³æƒ³çœ‹å¦‚æœæŠŠ max çš„åˆå§‹å€¼è¨­æˆ arr[0] çš„è©±ï¼Œarr åœ¨ [7, 5] çš„ç‹€æ³ä¸‹ç­”æ¡ˆæœƒæ˜¯å°çš„å—?\nå–„ç”¨ log \u0026amp;amp; debugger\rç”¨ Debugger å¯ä»¥è®“ç¨‹å¼ä¸€è¡Œä¸€è¡Œçš„è·‘ codeï¼Œæ–¹ä¾¿æ–°æ‰‹äº†è§£ç¨‹å¼åŸ·è¡Œæµç¨‹ä¸¦æ‰¾å‡ºå“ªä¸€è¡Œæœ‰éŒ¯ã€‚ é—œæ–¼ Chrome Devtool Debbuger çš„ä½¿ç”¨ä¹‹å‰å°±æœ‰ç‰¹åˆ¥è¨˜éŒ„æˆä¸€ç¯‡\ræ–‡ç« \rã€‚\nç¯„åœå¾ˆé‡è¦\rå› ç‚ºä¸åŒè¼¸å…¥ç¯„åœä»£è¡¨ä¸åŒé™åˆ¶ï¼ŒåŒä¸€å€‹é¡Œç›®å¯èƒ½è¼¸å…¥ç¯„åœä¸ä¸€æ¨£ï¼Œè§£æ³•å°±æœƒä¸åŒã€‚è§£é¡Œæ™‚å¯èƒ½æœƒç¢°åˆ°çš„ä¸‰ç¨®é™åˆ¶ï¼š\nç©ºé–“é™åˆ¶ 1ä¸€èˆ¬ç¨‹å¼èªè¨€ä¸­çš„ intï¼š 4 bytesï¼›doubleï¼š8 bytes 2JS ä¸­çš„ Numberï¼š8 bytes ç•¶ä»Šå¤©ç¨‹å¼è¦ä½¿ç”¨åˆ°ä¸€ç™¾è¬å€‹æ•¸å­—ï¼Œå‰‡å¤§ç´„éœ€è¦ 7.6 MBï¼›åå„„å€‹æ•¸å­—ï¼Œå‰‡å¤§ç´„éœ€è¦ 7.4 GB çš„ç©ºé–“ï¼Œè‹¥è¦æ’åºä¸€ç™¾è¬å€‹æ•¸å­—å¯èƒ½é‚„å¯ä»¥å®£å‘Šé™£åˆ—ä¾†å­˜ï¼Œä½†å¦‚æœæ›æˆåå„„ç­†çš„è©±å°±éœ€è¦ä½¿ç”¨å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚èªªå…ˆæ”¾åœ¨æª”æ¡ˆï¼Œå†å–å‡ºæ¯”è¼ƒã€‚ 2. æ™‚é–“é™åˆ¶ 3. å‹æ…‹é™åˆ¶ ä¸åŒå‹æ…‹å¯ä»¥å„²å­˜çš„ç¯„åœä¸åŒï¼Œä¾‹å¦‚ Number.MAX_SAFE_INTEGER æ˜¯ Javascript å¯ä»¥å„²å­˜çš„æœ€å¤§å®‰å…¨æ•¸å€¼ï¼Œå¦‚æœè¶…éæ­¤æ•¸ï¼Œå°±æ²’è¾¦æ³•ä¿è­‰æ­£ç¢ºæ€§ï¼Œå¦‚ä¸‹ç¯„ä¾‹ï¼š\nå¦å¤–é‚„æœ‰æµ®é»æ•¸çš„ç²¾æº–åº¦å•é¡Œ\né‡åˆ°å›°é›£æ™‚\rè«‹åˆ©ç”¨å‡½å¼å¡«ç©ºæ³•ä»¥åŠç°¡åŒ–æ³•ï¼Œå…ˆé¿é–‹é¡Œç›®çš„ç´°ç¯€ï¼ŒæŠŠæ¶æ§‹å…ˆåšå‡ºä¾†ã€‚ç•¶ä½ æŠŠæ¶æ§‹å¯«å‡ºä¾†å¾Œï¼Œæœƒç™¼ç¾å‰©ä¸‹çš„æ±è¥¿å…¶å¯¦æ²’é‚£éº¼å›°é›£ã€‚å¦‚ä¸‹åœ–ç¯„ä¾‹ï¼Œå¤šäº†å‡½å¼ï¼Œæ•´é«”æ¶æ§‹æœƒçœ‹èµ·ä¾†æ›´æ¸…æ¥šã€‚\nä¸€äº›ä¸Šèª²å­¸åˆ°çš„å°æŠ€å·§\r1function total(){ 2\tif(total%10===0){ 3\treturn true 4\t}else{ 5 return false 6\t} 7} å¯ä»¥è½‰æ›æˆ return â€¦","date":"2020-06-19T21:42:00+00:00","updated":"2020-06-19T21:42:00+00:00"},{"objectID":"1592433300","permalink":"/post/programming-js-basic-3/js-basic-3/","title":"[Javascript] å‡½å¼ã€å…§å»ºå‡½å¼","content":"å‡½å¼ functiton\råŸºæœ¬å‡½å¼çµæ§‹\n1function å‡½å¼åç¨±(åƒæ•¸){ 2 return å›å‚³å€¼ 3} å‚³å…¥åƒæ•¸å¯ä»¥ä¸€å€‹æˆ–å¤šå€‹ï¼Œå¯ä»¥æ˜¯å€¼ã€è®Šæ•¸ã€é™£åˆ—ã€ç‰©ä»¶æˆ–æ˜¯å‡½å¼ å›å‚³å€¼å¯ä»¥é›¶å€‹æˆ–ä¸€å€‹ï¼Œå¯ä»¥æ˜¯ä¸€å€‹å€¼ã€è®Šæ•¸ã€é™£åˆ—ã€ç‰©ä»¶æˆ–æ˜¯å‡½å¼ å‘¼å«å‡½å¼ç›´æ¥æ‰“ å‡½å¼åç¨±() ï¼›å¦‚æœæœ‰å¸¶åƒæ•¸ï¼Œå°‡å¼•æ•¸ç½®æ–¼æ‹¬è™Ÿä¸­ å‡½å¼åç¨±(å¼•æ•¸) åƒæ•¸ Parameter v.s. å¼•æ•¸ Argument\r1funciton add(a,b){ 2 console.log(arguments) //{\u0026amp;#39;0\u0026amp;#39;:2, \u0026amp;#39;1\u0026amp;#39;:5} 3 console.log(arguments[0]) //2 4 return a+b 5} 6add(2,5) å…¶ä¸­ a, b ç‚º function add çš„åƒæ•¸ï¼›2, 5 ç‚ºå¼•æ•¸ã€‚ Javascript æä¾›äº†ä¸€å€‹å¼•è¿°çš„è®Šæ•¸ argumentsï¼Œå¯ä»¥åœ¨ function å…§ä½¿ç”¨ã€‚\nå°è£œå……\rarguments æ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œä½†ä½ å¯èƒ½æœƒç–‘æƒ‘ç‚ºä»€éº¼å¯ä»¥ç”¨é¡ä¼¼é™£åˆ—çš„æ–¹å¼ arguments[0] å­˜å–ï¼Œå› ç‚ºä¸Šä¸€ç¯‡\ræ–‡ç« \rç‰©ä»¶æœ‰æåˆ°ï¼Œå­˜å–ç‰©ä»¶å±¬æ€§å€¼å¯ä»¥ç”¨ç‰©ä»¶.å±¬æ€§åæˆ–æ˜¯ç‰©ä»¶[\u0026#39;å±¬æ€§å\u0026#39;]ï¼Œè€Œ argument[\u0026amp;lsquo;0\u0026amp;rsquo;] ä¸­çš„å­—ä¸²\u0026#39;0\u0026#39;ï¼Œå¯ä»¥ç›´æ¥ç”¨æ•¸å­— 0 è¡¨ç¤ºï¼Œæ‰€ä»¥å°±æœƒçœ‹èµ·ä¾†æƒ³å­˜å–é™£åˆ—çš„è¡¨ç¤ºæ–¹å¼äº†ã€‚\nä¸åŒçš„å‡½å¼å®£å‘Šæ–¹å¼\rç›´æ¥å®£å‘Šä¸€å€‹å…·åçš„ function 1function hello(){ 2 console.log(\u0026amp;#39;hello\u0026amp;#39;) 3} å®£å‘Šè®Šæ•¸ç­‰æ–¼ä¸€å€‹åŒ¿å function 1var hello = function(){ 2 console.log(\u0026amp;#39;hello\u0026amp;#39;) 3} function ç•¶åƒæ•¸å‚³å…¥å¦ä¸€ function 1function print(anything){ 2 anything() 3} 4function hello(){ 5 console.log(\u0026amp;#39;hello\u0026amp;#39;) 6} 7print(hello) 1function trans(x, passInFunc){ 2 return passInFunc(x) 3} 4function double(x){ 5 return x*2 6} â€¦","date":"2020-06-17T22:35:00+00:00","updated":"2020-06-17T22:35:00+00:00"},{"objectID":"1592432580","permalink":"/post/programming-js-basic-2/js-basic-2/","title":"[Javascript] æ¢ä»¶å¥ã€è¿´åœˆ","content":"if/else statement\rä½¿ç”¨ if/else ä¾†åˆ¤æ–·ç‹€æ³ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š\nif\u0026amp;hellip;\rå¯åŠ å…¥é‹ç®—æ–¼åˆ¤æ–·æ¢ä»¶å¥å…§\n1var num = 13 2if(num % 5 === 0){ 3 console.log(\u0026amp;#39;num is multiple of five\u0026amp;#39;) 4} if\u0026amp;hellip;else\råˆ¤æ–·å¦‚æœ if ç›¸ç¬¦åšä»€éº¼äº‹ï¼Œä¸ç›¸ç¬¦å‰‡å‰‡åš else å€å¡Šã€‚\n1var score = 70 2if( score\u0026amp;gt;=60 \u0026amp;amp;\u0026amp;amp; score\u0026amp;lt;100){ 3 console.log(\u0026amp;#39;pass\u0026amp;#39;) 4}else{ 5 console.log(\u0026amp;#39;failed\u0026amp;#39;) 6} if\u0026amp;hellip;else if\u0026amp;hellip;else\rå¤šæ¢ä»¶åˆ¤æ–·ï¼Œå…ˆåˆ¤æ–· ifã€å†åˆ¤æ–· else if(å¯ä»¥å¤šå€‹ else if åˆ¤æ–·)ï¼Œæœ€å¾Œéƒ½ä¸ç›¸ç¬¦çš„è©±åŸ·è¡Œ else å€å¡Šã€‚\n1if( score\u0026amp;gt;=60 \u0026amp;amp;\u0026amp;amp; score\u0026amp;lt;100){ 2 console.log(\u0026amp;#39;pass\u0026amp;#39;) 3}else if(score===100){ 4 console.log(\u0026amp;#39;excellent\u0026amp;#39;) 5}else{ 6 console.log(\u0026amp;#39;failed\u0026amp;#39;) 7} è£œå……\rå°æ¢ä»¶é€šå¸¸éƒ½ç”¨ () æ‹¬èµ·ä¾†ï¼›å€å¡Šé€šå¸¸éƒ½ç”¨ {} æ‹¬èµ·ä¾† num % 5 === 0ã€€é€™å€‹åˆ¤æ–· num æ˜¯å¦ç‚º 5 çš„å€æ•¸çš„åˆ¤æ–·å¥ï¼Œå¯ä»¥æ”¹å¯«æˆ !(num % 5)ï¼Œä½† num % 5 === 0 æœƒæ¯”è¼ƒç›´è§€ï¼Œå¦‚æœç„¡é—œä¹æ•ˆèƒ½çš„è©±ï¼å»ºè­°ä½¿ç”¨æ¯”è¼ƒå¥½æ‡‚å¾—èªå¥å»å¯« codeã€‚ switch case\rç•¶åˆ¤æ–·çš„æ¢ä»¶éå¸¸å¤šçš„æ™‚å€™ï¼Œé™¤äº†ä½¿ç”¨ else if å¤–ï¼Œé‚„å¯ä»¥ä½¿ç”¨ switch case å–ä»£ã€‚\n1var g = 1 2switch(month){ 3 case 1: 4 console.log(\u0026amp;#39;Jan\u0026amp;#39;) 5 break 6 case 2: 7 console.log(\u0026amp;#39;Feb\u0026amp;#39;) 8 break 9 case 3: 10 case 4: 11 console.log(\u0026amp;#39;Mar\u0026amp;#39;) 12 break 13 default: 14 â€¦","date":"2020-06-17T22:23:00+00:00","updated":"2020-06-17T22:23:00+00:00"},{"objectID":"1592334180","permalink":"/post/programming-js-basic-1/js-basic-1/","title":"[Javascript] runtimeã€é‹ç®—å­ã€è®Šæ•¸","content":"Javascript Runtime\rJavascript éœ€è¦æœ‰åŸ·è¡Œç’°å¢ƒï¼ˆRuntimeï¼‰æ‰èƒ½åŸ·è¡Œï¼Œæœ€æ—©æœŸåªèƒ½è·‘åœ¨ç€è¦½å™¨ä¸Šé¢ï¼Œæˆ‘å€‘æœƒé€é Javasrcipt å»æ“æ§ç€è¦½å™¨ç•«é¢ä¸Šçš„æ±è¥¿ï¼Œä¾‹å¦‚è¡¨å–®é©—è­‰â€¦ ç­‰ç­‰ã€‚\nä½† Node.js èª•ç”Ÿå¾Œï¼Œå°±å¯ä»¥ç•¶æˆæ˜¯ JS é™¤äº†ç€è¦½å™¨å¤–çš„ runtimeï¼Œä¸‹è¼‰ Node.js å¾Œä¾¿å¯ä»¥ç›´æ¥åœ¨ CMD å…§ä¸‹æŒ‡ä»¤\n$ node \u0026amp;lt; fileName.js \u0026amp;gt;\nä¸éå…©å€‹åŸ·è¡Œç’°å¢ƒå¯ä»¥æ“æ§çš„æ±è¥¿ä¸æ˜¯å®Œå…¨ä¸€æ¨£çš„ï¼Œä¾‹å¦‚ç€è¦½å™¨æä¾›äº† JS æ“æ§æ–‡ä»¶çš„ API documentï¼ŒNode.js æä¾› JS æ“æ§æª”æ¡ˆçš„ API fs moduleï¼Œé€™å…©å€‹ API å°æ–¼å¦å¤–ä¸€å€‹ runtime éƒ½æ²’æœ‰ã€‚ ä½†é‚„æ˜¯æœ‰å…±åŒéƒ½æœ‰çš„ï¼Œä¾‹å¦‚ consoleï¼Œä½†å‘ˆç¾æ–¹å¼ä¸åŒï¼Œç€è¦½å™¨çš„ console å¦‚ä¸‹åœ–ï¼ŒNode.js çš„ console å°±æ˜¯ cmd æœ¬èº«ã€‚\né‹ç®—å­çš„ç¨®é¡\rç®—æ•¸é‹ç®—\ré‹ç®— é‹ç®—å­ åŠ  + æ¸› - ä¹˜ * é™¤ / é¤˜æ•¸ % éå¢ ++ éæ¸› \u0026amp;ndash; i++ è·Ÿ ++i çš„å·®åˆ¥\ræŠŠ ++ æ”¾å¾Œé¢ä»£è¡¨ ++ ç‚ºå¾Œé‹ç®—ï¼Œå¦‚\n1var i=0; 2console.log(i++ \u0026amp;amp;\u0026amp;amp; 30); æœƒå…ˆåŸ·è¡Œ console.log(i \u0026amp;amp;\u0026amp;amp; 30)ï¼Œå†åŸ·è¡Œ i + 1ã€‚\næŒ‡æ´¾\ré‹ç®— é‹ç®—å­ ç¤ºä¾‹ è³¦äºˆå€¼ = i = i + 1ï¼Œå°‡ i+1 æŒ‡æ´¾å› i åŠ æ³•æŒ‡æ´¾ += i += 1 æ„å³ i = i + 1 ä»¥æ­¤é¡æ¨ã€‚\né‚è¼¯é‹ç®—\ré‹ç®— é‹ç®—å­ AND \u0026amp;amp;\u0026amp;amp; OR || NOT ! é‚è¼¯çš„çŸ­è·¯æ€§è³ª\r3 || 10 å›å‚³ 3ï¼›0 || 10 å›å‚³ 10ã€‚ ç¬¬ä¸€å€‹é‹ç®—å…ƒæ˜¯ true çš„è©±ï¼Œå°±å›å‚³ç¬¬ä¸€å€‹åƒæ•¸ï¼ˆçŸ­è·¯ï¼‰ï¼Œå¦å‰‡å‚³ç¬¬äºŒå€‹ã€‚\n3 \u0026amp;amp;\u0026amp;amp; 10 å›å‚³ 10ï¼›0 \u0026amp;amp;\u0026amp;amp; 10 å›å‚³ 0ã€‚ ç¬¬ä¸€å€‹é‹ç®—å…ƒæ˜¯ true çš„è©±ï¼Œç”±ç¬¬äºŒå€‹æ±ºå®šï¼Œç¬¬ä¸€å€‹é‹ç®—å…ƒæ˜¯ false çš„è©±ï¼Œç›´æ¥å›å‚³ç¬¬ä¸€å€‹ falseï¼ˆçŸ­è·¯ï¼‰ã€‚\np.s. åœ¨ Javascript ä¸­ï¼Œ0ã€false éƒ½ä»£è¡¨ falseã€‚\nä½å…ƒé‹ç®—\rå°‡é‹ç®—å…ƒè®ŠæˆäºŒé€²ä½å¾Œï¼Œå°æ¯å€‹ä½å…ƒ(bit)åšæ“ä½œã€‚\né‹ç®— é‹ç®—å­ ç¤ºä¾‹ çµæœ è£œå…… å·¦ç§» \u0026amp;laquo; 8 \u0026amp;laquo; 1 16 å·¦ç§»å°±æ˜¯ä¹˜ä»¥äºŒ å³ç§» \u0026amp;raquo; 1024 â€¦","date":"2020-06-16T19:03:00+00:00","updated":"2020-06-16T19:03:00+00:00"},{"objectID":"1592173680","permalink":"/post/programming-lidimy-cs101-note/lidimy-cs101-note/","title":"ç¨‹å¼åˆå­¸è€…åŸºç¤çŸ¥è­˜ - CLI, è¨ˆæ¦‚, ç¶²è·¯, session \u0026 cookie, æ¼”ç®—æ³•","content":"é€™ç¯‡æ–‡ç« æ˜¯ç´€éŒ„ç¨‹å¼å¯¦é©—å°å¸«ç¬¬ä¸€å‘¨è§€çœ‹èª²ç¨‹ CS101 çš„ç­†è¨˜ï¼Œä¸»è¦é—¡è¿°äº†ç¨‹å¼åˆå­¸è€…è©²å…·å‚™çš„åŸºç¤çŸ¥è­˜ï¼ŒåŒ…å« Coding ç°¡ä»‹ã€å‰å¾Œç«¯ä»‹ç´¹ï¼Œä»¥åŠä¸€äº›è¨ˆç®—æ©Ÿæ¦‚è«–ã€‚\nåˆ°åº•å¯«ç¨‹å¼æ˜¯ä»€éº¼\rCoding çš„ç›®çš„å°±æ˜¯è¦è·Ÿé›»è…¦æºé€šï¼Œè¦å°é›»è…¦ä¸‹æŒ‡ä»¤ï¼Œè®“é›»è…¦ç…§è‘—æŒ‡ç¤ºåšã€‚\né‚£ç‚ºä»€éº¼éœ€è¦ç¨‹å¼ç¢¼å‘¢ï¼Ÿ å› ç‚ºé›»è…¦åªçœ‹å¾—æ‡‚ä»¥ 0 å’Œ 1 çµ„æˆçš„æ©Ÿå™¨èªè¨€ï¼Œä¸”å®ƒé‡å°å„ç¨®ä¸åŒçš„äº‹éƒ½åªæŒ‰ç…§åŒä¸€å€‹æ¨™æº–å»åšäº‹ï¼ˆæ¨™æº–åŒ–ï¼‰ï¼Œä¾‹å¦‚ä¸åŒå» ç‰Œçš„ USB é ˆæŒ‰ç…§ USB æ¨™æº–å»ç”Ÿç”¢ï¼Œè€Œé›»è…¦åªé ˆæ‡‚é€™å€‹æ¨™æº–å°±å¥½ã€‚ æ‰€ä»¥å¯«ç¨‹å¼çš„æ¨™æº–å°±æ˜¯ç¨‹å¼ç¢¼ï¼Œè€Œå¸‚é¢ä¸Šçš„å„ç¨®ç¨‹å¼èªè¨€æœ€çµ‚éƒ½æœƒè½‰æ›æˆé›»è…¦æ‡‚å¾—æ©Ÿå™¨èªè¨€ã€‚\nç¨‹å¼ç¢¼ä¸æ˜¯é‡é»ï¼Œè§£æ±ºå•é¡Œæ‰æ˜¯\ræŠŠå•é¡Œæ‹†è§£ï¼Œä¸¦è©¦è‘—æŠŠè§£æ³•å¯«æˆæ¢åˆ—å¼ï¼Œä¸€è¡Œå°±æ˜¯ä¸€å€‹å‹•ä½œï¼Œä¾‹å¦‚ï¼šæ‰¾å–®å­—è£¡é¢æœ‰æ²’æœ‰åŒ…å«å­—æ¯ Pï¼Œæœ‰çš„è©±ä½ç½®æ˜¯ç¬¬å¹¾å€‹ï¼Ÿ åœ¨ç¶“éå°‡ç„¡é™é‡è¤‡çš„æ­¥é©Ÿæœ‰é™åŒ–ä¸¦åŠ ä¸ŠçµæŸåˆ¤æ–·ã€å°‡æåˆ°çš„è®Šæ•¸å‘½åä¸€å€‹ä»£è™Ÿã€å°‡ç­”æ¡ˆå›å‚³ç­‰éƒ½ç´å…¥å¾Œæœƒå¾—åˆ°ä¸‹é¢çš„æ­¥é©Ÿï¼š\nä»€éº¼æ˜¯ Command Line\rèˆ‡ä¹‹å°æ‡‰çš„æ˜¯åœ–å½¢åŒ–ä»‹é¢ GUI (Graphic User Interface)ï¼ŒGUI æŒ‡çš„æ˜¯ç”¨çœ‹å¾—åˆ°çš„åœ–å½¢ä»‹é¢å»æ“ä½œé›»è…¦ã€‚è€Œ Command Line Interface æŒ‡çš„æ˜¯åªèƒ½é€éæ–‡å­—è·Ÿé›»è…¦åšæºé€šçš„ä»‹é¢ã€‚ å•é¡Œæ˜¯ï¼ŒGUI é€™éº¼ç›´è¦ºå¥½ç”¨ï¼Œç‚ºä»€éº¼é‚„è¦æœ‰ CLI å‘¢ï¼Ÿå› ç‚º\u0026amp;mdash;\næœ‰äº›åŠŸèƒ½åªèƒ½ç”¨ CLI æœ‰æ™‚å€™ç”¨æ–‡å­—å»æ“ä½œæŒ‡ä»¤æ¯”è¼ƒå¿« é€™é‚Šç¾…åˆ—å¹¾å€‹å¸¸ç”¨åˆ°çš„ Commandï¼š\npwdï¼šprint working directoryï¼Œåˆ—å‡ºç•¶å‰æ‰€åœ¨ä½ç½® lsï¼šlist Segment å°å‡ºæª”æ¡ˆæ¸…å–®ï¼ŒåŠ ä¸Š -al åƒæ•¸å¯ä»¥åˆ—å‡ºéš±è—æª”æ¡ˆ (-a) ä¸¦æŠŠæ¸…å–®è©³ç´°æ¢åˆ— (-l)ã€‚ cdï¼šchange directory åˆ‡æ›è³‡æ–™å¤¾ï¼Œ$ cd .. ä»£è¡¨å›åˆ°ä¸Šä¸€å±¤ï¼Œ$ cd ~ ä»£è¡¨å›åˆ° home ç›®éŒ„ (ä½¿ç”¨è€…çš„å°ˆå±¬æ–‡ä»¶ç›®éŒ„)ï¼Œ$ cd / ä»£è¡¨å›åˆ°æ ¹ç›®éŒ„ (å­˜æ”¾é›»è…¦åº•å±¤æª”æ¡ˆ)ã€‚ manï¼šmanual å¯ä»¥å«å‡ºæŒ‡ä»¤çš„ä½¿ç”¨æ‰‹å†Šï¼Œä¾‹å¦‚ $ man ls åˆ—å‡º ls çš„ä½¿ç”¨æ–¹æ³•ã€‚ touchï¼š$ touch \u0026amp;lt;fileName\u0026amp;gt;ï¼Œå¦‚æœæª”æ¡ˆä¸å­˜åœ¨ï¼Œå‰‡æœƒå»ºç«‹ä¸€å€‹æ–°æª”æ¡ˆï¼›å¦‚æœæª”æ¡ˆå­˜åœ¨ï¼Œå‰‡æœƒä¿®æ”¹æª”æ¡ˆæ™‚é–“ã€‚ rmï¼š$ rm \u0026amp;lt;fileName\u0026amp;gt; åˆªé™¤æª”æ¡ˆï¼Œ$ rm -r \u0026amp;lt;fileName\u0026amp;gt; åˆªé™¤è³‡æ–™å¤¾ã€‚ mkdirï¼š$ mkdir â€¦","date":"2020-06-14T22:28:00+00:00","updated":"2020-06-14T22:28:00+00:00"},{"objectID":"1592045100","permalink":"/post/devops-git-basic-3/git-basic-3/","title":"[Git] Basic Git (3) ä¸€äº›ç‹€æ³åŠ‡","content":"æƒ³æ”¹æœ€å¾Œä¸€æ¬¡çš„ commit message\råœ¨æœ¬åœ°ç«¯ git commit å¾Œç™¼ç¾ commit message æ‰“éŒ¯äº†ï¼Œåªè¦ä¸‹ $ git commit --amendå³å¯é€²å…¥ vim ç·¨è¼¯å™¨åšä¿®æ”¹ã€‚\nè«‹æ³¨æ„ï¼Œå¦‚æœå·²ç¶“ commit è€Œä¸”åˆ push to remote äº†ï¼Œé‚£å°±ä¹–ä¹–èªå‘½å§ï¼Œé€™ç¨®æƒ…å½¢ä¸‹ä½ åœ¨ local ç«¯æ”¹çš„è©±å¯èƒ½æœƒé€ æˆå…¶ä»–äººçš„å›°æ“¾ã€‚æœ€å¥½çš„æ–¹æ³•é‚„æ˜¯ push ä¹‹å‰å…ˆæª¢æŸ¥ä¸€ä¸‹ï¼Œé¿å…éŒ¯çš„æ±è¥¿è¢«æ”¾åˆ°é ç«¯ã€‚ commit å¾Œä½†å¾Œæ‚”äº†\rä½¿ç”¨ $ git reset HEAD^ (--soft / --hard / --mixed)\nåè© è§£é‡‹ head æ‰€åœ¨ä½ç½® ^ ä¸Šä¸€å€‹ index è®Šæ›´ç‹€æ…‹ç´€éŒ„ (git status) working directory å·¥ä½œç›®éŒ„ mode head index working directory èªªæ˜ soft changed unchanged unchanged åƒ…ç§»é™¤ commit è®Šæˆæ–°ç‰ˆæœª commitï¼Œå…§å®¹ä»æ˜¯æ–°ç‰ˆçš„ã€‚ mixed(default) changed changed unchanged index ç§»é™¤ staged æ¨™è¨˜ï¼Œè®Šæˆ Modifiedor Untrackedï¼Œå…§å®¹æ˜¯æ–°ç‰ˆçš„ã€‚ hard changed changed changed å›åˆ°ä¸Šä¸€ç‰ˆç‰ˆæœ¬ï¼Œå®Œå…¨ç§»é™¤ï¼Œå…§å®¹åŠç‹€æ…‹çš†æ˜¯ä¸Šä¸€ç‰ˆã€‚ [1]\næ”¹äº†æª”æ¡ˆé‚„æ²’ commit ä½†æƒ³å¾©åŸ\rç”¨ $ git restore \u0026lt;file\u0026gt; å›å¾©ï¼Œæˆ–æ˜¯ $ git restore .å›å¾©æ‰€æœ‰æª”æ¡ˆ æˆ–æ˜¯èˆŠ command $ git checkout -- \u0026lt;file\u0026gt;\næƒ³æ”¹ branch åç¨±\r$ git branch -m \u0026lt;æ–°åç¨±\u0026gt;\næƒ³æŠŠé ç«¯çš„ branch æŠ“ä¸‹ä¾†\rè¨­ç›®å‰æœ¬åœ°ç«¯ç„¡ä»»ä½• branchï¼Œå¯ä»¥ç›´æ¥ä¸‹ $ git checkout \u0026lt;remote-branch-name\u0026gt;ã€‚\næƒ³åœ¨ commit å‰åšä¸€äº›åˆ¤æ–· (git hooks)\råœ¨ .git è³‡æ–™å¤¾ä¸‹æœ‰ hooks è³‡æ–™å¤¾ï¼Œè£¡é¢å­˜æ”¾äº†ä¸€äº› shell scriptï¼Œå¯ä»¥è®“ä½¿ç”¨åœ¨åœ¨é‡å°æŸäº›ç‹€æ³ä¸‹è¨­ç½®ä¸€äº›åˆ¤æ–·ï¼Œç„¶å¾Œ git åšä¸€äº›åæ‡‰ï¼Œæ¯”å¦‚èªªåœ¨ commit æˆ–æ˜¯ push å‰æª¢æŸ¥æ˜¯å¦æœ‰æ”¾å¸³è™Ÿå¯†ç¢¼ç­‰è³‡è¨Šï¼Œç„¶å¾Œåœæ­¢æˆ–å…è¨±å‹•ä½œã€‚\nSource\r[1] https://ithelp.ithome.com.tw/articles/10187303\r[All] å¤§éƒ¨åˆ†çš„å…§å®¹çš†ä¾†è‡ª Lidemy\r[GIT101] çš„èª²å ‚ç­†è¨˜\n","date":"2020-06-13T10:45:00+00:00","updated":"2020-06-13T10:45:00+00:00"},{"objectID":"1592039880","permalink":"/post/devops-git-basic-2/git-basic-2/","title":"[Git] Basic Git (2) - Branch \u0026 GitHub","content":"branch æ¦‚å¿µ\rä¸€èˆ¬åœ¨ç·šæ€§é–‹ç™¼æ™‚æœƒæ˜¯ä»¥ä¸‹é€™æ¨£ï¼š\nç•¶åœ¨é–‹ç™¼æ–°åŠŸèƒ½æ™‚ï¼Œç™¼ç¾ç•¶ä¸‹é–‹ç™¼çš„ç‰ˆæœ¬æœ‰èˆŠæœ‰çš„ bugï¼Œæ­¤æ™‚å¦‚æœä¸€é‚Šé–‹ç™¼ä¸€é‚Šæ”¹ bug å¯èƒ½æœƒå°è‡´ç”¢å‡ºçš„æ±è¥¿æœ‰è¡çªã€‚\nè€Œå¦‚æœå¼•å…¥åˆ†æ”¯ branchï¼Œè®“é–‹ç™¼æ–°åŠŸèƒ½ä»¥åŠ debug å…©é‚Šå„è‡ªç¨ç«‹å®Œæˆï¼Œè€Œå¾Œå†é€²è¡Œåˆä½µï¼Œå°±å¯ä»¥æŠŠå·¥ä½œä¹¾æ·¨åœ°åˆ‡å‰²é–‹ä¾†ã€‚ç›®çš„æ˜¯ç‚ºäº†ä¿æŒä¸»æå¹¹çš„ç©©å®šï¼Œå› ç‚ºåœ¨é–‹ç™¼æ–°åŠŸèƒ½çš„æ™‚å€™ä¸å¯èƒ½éš¨æ™‚ä¿æŒç©©å®šç‹€æ…‹ï¼Œæ‰€ä»¥åœ¨ç¢ºå®šç©©å®šå‰éƒ½ä¸æœƒå½±éŸ¿åˆ°ä¸»å¹¹ã€‚\ngit branch -v\rå¯ä»¥æŸ¥çœ‹ç›®å‰æœ‰å“ªäº› branchï¼Œé¡¯ç¤ºæ–¹å¼ç‚º \u0026amp;lt;branch name\u0026amp;gt; \u0026amp;lt;latest commit version\u0026amp;gt; \u0026amp;lt;commit message\u0026amp;gt;ï¼Œäº®ç¶ ç‡ˆçš„ä»£è¡¨ç›®å‰å·¥ä½œç›®éŒ„æ‰€åœ¨çš„åˆ†å€ã€‚\ngit branch\r$ git branch \u0026amp;lt;branchname\u0026amp;gt; å¯ä¾ç›®å‰ branch ç‚ºåŸºæº–è¤‡è£½å‡ºä¸€å€‹æ–°çš„åˆ†æ”¯ã€‚\ngit checkout\r$ git checkout \u0026amp;lt;branchname\u0026amp;gt; å¯ä»¥å°‡ç›®å‰å·¥ä½œç›®éŒ„åˆ‡æ›åˆ°æŒ‡å®š branch ä¸‹ï¼Œå¯ä»¥æŠŠ checkout æƒ³åƒæˆç§»åˆ°è©²è³‡æ–™å¤¾ä¸‹çš„æ„Ÿè¦ºã€‚\ngit merge\r$ git merge \u0026amp;lt;branchname\u0026amp;gt; å¯ä»¥æŠŠæŒ‡å®šçš„ branch åˆä½µåˆ°ç•¶ä¸‹çš„å·¥ä½œç›®éŒ„ä¾†ã€‚å¦‚ä¸‹åœ–ï¼Œåœ¨ new-feature branch ä¸‹ä¿®æ”¹äº† hello.js çš„æª”æ¡ˆï¼Œå›åˆ° master branchï¼Œå…ˆ cat ç¢ºèª hello.js å…§å®¹æ˜¯èˆŠçš„ï¼Œå†ä¸‹ merge command å°‡ new-feature branch åˆä½µåˆ° master å¾Œï¼Œå°±èƒ½ç™¼ç¾ master çš„æª”æ¡ˆä¹Ÿæ›´æ–°äº†ï¼\ngit branch -d\r$ git branch -d \u0026amp;lt;branchname\u0026amp;gt; ï¼Œ-d ç‚º \u0026amp;ndash;deleteï¼Œå¯åˆªé™¤è©² branchã€‚é€šå¸¸åœ¨é–‹ç™¼å®Œè©² branch ä¸¦åˆä½µé€²ä¸»æ”¯ç·šå¾Œï¼Œå°±å¯ä»¥åˆªé™¤åˆ†æ”¯ä»¥ä¿æŒä¹¾æ·¨çš„å°ˆæ¡ˆå…§å®¹ã€‚\nè™•ç† merge å¾Œçš„ conflict\rå¦‚æœ branch åœ¨åˆä½µçš„æ™‚å€™æœ‰æª”æ¡ˆæœ‰è¡çªï¼Œæ„å³åŒå€‹æª”æ¡ˆçš„æª”æ¡ˆå…§å®¹çš„åŒä¸€è¡Œä¸ä¸€æ¨£ï¼Œgit ä¸æ›‰å¾—è©²ä»¥å“ªä¸€å€‹ç‚ºæº–ï¼Œå‰‡æœƒåœ¨ merge æ™‚å‡ºç¾ä¸‹é¢çš„è¨Šæ¯ï¼š\né ˆå…ˆæŸ¥çœ‹ç™¼ç”Ÿè¡çªçš„æª”æ¡ˆ\nGit æŠŠæœ‰è¡çªçš„æ®µè½æ¨™è¨˜å‡ºä¾†äº†ï¼Œä¸ŠåŠéƒ¨æ˜¯ HEADï¼Œä¹Ÿå°±æ˜¯ç›®å‰æ‰€åœ¨çš„ master åˆ†æ”¯ï¼Œ â€¦","date":"2020-06-13T09:18:00+00:00","updated":"2020-06-13T09:18:00+00:00"},{"objectID":"1592032500","permalink":"/post/devops-git-basic-1/git-basic-1/","title":"[Git] Basic Git (1) - Intro \u0026 Init, add, commit, status... ","content":"å‰è¨€\råœ¨æ²’æœ‰ç‰ˆæœ¬æ§åˆ¶ç³»çµ±å‰ï¼Œå¦‚æœæœ‰ä¸€å€‹å¸¸å¸¸åœ¨ä¿®æ”¹çš„æª”æ¡ˆï¼Œåˆæƒ³ä¿ç•™æ¯å€‹ç‰ˆæœ¬ç‹€æ…‹æ™‚ï¼Œæˆ‘å€‘å¸¸æœƒåœ¨ç·¨è¼¯æª”æ¡ˆå‰è¤‡è£½ä¸€å€‹å‚™ä»½ï¼Œæ™‚é–“ä¹…äº†å°±æœƒè®Šå¾—éå¸¸ä¸ä¾¿ä¸”é›£ä»¥ç¶­è­·ï¼Œæœ‰å¯èƒ½é€ æˆå‘½åæ··äº‚ï¼Œä¹Ÿå¾ˆé›£æ¯”è¼ƒå„ç‰ˆæœ¬é–“çš„å·®ç•°ï¼Œå°¤å…¶æ˜¯åœ¨å¤šäººå”ä½œçš„ç‹€æ³ä¸‹æ™‚é‚„å¯èƒ½æœƒç™¼ç”Ÿè¡çªã€‚ã€€ç‰ˆæœ¬æ§åˆ¶æ¦‚å¿µï¼ç”¨ä¸€èˆ¬è³‡æ–™å¤¾é—¡è¿°\rå¦‚æœæ˜¯ä»¥è³‡æ–™å¤¾å»åšç‰ˆæ§çš„æ¦‚å¿µæœƒæ˜¯å¦‚ä¸‹\n1. éœ€è¦æ–°ç‰ˆæœ¬ï¼šé–‹ä¸€å€‹æ–°çš„è³‡æ–™å¤¾ 2. ä¸æƒ³åŠ å…¥ç‰ˆæ§ï¼šä¸è¦åŠ å…¥è³‡æ–™å¤¾ 3. é¿å…ç‰ˆæœ¬è™Ÿè¡çªï¼šç”¨çœ‹ä¼¼äº‚æ•¸çš„æ±è¥¿ç•¶ä½œè³‡æ–™å¤¾åç¨± 4. çŸ¥é“è³‡æ–™å¤¾é †åºï¼šç”¨ä¸€å€‹æª”æ¡ˆä¾†ç´€éŒ„ 5. çŸ¥é“æœ€æ–°ç‰ˆæœ¬ï¼šç”¨ä¸€å€‹æª”æ¡ˆä¾†å­˜ GIT æ˜¯ä»€éº¼\rgit å°±æ˜¯å€‹å¹«ä½ åšç‰ˆæ§çš„ç¨‹å¼ï¼Œä¸ç”¨åƒä¸Šé¢é‚£æ¨£åšå¾ˆå¤šå‹•ä½œï¼\né–‹å§‹ä½¿ç”¨\rgit init\ré€²å…¥è¦åšç‰ˆæ§çš„è³‡æ–™å¤¾/å°ˆæ¡ˆï¼Œä¸¦ä¸‹ $ git init åšåˆå§‹åŒ–ã€‚åˆå§‹åŒ–å®Œæˆå¾Œå¯ä»¥çœ‹åˆ°ç›®éŒ„ä¸‹å¤šäº†ä¸€å€‹ .git çš„éš±è—å­è³‡æ–™å¤¾ï¼Œå…¶ä¸­åŒ…å« Git æ‰€æœ‰å¿…éœ€çš„å€‰å„²æª”æ¡ˆï¼Œä¹Ÿå°±æ˜¯ Git å€‰å„²çš„éª¨æ¶ã€‚\ngit status\rç”¨æ–¼æŸ¥çœ‹ç›®å‰å·¥ä½œç›®éŒ„ (working directory) çš„æª”æ¡ˆç‹€æ…‹ï¼Œä»¥ä¸‹æ˜¯æª”æ¡ˆå¯èƒ½æœƒæœ‰çš„å››ç¨®ç‹€æ…‹ï¼š\næœªè¿½è¹¤ (Untracked)ï¼šæ²’æœ‰è¢« GIT æ‰€è¿½è¹¤æ§ç®¡çš„æª”æ¡ˆï¼Œå¦‚æ–°å¢çš„æª”æ¡ˆã€‚ å·²æ›´æ”¹ (Modified)ï¼šå·²æäº¤ç‰ˆæœ¬å¾Œï¼Œåˆå†æ¬¡ä¿®æ”¹çš„æª”æ¡ˆã€‚ ç­‰å¾…æäº¤ (Staged)ï¼šåœ¨å·¥ä½œç›®éŒ„ (WD) çš„æª”æ¡ˆåŸ·è¡Œ git add å¾Œï¼Œæœƒæ”¾åœ¨æš«å­˜å€ (Stage) ç­‰å¾…æäº¤ã€‚ å·²æäº¤ (Committed)ï¼šåœ¨æš«å­˜å€çš„æª”æ¡ˆåŸ·è¡Œ git commit å¾Œï¼Œæª”æ¡ˆä¾¿ç½®æ–¼å„²å­˜å€ (Repo)ï¼Œé€™äº›æ”¾åœ¨å„²å­˜å€çš„æª”æ¡ˆå³æ˜¯å·²æäº¤çš„ç‹€æ…‹ã€‚ ç¬¬ä¸€æ¬¡ä¸‹ $ git status å¯ä»¥ç™¼ç¾ç›®å‰ç›®éŒ„ä¸‹çš„æª”æ¡ˆç‹€æ…‹çš†ç‚ºÂ Untracked filesï¼Œè¡¨ç¤ºé€™äº›æ˜¯å…¨æ–°çš„æª”æ¡ˆï¼Œæ²’æœ‰è¢«åŠ å…¥ç‰ˆæ§ã€‚\ngit add\rè¼¸å…¥ $ git add \u0026amp;lt;filename\u0026amp;gt; å¯å°‡æª”æ¡ˆæŒ‡å®šåŠ å…¥ç‰ˆæ§ / æš«å­˜å€ (Stage)ï¼›\nè¼¸å…¥ã€€$ git add . å¯ä¸€æ¬¡åŠ å…¥ æ‰€æœ‰ æª”æ¡ˆ å†æŸ¥çœ‹ç‹€æ…‹å¯ä»¥çœ‹åˆ°æª”æ¡ˆç‹€æ…‹è®Šç‚º Changes to be committedã€‚\ngit commit\rè¼¸å…¥$ git commit å°‡å»ºç«‹æ–°çš„ç‰ˆæ§ï¼Œå°‡æ”¾åœ¨æš«å­˜å€çš„æª”æ¡ˆæ”¾å…¥ repository å¦‚æœå–®ç¨è¼¸å…¥$ git commitï¼Œå‰‡æœƒå…ˆé€²å…¥ vim ç·¨è¼¯å™¨ï¼Œè¦æ±‚åœ¨ç·¨è¼¯å™¨è¼¸å…¥ commit è¨Šæ¯ã€‚\næˆ–æ˜¯ä¸‹$ â€¦","date":"2020-06-13T07:15:00+00:00","updated":"2020-06-13T07:15:00+00:00"},{"objectID":"1591822320","permalink":"/post/data-kafka-cluster/kafka-cluster/","title":"[Kafka] å»ºç«‹ Kafka Cluster","content":"1$ cd /opt 2$ wget \u0026#34;http://ftp.tc.edu.tw/pub/Apache/kafka/2.4.1/kafka_2.12-2.4.1.tgz\u0026#34; 3$ sudo tar zxvf kafka_2.12-2.4.1.tgz 4$ sudo mv kafka_2.12-2.4.1 kafka å»ºç«‹å„²å­˜ log çš„è³‡æ–™å¤¾ï¼Œä¸¦æŒ‡å®šæ¬Šé™\n1$ sudo mkdir /var/lib/kafka 2$ sudo chown -R $(USER id -u):$(USER id -g) /opt/kafka 3$ sudo chown -R $(USER id -u):$(USER id -g) /var/lib/kafka ç·¨è¼¯server.propertiesè¨­å®šæª”\n1$ sudo vi /opt/kafka/config/server.properties ä¿®æ”¹ä»¥ä¸‹åƒæ•¸\n1#æŒ‡å®š cluster ä¸­çš„ broker çš„å”¯ä¸€ id 2broker.id=0 3 4#æŒ‡å®šç›£è½ ip \u0026amp; é˜œè™Ÿ 5listeners=INSIDE://[private ip]:9092,OUTSIDE://[private ip]:9094 6advertised.listeners= INSIDE://[private ip],OUTSIDE://[public ip]:9094 7listener.security.protocol.map= INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT 8inter.broker.listener.name= INSIDE 9 10#æŒ‡å®šå­˜æ”¾logçš„è·¯å¾‘ 11log.dirs=/var/lib/kafka 12 13#æŒ‡å®šé è¨­çš„åˆ†å€æ•¸ 14num.partitions=3 15 16#å…è¨±ä½¿ç”¨è€…åˆªé™¤ topic 17delete.topic.enable = true 18 19#åŠ å…¥zookeeper çš„ä½ç½® 20zookeeper.connect=10.0.0.4:2181,10.0.0.5:2181,10.0.0.6:2181 å°‡KAFKAè¨­ç‚ºæœå‹™\n1$ sudo vi /etc/systemd/system/kafka.service åŠ å…¥ä»¥ä¸‹æ–‡å­—\n1[Unit] 2Requires=zookeeper.service 3After=zookeeper.service 4 5[Service] 6Type=simple 7User=root 8ExecStart=/bin/sh -c \u0026#34;/opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/server.properties \u0026gt; /opt/kafka/kafka.log 2\u0026gt;\u0026amp;1\u0026#34; 9ExecStop=/opt/kafka/bin/kafka-server-stop.sh 10Restart=on-abnormal 11 12[Install] 13WantedBy=multi-user.target å•Ÿå‹• kafka\n1$ sudo systemctl start kafka 2$ sudo systemctl enable kafka ","date":"2020-06-10T20:52:00+00:00","updated":"2020-06-10T20:52:00+00:00"},{"objectID":"1591699380","permalink":"/post/data-kafka-intro/kafka-at-glance/","title":"[Kafka] Kafka at a Glance","content":"Kafka æ˜¯ç”± LinkedIn é–‹ç™¼è€Œå¾Œé‡‹å‡ºçµ¦ Apache çš„ä¸€å€‹é–‹æº streaming message queue (æ¶ˆæ¯ä½‡åˆ—)ï¼Œç”±Scalaå’ŒJavaç·¨å¯«ï¼Œç›®å‰æ˜¯ Hadoop ecosystem ä¸­çš„ä¸€å“¡ã€‚\nç‰¹è‰²\rä»¥ä¸‹ç°¡å–®åˆ—å‡º Kafka å¹¾é»ç‰¹è‰²ï¼š\nåŸºæ–¼ç™¼å¸ƒèˆ‡è¨‚é–± (Publish \u0026amp; Subscribe) æ¶æ§‹ä¸­æœ‰ä¸‰å€‹è§’è‰²ï¼Œbroker, producer ä»¥åŠ consumer Broker ç‚ºè¨Šæ¯ç³»çµ±æœ¬èº«ï¼Œè² è²¬æ¥æ”¶ä¸¦å„²å­˜è³‡æ–™ Producer è² è²¬ç™¼å¸ƒæ¶ˆæ¯åˆ° broker Consumer è² è²¬å¾ borker è¨‚é–±æ¶ˆæ¯ Producer ä»¥åŠ Consumer æ–¼ broker ä¾†èªªæ˜¯ client å¤šå€‹ brokers å¯ä»¥çµ„æˆä¸€å€‹ cluserï¼Œå¢é›†å…·æœ‰è² è¼‰å¹³è¡¡ä»¥åŠæ–¹ä¾¿æ“´å±•è€Œä¸æœƒå½±éŸ¿é‹ä½œçš„ç‰¹æ€§ Kafka åœ¨å„²å­˜ã€ç™¼å¸ƒä»¥åŠè¨‚é–±è¨Šæ¯æ™‚æ˜¯é€é Topic é€²è¡Œæ­¸é¡ æ¯ä¸€å€‹ Topic å¯åŒ…å«ä¸€å€‹æˆ–å¤šå€‹ Partitionï¼Œpartition æ˜¯è³‡æ–™å¯¦éš›å„²å­˜çš„åœ°æ–¹ï¼Œå¢åŠ  partition å¯ä»¥æé«˜ååé‡ å¯ä»¥é€éè¨­å®šå‰¯æœ¬ replication-factor é”åˆ°é«˜å¯é æ€§ è³‡æ–™å„²å­˜åœ¨ç¡¬ç¢Ÿï¼Œå¯æŒ‡å®šå­˜æ”¾çš„æ™‚é–“æˆ–æ˜¯å¤§å°ï¼Œé”åˆ°æŒä¹…æ€§ page cache\rLinuxå…§æ ¸æœƒå°‡ç³»çµ±ä¸­æ‰€æœ‰çš„ç©ºé–’è¨˜æ†¶é«”å…¨éƒ¨ç•¶åš page cache ä¾†ç”¨ï¼Œè€Œpage cache ä¸­çš„æ‰€æœ‰ page æ•¸æ“šå°‡ä¸€ç›´ä¿å­˜åœ¨ page cache ä¸­ç›´åˆ° CPU æ ¹æ“šç‰¹å®šçš„ç®—æ³•æ›¿æ›æ‰å®ƒå€‘ä¸­çš„æŸäº› pageã€‚ ç•¶ produce è³‡æ–™åˆ° Kafka æ™‚ï¼Œæœƒå…ˆå°‡æ•¸æ“šå¯«å…¥ Page Cache ä¸­ï¼Œä¸¦å°‡è©² page ä¸Šæœ‰ dirty æ¨™èªŒã€‚ç•¶ consumer å‘ Kafka è®€å–è³‡æ–™æ™‚ï¼Œæœƒå…ˆåœ¨ Page Cache ä¸­æŸ¥æ‰¾å…§å®¹ï¼Œå¦‚æœæœ‰å°±ç›´æ¥è¿”å›ï¼Œæ²’æœ‰çš„è©±å°±æœƒå¾ disk è®€å–æ–‡ä»¶å†å¯«å› Page Cacheã€‚ å› æ­¤åªè¦ç”Ÿç”¢è€…èˆ‡æ¶ˆè²»è€…çš„é€Ÿåº¦ç›¸å·®ä¸å¤§ï¼Œæ¶ˆè²»è€…æœƒç›´æ¥è®€å–ä¹‹å‰ç”Ÿç”¢è€…å¯«å…¥ Page Cache çš„æ•¸æ“šï¼Œå¤§å®¶åœ¨è¨˜æ†¶é«”å…§è£¡å®Œæˆæ¥åŠ›ï¼Œæ²’æœ‰ç£ç¢Ÿè¨ªå•ã€‚ æ¯”èµ·åœ¨è¨˜æ†¶é«”ä¸­ç¶­è­·ä¸€ä»½æ¶ˆæ¯æ•¸æ“šçš„å‚³çµ±åšæ³•ï¼Œé€™æ—¢ä¸æœƒé‡è¤‡æµªè²»ä¸€å€çš„è¨˜æ†¶é«”ï¼ŒPage Cache åˆä¸éœ€è¦ GCï¼Œè€Œä¸”å³ä½¿ Kafka é‡å•Ÿäº†ï¼ŒPage Cache é‚„ä¾ç„¶åœ¨ã€‚\n","date":"2020-06-09T10:43:00+00:00","updated":"2020-06-09T10:43:00+00:00"},{"objectID":"1591644600","permalink":"/post/coldplay-everglow/","title":"[Coldplay] Everglow","content":"Oh, they say people come\nSay people go\nä»–å€‘èªªäººä¾†äººå»\nThis particular diamond was extra special\né€™ç‰¹åˆ¥çš„é‘½çŸ³æ ¼å¤–ç‰¹åˆ¥\nAnd though you might be gone\nAnd the world may not know\nå„˜ç®¡ä½ å¯èƒ½æ¶ˆå¤±ï¼Œä¸”ä¸–ç•Œä¹Ÿå¯èƒ½ä¸æœƒçŸ¥é“\nStill I see you, celestial\næˆ‘åœ¨å¤©åœ‹ä»ç„¶çœ‹å¾—è¦‹\nLike a lion you ran\nA goddess you rolled\nä½ åƒç…å­ä¸€æ¨£è·‘è‘—ã€åƒå¥³ç¥ä¸€èˆ¬çš„å±•ç¾\nLike an eagle you circle\nIn perfect purple\nä½ åƒè€é·¹ä¸€æ¨£ç›¤æ—‹è‘—ã€é«˜è²´çš„å®Œç¾ç„¡ç¼º\nSo how come things move on?\næ‰€ä»¥äº‹æƒ…æœƒæ€éº¼ç™¼å±•?\nHow come cars don\u0026rsquo;t slow?\nç‚ºä»€éº¼è»Šå­ä¸æ¸›é€Ÿ?\nWhen it feels like the end of my world\nä»€éº¼æ™‚å€™åƒæˆ‘çš„ä¸–ç•Œæœ«æ—¥?\nWhen I should, but I can\u0026rsquo;t, let you go?\nä»€éº¼æ™‚å€™æ˜¯æˆ‘æ‡‰è©²æ”¾æ‰‹ä½†æˆ‘ä¸èƒ½æ”¾æ‰‹æ™‚?\nBut when I\u0026rsquo;m cold, cold\nOh, when I\u0026rsquo;m cold, cold\nä½†æ˜¯ç•¶æˆ‘å†·çš„æ™‚å€™\nThere\u0026rsquo;s a light that you give me\næ˜¯ä½ çµ¦æˆ‘é‚£ç›ç‡ˆ\nWhen I\u0026rsquo;m in shadow\nç•¶æˆ‘åœ¨æš—è™•çš„æ™‚å€™\nThere\u0026rsquo;s a feeling you give me, an everglow\næ˜¯ä½ çµ¦æˆ‘çš„é€™å€‹æ„Ÿè¦ºï¼Œä¸€é“æ°¸æ†ä¹‹å…‰\nLike brothers in blood\nSisters who ride\nåƒè¦ªå…„å¼Ÿå§Šå¦¹èˆ¬ä¸¦è‚©è€Œè¡Œ\nAnd we swore on that night\nWe\u0026rsquo;d be friends \u0026rsquo;til we die\nåœ¨é‚£æ™šæˆ‘å€‘ç™¼èª“æˆ‘å€‘å°‡æˆç‚ºæœ‹å‹ä¸”è‡³æ­»ä¸æ¸\nBut the changing of winds\nAnd the way waters flow\nå„˜ç®¡é¢¨åœ¨è®Šã€æ°´åœ¨æµ\nLife is short as the falling of snow\nç”Ÿå‘½çŸ­å¾—å¦‚è½é›ªèˆ¬\nAnd now I\u0026rsquo;m gonna miss you, I know\næ­¤åˆ»æˆ‘çŸ¥é“æˆ‘å°‡æœƒæ€å¿µä½ \nBut when I\u0026rsquo;m cold, cold\nç•¶æˆ‘å†·çš„æ™‚å€™\nIn water rolled, salt\nåœ¨æ°´ä¸­ç¿»æ¹§ã€ä¸”é¹¹æ¾€ç„¡æ¯”\nI know that you\u0026rsquo;re always with me\nAnd the way you will show\næˆ‘çŸ¥é“ä½ æ°¸é æœƒåœ¨æˆ‘èº«é‚Šï¼Œä¸”ç”¨ä½ å°‡æœƒå±•ç¾çš„æ–¹å¼\nAnd you\u0026rsquo;re with me wherever I go\nç„¡è«–æˆ‘å»å“ªè£¡ä½ å°‡æœƒä¼´éš¨\nAnd you give me this feeling\nThis everglow\nä½ çµ¦æˆ‘çš„é€™å€‹æ„Ÿè¦ºã€æ˜¯æ°¸æ†ä¹‹å…‰\nOh, what I would give for just a moment to hold\næˆ‘èƒ½çµ¦çš„åªæ˜¯çŸ­æš«ä¸€ç¬\nYeah, I live for this feeling, it\u0026rsquo;s everglow\næ˜¯çš„ï¼Œæˆ‘ç‚ºé€™ç¨®æ„Ÿè¦ºè€Œæ´»ï¼Œå°±æ˜¯é€™å€‹æ°¸æ†ä¹‹å…‰\nSo if you love someone\nYou should let them know\næ‰€ä»¥å¦‚æœä½ æ„›æŸå€‹äººï¼Œä½ æ‡‰è©²è®“ä»–å€‘çŸ¥é“\nOh, the light that you left me will everglow\né‚£ä½ ç•™ä¸‹çš„é€™é“å…‰ä¾¿æ˜¯æ°¸æ†ä¹‹å…‰\nNote\nç‚ºä»€éº¼æœ‰é€™éº¼ç¾çš„æ­Œ! ğŸ˜ \n","date":"2020-06-08T19:30:00+00:00","updated":"2020-06-08T19:30:00+00:00"},{"objectID":"1588280100","permalink":"/post/data-build-zookeeper-cluster/zookeeper-build-cluster/","title":"[Zookeeper] å»ºç«‹ Zookeeper Cluster","content":"Zookeeper æä¾›åˆ†æ•£å¼æ‡‰ç”¨ç¨‹å¼ä¸­çš„å”èª¿æœå‹™ï¼Œæ˜¯ Hadoop ç”Ÿæ…‹ç³»ç”¢å“ä¸­ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚ Zookeeper å¢é›†é©åˆæ­å»ºåœ¨å¥‡æ•¸è‡ºæ©Ÿå™¨ä¸Šï¼Œç›®çš„æ˜¯ç‚ºäº†æé«˜å¯ç”¨æ€§ä»¥åŠç¶­æŒé¸èˆ‰åˆ¶åº¦çš„é‹è¡Œã€‚[1]\nStep 1: Install Java JDK\r1$ sudo apt-get update 2$ sudo apt-get install openjdk-8-jdk 3$ java -version 4$ sudo vi /etc/environment 1JAVA_HOME=\u0026#34;/usr/lib/jvm/java-8-openjdk-amd64\u0026#34; 2JRE_HOME=\u0026#34;/usr/lib/jvm/java-8-openjdk-amd64/jre\u0026#34; 3PATH=\u0026#34;${PATH}:${JAVA_HOME}/bin:${JRE_HOME}/bin\u0026#34; ä½¿ç’°å¢ƒè®Šæ•¸ç”Ÿæ•ˆ\n5$ source /etc/environment 6$ env Step 2: Install zookeeper\r1$ cd /opt 2$ wget \u0026#34;https://archive.apache.org/dist/zookeeper/zookeeper-3.6.1/apache-zookeeper-3.6.1-bin.tar.gz\u0026#34; 3$ sudo tar zxvf apache-zookeeper-3.6.1-bin.tar.gz 4$ sudo mv apache-zookeeper-3.6.1-bin zookeeper 5$ sudo adduser nexcom root 6$ chown -R $USER:root /opt/zookeeper å»ºç«‹å­˜æ”¾ zk config åŠå…¶è³‡æ–™çš„ directory\n7$ mkdir /var/lib/zookeeper 8$ chown -R $USER:root /var/lib/zookeeper è¨­å®š zoo.cfg é…ç½®æª”\n9$ sudo cp /opt/zookeeper/conf/zoo_sample.cfg ./zoo.cfg 10$ vi /opt/zookeeper/conf/zoo.cfg åœ¨é…ç½®æª”ä¸­ä¿®æ”¹ä»¥ä¸‹åƒæ•¸\n1dataDir=/var/lib/zookeeper 2clientPort=2181 3 4#åŠ å…¥å…¶ä»– zookeeper ç¯€é»çš„ ip, ç¬¬ä¸€å€‹ port ç”¨æ–¼ follower é€£æ¥ leader, ç¬¬äºŒå€‹ port ç”¨æ–¼ç¯€é»é¸èˆ‰ 5server.1=10.0.0.4:2888:3888 6server.2=10.0.0.5:2888:3888 7server.3=10.0.0.6:2888:3888 å»ºç«‹ deamonï¼Œå°‡ zookeeper è¨­ç‚ºä¸€æœå‹™\n11$ sudo vi /etc/systemd/system/zookeeper.service åœ¨ zookeeper.service ä¸­åŠ å…¥ä»¥ä¸‹æ–‡å­—\n1[Unit] 2Description=Zookeeper Daemon 3Documentation=http://zookeeper.apache.org 4Requires=network.target 5After=network.target 6 7[Service] 8Type=forking 9WorkingDirectory=/opt/zookeeper 10User=root 11ExecStart=/opt/zookeeper/bin/zkServer.sh start /opt/zookeeper/conf/zoo.cfg 12ExecStop=/opt/zookeeper/bin/zkServer.sh stop /opt/zookeeper/conf/zoo.cfg 13ExecReload=/opt/zookeeper/bin/zkServer.sh restart /opt/zookeeper/conf/zoo.cfg 14TimeoutSec=30 15Restart=on-failure 16 17[Install] 18WantedBy=default.target ä¿®æ”¹ zkServer.sh ä»¥é¿å…åœ¨ telnet æ™‚ç™¼ç”Ÿ stat is not executed because it is not in the whitelist. Connection closed çš„éŒ¯èª¤\n12$ sudo vi /opt/zookeeper/bin/zkServer.sh åœ¨ zkServer.sh ä¸­åŠ å…¥ä»¥ä¸‹é€™ä¸€è¡Œ\n1ZOOMAIN=\u0026#34;-Dzookeeper.4lw.commands.whitelist=* ${ZOOMAIN}\u0026#34; åœ¨æ¯å°ç¯€é»ä¸Šè¨­å®š Zookeeper è­˜åˆ¥ç”¨å”¯ä¸€ id\n13$ echo \u0026#34;1\u0026#34; \u0026gt; /var/lib/zookeeper/myid å•Ÿå‹• zookeeper, ä¸¦è¨­ç‚ºé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•\n14$ sudo systemctl start zookeeper 15$ sudo systemctl enable zookeeper ä¸‹ä¸€ç¯‡å°‡ä»‹ç´¹ Kafka å¢é›†çš„å®‰è£ã€‚\nsource\r[1] https://medium.com/@bikas.katwal10/why-zookeeper-needs-an-odd-number-of-nodes-bb8d6020e9e9\r","date":"2020-04-30T20:55:00+00:00","updated":"2020-04-30T20:55:00+00:00"},{"objectID":"1586725980","permalink":"/post/programming-js-debugging-in-chrome/js-debugging-in-chrome/","title":"[Javascript] Debugging in Chrome","content":"Debugging æ˜¯æŒ‡åœ¨ä¸€å€‹è…³æœ¬ä¸­æ‰¾å‡ºéŒ¯èª¤ã€‚å¸‚é¢ä¸Šå¤§å®—ç€è¦½å™¨éƒ½æ”¯æŒé–‹ç™¼äººå“¡å·¥å…·ï¼Œèƒ½å¹«åŠ©é–‹ç™¼è€…ä¸€æ­¥æ­¥åœ°è¿½è¹¤ä»£ç¢¼ï¼ŒæŸ¥çœ‹ç•¶å‰å¯¦éš›é‹è¡Œæƒ…æ³ã€‚ æ­¤ç¯‡æ–‡ç« ä»¥å¸¸ç”¨çš„ Google Chrome åšèªªæ˜ï¼\né€²å…¥é–‹ç™¼äººå“¡å·¥å…·\ræŒ‰ F12 æˆ–æ˜¯å³ä¸Šè§’é¸å–®ä¸­çš„ æ›´å¤šå·¥å…· \\ é–‹ç™¼äººå“¡å·¥å…· é–‹å•Ÿé¢æ¿ã€‚\né€šå¸¸ debugging æœ€å¸¸ä½¿ç”¨åˆ°çš„æ˜¯ source ä»¥åŠ console é¢æ¿ã€‚\nConsole\ræ§åˆ¶å°ï¼Œå¯ä»¥è¼¸å…¥å‘½ä»¤åŸ·è¡Œï¼Œä»¥åŠç”¨ä¾†è¼¸å‡ºè³‡æ–™(å¦‚ console.log å°‡é¡¯ç¤ºæ–¼æ­¤)ã€‚\nSource\rSources é é¢åŒ…å«ä¸‰å€‹éƒ¨åˆ†ï¼š\næ–‡ä»¶å°èˆª (File Navigator)ï¼šåˆ—å‡ºäº†æ‰€æœ‰ä¾é™„æ–¼æ­¤é é¢çš„æ–‡ä»¶ã€‚ ä»£ç¢¼ç·¨è¼¯ (Code Editor)ï¼šå±•ç¤ºç¨‹å¼ç¢¼ã€‚ JavaScript Debuggingï¼š debugging æ“ä½œ\ræŒ‰éˆ• æ“ä½œ æè¿° Resume ç¹¼çºŒåŸ·è¡Œç›´åˆ°ä¸‹ä¸€å€‹æ–·é»ã€‚å¦‚æœæ²’æœ‰é‡åˆ°æ–·é»ï¼Œå‰‡ç¹¼çºŒæ­£å¸¸åŸ·è¡Œã€‚ Long Resume ç¹¼çºŒåŸ·è¡Œï¼Œå°‡æ–·é»åœç”¨ 500 æ¯«ç§’ã€‚ä¾¿æ–¼æš«æ™‚è·³éæ–·é»ï¼Œå¦å‰‡æœƒæŒçºŒæš«åœåŸ·è¡Œä»£ç¢¼ï¼Œä¾‹å¦‚ï¼Œå¾ªç’°å…§çš„æ–·é»ã€‚é»æ“Šä¸¦æŒ‰ä½ Resumeï¼Œç›´åˆ°å±•é–‹ä»¥é¡¯ç¤ºæ“ä½œã€‚ Step Over é‹è¡Œä¸‹ä¸€æ¢æŒ‡ä»¤ï¼Œä½†ä¸æœƒé€²å…¥åˆ°å‡½æ•¸ä¸­ï¼Œæœƒåœ¨ç„¡å½¢ä¸­åŸ·è¡Œå‡½æ•¸èª¿ç”¨ï¼Œè·³éå‡½æ•¸å…§éƒ¨ã€‚åŸ·è¡Œæœƒåœ¨è©²å‡½æ•¸åŸ·è¡Œå¾Œç«‹å³æš«åœã€‚å¦‚æœæˆ‘å€‘å°è©²å‡½æ•¸çš„å…§éƒ¨åŸ·è¡Œä¸æ„Ÿèˆˆè¶£ï¼Œé€™å‘½ä»¤æœƒå¾ˆæœ‰ç”¨ã€‚ Step Into å¦‚æœä¸‹ä¸€è¡ŒåŒ…å«ä¸€å€‹å‡½æ•¸èª¿ç”¨ï¼ŒStep Into å°‡è·³è½‰ä¸¦åœ¨å…¶ç¬¬ä¸€è¡Œæš«åœè©²å‡½æ•¸ã€‚ Step Out å‡½æ•¸èª¿ç”¨å¾Œï¼ŒåŸ·è¡Œç•¶å‰å‡½æ•¸å‰©é¤˜éƒ¨åˆ†ï¼Œç„¶å¾Œåœ¨ä¸‹ä¸€å€‹èªå¥æš«åœã€‚ Step é‹è¡Œä¸‹ä¸€æ¢èªå¥ã€‚ä¸€æ¬¡æ¥ä¸€æ¬¡åœ°é»æ“Šï¼Œæ•´å€‹è…³æœ¬çš„èªå¥æœƒè¢«é€å€‹åŸ·è¡Œã€‚ Deactivate breakpoints æš«æ™‚åœç”¨æ‰€æœ‰æ–·é»ã€‚ç”¨æ–¼ç¹¼çºŒå®Œæ•´åŸ·è¡Œï¼Œä¸æœƒçœŸæ­£ç§»é™¤æ–·é»ã€‚å†æ¬¡é»æ“Šä»¥é‡æ–°å•Ÿç”¨æ–·é» Activate breakpoints å•Ÿç”¨æ–·é» debugging ç‹€æ…‹\rWatch\né¡¯ç¤ºä»»æ„è¡¨é”å¼çš„ç•¶å‰å€¼ã€‚å¯ä»¥é»æ“ŠåŠ è™Ÿ + ç„¶å¾Œè¼¸å…¥ä¸€å€‹è¡¨é”å¼ã€‚ä¾¿æœƒéš¨æ™‚é¡¯ç¤ºå®ƒçš„å€¼ï¼Œä¸¦åœ¨åŸ·è¡Œéç¨‹ä¸­è‡ªå‹•é‡æ–°è¨ˆç®—è©²è¡¨é”å¼ã€‚(åŒåœ¨ scope ä¸­çœ‹åˆ°çš„è®Šæ•¸) Call Stack\næª¢è¦–ç›®å‰å †ç–Šä¸Šçš„å‡½å¼æˆ–ç¨‹åºå‘¼å«ã€‚ Scope\né¡¯ç¤ºç•¶å‰çš„è®Šé‡ã€‚ Local é¡¯ç¤ºç•¶å‰å‡½æ•¸ä¸­çš„è®Šé‡ï¼›Global é¡¯ç¤ºå…¨å±€è®Šé‡ï¼ˆä¸åœ¨ä»»ä½•å‡½æ•¸ä¸­ï¼‰ã€‚ æ–·é»\nåœ¨ç¨‹å¼ç¢¼ä¸­è¨­å®šé€²å…¥ä¸­æ–·é»æœ‰è¨±å¤šå¥½è™•ï¼Œ â€¦","date":"2020-04-12T21:13:00+00:00","updated":"2020-04-12T21:13:00+00:00"},{"objectID":"1584215280","permalink":"/post/devops-git-server/build-git-server-on-ubuntu/","title":"[Git] Build a Git Server on Ubuntu","content":"Step 1: é›»è…¦/VM ç’°å¢ƒè¨­ç½®\rä½œæ¥­ç³»çµ±é¸æ“‡ Ubuntu æˆ–å…¶ä»– Linux ç‰ˆæœ¬ é–‹å•Ÿ SSH port æ–°å¢ä½¿ç”¨è€…å¸³è™Ÿ git 1$ sudo adduser --home /home/git --disabled-password git 2//--disabled-password è¡¨ç¤ºå–æ¶ˆç”¨å¯†ç¢¼ç™»å…¥ Note\nsmall tips: è‹¥é–‹ç™¼åœ˜éšŠåƒ…æœ‰å…©ä¸‰äººï¼Œé‚£ä¸å»ºç«‹ git å¸³è™Ÿè€Œæ˜¯å»ºç«‹ä½¿ç”¨è€…å€‹åˆ¥çš„å¸³è™Ÿä¹Ÿè¡Œã€‚ä½†è€ƒæ…®åˆ°æ—¥å¾Œå¯èƒ½æ“´ç·¨æˆ–æ˜¯äººå“¡äº¤æ›¿ç­‰ç­‰çš„å› ç´ ï¼Œå¯èƒ½æœƒå¢åŠ ç®¡ç†çš„è² æ“”ã€‚\nStep 2: å®‰è£æ‰€éœ€å¥—ä»¶\rå®‰è£ git 1$ sudo apt-get install git å®‰è£ Gitosis 1$ sudo apt-get install python-setuptools 2$ cd /tmp 3$ git clone https://github.com/tv42/gitosis.git 4$ cd gittosis 5$ sudo python setup.py install 1æ‰¿ç¬¬ä¸€æ­¥çµå°¾ï¼Œç‚ºäº†ä½¿ç”¨åŠç®¡ç†ä¸Šçš„æ–¹ä¾¿ï¼ŒGitosis ä¾¿æ‡‰é‹è€Œç”Ÿï¼ŒGitosis æ˜¯ä¸€å¥—ç”¨ä¾†ç®¡ç†æˆæ¬Šé‡‘é‘°æ–‡ä»¶å’Œå¯¦ç¾ç°¡å–®é€£æ¥é™åˆ¶çš„è…³æœ¬ã€‚å¯ä»¥è¼•é¬†çš„ç®¡ç†æ¯å€‹ä½¿ç”¨è€…ï¼Œè€Œä¸éœ€å¯¦éš›åœ¨ä¸»æ©Ÿä¸Šæ–°å¢/ç§»é™¤å¸³è™Ÿï¼Œé€™æ¨£ user çš†å¯ç”¨ git@server:ServerIP.git é€™æ¨£çš„æ ¼å¼ä¾†å–å¾—æˆ–ä¸Šå‚³ç‰ˆæœ¬åº«åˆ°Serverä¸Šã€‚ åœ¨ä½¿ç”¨è€…å®¶ç›®éŒ„ /home/git/ ä¸‹æ–°å¢è³‡æ–™å¤¾ repositories ç•¶ä½œç‰ˆæœ¬åº«ä½ç½® Gitosis é è¨­æœƒæŠŠ /home/git é€™å€‹ç›®éŒ„è£¡é¢çš„ repositories è³‡æ–™å¤¾ç•¶æˆæ‰€æœ‰ repository çš„æ ¹ç›®éŒ„ï¼Œä»¥å¾Œæ‰€æœ‰çš„å°ˆæ¡ˆå°±éƒ½æ”¾åœ¨è£¡é¢ã€‚\nStep 3: git client ç«¯çš„å‹•ä½œ\ræ¯å€‹è¦ä½¿ç”¨ git server çš„ä½¿ç”¨è€…ï¼Œå°‡æœƒæ“è­·ä¸€æŠŠè‡ªå·±çš„é‡‘é‘°ï¼Œè‹¥åŒä¸€ä½¿ç”¨è€…ä½¿ç”¨å¤šå°é›»è…¦ï¼Œå‰‡éœ€å°‡åŒä¸€æŠŠçš„ç§é‘°è¤‡è£½åˆ°åŒè·¯å¾‘ä¸‹ä¾¿å¯é€£ç·šã€‚\né–‹å•Ÿ git bash ç”¢ç”Ÿä¸€å°é‡‘é‘° 1$ ssh-keygen -t rsa -C \u0026amp;#34;xxx@email.com\u0026amp;#34; 2// -C åƒæ•¸ç”¨æ–¼æŒ‡å®šé€™å€‹é‡‘é‘°çš„è­˜åˆ¥ç¢¼ï¼Œé è¨­æ˜¯ã€Œå¸³è™Ÿ@ä¸»æ©Ÿåç¨±ã€ï¼Œä½†ç‚ºäº†å¥½ç®¡ç†ï¼Œæ‰€ä»¥å»ºè­°ç”¨ä½¿ç”¨è€…çš„å”¯ä¸€è­˜åˆ¥å€¼å¦‚ email è¼¸å…¥é‡‘é‘°å­˜æ”¾ä½ç½® è‹¥æ²’è¼¸å…¥å‰‡å­˜åœ¨é è¨­ä½ç½® è¼¸å…¥å¯†ç¢¼ é€™è£¡ä¸éœ€ â€¦","date":"2020-03-14T19:48:00+00:00","updated":"2020-03-14T19:48:00+00:00"},{"objectID":"1581629520","permalink":"/post/programmimg-nginx-certbot/ssl-letsencrypt/","title":"[SSL] ç”¨ Let's Encrypt \u0026 Certbot ç‚ºç¶²ç«™åŠ å¯†","content":"åœ¨è¬›æ±‚è³‡è¨Šå®‰å…¨çš„æ™‚ä»£ï¼Œå¤§éƒ¨åˆ†çš„ç¶²ç«™å¹¾ä¹éƒ½ä½¿ç”¨ https åšç‚ºç¶²ç«™çš„é€šè¨Šå”å®šï¼Œé€™ç¯‡æ–‡ç« å°‡è¨˜éŒ„æ€éº¼ä½¿ç”¨å…è²»çš„ç¬¬ä¸‰æ–¹æ†‘è­‰ Let\u0026amp;rsquo;s Encrypt \u0026amp;amp; Certbotï¼Œç‚ºç¶²ç«™æ·»åŠ å®‰å…¨ä¿éšœã€‚\nLet\u0026amp;rsquo;s Encryt\rLetâ€™s Encrypt æ˜¯ä¸€å€‹å…è²»ã€è‡ªå‹•åŒ–ä¸”é–‹æ”¾çš„æ†‘è­‰æ©Ÿæ§‹ (Certificate Authority, CA)ï¼Œå–å¾—æ†‘è­‰å¾Œï¼Œå¯ç‚ºç¶²ç«™æä¾› SSL/TLS åŠ å¯†ã€‚\nLetâ€™s Encrypt ä½¿ç”¨ ACME å”å®šï¼Œä¾†é©—è­‰ç”³è«‹ç¶²åŸŸæ§åˆ¶æ¬Šã€‚ä½¿ç”¨è€…é€é ACME å®¢æˆ¶ç«¯è»Ÿé«”å–å¾—ä¸¦ç®¡ç†æ†‘è­‰ã€‚æœ€å¸¸è¦‹çš„ ACME å®¢æˆ¶ç«¯è»Ÿé«”ç‚º Certbot\nNote\nACME (Automatic Certificate Management Environment): è‡ªå‹•æ†‘è­‰ç®¡ç†ç’°å¢ƒã€‚ç”±Â Let\u0026amp;rsquo;s Encrypt æ‰€å¯¦ä½œçš„å”è­°ï¼Œèˆ‡å®ƒç›¸å®¹çš„è»Ÿé«”å¯ä»¥é€éæ­¤å”è­°èˆ‡ Letâ€™s Encrypt æºé€šä»¥ç²å¾—æ†‘è­‰ã€‚[1]\nå¯¦ä½œ\råœ¨ Certbot\rå®˜æ–¹ç¶²ç«™æœ‰å¿«é€ŸæŒ‡å¼•ï¼Œåªéœ€è¦é¸æ“‡ç¶²ç«™ä½¿ç”¨çš„ HTTP Server ä»¥åŠä½œæ¥­ç³»çµ±ï¼Œä¸‹æ–¹å°±æœƒåˆ—å‡ºæŒ‡ä»¤ï¼Œå¯ä»¥ç›´æ¥è¤‡è£½ä¸¦å®‰è£ã€‚\næœ¬æ–‡ä»¥ Ubuntu 18.04 + Nginx HTTP Server å¯¦ä½œã€‚\n1. åŠ å…¥Certbot PPA\rNote\nPPA(Personal Pakage Archives)ï¼šå€‹äººè»Ÿé«”åŒ…æ–‡ä»¶ï¼Œå¯åŠ å…¥å€‹äººé–‹ç™¼è€…çš„Â repositoryï¼Œä½¿å…¶ä»–ä½¿ç”¨æˆ¶å®‰è£å’Œæ›´æ–°ã€‚\nè«‹ä¾åºåœ¨ console ä¸­ä¸‹ä»¥ä¸‹ command\n1// æª¢æŸ¥æ›´æ–° 2$ sudo apt-get update 3 4// å®‰è£å¥—ä»¶ç®¡ç†çš„å¥—ä»¶ 5$ sudo apt-get install software-properties-common 6 7// å•Ÿç”¨universeå€‰åº« 8$ sudo add-apt-repository universe 9 10// åŠ å…¥ certbot ppa repository 11$ sudo add-apt-repository ppa:certbot/certbot 12 13// å†æ›´æ–°ä¸€æ¬¡å¥—ä»¶è³‡è¨Š 14$ sudo apt-get update 2. å®‰è£ Certbot\r1$ sudo apt-get install certbot â€¦","date":"2020-02-13T21:32:00+00:00","updated":"2020-02-13T21:32:00+00:00"},{"objectID":"1580666700","permalink":"/post/os-introduction/os-introduction/","title":"[OS] ä½œæ¥­ç³»çµ±æ¦‚è«–","content":"ç¨‹å¼ã€ç¨‹åºã€åŸ·è¡Œç·’\rç¨‹å¼(Program)\rå°šæœªè¼‰é€²è¨˜æ†¶é«”çš„éœæ…‹ç¨‹å¼ç¢¼é›†åˆã€‚\nç¨‹åº(Process)\ræ­£åœ¨åŸ·è¡Œä¸¦è¼‰é€²è¨˜æ†¶é«”ä¸­çš„å‹•æ…‹ç¨‹å¼ï¼Œæ˜¯ä½œæ¥­ç³»çµ±åˆ†é…è³‡æºçš„æœ€å°å–®ä½ï¼ˆOS ä»¥ç¨‹åºç‚ºå–®ä½ï¼Œåˆ†é…ç³»çµ±è³‡æºï¼ŒOS ä¸‹çš„å·¥ä½œç®¡ç†å“¡æ‰€æ¨™ç¤ºçš„ä¸€å€‹å€‹ task å³ç‚ºä¸€å€‹ç¨‹åºï¼Œæ“æœ‰ç¨ç«‹çš„ PID ä»¥åŠè¨˜æ†¶é«”ç©ºé–“ï¼‰ã€‚\nåŸ·è¡Œç·’(Thread)\råˆç¨± Light-weight Process (LWP)ï¼Œæ˜¯ OS ä¸­é€²è¡Œé‹ç®—æ’ç¨‹çš„æœ€å°å–®ä½ï¼Œè¢«åŒ…åœ¨ä¸€å€‹ Process ä¸­ï¼Œè€ŒåŒä¸€ Process ä¸‹çš„å„å€‹åŸ·è¡Œç·’ä¹‹é–“å…±äº«è©² Process è³‡æºã€‚\nä¸‰è€…çš„é—œä¿‚æ˜¯ï¼šä¸€å€‹ç¨‹å¼å¯ä»¥æœƒæœ‰å¤šå€‹ç¨‹åºï¼Œä¸€å€‹ç¨‹åºå¯èƒ½æœƒæœ‰å¤šå€‹åŸ·è¡Œç·’ã€‚ ä½µç™¼(concurrency) v.s. ä¸¦è¡Œ(parallelism)\rä½µç™¼\råŒæ™‚åŸ·è¡Œå¤šå€‹ç¨ç«‹çš„ç¨‹å¼é‚è¼¯ï¼Œä½†ä¸¦ä¸ä»£è¡¨åŒæ™‚é€²è¡Œè™•ç†ã€‚ è‹¥ç¨‹å¼åŸ·è¡Œåœ¨å–®æ ¸å–®åŸ·è¡Œç·’çš„ CPU ä¸Šï¼Œæ‰€æœ‰ä»»å‹™éƒ½é ˆæ’éšŠç­‰å¾… CPU è³‡æºã€‚\nä¸¦è¡Œ\rè®“ç¨‹å¼çœŸæ­£çš„åŒæ™‚è™•ç†å¤šå€‹ä»»å‹™ï¼Œä¸¦è¡Œä¸¦ä¸æ˜¯ç¨‹å¼èƒ½å¤ å¸¶ä¾†çš„ç‰¹æ€§ï¼Œè€Œæ˜¯éœ€è¦é ç¡¬é«”ï¼Œéœ€ä»°è³´å¤šæ ¸ CPU æˆ–æ˜¯ä½¿ç”¨å¤šå°ä¼ºæœå™¨çµ„æˆå¢é›†ã€‚\nå…©è€…çš„é—œä¿‚æ˜¯ï¼šä¸¦è¡Œçš„ç‹€æ³ä¸€å®šæœƒä½µç™¼ï¼Œä½†ç™¼ç”Ÿä½µç™¼æ™‚å»ä¸ä¸€å®šæ˜¯ä¸¦è¡Œã€‚ Multiprogramingã€Multiprocessingã€Multitaskingã€Multithreading\rMultiprogramming\ré›»è…¦åŒæ™‚(concurrency)åŸ·è¡Œå¤šå€‹ç¨‹å¼ã€‚ï¼ˆå¦‚åŒæ™‚ä½¿ç”¨ excel ä»¥åŠ firefoxï¼‰\nMultiprocessing\ré›»è…¦åŒæ™‚ä½¿ç”¨å¤šå€‹è™•ç†å™¨ï¼Œå¤šå€‹ç¨‹åºå¯åœ¨åŒä¸€æ™‚é–“(parallelism)åŸ·è¡Œã€‚\nMultitasking\rå¤šå€‹ä»»å‹™å…±äº«ä¸€å€‹è³‡æº(å¦‚ä¸€é¡† CPU æˆ–è¨˜æ†¶é«”)ã€‚\nMultithreading\ræŒ‡ä¸€å€‹ç¨‹åºä¸­æœ‰å¤šå€‹åŸ·è¡Œç·’åœ¨åŸ·è¡Œï¼Œå½¼æ­¤å…±ç”¨ç›¸åŒçš„ç¨‹åºè³‡æºã€‚\né›–ç„¶å­—é¢ä¸Šçœ‹èµ·ä¾†æ„æ€æ¥è¿‘ï¼Œä½†æ¯å€‹åè©éƒ½æœ‰äº›å¾®çš„å·®è·ï¼Œå…¶ä¸­ç‰¹åˆ¥è¨˜éŒ„åœ¨å…¶ä»–ç¶²ç«™ä¸­çœ‹åˆ°é‡å° multitasking and multiprogramming çš„é—¡è¿°ï¼¿\n1Multitasking is a logical extension of multi programming. The major way in which multitasking differs from multi programming is that multi programming â€¦","date":"2020-02-02T18:05:00+00:00","updated":"2020-02-02T18:05:00+00:00"},{"objectID":"1578168120","permalink":"/post/programming-golang-function/golang-function/","title":"[Golang] Function","content":"Introduction\råœ¨ Go è£¡ï¼Œfunction æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå®ƒå¯ä»¥ä½œç‚ºå¦ä¸€ function ä¸­çš„åƒæ•¸å‚³éã€å¯ä»¥å°‡å®ƒæŒ‡æ´¾çµ¦ä¸€è®Šæ•¸ã€ä¹Ÿå¯ä»¥åœ¨å¦ä¸€å€‹ function ä¸­ç•¶ä½œ return å€¼ã€‚\nå‡½å¼å¯ä»¥å…·åä¹Ÿå¯ä»¥åŒ¿å(anonynous function)ï¼›\nä¸€èˆ¬å‡½å¼\nfunc (r receiverType) identifier(arguments argumentTypes) returnType{}\nfunctionä¸­çš„åƒæ•¸ä»¥åŠè¿”å›å€¼å¯ä»¥æœ‰é›¶å€‹æˆ–å¤šå€‹ï¼š\n1\\\\å‚³å…¥é›¶å€‹argument, ç„¡å›å‚³å€¼ 2func f1(){ 3\tfmt.Println(\u0026#34;hello!\u0026#34;) 4} 5 6\\\\å‚³å…¥å…©å€‹arguments, å›å‚³å…©å€‹return values 7func f2(x, y int) (int, int) { 8 return x + y, x - y 9} 10 11\\\\å‚³å…¥æœªçŸ¥å€‹æ•¸çš„å¤šå€‹arguments 12func f3(x ...int) { 13\tfor _, v := range x{ 14 fmt.Println(x) 15 } 16} åŒ¿åå‡½å¼ç‚ºæ²’æœ‰åå­—çš„å‡½å¼\nfunc(arguments) returnType{}\nä»¥ä¸‹å°‡é‡å°functionä½œç‚ºä¸€ç­‰å…¬æ°‘çš„å¯¦è¸åšé—¡è¿°ã€‚\nCallback å›å‘¼å‡½å¼\rå®šç¾© æŠŠfunction Aç•¶ä½œåƒæ•¸å‚³é€²å¦ä¸€å€‹function Bå…§ï¼Œæ•…åœ¨åŸ·è¡ŒBçš„æ™‚å€™æœƒcallbackå›å»åƒè€ƒAã€‚ ä»¥ä¸‹ç¯„ä¾‹å…ˆå®šç¾©ä¸€å€‹ç”¨æ–¼åŠ ç¸½çš„å‡½å¼sumï¼Œå†å®šç¾©å¦ä¸€å€‹ç”¨æ–¼è¨ˆç®—å¥‡æ•¸ç¸½å’Œçš„å‡½å¼odd_sumï¼Œåœ¨odd_sumä¸­ä¸Ÿå…¥sumç•¶ä½œåƒæ•¸å»è¨ˆç®—ç¸½åˆï¼Œå¯¦ç¾callbackã€‚\n1package main 2 3import ( 4\t\u0026#34;fmt\u0026#34; 5) 6 7func main() { 8\ti := []int{1, 2, 3, 4, 5, 6, 7} 9\toddsum := odd_sum(sum, i...) //æŠŠsumå‡½æ•¸ç•¶åƒæ•¸å‚³å…¥ 10\tfmt.Println(\u0026#34;The sum of the odd number in the list I is\u0026#34;, oddsum) 11} 12 13func sum(x ...int) int { 14\ttotal := 0 15\tfor _, v := range x { 16\ttotal += v 17\t} 18\treturn total 19} 20 21 22//ä½¿ç”¨func(x ...int) int ç•¶å‡½å¼å‚³å…¥, å‡½å¼è®Šæ•¸ç‚ºf 23func odd_sum(f func(x ...int) int, y ...int) int { 24\toddlist := []int{} 25\tfor _, v := range y { 26\tif v%2 == 1 { 27\toddlist = append(oddlist, v) 28\t} 29\t} 30\treturn f(oddlist...) 31} Nested function å…§åµŒå‡½å¼\rå®šç¾© åœ¨ Go ä¸­ï¼Œä¸å…è¨±åœ¨function Aä¸­åˆå®£å‘Šå¦ä¸€å€‹function Bï¼Œä½†å¯ä»¥æŠŠåŒ¿åçš„function BæŒ‡å®šçµ¦æŸè®Šæ•¸ä¸¦æ”¾åœ¨function Aä¸­ã€‚ åœ¨func mainå®£å‘Šè®Šæ•¸fç‚ºåŒ¿åå‡½å¼ï¼š\n1package main 2import \u0026#34;fmt\u0026#34; 3 4func main(){ 5\tx := 0 6\tf := func() int{ 7\tx++ 8\treturn x 9\t} 10\tfmt.Println(f()) 11} closure é–‰åŒ…\rå®šç¾© ç•¶åŒ¿åå‡½æ•¸ä¸­ä½¿ç”¨äº†å¤–éƒ¨è®Šæ•¸xï¼Œæ­¤æ™‚é€™å€‹åŒ¿åå‡½å¼å½¢æˆä¸€å€‹é–‰åŒ…ã€‚æ‰€ä»¥é–‰åŒ…å¯ä»¥è¦–ç‚ºåŒ¿åå‡½å¼çš„ç‰¹æ®Šæ¡ˆä¾‹ä¹‹ä¸€ã€‚ ä¹˜ä¸Šç¯„ä¾‹ï¼Œç•¶é‡è¤‡å‘¼å«f()æ™‚ï¼Œæœƒç™¼ç¾xçš„å€¼å­˜ç•™åœ¨å‡½å¼ä¸­ï¼š\n1\tfmt.Println(f()) 2+\tfmt.Println(f()) 3+\tfmt.Println(f()) 4} åŸ·è¡Œçµæœ\n11 22 33 ç‚ºäº†æ›´å¯¦è¸é–‰åŒ…æ•¸æ“šéš”é›¢çš„å„ªå‹¢ï¼Œæˆ‘å€‘å°‡xèˆ‡åŒ¿åå‡½æ•¸ç§»å‡ºmain functionå¤–ç¨ç«‹æˆç‚ºä¸€å€‹å‡½å¼\nå…¶ä¸­æˆ‘å€‘ä½¿ç”¨åŒ¿åå‡½å¼func() int{\u0026hellip;}ä½œç‚ºfunction barçš„å›å‚³å€¼\n1package main 2import \u0026#34;fmt\u0026#34; 3 4func main(){ 5\tf := foo() 6 fmt.Println(f()) 7\tfmt.Println(f()) 8 fmt.Println(f()) 9} 10 11func foo() func() int{ 12\tx := 0 13\treturn func() int { 14\tx++ 15\treturn x 16\t} åŸ·è¡Œçµæœ\n11 22 33 æ­¤æ™‚å³ä½¿æˆ‘å€‘åŸ·è¡Œå®Œfoo()ï¼Œè®Šæ•¸xä»ç„¶å­˜åœ¨åœ¨é–‰åŒ…ä¸­ï¼Œå¤–éƒ¨ç„¡æ³•è¨ªå•æ±™æŸ“ã€‚\n","date":"2020-01-04T20:02:00+00:00","updated":"2020-01-04T20:02:00+00:00"},{"objectID":"1577738460","permalink":"/post/golang-array-and-slice/golang-array-and-slice/","title":"[Golang] Array v.s. Slice","content":"Array\ré™£åˆ—çš„é•·åº¦å›ºå®šï¼Œä¸”ç‚ºé™£åˆ—é¡å‹çš„ä¸€éƒ¨ä»½ã€‚ ï¼ˆ[4]int ä»¥åŠ [5]int ç‚ºå…©ç¨®ç¨ç«‹ä¸”ä¸ç›¸å®¹çš„ä¸åŒtypeï¼‰\nå®£å‘ŠåŠåˆå§‹åŒ–array\r1 2// var [len]Typeï¼Œç„¡åˆå§‹åŒ–å€¼ï¼Œå‰‡åˆå§‹å€¼ç‚ºzero value 3var arr1 [2]int 4 5// var [len]Typeï¼Œä¸¦çµ¦åˆå§‹å€¼ 6var arr2 = [2]int{1, 2} 7 8// var [...]Typeï¼Œè®“complierè‡ªè¡Œè¨ˆç®—é•·åº¦ 9var arr3 = [...]int{1, 2} 10 11// := [len]Typeï¼Œåœ¨funcä¸­ä½¿ç”¨ç°¡çŸ­å®£å‘Šç¬¦è™Ÿï¼Œç„¡çµ¦åˆå§‹å€¼ 12arr4 := [2]int{} 13 14// := [len]Typeï¼Œä¸¦çµ¦åˆå§‹å€¼ 15arr5 := [2]int{} 16 17// := [...]Typeï¼Œè®“complierè‡ªè¡Œè¨ˆç®—é•·åº¦ 18arr6 := [...]int{1, 2} ç•¶è³¦å€¼å’Œå‚³éarrayæ™‚ï¼Œæ˜¯è¤‡è£½æ•´å€‹é™£åˆ—å…§å®¹\n1package main 2 3import ( 4\t\u0026amp;#34;fmt\u0026amp;#34; 5) 6 7func main() { 8\tarr1 := [2]string{\u0026amp;#34;apple\u0026amp;#34;, \u0026amp;#34;banana\u0026amp;#34;} 9\tarr2 := [2]string{} 10 11\tarr2 = arr1 12 13\tfmt.Printf(\u0026amp;#34;arr1: %p, %v \\n\u0026amp;#34;, \u0026amp;amp;arr1, arr1) 14\tfmt.Printf(\u0026amp;#34;arr2: %p, %v \\n\u0026amp;#34;, \u0026amp;amp;arr2, arr2) 15 16\tarr3(arr1) 17} 18 19func arr3(x [2]string) { 20\tfmt.Printf(\u0026amp;#34;arr3: %p, %v \\n\u0026amp;#34;, \u0026amp;amp;x, x) 21} åŸ·è¡Œçµæœ\n1arr1: 0x40a0e0, [apple banana] 2arr2: 0x40a0f0, [apple banana] 3arr3: 0x40a120, [apple banana] Array ç¼ºé»\rä¸Šé¢ä¸‰å€‹arrayçš„ä½å€çš†ä¸ç›¸åŒï¼Œé©—è­‰å‚³éæ™‚éƒ½æ˜¯è¤‡è£½æ•´å€‹é™£åˆ—\nå¦‚æ­¤ï¼Œå¯ç™¼ç¾ä½¿ç”¨arrayçš„å…©å€‹å¼Šè™•\n1. arrayæ˜¯å›ºå®šé•·åº¦, ä½¿ç”¨èµ· â€¦","date":"2019-12-30T20:41:00+00:00","updated":"2019-12-30T20:41:00+00:00"},{"objectID":"1577595960","permalink":"/post/programming-golang-method/golang-method/","title":"[Golang] Method","content":"\rInfo\nGolang is all about TYPE!\nå®šç¾©\rmethodæ˜¯ä¸€å€‹é¡å¤–å¸¶æœ‰receiver(æ¥æ”¶å™¨)çš„fuctionï¼Œreceiverç‚ºæŸtypeçš„è®Šé‡ï¼Œè€Œtypeçš„å‹æ…‹å¯ä»¥æ˜¯structæˆ–æ˜¯non-struct\nèªæ³•å¦‚ä¸‹\n1func (r receiverType) identifier(parameter) returnTypes {} ç¯„ä¾‹å¦‚ä¸‹\n1\ttype student struct { 2\tname string 3\tschool int 4\t} 5\t6\tfunc (s student) greet() string { 7\treturn fmt.Sprintf(\u0026#34;Hi, I\u0026#39;m %v from %v.\u0026#34;, s.name, s.school) 8\t} å‘¼å« method\rtypeçš„è®Šé‡å‰‡é€é . å‘¼å«methodï¼š\n9 10func main() { 11\ts1 := student{\u0026#34;Alice\u0026#34;, 112} 12\ts2 := student{\u0026#34;Bob\u0026#34;, 118} //s1 \u0026amp; s2ç‚ºstudent type çš„è®Šæ•¸ 13\t14\tfmt.Println(s1.greet()) 15\tfmt.Println(s2.greet()) //é€évariable.methodå‘¼å« 16\t} Pointer v.s. Value as a receiver\rmethodä¸­çš„receiverå¯ä»¥æ˜¯å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯pointerï¼Œè‹¥ç‚ºpointerï¼Œå‰‡å¯ä»¥ç›´æ¥ä¿®æ”¹receiverä¸­çš„å…§å®¹ã€‚\nğŸ“¢ ä½¿ç”¨pointerå‚³éçš„æ™‚æ©Ÿ ğŸ“¢\nWarning\nç”¨æ–¼æ¬²æ”¹è®Šreceiverè®Šæ•¸çš„å€¼æ™‚ struct æœ¬èº«å¾ˆå¤§ï¼Œè¤‡è£½ä»£åƒ¹é«˜æ™‚ ç•¶structçš„methodæœ‰ä¸€å€‹receiverç‚ºpointeræ™‚ï¼Œå‰‡å…¶é¤˜çš„methodçš„receiverä¹Ÿå¿…é ˆä½¿ç”¨pointer ä»¥ä¸‹ç¯„ä¾‹å±•ç¾å‚³å€¼(value)åŠå‚³å€(pointer)çš„å·®ç•°ï¼Œè«‹ç•™æ„æ­¤ç¯„ä¾‹æ‰“ç ´äº†ä¸Šé¢çš„ç¬¬ä¸‰é»åŸå‰‡ï¼Œåƒ…æ˜¯ç‚ºäº†è¦é¡¯ç¤ºå…©è€…çš„ç•°åŒï¼š\n1\tpackage main 2\t3\timport \u0026#34;fmt\u0026#34; 4\t5\ttype student struct { 6\tname string 7\tschool int 8\t} 9\t10\tfunc (s student) transByValue(x int) string { 11\ts.school = x 12\treturn fmt.Sprintf(\u0026#34;Hi, I\u0026#39;m %v from %v.\u0026#34;, s.name, s.school) 13\t} 14\t15\tfunc (s *student) transByInference(x int) string { 16\ts.school = x 17\treturn fmt.Sprintf(\u0026#34;Hi, I\u0026#39;m %v from %v.\u0026#34;, s.name, s.school) 18\t} 19\t20\tfunc main() { 21\ts1 := student{\u0026#34;Alice\u0026#34;, 112} 22\t23\tfmt.Println(s1.transByValue(118)) 24\tfmt.Println(s1.school) 25 26\tfmt.Println((\u0026amp;s1).transByValue(117)) 27\tfmt.Println(s1.school) 28\t29\tfmt.Println(s1.transByInference(113)) 30\tfmt.Println(s1.school) 31\t32\tfmt.Println((\u0026amp;s1).transByInference(114)) 33\tfmt.Println(s1.school) 34\t35\t} åŸ·è¡Œçµæœ\n1Hi, I\u0026#39;m Alice from 118. 2112 3Hi, I\u0026#39;m Alice from 117. 4112 5Hi, I\u0026#39;m Alice from 113. 6113 7Hi, I\u0026#39;m Alice from 114. 8114 ç”±ä¸Šè¿°ç¯„ä¾‹ä¸­ï¼Œå¯ä»¥ç™¼ç¾åˆ°ï¼š\nWarning\nğŸ” ç•¶ä½¿ç”¨valueä½œç‚ºreceiverå‚³éæ™‚ï¼Œå‡½æ•¸åƒ…copyäº†å€¼ï¼Œä¸¦ç„¡æ”¹è®Šåˆ°è®Šæ•¸æœ¬èº«\nğŸ” ç•¶ä½¿ç”¨pointerä½œç‚ºreceiverå‚³éæ™‚ï¼Œæ˜¯å‚³éæ•´å€‹è®Šæ•¸ï¼Œæ•…æœƒæ”¹åˆ°è®Šæ•¸æœ¬èº«\n","date":"2019-12-29T05:06:00+00:00","updated":"2019-12-29T05:06:00+00:00"},{"objectID":"1577116560","permalink":"/post/hexo-font/","title":"[Hexo] NexT æ›´æ”¹å­—é«”","content":"Blogæœ€é‡è¦çš„çµ„æˆç‚ºæ–‡ç« ï¼Œæ‰€ä»¥ç¬¬ä¸€ç¯‡å°±æ±ºå®šä¾†è¨˜éŒ„æˆ‘æ€éº¼æ”¹ç¶²ç«™çš„æ–‡å­—å­—é«”ã€‚\nä½¿ç”¨çš„æ–¹æ³•æ˜¯è¼‰å…¥Google Font API -\nGoogle Font\ræ˜¯ä¸€å€‹åŒ…å«è¿‘åƒç¨®é–‹æºå­—é«”çš„å­—å‹åº«ï¼Œä½¿ç”¨è€…é™¤äº†å¯ä»¥å…è²»ä¸‹è¼‰å¤–ï¼Œé‚„èƒ½åœ¨ç¶²ç«™ä¸Šè‡ªå‹•ç”¢ç”Ÿç¨‹å¼ç¢¼ï¼Œå°‡å­—é«”å…§åµŒåˆ°è‡ªå·±çš„ç¶²ç«™ä¸Šä½¿ç”¨ã€‚\nç›®å‰ç¶²ç«™ä¸Šåƒ…æä¾›å…©ç¨®ç¹é«”ä¸­æ–‡ï¼Œæ€æºé»‘é«”ä»¥åŠæ€æºå®‹é«”ï¼š\nä»¥ä¸‹ç‚ºæ­¥é©Ÿï¼š\né¸å®šå­—å‹\ré€²å…¥å®˜ç¶²é¸æ“‡å–œæ­¡çš„å­—å‹ï¼Œä¾ç…§ç¶²ç«™æ¨£å¼éœ€æ±‚å¯ä»¥é¸æ“‡å¤šå€‹ï¼Œå¦‚æ–‡ç« å…§æ–‡ä¸­æ–‡æ¬²ä½¿ç”¨æ€æºå®‹é«”ã€è‹±æ–‡æ¬²ä½¿ç”¨Lato\u0026hellip;\nè«‹åœ¨å­—é«”å³ä¸Šè§’é»é¸ + åŠ å…¥é¸æ“‡æ¸…å–®(åº•éƒ¨æç¤ºæ¡†) åœ¨å·²é¸æ“‡æ¸…å–®ä¸­ï¼Œåˆ‡æ›åˆ†é è‡³ CUSTOMIZE ï¼Œå‹¾é¸font-weight(regular400, bold700\u0026hellip;)ä»¥åŠä¸‹æ–¹çš„èªè¨€(Latin \u0026amp; Chinese Traditional)\nåˆ‡å› EMBED åˆ†é ï¼Œä¸¦è¤‡è£½ç¶²ç«™è‡ªå‹•ç·¨å¥½çš„HTML code\nç·¨è¼¯æœ¬åœ°ç«¯æ–‡ä»¶\r_config.yml\rç¶ åº•åŠç´…åº•åˆ†åˆ¥ä»£è¡¨codeçš„å¢æ¸›ã€‚éœ€ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ global çš„ family åƒæ•¸å»ºè­°è¼¸å…¥è‹±æ–‡å­—é«”ï¼Œå› ç‚ºä¸­æ–‡å­—å‹åº«é€šå¸¸æœƒåŒ…å«è‹±æ–‡å­—ï¼Œæ•…å¦‚è‹¥è¨­ç‚ºä¸­æ–‡å­—é«”ï¼Œå‰‡ç¶²ç«™å…¨åŸŸçš„é è¨­æ–‡å­—åŒ…å«è‹±æ–‡çš†æœƒä½¿ç”¨æŒ‡å®šçš„ä¸­æ–‡å­—é«”ã€‚\nå¦å¤–ä¸‹æ–¹é‚„æœ‰ title ç¶²ç«™æ¨™é¡Œã€ headings æ¨™é ­ã€ posts æ–‡ç« ã€ codes ç¨‹å¼ç¢¼ï¼Œå¯ä»¥ç‰¹åˆ¥æŒ‡å®šå­—é«”ã€‚\n1# æ–‡ä»¶ä½ç½®ï¼š~/blog/themes/next/_config.yml 2 3font: 4- enable: false 5+ enable: true 6 7 # Uri of fonts host, e.g. //fonts.googleapis.com (Default). 8 host: 9 10 # Font options: 11 # `external: true` will load this font family from `host` above. 12 # `family: Times New Roman`. Without any quotes. 13 # `size: x.x`. Use `em` as unit. Default: 1 (16px) 14 15 # Global font settings used for all elements inside \u0026lt;body\u0026gt;. 16 global: 17 external: true 18 family: Lato 19 size: 20 21 # Font settings for site title (.site-title). 22 title: 23 external: true 24 family: Amatic SC 25 size: 26 27 # Font settings for headlines (\u0026lt;h1\u0026gt; to \u0026lt;h6\u0026gt;). 28 headings: 29 external: true 30 family: Lato 31 size: 32 33 # Font settings for posts (.post-body). 34 posts: 35 external: true 36 family: 37 38 # Font settings for \u0026lt;code\u0026gt; and code blocks. 39 codes: 40 external: true 41 family: è€Œä¸­æ–‡å­—é«”å‰‡åˆ°ä¸‹æ–¹æ–‡ä»¶è¨­ç½®ï¼š\nbase.styl\r1# æ–‡ä»¶ä½ç½®: ~/blog/themes/next/source/css/_variables/base.styl 2 3// Font families. 4 5- $font-family-chinese = \u0026#34;PingFang SC\u0026#34;, \u0026#34;Microsoft YaHei\u0026#34;; 6+ $font-family-chinese = \u0026#34;Noto Serif TC\u0026#34;; head.swig\ræ¥è‘—å°‡æ­¥é©Ÿä¸€Google Fontæ‰€è¤‡è£½çš„ EMBED ä»£ç¢¼è²¼ä¸Šåˆ° head.swig\n1# æ–‡ä»¶ä½ç½®: ~/blog/themes/next/layout/_partials/head/head.swig 2... 3\u0026lt;link href=\u0026#34;https://fonts.googleapis.com/css?family=Noto+Serif+TC:400,500,700\u0026amp;display=swap\u0026amp;subset=chinese-traditional\u0026#34; rel=\u0026#34;stylesheet\u0026#34;\u0026gt; æœ€å¾Œé‡æ–°ä½ˆç½²ä¾¿å®Œæˆäº†! ğŸ˜†\n","date":"2019-12-23T15:56:00+00:00","updated":"2019-12-23T15:56:00+00:00"},{"objectID":"1551312000","permalink":"/about.html","title":"About","content":"æ˜¯å€‹å‹•éœè‡ªå¦‚çš„å®…å¥³ï¼Œé¤Šäº†éš»è²“ï¼Œä½†ä¹Ÿæ˜¯å€‹è¶…ç´šç‹—æ´¾ :3\nèˆˆè¶£æ˜¯è¿½åŠ‡ã€å‹•æ¼«è·Ÿ NBAã€‚é †ä¾¿èªªä¸€ä¸‹ï¼Œå–œæ­¡çš„çƒæ˜Ÿæ˜¯ Kawhi Leonard ğŸ–ğŸ¾\né›–ç„¶å®…ä½†å¾ˆå–œæ­¡æ—…è¡Œï¼Œå»éç¾æ±ã€åŠ æ‹¿å¤§ã€ä¸­åœ‹ã€æ—¥æœ¬å’Œé¦¬ä¾†è¥¿äºã€‚\næœ€ç˜‹ç‹‚çš„äº‹å°±æ˜¯å–®æ”»ç‰å±±è·Ÿå–®è»Šç’°å³¶~\né€™å€‹éƒ¨è½æ ¼æ˜¯æˆ‘ç”¨ä¾†è¨˜éŒ„æŠ€è¡“ç­†è¨˜ï¼Œä»¥åŠä¸€äº›é‡è¦ç”Ÿæ´»ç´€éŒ„çš„åœ°æ–¹ï¼\n","date":"2019-02-28T00:00:00+00:00","updated":"2019-02-28T00:00:00+00:00"}]