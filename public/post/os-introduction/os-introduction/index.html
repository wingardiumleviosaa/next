<!doctype html><html lang=en data-theme=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.112.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32x32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon.png><meta itemprop=name content="[OS] 作業系統概論"><meta itemprop=description content="♾️ Everyone Is An Alien Somewhere"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://ulagraphy.netlify.com/imgs/riley.png"><meta itemprop=keywords content="OS"><meta property="og:type" content="article"><meta property="og:title" content="[OS] 作業系統概論"><meta property="og:description" content="♾️ Everyone Is An Alien Somewhere"><meta property="og:image" content="/imgs/riley.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://ulagraphy.netlify.com/post/os-introduction/os-introduction/"><meta property="og:site_name" content="UlaGraphy"><meta property="og:locale" content="en"><meta property="article:author" content="Ula Hsieh"><meta property="article:published_time" content="2020-02-02 18:05:00 +0000 UTC"><meta property="article:modified_time" content="2020-02-02 18:05:00 +0000 UTC"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.59da712cfdcceff10e0d33fef76aa6667f7daed10d7691d3d187f5b7782b3f5e.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"os-introduction","permalink":"https://ulagraphy.netlify.com/post/os-introduction/os-introduction/","title":"[OS] 作業系統概論","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>[OS] 作業系統概論 - UlaGraphy</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>UlaGraphy</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>OOM.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>Home</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>About</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>Archives
<span class=badge>191</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>Search</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class=search-result-container><div class=algolia-hits></div></div><div class=search-footer><div class=algolia-pagination></div><div class=search-meta-info><div class="search-hit-stats algolia-stats"></div><div class=search-vendor><span>Search By</span>
<a title=Algolia target=_blank href="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&utm_content=ulagraphy.netlify.com&utm_campaign=poweredby"><img src=/imgs/algolia-logo.svg></a></div></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>TOC</li><li class=sidebar-nav-overview>Overview</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#程式程序執行緒>程式、程序、執行緒</a><ul><li><a href=#程式program>程式(Program)</a></li><li><a href=#程序process>程序(Process)</a></li><li><a href=#執行緒thread>執行緒(Thread)</a></li></ul></li><li><a href=#併發concurrency-vs-並行parallelism>併發(concurrency) v.s. 並行(parallelism)</a><ul><li><a href=#併發>併發</a></li><li><a href=#並行>並行</a></li></ul></li><li><a href=#multiprogramingmultiprocessingmultitaskingmultithreading>Multiprograming、Multiprocessing、Multitasking、Multithreading</a><ul><li><a href=#multiprogramming>Multiprogramming</a></li><li><a href=#multiprocessing>Multiprocessing</a></li><li><a href=#multitasking>Multitasking</a></li><li><a href=#multithreading>Multithreading</a></li></ul></li><li><a href=#kernel-space--user-space>Kernel Space & User Space</a><ul><li><a href=#kernel-space-內核空間>Kernel Space 內核空間</a></li><li><a href=#user-spaceg-使用者空間>User Spaceg 使用者空間</a></li><li><a href=#protection-ring>Protection Ring</a></li><li><a href=#kernel-mode--user-mode>Kernel Mode & User Mode</a></li></ul></li><li><a href=#模式切換mode-switch>模式切換(Mode Switch)</a><ul><li><a href=#小結>小結</a></li></ul></li><li><a href=#single-thread--multi-thread>Single-thread & Multi-thread</a><ul><li><a href=#single-thread-單執行緒>Single Thread 單執行緒</a></li><li><a href=#multi-thread-多執行緒>Multi Thread 多執行緒</a></li></ul></li><li><a href=#ult--klt--lwp>ULT & KLT & LWP</a><ul><li><a href=#user-thread-使用者執行緒>User Thread 使用者執行緒</a></li><li><a href=#kernel-thread-核心執行緒>Kernel Thread 核心執行緒</a></li><li><a href=#low-weight-process-輕量級程序>Low-weight Process 輕量級程序</a></li></ul></li><li><a href=#multithread-model>Multithread Model</a><ul><li><a href=#1--1>1 : 1</a></li><li><a href=#n--1>N : 1</a></li><li><a href=#m--n>M : N</a></li><li><a href=#combined>Combined</a></li></ul></li><li><a href=#cpu-bound-vs-io-bound>CPU bound v.s. I/O bound</a><ul><li><a href=#cpu-密集型-cpu-bound>CPU 密集型 (CPU bound)</a></li><li><a href=#io-密集型-io-bound>I/O 密集型 (I/O bound)</a></li><li><a href=#執行緒池-thread-pool>執行緒池 Thread Pool</a></li><li><a href=#執行緒池與-cpu-bound-or-io-bound-的配置>執行緒池與 CPU bound or I/O bound 的配置</a></li></ul></li><li><a href=#context-switch>Context Switch</a><ul><li><a href=#程序上下文切換process-context-switch>程序上下文切換（Process Context Switch）</a></li><li><a href=#執行緒上下文切換thread-context-switch>執行緒上下文切換（Thread Context Switch）</a></li><li><a href=#中斷上下文切換-interrupt-handling>中斷上下文切換 (Interrupt handling)　</a></li><li><a href=#小結-1>小結</a></li><li><a href=#補充上下文切換執行於kernel-space的原因>補充：上下文切換執行於Kernel space的原因</a></li></ul></li><li><a href=#參考資料>參考資料</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt="Ula Hsieh" src=/imgs/img-lazy-loading.gif data-src=/imgs/riley.png><p class=site-author-name itemprop=name>Ula Hsieh</p><div class=site-description itemprop=description>♾️ Everyone Is An Alien Somewhere</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>191</span>
<span class=site-state-item-name>Posts</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>28</span>
<span class=site-state-item-name>Categories</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>52</span>
<span class=site-state-item-name>Tags</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/wingardiumleviosaa title="Github → https://github.com/wingardiumleviosaa" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i></a></span>
<span class=links-of-social-item><a href=https://www.linkedin.com/in/ulah/ title="LinkedIn → https://www.linkedin.com/in/ulah/" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-linkedin fa-fw hvr-icon"></i></a></span>
<span class=links-of-social-item><a href=/ulahsieh-cv.pdf title="Reseme → /ulahsieh-cv.pdf" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-id-card fa-fw hvr-icon"></i></a></span>
<span class=links-of-social-item><a href=mailto:yiju.117@gmail.com title="Mail → mailto:yiju.117@gmail.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i></a></span></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title="Change Theme"><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title="Back to Top"><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://ulagraphy.netlify.com/post/os-introduction/os-introduction/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/riley.png"><meta itemprop=name content="Ula Hsieh"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Ula Hsieh"><meta itemprop=description content="♾️ Everyone Is An Alien Somewhere"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="[OS] 作業系統概論"><meta itemprop=description content="程式、程序、執行緒

程式(Program)

尚未載進記憶體的靜態程式碼集合。"></span><header class=post-header><h1 class=post-title itemprop="name headline">[OS] 作業系統概論</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title="Publish on">Publish on:</span>
<time title="Create Time:2020-02-02 18:05:00 +0000 UTC" itemprop="dateCreated datePublished" datetime="2020-02-02 18:05:00 +0000 UTC">2020-02-02</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title="Classify at">Classify at:</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/os itemprop=url rel=index><span itemprop=name>OS</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=Words><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>Words:</span>
<span>4672</span></span>
<span class=post-meta-item title=Read><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>Read:&ap;</span>
<span>10mins</span></span></div></div></header><div class=post-body itemprop=articleBody><h2 id=程式程序執行緒>程式、程序、執行緒
<a class=header-anchor href=#%e7%a8%8b%e5%bc%8f%e7%a8%8b%e5%ba%8f%e5%9f%b7%e8%a1%8c%e7%b7%92></a></h2><h3 id=程式program>程式(Program)
<a class=header-anchor href=#%e7%a8%8b%e5%bc%8fprogram></a></h3><p>尚未載進記憶體的<strong>靜態程式碼集合</strong>。</p><h3 id=程序process>程序(Process)
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8fprocess></a></h3><p>正在執行並載進記憶體中的<strong>動態程式</strong>，是作業系統分配資源的最小單位（OS 以程序為單位，分配系統資源，OS 下的工作管理員所標示的一個個 task 即為一個程序，擁有獨立的 PID 以及記憶體空間）。</p><h3 id=執行緒thread>執行緒(Thread)
<a class=header-anchor href=#%e5%9f%b7%e8%a1%8c%e7%b7%92thread></a></h3><p>又稱 Light-weight Process (LWP)，是 OS 中進行運算排程的最小單位，被包在一個 Process 中，而同一 Process 下的各個執行緒之間共享該 Process 資源。</p><table><tr><td bgcolor=#fafafa>三者的關係是：一個程式可以會有多個程序，一個程序可能會有多個執行緒。</td></tr></table><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/nnn6bxW.png alt></p><h2 id=併發concurrency-vs-並行parallelism>併發(concurrency) v.s. 並行(parallelism)
<a class=header-anchor href=#%e4%bd%b5%e7%99%bcconcurrency-vs-%e4%b8%a6%e8%a1%8cparallelism></a></h2><h3 id=併發>併發
<a class=header-anchor href=#%e4%bd%b5%e7%99%bc></a></h3><p>同時執行多個獨立的程式邏輯，但並不代表同時進行處理。
若程式執行在單核單執行緒的 CPU 上，所有任務都須排隊等待 CPU 資源。</p><h3 id=並行>並行
<a class=header-anchor href=#%e4%b8%a6%e8%a1%8c></a></h3><p>讓程式<strong>真正的同時</strong>處理多個任務，並行並不是程式能夠帶來的特性，而是需要靠硬體，需仰賴多核 CPU 或是使用多台伺服器組成叢集。</p><table><tr><td bgcolor=#fafafa>兩者的關係是：並行的狀況一定會併發，但發生併發時卻不一定是並行。</td></tr></table><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/KxNlQOJ.png alt></p><h2 id=multiprogramingmultiprocessingmultitaskingmultithreading>Multiprograming、Multiprocessing、Multitasking、Multithreading
<a class=header-anchor href=#multiprogramingmultiprocessingmultitaskingmultithreading></a></h2><h3 id=multiprogramming>Multiprogramming
<a class=header-anchor href=#multiprogramming></a></h3><p>電腦同時<font color=#FF5959>(concurrency)</font>執行多個程式。（如同時使用 excel 以及 firefox）</p><h3 id=multiprocessing>Multiprocessing
<a class=header-anchor href=#multiprocessing></a></h3><p>電腦同時使用多個處理器，多個程序可在同一時間<font color=#FF5959>(parallelism)</font>執行。</p><h3 id=multitasking>Multitasking
<a class=header-anchor href=#multitasking></a></h3><p>多個任務共享一個資源(如一顆 CPU 或記憶體)。</p><h3 id=multithreading>Multithreading
<a class=header-anchor href=#multithreading></a></h3><p>指一個程序中有多個執行緒在執行，彼此共用相同的程序資源。</p><p>雖然字面上看起來意思接近，但每個名詞都有些微的差距，其中特別記錄在其他網站中看到針對 multitasking and multiprogramming 的闡述＿</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>Multitasking is a logical extension of multi programming. The major way in which multitasking differs from multi programming is that multi programming works solely on the concept of context switching whereas multitasking is based on time sharing alongside the concept of context switching. [1]
</span></span></code></pre></div><p>Multitasking 是 Multiprogramming 的邏輯擴展，主要的不同在於 Multiprogramming 是多個程式基於上下文切換的概念上獨立運作，而 Multitasking 的觀念則是較著重於 time-sharing（可能是同一個程式中的不同程序）。</p><h2 id=kernel-space--user-space>Kernel Space & User Space
<a class=header-anchor href=#kernel-space--user-space></a></h2><h3 id=kernel-space-內核空間>Kernel Space 內核空間
<a class=header-anchor href=#kernel-space-%e5%85%a7%e6%a0%b8%e7%a9%ba%e9%96%93></a></h3><p>有關作業系統的所有數據、程序皆在此運行。</p><h3 id=user-spaceg-使用者空間>User Spaceg 使用者空間
<a class=header-anchor href=#user-spaceg-%e4%bd%bf%e7%94%a8%e8%80%85%e7%a9%ba%e9%96%93></a></h3><p>指 user 程序的運行空間，權限有限，若要調用系統資源，需透過 system call。</p><p>p.s. 兩個空間的劃分依據不同位元以及不同版本的作業系統而不同。</p><h3 id=protection-ring>Protection Ring
<a class=header-anchor href=#protection-ring></a></h3><p>為了隔絕不同的程序，CPU 提供了一個 Pretection Ring 的機制，依據不同架構的 CPU，所劃分的層級也不同，但決定於作業系統的需求，例如 Linux 或 Windows Server 2008 僅使用了 Ring 0 和 Ring 3 兩個級別。[2]<br>下圖為 x86 處理器可用的特權級別</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/FscjQVY.png alt></p><h3 id=kernel-mode--user-mode>Kernel Mode & User Mode
<a class=header-anchor href=#kernel-mode--user-mode></a></h3><p>當程序運行在 kernel space 時 CPU 就處於 kernel mode，切換到RING 0 最高權限模式，能直接與硬體互動，而運行在 user space 時 CPU 則處於 user mode，CPU 只採用 RING 3 最低權限模式。</p><h2 id=模式切換mode-switch>模式切換(Mode Switch)
<a class=header-anchor href=#%e6%a8%a1%e5%bc%8f%e5%88%87%e6%8f%9bmode-switch></a></h2><p>指從 user mode 切換到 kernel mode 的狀況，有以下三種：</p><ol><li>系統呼叫 (system call)：使用者程式要求 OS 服務。</li><li>異常 (exception)：程式執行非法動作 (stack overflow, divided by zero)。</li><li>中斷 (interruption)：當外圍設備完成 user 請求的操作後，會向 CPU 發出中斷訊號，這時 CPU 會暫停當前的程序，轉而去執行中斷訊號對應的處理程序。比如硬碟讀寫操作完成時，系統會切換到硬盤讀寫的中斷處理程序中執行後續操作。</li></ol><h3 id=小結>小結
<a class=header-anchor href=#%e5%b0%8f%e7%b5%90></a></h3><p>區分兩個空間 (space) 以及不同權限 (mode) 的用途與好處:</p><ol><li>確保系統數據不被隨意操作，防止破壞</li><li>確保資源不被單一使用程序霸佔</li><li>確保兩個使用程序不會相互干擾</li><li>確保硬體操作正確</li></ol><p>上面基礎概念講完後，回到執行緒，討論更深的概念：</p><h2 id=single-thread--multi-thread>Single-thread & Multi-thread
<a class=header-anchor href=#single-thread--multi-thread></a></h2><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/6xyHblp.jpg alt></p><p>每個 Thread 擁有獨立的 stack，多個 Thread 之間因為共用 Process 的記憶體，故可以共用變數。</p><h3 id=single-thread-單執行緒>Single Thread 單執行緒
<a class=header-anchor href=#single-thread-%e5%96%ae%e5%9f%b7%e8%a1%8c%e7%b7%92></a></h3><p>每個正在執行的程式(即程序)，至少包括<span class=dotunderletter><strong>一個</strong></span>執行緒，稱作主執行緒，它在程式啟動時被建立，用於執行 main 函式。<br>而程式若只有一個主執行緒，稱作<font color=DarkBlue>單執行緒程式。</font><br>主執行緒負責執行程式的所有程式碼，這些程式碼只能順序執行，無法併發執行。</p><h3 id=multi-thread-多執行緒>Multi Thread 多執行緒
<a class=header-anchor href=#multi-thread-%e5%a4%9a%e5%9f%b7%e8%a1%8c%e7%b7%92></a></h3><p>擁有<span class=dotunderletter><strong>多個</strong></span>執行緒的程式，彼此可獨立併發執行。<br>能有效地避免程式碼阻塞，提高程式的執行效能。</p><h2 id=ult--klt--lwp>ULT & KLT & LWP
<a class=header-anchor href=#ult--klt--lwp></a></h2><h3 id=user-thread-使用者執行緒>User Thread 使用者執行緒
<a class=header-anchor href=#user-thread-%e4%bd%bf%e7%94%a8%e8%80%85%e5%9f%b7%e8%a1%8c%e7%b7%92></a></h3><p>又稱 User Level Thread (ULT)，在 user mode 下進行，OS 不知 ULT 存在，不需要 OS 介入管理，主要由 user-level thread library (如 Java threads, Win32 threads, POSIX Threads aka Pthreads) 管理。</p><ul><li>優點：產生、管理成本較低</li><li>缺點：當 kernel 為 single thread，程序的 user thread 發出 system call 時，則整個程序會被鎖住。</li></ul><h3 id=kernel-thread-核心執行緒>Kernel Thread 核心執行緒
<a class=header-anchor href=#kernel-thread-%e6%a0%b8%e5%bf%83%e5%9f%b7%e8%a1%8c%e7%b7%92></a></h3><p>又稱 Kernel Level Thread (KLT)，在 kernel mode 下進行，OS 知道 KLT 存在，且由 OS 介入管理。一般作業系統皆屬之，如 Linux, Unix, Windows, Mac OS X&mldr;</p><ul><li>優點：當程序內某條執行中的 kernel-thread 被鎖住時（如等待其他資源），不會導致整個程序亦被鎖住，可同時進行其他同在此程序中的其他 Thread。</li><li>缺點：速度較慢，一個程序中的兩個 threads 切換需要經過 mode switch。</li></ul><h3 id=low-weight-process-輕量級程序>Low-weight Process 輕量級程序
<a class=header-anchor href=#low-weight-process-%e8%bc%95%e9%87%8f%e7%b4%9a%e7%a8%8b%e5%ba%8f></a></h3><style type=text/css>.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media(prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"/></svg></span>Info</p><p>這裡簡直是惡夢，在網路上的定義百百種，而且都很模糊，只好在篩選資訊後，把覺得合理的解釋都一併放了上來，將就看一下。</p></div><p>輕量級執行緒 (LWP) 是一種由核心支援的使用者執行緒。
每一個程序可能有一個或多個 LWPs，每個 LWP 支援一個或多個 ULTs，而每個 LWP 由一個 KLT 支援。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>A user-level library multiplex(多路通訊) user threads on top of LWPs and provides facilities for inter-thread scheduling, context switching, and synchronization without involving the kernel.[3]
</span></span></code></pre></div></br><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>注：
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>1. LWP的術語是借自於SVR4/MP和Solaris 2.x。
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>2. 有些系統將LWP比喻為虛擬處理器，或是介於user thread 和 kernel thread之間的資料結構，可對 user thread 進行排程以執行在 user-thread library。
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>3. 將之稱為輕量級程序的原因可能是：在核心執行緒的支援下，LWP是獨立的排程單元，就像普通的程序一樣。所以LWP的最大特點還是每個LWP都有一個核心執行緒支援。[4]
</span></span></code></pre></div><h2 id=multithread-model>Multithread Model
<a class=header-anchor href=#multithread-model></a></h2><p>只執行緒間的溝通模式，主要有三種</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/2jUidLK.png alt></p><h3 id=1--1>1 : 1
<a class=header-anchor href=#1--1></a></h3><p>一個 ULT 對應到一個 LWP 再對應到一個 KLT，如同上圖的 process 4，即屬於此模型。</p><ul><li>優點：實現 parallelism，當一執行緒阻塞，不會影響其他執行緒</li><li>缺點：每件一個 user thread，就需產生一個 kernel thread，執行緒建立的開銷較大</li></ul><h3 id=n--1>N : 1
<a class=header-anchor href=#n--1></a></h3><p>此模型又稱 pure user thread，多個 User thread 對應到一個 Kernel thread 溝通，如同上圖的 process 2，執行緒管理在使用者空間完成，此模式中使用者執行緒對 OS 不可見</p><ul><li>優點：User thread 要開幾個都沒問題，且上下文切換發生在使用者空間，避免 mode switch，效能較佳</li><li>缺點：對多核心處理器 (Multi-processor) 來說很浪費。一個使用者執行緒如果阻塞在系統呼叫中，則整個程序都將會阻塞。</li></ul><h3 id=m--n>M : N
<a class=header-anchor href=#m--n></a></h3><p>kernel thread & user thread 的數量比為 M : N，模型提供了兩級控制，首先 user thread 對映這個可排程的輕量級程序 (LWP)，LWP再一一對映到 kernel thread。如上圖中的process 3</p><ul><li>優點：綜合了前兩種優點，大部分的執行緒上下文切換發生在使用者空間，且多個核心執行緒又可以充分利用 CPU 資源</li></ul><h3 id=combined>Combined
<a class=header-anchor href=#combined></a></h3><p>如上圖中的 process 5，此程序結合 1:1 模型及 M:N 模型。開發人員可以針對不同的應用特點調節 kernel thread 的數目來達到物理並行性和邏輯並行性的最佳方案。</p><h2 id=cpu-bound-vs-io-bound>CPU bound v.s. I/O bound
<a class=header-anchor href=#cpu-bound-vs-io-bound></a></h2><h3 id=cpu-密集型-cpu-bound>CPU 密集型 (CPU bound)
<a class=header-anchor href=#cpu-%e5%af%86%e9%9b%86%e5%9e%8b-cpu-bound></a></h3><p>aka 計算密集型，大部份時間用 CPU 來做計算、邏輯判斷等動作的<u>程序</u>稱之CPU bound。</p><p>CPU bound的程序一般而言<strong>CPU佔用率相當高</strong>，這可能是因為任務本身不太需要訪問I/O設備，也可能是因為程序是多執行緒實現因此屏蔽掉了等待I/O的時間。</p><p>而由於主要會消耗CPU資源，因此，代碼運行效率至關重要。Python這樣的腳本語言運行效率很低，就不適合計算密集型任務。</p><h3 id=io-密集型-io-bound>I/O 密集型 (I/O bound)
<a class=header-anchor href=#io-%e5%af%86%e9%9b%86%e5%9e%8b-io-bound></a></h3><p>I/O 密集型涉及到<strong>網絡、檔案讀寫</strong>的任務都是 I/O 密集型任務，這類任務的特點是 <strong>CPU 消耗很少</strong>，任務的大部分時間都在等待 I/O 操作完成。常見的 I/O 密集型任務，如Web應用、資料庫讀寫。</p><p>對於 I/O 密集型任務，最合適的語言就是開發效率最高的語言，腳本語言是首選。</p><h3 id=執行緒池-thread-pool>執行緒池 Thread Pool
<a class=header-anchor href=#%e5%9f%b7%e8%a1%8c%e7%b7%92%e6%b1%a0-thread-pool></a></h3><p>一種執行緒使用模式。執行緒過多會帶來調度開銷，進而影響快取局部性和整體性能。而執行緒池維護著多個執行緒，等待著監督管理者分配可並發執行的任務，降低在處理短時間任務時創建與銷毀執行緒的代價；能保證核心的充分利用以及防止過分調度。[5]</p><h3 id=執行緒池與-cpu-bound-or-io-bound-的配置>執行緒池與 CPU bound or I/O bound 的配置
<a class=header-anchor href=#%e5%9f%b7%e8%a1%8c%e7%b7%92%e6%b1%a0%e8%88%87-cpu-bound-or-io-bound-%e7%9a%84%e9%85%8d%e7%bd%ae></a></h3><p>CPU 密集型任務：應配置儘可能<strong>小的</strong>執行緒池，因為多個執行緒間頻繁進行上下文切換對於程式效能損耗較大，所以執行緒數應配置 <code>CPU 核心數 + 1</code>。</p><p>I/O 密集型任務：應配置儘可能<strong>大的</strong>執行緒池，當一個任務執行IO操作時，執行緒將被阻塞，於是處理器可以立即進行(因 CPU 消耗少) 上下文切換以便處理其他就緒執行緒。如果我們只有處理器核心數那麼多個執行緒的話，即使有待執行的任務也無法排程處理，所以執行緒數應配置 <code>2 * CPU</code>。</p><h2 id=context-switch>Context Switch
<a class=header-anchor href=#context-switch></a></h2><p>上下文轉換指CPU在不同任務間切換時，必須將舊任務的狀態儲存起來，再載入新任務的儲存狀態的動作，上下文可以視為環境，以程序來說，就是<strong>程序執行的環境</strong>。</p><p>根據CPU執行的任務的不同，上下文切換分為三種：</p><h3 id=程序上下文切換process-context-switch>程序上下文切換（Process Context Switch）
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e4%b8%8a%e4%b8%8b%e6%96%87%e5%88%87%e6%8f%9bprocess-context-switch></a></h3><p>顧名思義即為不同程序的切換所產生的cost，上下文為使用者程序傳遞給kernel的一些變數和暫存器值和當時的環境等，主要儲存在PCB(Process Control Block)當中。
PCB為在Kernel中針對每一個程序所建立的一個資料結構，記載該 程序的相關資訊。</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/jPEtZMl.png alt></p><p>欲了解PCB組成，請參考
<a href=https://en.wikipedia.org/wiki/Process_control_block title=wiki rel="noopener external nofollow noreferrer" target=_blank class=exturl>wiki
<i class="fa fa-external-link-alt"></i></a></p><h3 id=執行緒上下文切換thread-context-switch>執行緒上下文切換（Thread Context Switch）
<a class=header-anchor href=#%e5%9f%b7%e8%a1%8c%e7%b7%92%e4%b8%8a%e4%b8%8b%e6%96%87%e5%88%87%e6%8f%9bthread-context-switch></a></h3><p>有兩種狀況:</p><ol><li>前後兩個執行緒所屬不同程序，此切換可與程序上下文切換視為同一種。</li><li>前後兩個執行緒屬於同一個程序，因同程序內的不同執行緒會共享資源，所以在切換時，虛擬記憶體的資源不變，只需要切換執行緒的私有數據、暫存器等不共享的數據。此切換所消耗的cost較小。</li></ol><h3 id=中斷上下文切換-interrupt-handling>中斷上下文切換 (Interrupt handling)　
<a class=header-anchor href=#%e4%b8%ad%e6%96%b7%e4%b8%8a%e4%b8%8b%e6%96%87%e5%88%87%e6%8f%9b-interrupt-handling></a></h3><p>中斷上下文切換是為了響應硬件的各種事件設計出來的，中斷程序會打斷其他程序的執行。例如，當前CPU正在執行某程序，這個時候我們滑動鼠標，按了下鍵盤，CPU就必須中斷正在執行的程序，轉而去響應這些硬件的事件。</p><p>可以看作就是硬體傳遞過來的這些引數和核心需要儲存的一些其他環境（主要是當前被打斷執行的程序環境）。</p><p>更仔細的釐清中斷上下文時發現：中斷上下文的過程也可能包含上方所提到的user mode切換到kernel mode的mode switch</p><p>例如：「Timer」為一種硬體，在協助「Round robin」排程、防止單一 Process 霸佔而保護 CPU 時，會觸發</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/bZChgTB.png alt></p><p>①②③④步驟都涉及到保存register或恢復register的操作。</p><p>②跟③是屬於程序上下文切換——從進程A的上下文切換至進程B的上下文。</p><p>而①和④步驟由CPU硬體完成，由中斷觸發，跟程序切換沒有直接關係。不過其實也可以把這個步驟歸稱之為上下文切換，只不過這是CPU kernel mode與user mode之間的上下文切換（mode switch）。[6]</p><h3 id=小結-1>小結
<a class=header-anchor href=#%e5%b0%8f%e7%b5%90-1></a></h3><ul><li>CPU的狀態可以歸納為以下三個<ul><li>Kernel Mode，跑程序上下文，程序運行於Kernel space</li><li>Kernel Mode，跑中斷上下文，硬體運行於Kernel space</li><li>User Mode，跑user程序，程序運行於User space</li></ul></li><li>如果僅僅是中斷（例如系統調用），而未發生進程切換，並不需要保存進程的上下文信息(process context switch)。</li></ul><h3 id=補充上下文切換執行於kernel-space的原因>補充：上下文切換執行於Kernel space的原因
<a class=header-anchor href=#%e8%a3%9c%e5%85%85%e4%b8%8a%e4%b8%8b%e6%96%87%e5%88%87%e6%8f%9b%e5%9f%b7%e8%a1%8c%e6%96%bckernel-space%e7%9a%84%e5%8e%9f%e5%9b%a0></a></h3><p>大部分的OS使用虛擬記憶體（virtual memory），用以增加實體記憶體的使用效率。每個程序都有自己的虛擬地址空間（virtual address space），透過CPU中的內存管理單元（memory management unit，MMU）標識當前正在運行程序的地址轉換映射表（address translation map），將虛擬位址轉為物理位址。</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://imgur.com/v5Eup0o.png alt></p><p>很多系統以頁表（page table）的方式來實現這些映射。在當前程序將CPU讓給另外一個程序時（即發生了上下文切換（context switch）），kernel會將這些暫存器(regs)和指針(k-stack)加載到新進程的轉換映射表中。而MMU寄存器是受特權保護的(ring 0)，只能在kernel mode下訪問。這就確保一個程序只能引用它自己空間中的地址，而不能訪問或者修改其他進程的地址空間。</p><h2 id=參考資料>參考資料
<a class=header-anchor href=#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99></a></h2><p>[1]
<a href=https://www.geeksforgeeks.org/difference-between-multitasking-multithreading-and-multiprocessing/ title=https://www.geeksforgeeks.org/difference-between-multitasking-multithreading-and-multiprocessing/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.geeksforgeeks.org/difference-between-multitasking-multithreading-and-multiprocessing/
<i class="fa fa-external-link-alt"></i></a><br>[2]
<a href=https://zh.wikipedia.org/wiki/%E5%88%86%E7%BA%A7%E4%BF%9D%E6%8A%A4%E5%9F%9F title=https://zh.wikipedia.org/wiki/%E5%88%86%E7%BA%A7%E4%BF%9D%E6%8A%A4%E5%9F%9F rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://zh.wikipedia.org/wiki/%E5%88%86%E7%BA%A7%E4%BF%9D%E6%8A%A4%E5%9F%9F
<i class="fa fa-external-link-alt"></i></a><br>[3]
<a href=https://stackoverflow.com/questions/10484355/what-the-difference-between-lightweight-process-and-thread title=https://stackoverflow.com/questions/10484355/what-the-difference-between-lightweight-process-and-thread rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://stackoverflow.com/questions/10484355/what-the-difference-between-lightweight-process-and-thread
<i class="fa fa-external-link-alt"></i></a><br>[4]
<a href=https://www.tutorialspoint.com/lightweight-process-lwp title=https://www.tutorialspoint.com/lightweight-process-lwp rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.tutorialspoint.com/lightweight-process-lwp
<i class="fa fa-external-link-alt"></i></a><br>[5]
<a href=https://www.easyatm.com.tw/wiki/%E5%9F%B7%E8%A1%8C%E7%B7%92%E6%B1%A0 title=https://www.easyatm.com.tw/wiki/%E5%9F%B7%E8%A1%8C%E7%B7%92%E6%B1%A0 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.easyatm.com.tw/wiki/%E5%9F%B7%E8%A1%8C%E7%B7%92%E6%B1%A0
<i class="fa fa-external-link-alt"></i></a><br>[6]
<a href=http://pages.cs.wisc.edu/~remzi/OSTEP/cpu-mechanisms.pdf title=http://pages.cs.wisc.edu/~remzi/OSTEP/cpu-mechanisms.pdf rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://pages.cs.wisc.edu/~remzi/OSTEP/cpu-mechanisms.pdf
<i class="fa fa-external-link-alt"></i></a></p></div><footer class=post-footer><div class=post-tags><a href=/tags/os>OS</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/programmimg-nginx-certbot/ssl-letsencrypt/ rel=next title="[SSL] 用 Let's Encrypt & Certbot 為網站加密"><i class="fa fa-chevron-left"></i> [SSL] 用 Let's Encrypt & Certbot 為網站加密</a></div><div class="post-nav-prev post-nav-item"><a href=/post/programming-golang-function/golang-function/ rel=prev title="[Golang] Function">[Golang] Function
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2023</span>
<span class=with-love><i class="fa fa-paw"></i></span>
<span class=author itemprop=copyrightHolder>Ula Hsieh</span></div><div class=powered-by>Power by <a href=https://gohugo.io title=0.112.3 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.2 target=_blank>Hugo NexT.Gemini</a></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"algolia":{"cfg":{"apikey":"bfe7770719b1074e97acc36accb13bf0","appid":"D00OUNE9TK","enable":true,"hits":{"perpage":10},"indexname":"next-ulagraphy","limit":1e3},"instantjs":{"file":"dist/instantsearch.production.min.js","name":"instantsearch.js","version":"4.49.0"},"js":{"file":"dist/algoliasearch-lite.umd.js","name":"algoliasearch","version":"4.14.2"}},"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://ulagraphy.netlify.com","i18n":{"ds_day":" Day Ago","ds_days":" Day ","ds_hour":" Hour Ago","ds_hours":" Hour ","ds_just":"Just","ds_min":" Min Ago","ds_mins":" Min","ds_month":" Month Ago","ds_years":" Year ","empty":"We didn't find any results for the search: ${query}","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms","placeholder":"Searching..."},"lang":"en","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":240},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.2","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.0324574053d02d3fbf9394acb1826aa1bab033e431839d37bcc63ee8cb9b302d.js defer></script></body></html>